{"version":3,"file":"sessions-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/cookies.ts","app/assets/modules/github/onfocus.ts","app/assets/modules/github/sessions/github-mobile-two-factor.ts","app/assets/modules/github/sessions/two-factor.ts","app/assets/modules/github/webauthn-support-level.ts","app/assets/modules/github/sessions/transform-notice.ts","app/assets/modules/github/sessions/webauthn-support.ts","app/assets/modules/github/sessions/emu-login.ts","ui/packages/form-utils/form-utils.ts","ui/packages/form-utils/remote-submit.ts","ui/packages/runtime-environment/runtime-environment.ts","ui/packages/ssr-utils/ssr-globals.ts","ui/packages/ssr-utils/ssr.ts","node_modules/@github/memoize/dist/esm/index.js"],"sourcesContent":["interface Cookie {\n  key: string\n  value: string\n}\n\n/**\n * Get a cookie by name.\n * @param name\n * @returns a cookie object or undefined if not found.\n */\nexport function getCookie(name: string): Cookie | undefined {\n  return getCookies(name)[0]\n}\n\n/**\n * Get all cookies by name.\n * @param name\n * @returns\n */\nexport function getCookies(name: string): Cookie[] {\n  const cookies = []\n  for (const cookie of readCookies()) {\n    const [key, value] = cookie.trim().split('=')\n    if (name === key && typeof value !== 'undefined') {\n      cookies.push({key, value})\n    }\n  }\n  return cookies\n}\n\nfunction readCookies(): string[] {\n  try {\n    return document.cookie.split(';')\n  } catch {\n    // Cookie access disabled.\n    return []\n  }\n}\n\n/**\n * Set a new cookie with sensible defaults like secure.\n * @param name\n * @param value\n * @param expiration\n * @param strictDomain\n * @param samesite\n */\nexport function setCookie(\n  name: string,\n  value: string,\n  expiration: string | null = null,\n  strictDomain = false,\n  samesite = 'lax',\n) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = expiration ? `; expires=${expiration}` : ''\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=${value}; path=/; domain=${domain}${expire}${secure}; samesite=${samesite}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n\n/**\n * Delete a given cookie with sensible defaults like secure.\n * This sets the expires value to a second ago to delete the cookie.\n * @param name\n * @param strictDomain\n */\nexport function deleteCookie(name: string, strictDomain = false) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const time = new Date().getTime()\n  const expiration = new Date(time - 1).toUTCString()\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = `; expires=${expiration}`\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=''; path=/; domain=${domain}${expire}${secure}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n","// React to elements receiving focus\n//\n// Often we need to apply some behavior to form elements when they start getting\n// interacted with. We could use `observe`, but that can be expensive if there\n// are many such elements on the page, and when we aren't actually interested in\n// those elements until they receive focus.\n//\n// This is a lightweight and preferred alternative to the family of methods\n// from `github/focused` module.\n//\n// Examples\n//\n//   onFocus('.js-widget', element => {\n//     // ...\n//   })\n\nimport SelectorSet from 'selector-set'\n\nlet initialized = false\nconst selectorSet: SelectorSet<(el: HTMLElement) => void> = new SelectorSet()\n\nfunction handleFocus(event: FocusEvent) {\n  const focused = event.target\n  if (focused instanceof HTMLElement && focused.nodeType !== Node.DOCUMENT_NODE) {\n    for (const match of selectorSet.matches(focused)) {\n      match.data.call(null, focused)\n    }\n  }\n}\n\nexport function onFocus(selector: string, fn: (el: HTMLElement) => unknown) {\n  if (!initialized) {\n    initialized = true\n    // We use the \"focus\" event in the capture phase because Firefox\n    // historically had a limitation with \"focusin\" not bubbling.\n    document.addEventListener('focus', handleFocus, true)\n  }\n  selectorSet.add(selector, fn)\n\n  if (document.activeElement instanceof HTMLElement && document.activeElement.matches(selector)) {\n    fn(document.activeElement)\n  }\n}\n\nexport function onKey(\n  eventType: 'keydown' | 'keypress' | 'keyup',\n  selector: string,\n  inputHandler: (event: KeyboardEvent) => unknown,\n) {\n  function blurHandler(event: Event) {\n    const currentTarget = event.currentTarget as HTMLElement\n    if (!currentTarget) return\n    currentTarget.removeEventListener(eventType, inputHandler)\n    currentTarget.removeEventListener('blur', blurHandler)\n  }\n\n  onFocus(selector, function (field) {\n    field.addEventListener(eventType, inputHandler)\n    field.addEventListener('blur', blurHandler)\n  })\n}\n\nexport function onInput(selector: string, inputHandler: EventListener) {\n  function blurHandler(event: Event) {\n    const {currentTarget} = event\n    if (!currentTarget) return\n\n    currentTarget.removeEventListener('input', inputHandler)\n    currentTarget.removeEventListener('blur', blurHandler)\n  }\n\n  onFocus(selector, function (field) {\n    field.addEventListener('input', inputHandler)\n    field.addEventListener('blur', blurHandler)\n  })\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst POLL_WAIT_TIME_MS = 3000\nconst flashClassName = `github-mobile-auth-flash`\n\nfunction addFlashMessage(message: string): void {\n  const template = new TemplateInstance(document.querySelector<HTMLTemplateElement>('template.js-flash-template')!, {\n    className: `flash-error ${flashClassName}`,\n    message,\n  })\n  const node = document.importNode(template, true)\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    removeFlash()\n    flashContainer.appendChild(node)\n  }\n}\n\nfunction removeFlash(): void {\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    // make sure we don't show more than one flash message for github mobile auth at the same time\n    for (const child of flashContainer.children) {\n      if (!child.classList.contains('js-flash-template') && child.classList.contains(flashClassName)) {\n        flashContainer.removeChild(child)\n      }\n    }\n  }\n}\n\nexport function hidePromptAndShowErrorMessage(): void {\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = true\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = false\n  }\n}\n\nexport function resetPrompt(): void {\n  removeFlash()\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = false\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = true\n  }\n}\n\n// the user has approved the mobile request - reload the page which will trigger the redirects\n//\n// token - An optional parameter - only used during the password reset flow\nfunction approvedHandler(token?: string): void {\n  let url\n  if (token) {\n    // during password reset, when the user approves the mobile request, we need to update the url\n    // to use the new SAT token instead of the old SAT token\n    url = new URL(`password_reset/${encodeURIComponent(token)}`, window.location.origin)\n  } else {\n    url = new URL('', window.location.href)\n  }\n\n  url.searchParams.set('redirect', 'true')\n  window.location.assign(url)\n}\n\n// two_factor_login info erased from session - send them back to login form\nfunction rejectedHandler(): void {\n  document.getElementById('github-mobile-rejected-redirect')!.click()\n}\n\nfunction genericHandler(message: string): void {\n  if (message) {\n    addFlashMessage(message)\n  }\n  hidePromptAndShowErrorMessage()\n}\n\nfunction getErrorAndRetryMessage(attributeName: string): string {\n  return document.getElementById('github-mobile-authenticate-error-and-retry')!.getAttribute(attributeName)!\n}\n\nfunction pollMobileAuthRequestStatus(\n  url: RequestInfo,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  return (async function poll(errorCount: number): Promise<void> {\n    if (checkCancelCallback && checkCancelCallback()) {\n      return\n    }\n\n    let status = 'STATUS_UNKNOWN'\n    let token\n    try {\n      const form = document.getElementById('github-mobile-authenticate-form') as HTMLFormElement\n      const csrfInput = form.querySelector('.js-data-url-csrf') as HTMLInputElement\n      const response = await self.fetch(\n        new Request(url, {\n          method: 'POST',\n          body: new FormData(form),\n          mode: 'same-origin',\n          headers: {\n            Accept: 'application/json',\n            'Scoped-CSRF-Token': csrfInput.value,\n            'X-Requested-With': 'XMLHttpRequest',\n          },\n        }),\n      )\n      if (response.ok) {\n        const responseJSON = await response.json()\n        status = responseJSON.status\n        token = responseJSON.token\n      } else {\n        status = 'STATUS_ERROR'\n      }\n    } catch {\n      status = 'STATUS_ERROR'\n    }\n\n    let message\n\n    switch (status) {\n      case 'STATUS_APPROVED':\n        // stop polling and handle approved case specifically\n        return successCallback ? successCallback() : approvedHandler(token)\n      case 'STATUS_EXPIRED':\n        // stop polling and handle expired case specifically\n        message = getErrorAndRetryMessage('timeout-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n      case 'STATUS_ACTIVE':\n      case 'STATUS_ERROR':\n      case 'STATUS_UNKNOWN':\n        // keep polling\n        break\n      case 'STATUS_REJECTED':\n        // stop polling and handle rejected case specifically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : rejectedHandler()\n      case 'STATUS_NOT_FOUND': // not expected, we shouldn't reach the poller if this is the case\n      case 'STATUS_UNSUPPORTED': // not expected, we shouldn't reach the poller if this is the case\n      default:\n        // stop polling and handle these cases generically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n    }\n\n    // wait between polls\n    await new Promise(resolve => setTimeout(resolve, POLL_WAIT_TIME_MS))\n    poll(errorCount)\n  })(0)\n}\n\nexport async function initializeMobileAuthRequestStatusPoll(\n  el: Element,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  try {\n    await pollMobileAuthRequestStatus(\n      el.getAttribute('data-poll-url')!,\n      successCallback,\n      failCallback,\n      checkCancelCallback,\n    )\n  } catch (e) {\n    // if an error was thrown that we didn't handle properly in the poller\n    // we need to make sure to still update the UI in a meaningful way\n    const message = getErrorAndRetryMessage('error-flash')\n    return genericHandler(message)\n  }\n}\n\nobserve('.js-poll-github-mobile-two-factor-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-verified-device-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-two-factor-password-reset-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n","import {onInput} from '../onfocus'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nexport function smsSending() {\n  document.body.classList.add('is-sending')\n  document.body.classList.remove('is-sent', 'is-not-sent')\n}\n\nexport function smsSuccess() {\n  document.body.classList.add('is-sent')\n  document.body.classList.remove('is-sending')\n}\n\nfunction smsError(message: string) {\n  if (message) {\n    document.querySelector<HTMLElement>('.js-sms-error')!.textContent = message\n  }\n  document.body.classList.add('is-not-sent')\n  document.body.classList.remove('is-sending')\n}\n\nremoteForm('.js-send-auth-code', async (form, wants) => {\n  smsSending()\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    smsError(error.response.text)\n  }\n  if (response) {\n    smsSuccess()\n  }\n})\n\nremoteForm('.js-two-factor-set-sms-fallback', async (form, wants) => {\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    const pane1 = form.querySelector<HTMLElement>('.js-configure-sms-fallback')!\n    const pane2 = form.querySelector<HTMLElement>('.js-verify-sms-fallback')!\n    const pane = pane1.hidden ? pane2 : pane1\n    const flash = pane.querySelector<HTMLElement>('.flash')!\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 404:\n      case 422:\n      case 429:\n        // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n        flash.textContent = JSON.parse(error.response.text).error\n        flash.hidden = false\n    }\n  }\n  if (response) {\n    switch (response.status) {\n      case 200:\n      case 201:\n        window.location.reload()\n        break\n      case 202:\n        form.querySelector<HTMLElement>('.js-configure-sms-fallback')!.hidden = true\n        form.querySelector<HTMLElement>('.js-verify-sms-fallback')!.hidden = false\n        form.querySelector<HTMLElement>('.js-fallback-otp')!.focus()\n        break\n    }\n  }\n})\n\nonInput('.js-verification-code-input-auto-submit', function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const pattern = target.pattern || '[0-9]{6}'\n  if (new RegExp(`^(${pattern})$`).test(target.value)) {\n    requestSubmit(target.form!)\n  }\n})\n","import {supported as webauthnSupported} from '@github/webauthn-json/browser-ponyfill'\n\n// Note: the default feedback value stored in the form is 'unknown', but that\n// should not be used unless the JS fails to run.\ntype WebauthnSupportLevel = 'supported' | 'unsupported'\n\n// Calculates a string value to send to the server.\nexport function webauthnSupportLevel(): WebauthnSupportLevel {\n  return webauthnSupported() ? 'supported' : 'unsupported'\n}\n\n// Calculates a string value to send to the server.\nexport async function iuvpaaSupportLevel(): Promise<WebauthnSupportLevel> {\n  if (await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()) {\n    return 'supported'\n  }\n  return 'unsupported'\n}\n","import {deleteCookie, getCookies} from '../cookies'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-transform-notice', {\n  constructor: HTMLElement,\n  add(el) {\n    const cookies = getCookies('org_transform_notice')\n    for (const cookie of cookies) {\n      const message = document.createElement('span')\n      try {\n        message.textContent = atob(decodeURIComponent(cookie.value))\n        deleteCookie(cookie.key)\n        el.appendChild(message)\n        el.hidden = false\n      } catch (e) {\n        // Do nothing, ignore on invalid encoding.\n      }\n      return\n    }\n  },\n})\n","import {iuvpaaSupportLevel, webauthnSupportLevel} from '../webauthn-support-level'\nimport {get, parseRequestOptionsFromJSON} from '@github/webauthn-json/browser-ponyfill'\nimport type {CredentialRequestOptionsJSON} from '@github/webauthn-json/browser-ponyfill'\nimport {requestSubmit, changeValue} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface WebauthnPublicKeyCredential extends PublicKeyCredential {\n  isConditionalMediationAvailable?: () => Promise<boolean>\n}\n\nconst conditionalAbortController = new AbortController()\n// webauthn-get.ts component\nconst webauthnGetComponent = 'webauthn-get'\n// An event dispatched by `WebauthnGetElement` when a normal get request is initiated\nconst webauthnGetEvent = 'webauthn-get-prompt'\n\nasync function supportConditionalMediation(): Promise<void> {\n  const uivpaa = await iuvpaaSupportLevel()\n  const conditionalForm = document.querySelector<HTMLFormElement>('.js-conditional-webauthn-placeholder')!\n  const isAvailable = await (\n    globalThis.PublicKeyCredential as unknown as WebauthnPublicKeyCredential | undefined\n  )?.isConditionalMediationAvailable?.()\n\n  if (conditionalForm && isAvailable && uivpaa === 'supported') {\n    document.querySelector('#login_field')?.setAttribute('autocomplete', 'username webauthn')\n    const signRequest = conditionalForm.getAttribute('data-webauthn-sign-request')\n\n    if (!signRequest) {\n      return\n    }\n\n    const webauthnGet = document.querySelector<HTMLElement>(webauthnGetComponent)!\n    if (webauthnGet) {\n      // Cancel pending conditional request if another request is started\n      webauthnGet.addEventListener(webauthnGetEvent, () => {\n        conditionalAbortController.abort()\n      })\n    }\n\n    const signRequestJSON: CredentialRequestOptionsJSON = JSON.parse(signRequest)\n    const options = parseRequestOptionsFromJSON(signRequestJSON)\n    options.signal = conditionalAbortController.signal\n\n    const signResponse = await get(options)\n    const responseField = conditionalForm.querySelector<HTMLFormElement>('.js-conditional-webauthn-response')!\n    responseField.value = JSON.stringify(signResponse)\n    requestSubmit(conditionalForm)\n  }\n}\n\n// Record the browser's webauthn support level in the GitHub login form.\n// Ask the device to sign a request when the user taps its button.\nobserve('.js-webauthn-support', {\n  constructor: HTMLInputElement,\n  add(el) {\n    changeValue(el, webauthnSupportLevel())\n  },\n})\n\nobserve('.js-webauthn-iuvpaa-support', {\n  constructor: HTMLInputElement,\n  async add(el) {\n    changeValue(el, await iuvpaaSupportLevel())\n  },\n})\n\nobserve('.js-conditional-webauthn-placeholder', function () {\n  supportConditionalMediation()\n})\n","import {onInput} from '../onfocus'\nimport {isEnterprise} from '@github-ui/runtime-environment'\n\nconst subdomain = window.location.hostname.split('.')[0]\n\nonInput('.js-login-field', function (event) {\n  const loginElement = event.target as HTMLInputElement\n  const form = loginElement.closest<HTMLElement>('form')\n  if (!form) return\n\n  const passwordInput = form.querySelector<HTMLInputElement>('.js-password-field')\n  const signInButton = form.querySelector<HTMLInputElement>('.js-sign-in-button')\n  if (!passwordInput || !signInButton) return\n  const loginInput = loginElement.value\n  const invalidUnderscoreLogin = ['pj_nitin', 'up_the_irons']\n\n  const emuLoginExperienceAvailable = () => {\n    return !isEnterprise()\n  }\n\n  // If subdomain is a multi-tenant subdomain, i.e. NOT \"github\", or login input contains \"_fab\", then auth via credentials\n  // Otherwise, auth via SSO\n  if (\n    emuLoginExperienceAvailable() &&\n    loginInput.includes('_') &&\n    !loginInput.includes('@') &&\n    !invalidUnderscoreLogin.includes(loginInput) &&\n    !loginInput.endsWith('_admin') &&\n    !(signInButton.getAttribute('development') && (loginInput.endsWith('_fab') || subdomain !== 'github'))\n  ) {\n    passwordInput.setAttribute('disabled', 'true')\n    signInButton.value = signInButton.getAttribute('data-sso-label') || ' '\n  } else {\n    passwordInput.removeAttribute('disabled')\n    signInButton.value = signInButton.getAttribute('data-signin-label') || ' '\n  }\n})\n","import {persistSubmitButtonValue} from './remote-submit'\n\ntype TextField = HTMLInputElement | HTMLTextAreaElement\ntype Button = HTMLInputElement | HTMLButtonElement\n\nfunction fire(target: HTMLElement, name: string, cancelable: boolean): boolean {\n  return target.dispatchEvent(\n    new CustomEvent(name, {\n      bubbles: true,\n      cancelable,\n    }),\n  )\n}\n\n// Submit a form while ensuring that `submit` event is also triggered.\n//\n// Calling native `form.submit()` method immediately submits the form without triggering the `submit` event.\n// As a result, code that wants to hook into form submits would never execute.\n//\n// This method first triggers the `submit` event and, if that event wasn't `preventDefault`d, submits the\n// form natively.\nexport function requestSubmit(form: HTMLFormElement, submitter?: Button) {\n  if (submitter) {\n    checkButtonValidity(form, submitter)\n    persistSubmitButtonValue(submitter)\n  }\n  if (fire(form, 'submit', true)) {\n    form.submit()\n  }\n}\n\n// Check submitter validity for form.requestSubmit compatibility.\n// See https://html.spec.whatwg.org/#dom-form-requestsubmit.\nfunction checkButtonValidity(form: HTMLFormElement, submitter: Button) {\n  if (!(form instanceof HTMLFormElement)) throw new TypeError('The specified element is not of type HTMLFormElement.')\n  if (!(submitter instanceof HTMLElement)) throw new TypeError('The specified element is not of type HTMLElement.')\n  if (submitter.type !== 'submit') throw new TypeError('The specified element is not a submit button.')\n  if (!form || form !== submitter.form) throw new Error('The specified element is not owned by the form element.')\n}\n\n// Set a form field value while ensuring that `change` event is also triggered.\n//\n// Having the `change` event fire is important for various behaviors to react, such as form validation.\nexport function changeValue(input: TextField, value: string | boolean) {\n  if (typeof value === 'boolean') {\n    if (input instanceof HTMLInputElement) {\n      input.checked = value\n    } else {\n      throw new TypeError('only checkboxes can be set to boolean value')\n    }\n  } else {\n    if (input.type === 'checkbox') {\n      throw new TypeError(\"checkbox can't be set to string value\")\n    } else {\n      input.value = value\n    }\n  }\n  fire(input, 'change', false)\n}\n\n// Fill multiple form fields by item name.\nexport function fillFormValues(form: HTMLFormElement, fields: {[key: string]: string}) {\n  for (const name in fields) {\n    const value = fields[name]\n    const element = form.elements.namedItem(name)\n\n    if (element instanceof HTMLInputElement) {\n      element.value = value!\n    } else if (element instanceof HTMLTextAreaElement) {\n      element.value = value!\n    }\n  }\n}\n\n// Test if element is a form field.\nexport function isFormField(element: Node): boolean {\n  if (!(element instanceof HTMLElement)) {\n    return false\n  }\n\n  const name = element.nodeName.toLowerCase()\n  const type = (element.getAttribute('type') || '').toLowerCase()\n  return (\n    name === 'select' ||\n    name === 'textarea' ||\n    (name === 'input' && type !== 'submit' && type !== 'reset') ||\n    element.isContentEditable\n  )\n}\n\nfunction searchParamsFromFormData(formData: FormData): URLSearchParams {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return new URLSearchParams(formData as any)\n}\n\n// Get a `?` search string for a URL for a GET form, using its `action` attribute as well as its other fields.\nexport function combineGetFormSearchParams(formAction: URL, formData: FormData): string {\n  const allSearchParams = new URLSearchParams(formAction.search)\n  const searchParamsFromInputs = searchParamsFromFormData(formData)\n  for (const [key, value] of searchParamsFromInputs) {\n    allSearchParams.append(key, value)\n  }\n  return allSearchParams.toString()\n}\n\n// Serialize form data into string.\nexport function serialize(form: HTMLFormElement): string {\n  return searchParamsFromFormData(new FormData(form)).toString()\n}\n","// Emulates submit button submission values by inserting a hidden input to the form.\n//\n// Submit events can be triggerd in the following ways:\n// - User clicks on a submit button.\n// - User press Enter when focusing on a form field; also known as \"implicit submission\".\n// - Programmatically via requestSubmit helper.\n//\n// On GitHub.com, the submission is either handled by the browser or remoteForm.\n//\n// For submissions triggered by user actions, the name and value of the clicked submit button (also known as\n// \"the submitter\") is passed along in the request, and can be programmatically retrieved with FormData.entries().\n//\n// However, this value will be lost in the following cases:\n// - 1. When the submitter button is disabled, most commonly by [data-disable-with].\n// - 2. When submitting via requestSubmit (from form.js), because the submission does not originated from a submitter.\n// - 3. When submitting with remoteForm, because FormData(form).entries() does not know about the submitter. In Safari\n// the submitter is known during the submission steps, but this behavior is not supported in any other browsers.\n//\n// @see {@link https://github.com/github/form-data-entries/pull/7}.\n//\n// For the exact workarounds, refer to ./form.js and ./remote.js.\nexport function persistSubmitButtonValue(button: HTMLButtonElement | HTMLInputElement) {\n  const form = button.closest('form')\n  if (!(form instanceof HTMLFormElement)) {\n    return\n  }\n\n  let input = findPersistedSubmitButtonValue(form)\n\n  if (button.name) {\n    const defaultValue = button.matches('input[type=submit]') ? 'Submit' : ''\n    const value = button.value || defaultValue\n    if (!input) {\n      input = document.createElement('input')\n      input.type = 'hidden'\n      input.classList.add('js-submit-button-value')\n      form.prepend(input)\n    }\n    input.name = button.name\n    input.value = value\n  } else if (input) {\n    input.remove()\n  }\n}\n\nexport function findPersistedSubmitButtonValue(form: HTMLFormElement): HTMLInputElement | null {\n  const input = form.querySelector('input.js-submit-button-value')\n  return input instanceof HTMLInputElement ? input : null\n}\n","import memoize from '@github/memoize'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\n\nconst runtimeEnvironment = memoize(githubEnvironment)\n\n// return the github instance environment\n// if dotcom, returns 'dotcom'\n// if enterprise, returns 'enterprise' (ghes and ghae both)\nfunction githubEnvironment(): string {\n  return ssrSafeDocument?.head?.querySelector<HTMLMetaElement>('meta[name=\"runtime-environment\"]')?.content || ''\n}\n\nexport const isPrivateInstance = memoize(isGitHubPrivateInstance)\nfunction isGitHubPrivateInstance(): boolean {\n  return ssrSafeDocument?.head?.querySelector<HTMLMetaElement>('meta[name=\"is-private-instance\"]')?.content === 'true'\n}\n\nexport const isEnterprise = memoize(isEnterpriseEnvironment)\nfunction isEnterpriseEnvironment(): boolean {\n  return runtimeEnvironment() === 'enterprise'\n}\n\n// This is the \"bundler\" that built the client-side assets, e.g. \"webpack\"\nexport const bundler = typeof BUNDLER !== 'undefined' ? BUNDLER : undefined\n","// When using SSR, browser globals are not available. If you try to use them, Node.js will throw an error\ntype SSRSafeLocation = Pick<Location, 'pathname' | 'origin' | 'search' | 'hash'>\n\n// eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope\nexport const ssrSafeDocument = typeof document === 'undefined' ? undefined : document\n// eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope\nexport const ssrSafeWindow = typeof window === 'undefined' ? undefined : window\n\nexport const ssrSafeLocation: SSRSafeLocation =\n  // eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope\n  typeof location === 'undefined' ? {pathname: '', origin: '', search: '', hash: ''} : location\n\nexport function setLocation(url: string) {\n  // eslint-disable-next-line no-restricted-syntax\n  const parsedURL: SSRSafeLocation = new URL(url)\n  const {pathname, origin, search, hash} = parsedURL\n\n  Object.assign(ssrSafeLocation, {pathname, origin, search, hash})\n}\n","import {ssrSafeDocument} from './ssr-globals'\n\n/***\n * Are we rendering on the server?\n */\nexport const IS_SERVER = typeof ssrSafeDocument === 'undefined'\n\n/***\n * Are we rendering on the client?\n */\nexport const IS_BROWSER = !IS_SERVER\n\n/***\n * This helper returns `true` if:\n * - we are rendering on the server\n * - we are on the client, and the app has been hydrated from a server-render\n */\nexport function wasServerRendered() {\n  if (IS_SERVER) {\n    return true\n  }\n\n  return Boolean(ssrSafeDocument!.querySelector('react-app[data-ssr=\"true\"]'))\n}\n","export function defaultHash(...args) {\n    // JSON.stringify ellides `undefined` and function values by default. We do not want that.\n    return JSON.stringify(args, (_, v) => (typeof v === 'object' ? v : String(v)));\n}\nexport default function memoize(fn, opts = {}) {\n    const { hash = defaultHash, cache = new Map() } = opts;\n    return function (...args) {\n        const id = hash.apply(this, args);\n        if (cache.has(id))\n            return cache.get(id);\n        let result = fn.apply(this, args);\n        if (result instanceof Promise) {\n            // eslint-disable-next-line github/no-then\n            result = result.catch(error => {\n                cache.delete(id);\n                throw error;\n            });\n        }\n        cache.set(id, result);\n        return result;\n    };\n}\n"],"names":["getCookie","name","getCookies","cookies","cookie","readCookies","key","value","trim","split","push","document","setCookie","expiration","strictDomain","samesite","domain","endsWith","secure","location","protocol","expire","deleteCookie","time","Date","getTime","toUTCString","initialized","selectorSet","SelectorSet","handleFocus","event","focused","target","HTMLElement","nodeType","Node","DOCUMENT_NODE","match","matches","data","call","onFocus","selector","fn","addEventListener","add","activeElement","onKey","eventType","inputHandler","blurHandler","currentTarget","removeEventListener","field","onInput","flashClassName","addFlashMessage","message","template","TemplateInstance","querySelector","className","node","importNode","flashContainer","removeFlash","appendChild","child","children","classList","contains","removeChild","hidePromptAndShowErrorMessage","githubMobileAuthenticatePrompt","getElementById","hidden","githubMobileAuthenticateErrorAndRetry","resetPrompt","approvedHandler","token","url","URL","encodeURIComponent","window","origin","href","searchParams","set","assign","rejectedHandler","click","genericHandler","getErrorAndRetryMessage","attributeName","getAttribute","pollMobileAuthRequestStatus","successCallback","failCallback","checkCancelCallback","poll","errorCount","status","form","csrfInput","response","self","fetch","Request","method","body","FormData","mode","headers","Accept","ok","responseJSON","json","Promise","resolve","setTimeout","initializeMobileAuthRequestStatusPoll","el","e","observe","smsSending","remove","smsSuccess","smsError","textContent","remoteForm","wants","text","error","pane1","pane2","pane","flash","JSON","parse","reload","focus","pattern","test","requestSubmit","webauthnSupportLevel","webauthnSupported","iuvpaaSupportLevel","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","constructor","createElement","atob","decodeURIComponent","conditionalAbortController","AbortController","supportConditionalMediation","uivpaa","conditionalForm","isAvailable","globalThis","isConditionalMediationAvailable","setAttribute","signRequest","webauthnGet","abort","signRequestJSON","options","parseRequestOptionsFromJSON","signal","signResponse","get","responseField","stringify","HTMLInputElement","changeValue","subdomain","hostname","loginElement","closest","passwordInput","signInButton","loginInput","emuLoginExperienceAvailable","isEnterprise","includes","invalidUnderscoreLogin","removeAttribute","fire","cancelable","dispatchEvent","CustomEvent","bubbles","submitter","checkButtonValidity","persistSubmitButtonValue","submit","HTMLFormElement","type","input","checked","fillFormValues","fields","element","elements","namedItem","HTMLTextAreaElement","isFormField","nodeName","toLowerCase","isContentEditable","searchParamsFromFormData","formData","URLSearchParams","combineGetFormSearchParams","formAction","allSearchParams","search","searchParamsFromInputs","append","toString","serialize","button","findPersistedSubmitButtonValue","defaultValue","prepend","runtimeEnvironment","memoize","githubEnvironment","ssrSafeDocument","head","content","isPrivateInstance","isGitHubPrivateInstance","isEnterpriseEnvironment","bundler","BUNDLER","undefined","ssrSafeWindow","ssrSafeLocation","pathname","hash","IS_SERVER","IS_BROWSER","wasServerRendered","Boolean","defaultHash","args","_","v","String","opts","cache","Map","id","apply","has","result","catch","delete"],"sourceRoot":""}