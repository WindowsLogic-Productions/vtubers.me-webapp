{"version":3,"file":"behaviors-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/favicon.ts","app/assets/modules/github/behaviors/hovercards.ts","app/assets/modules/github/behaviors/hydro-stats.ts","app/assets/modules/github/behaviors/quote-selection.ts","app/assets/modules/github/alive/idle-state.ts","ui/packages/turbo/frame.ts","app/assets/modules/github/behaviors/sudo-credential-options.ts","app/assets/modules/github/behaviors/ajax-loading.ts","app/assets/modules/github/behaviors/ajax-pagination.ts","app/assets/modules/github/behaviors/console-debug.ts","app/assets/modules/github/behaviors/analytics-events.ts","app/assets/modules/github/behaviors/animated-image.ts","app/assets/modules/github/behaviors/autocheck.ts","app/assets/modules/github/behaviors/autocomplete.ts","app/assets/modules/github/behaviors/autosearch-form.ts","app/assets/modules/github/behaviors/autoselect.ts","app/assets/modules/github/behaviors/autosubmit.ts","app/assets/modules/github/behaviors/avatar-reset-text.ts","app/assets/modules/github/behaviors/billing-addons.ts","app/assets/modules/github/repositories/blob-header.ts","app/assets/modules/github/behaviors/branch-protection-integration-select.ts","app/assets/modules/github/behaviors/bulk-actions.ts","app/assets/modules/github/behaviors/blob-csv.ts","app/assets/modules/github/behaviors/bundle-download-stats.ts","app/assets/modules/github/behaviors/buttons.ts","app/assets/modules/github/behaviors/check-all.ts","app/assets/modules/github/behaviors/clear-data-on-logout.ts","app/assets/modules/github/behaviors/clipboard-copy.ts","app/assets/modules/github/behaviors/code-nav.ts","app/assets/modules/github/behaviors/commenting/ajax.ts","app/assets/modules/github/behaviors/commenting/close.ts","app/assets/modules/github/behaviors/commenting/focus.ts","app/assets/modules/github/png-scanner.ts","app/assets/modules/github/image-dimensions.ts","app/assets/modules/github/behaviors/commenting/caret-placement.ts","app/assets/modules/github/behaviors/commenting/markdown.ts","app/assets/modules/github/behaviors/commenting/preview.ts","app/assets/modules/github/behaviors/commenting/reaction-suggestion.ts","app/assets/modules/github/behaviors/commits.ts","app/assets/modules/github/behaviors/company-name-input.ts","app/assets/modules/github/behaviors/company-owned.ts","app/assets/modules/github/behaviors/details-menu.ts","app/assets/modules/github/behaviors/dialog-helpers.ts","app/assets/modules/github/behaviors/disable-with.ts","app/assets/modules/github/behaviors/feature-preview-indicator.ts","app/assets/modules/github/behaviors/feature-preview-trigger.ts","app/assets/modules/github/upload/attachment-upload.ts","app/assets/modules/github/upload/batch-upload.ts","app/assets/modules/github/upload/batch.ts","app/assets/modules/github/behaviors/file-attachment.ts","app/assets/modules/github/behaviors/filter-input.ts","app/assets/modules/github/filter-list.ts","app/assets/modules/github/filter-sort-list.ts","app/assets/modules/github/substring-memory-filter-list.ts","app/assets/modules/github/labels-typeahead-filter-list.ts","app/assets/modules/github/behaviors/filterable.ts","app/assets/modules/github/behaviors/fixed-offset-fragment-navigation-observer.ts","app/assets/modules/github/behaviors/flash.ts","app/assets/modules/github/flash.ts","app/assets/modules/github/behaviors/flash-observer.ts","app/assets/modules/github/behaviors/focus-delay.ts","app/assets/modules/github/behaviors/form-toggle.ts","app/assets/modules/github/behaviors/fuzzy-list.ts","app/assets/modules/github/behaviors/gfm.ts","app/assets/modules/github/behaviors/hooks.ts","app/assets/modules/github/behaviors/hotkey-map.ts","app/assets/modules/github/behaviors/timing-stats.ts","app/assets/modules/github/behaviors/hpc.ts","app/assets/modules/github/behaviors/hydro-analytics-pageview.ts","app/assets/modules/github/behaviors/hydro-analytics-tracking.ts","app/assets/modules/github/behaviors/hydro-click-tracking.ts","app/assets/modules/github/behaviors/immediate-updates.ts","app/assets/modules/github/behaviors/image-metric-tracking.ts","app/assets/modules/github/behaviors/indeterminate.ts","app/assets/modules/github/behaviors/jump-to-loader.ts","app/assets/modules/github/behaviors/keyboard-shortcuts.ts","app/assets/modules/github/behaviors/length-limited-input-with-warning.ts","app/assets/modules/github/behaviors/open-in-github-dev.ts","app/assets/modules/github/behaviors/member-search-filter.ts","app/assets/modules/github/behaviors/notice.ts","app/assets/modules/github/behaviors/permalink.ts","app/assets/modules/github/behaviors/permission-menu-form.ts","app/assets/modules/github/behaviors/turbo-timing.ts","app/assets/modules/github/behaviors/quick-submit.ts","app/assets/modules/github/behaviors/print-popup.ts","app/assets/modules/github/behaviors/poll-include-fragment.ts","app/assets/modules/github/behaviors/reactions.ts","app/assets/modules/github/behaviors/remote-form.ts","app/assets/modules/github/behaviors/removed-contents.ts","app/assets/modules/github/behaviors/report-long-tasks.ts","app/assets/modules/github/behaviors/replace-remote-form.ts","app/assets/modules/github/behaviors/responsive-markdown-toolbar.ts","app/assets/modules/github/behaviors/saved-replies.ts","app/assets/modules/github/behaviors/scanning.ts","app/assets/modules/github/notifications/v2/notification-shelf-helpers.ts","app/assets/modules/github/behaviors/site-notifications.ts","app/assets/modules/github/behaviors/site-search.ts","app/assets/modules/github/behaviors/size-to-fit.ts","app/assets/modules/github/behaviors/smooth-scroll-anchor.ts","app/assets/modules/github/behaviors/snippet-clipboard-copy.ts","app/assets/modules/github/behaviors/social.ts","app/assets/modules/github/behaviors/socket-channel.ts","app/assets/modules/github/behaviors/stale-session.ts","app/assets/modules/github/behaviors/sso-auto-replay.ts","app/assets/modules/github/behaviors/statuses.ts","app/assets/modules/github/behaviors/sudo-required.ts","app/assets/modules/github/behaviors/suggesters/audit-log-suggester.ts","app/assets/modules/github/behaviors/suggesters/emoji-suggester.ts","app/assets/modules/github/behaviors/suggesters/issue-suggester.ts","app/assets/modules/github/behaviors/suggesters/mention-suggester.ts","app/assets/modules/github/behaviors/survey.ts","app/assets/modules/github/behaviors/sync-details-text.ts","app/assets/modules/github/behaviors/tab-container.ts","app/assets/modules/github/behaviors/targetable-elements.ts","app/assets/modules/github/behaviors/team-members.ts","app/assets/modules/github/behaviors/timeline/marker.ts","app/assets/modules/github/behaviors/timeline/progressive.ts","app/assets/modules/github/behaviors/timeline/timeline-accessibility.ts","app/assets/modules/github/behaviors/register-service-worker.ts","app/assets/modules/github/behaviors/toggler.ts","ui/packages/turbo/setup.ts","ui/packages/turbo/history.ts","ui/packages/turbo/progress-bar.ts","ui/packages/turbo/cache.ts","ui/packages/turbo/events.ts","app/assets/modules/github/timezone.ts","ui/packages/turbo/soft-nav.ts","app/assets/modules/github/behaviors/tz-cookie.ts","app/assets/modules/github/behaviors/unread-comments.ts","app/assets/modules/github/behaviors/unread-item-counter.ts","app/assets/modules/github/behaviors/updatable-content-observer.ts","app/assets/modules/github/behaviors/updatable-content-stale-object.ts","app/assets/modules/github/behaviors/upload-avatar.ts","app/assets/modules/github/behaviors/user-content.ts","app/assets/modules/github/behaviors/user-status-loader.ts","app/assets/modules/github/behaviors/user-lists.ts","app/assets/modules/github/behaviors/warn-unsaved-changes.ts","app/assets/modules/github/behaviors/will-transition-once.ts","app/assets/modules/github/issues/issue-link.ts","app/assets/modules/github/issues/labels.ts","app/assets/modules/github/notifications/configure-thread-subscription-dialog.ts","app/assets/modules/github/issues/sidebar-widget.ts","app/assets/modules/github/issues/sidebar-memex-input.ts","app/assets/modules/github/issues/sidebar.ts","app/assets/modules/github/memex/search.ts","app/assets/modules/behaviors.ts","app/assets/modules/github/behaviors/batch-deferred-content/batch-loader.ts","app/assets/modules/github/behaviors/batch-deferred-content.ts","app/assets/modules/github/behaviors/button-outline.ts","app/assets/modules/github/behaviors/characters-remaining.ts","app/assets/modules/github/behaviors/confirm.ts","app/assets/modules/github/behaviors/details-element.ts","app/assets/modules/github/behaviors/document-dropzone.ts","app/assets/modules/github/behaviors/encrypt.ts","app/assets/modules/github/behaviors/responsive-underlinenav.ts","app/assets/modules/github/behaviors/session-resume.ts","app/assets/modules/github/behaviors/side-navigation.ts","app/assets/modules/github/behaviors/tag-input.ts","app/assets/modules/github/behaviors/user-select-contain-polyfill.ts","app/assets/modules/github/blob-anchor.ts","app/assets/modules/github/code-editor.ts","app/assets/modules/github/iterables.ts","app/assets/modules/github/filter-sort.ts","app/assets/modules/github/fuzzy-filter.ts","app/assets/modules/github/fuzzy-list-element.ts","app/assets/modules/github/hydro-tracking.ts","app/assets/modules/github/jump-to/ranking.ts","app/assets/modules/github/jump-to/page-views.ts","app/assets/modules/github/notifications/v2/notification-shelf-referrer-params.ts","app/assets/modules/github/notifications/v2/update-notification-states.ts","app/assets/modules/github/range.ts","app/assets/modules/github/session-resume-helpers.ts","app/assets/modules/github/sessions/github-mobile-two-factor.ts","app/assets/modules/github/sessions/two-factor.ts","app/assets/modules/github/sudo.ts","app/assets/modules/github/text.ts","app/assets/modules/github/throttled-input.ts","app/assets/modules/github/visible.ts","app/assets/modules/github/webauthn-support-level.ts","ui/packages/alive/alive.ts","ui/packages/alive/session.ts","ui/packages/trusted-types-policies/worker-src-rel.ts","ui/packages/allow-user-content-scrolling/allow-user-content-scrolling.ts","ui/packages/analytics-overrides/analytics-overrides.ts","ui/packages/document-metadata/document-metadata.ts","ui/packages/eventloop-tasks/eventloop-tasks.ts","ui/packages/failbot/failbot.ts","ui/packages/feature-flags/feature-flags.ts","ui/packages/hydro-analytics/hydro-analytics.ts","ui/packages/is-hash-navigation/is-hash-navigation.ts","ui/packages/trusted-types-policies/jtml.ts","ui/packages/jtml-shimmed/jtml-shimmed.ts","ui/packages/trusted-types-policies/turbo.ts","ui/packages/turbo/utils.ts","ui/packages/webauthn-get-element/webauthn-get-element.ts"],"sourcesContent":["// Favicon manager\n//\n// Manages light and dark favicon variations, and handles status,\n// showing a , check, or pending dot over depending on the page status\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav'\n\nlet oldHref: string\n\nfunction updateFavicon(newHref?: string, colorScheme?: string) {\n  const favicon = document.querySelector<HTMLLinkElement>('.js-site-favicon[type=\"image/svg+xml\"]')\n  const faviconFallback = document.querySelector<HTMLLinkElement>('.js-site-favicon[type=\"image/png\"]')\n\n  if (!colorScheme) colorScheme = 'light'\n  const colorSchemeSuffix = colorScheme === 'light' ? '' : '-dark'\n\n  if (favicon && faviconFallback) {\n    if (oldHref == null) {\n      oldHref = favicon.href\n    }\n\n    if (newHref) {\n      newHref = newHref.substr(0, newHref.lastIndexOf('.'))\n      newHref = `${newHref}${colorSchemeSuffix}.svg`\n      favicon.href = newHref\n\n      const newFallbackHref = favicon.href.substr(0, favicon.href.lastIndexOf('.'))\n      faviconFallback.href = `${newFallbackHref}.png`\n    } else {\n      const n = favicon.href.indexOf('-dark.svg')\n      const newFaviconName = favicon.href.substr(0, n !== -1 ? n : favicon.href.lastIndexOf('.'))\n\n      favicon.href = `${newFaviconName}${colorSchemeSuffix}.svg`\n      faviconFallback.href = `${newFaviconName}${colorSchemeSuffix}.png`\n    }\n  }\n}\n\nfunction prefersDarkColorScheme() {\n  return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches\n}\n\nfunction resetIcon() {\n  if (oldHref != null) updateFavicon(oldHref, prefersDarkColorScheme() ? 'dark' : 'light')\n}\n\nfunction updateDarkFavicon() {\n  if (prefersDarkColorScheme()) {\n    updateFavicon(undefined, 'dark')\n  }\n}\n\nobserve('[data-favicon-override]', {\n  add(el) {\n    const href = el.getAttribute('data-favicon-override')!\n\n    // allow `remove` for the old element to fire first\n    setTimeout(() => updateFavicon(href, prefersDarkColorScheme() ? 'dark' : 'light'))\n  },\n  remove() {\n    resetIcon()\n  },\n})\n\nupdateDarkFavicon()\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, updateDarkFavicon)\n\nwindow.matchMedia('(prefers-color-scheme: dark)').addListener(() => {\n  updateFavicon(undefined, prefersDarkColorScheme() ? 'dark' : 'light')\n})\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {fetchSafeDocumentFragment} from '../fetch'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {trackView} from '../hydro-tracking'\n\ntype Position = {\n  containerTop: number\n  containerLeft: number\n  contentClassSuffix: string\n}\n\n// The card content. Moved around the page to where the current hover is\nlet cardContentContainer = document.querySelector('.js-hovercard-content')\nobserve('.js-hovercard-content', el => {\n  cardContentContainer = el\n})\n\nconst cachedFetchSafeDocumentFragment = memoize(fetchSafeDocumentFragment)\n\nlet currentTarget: Element | null | undefined\n\nlet activatingElement: Element | null = null\n\nlet deactivateTimer: number | null\n\nlet focusIn = false\nlet mouseOver = false\n\n// Mouse position for when links wrap lines\nlet mouseX = 0\n\nconst caretDistanceFromTarget = 12\n\n// For calculating position of the card when it hangs to the left\n// NOTE: These need to stay in sync with certain CSS rules in order to keep the\n// caret pointing at the target.\n//\n// caret distance from edge of card\nconst caretPaddingX = 24\nconst caretMarginY = 7\nconst caretPaddingY = caretPaddingX - caretMarginY\n\nconst caretHeight = 16\n\n// The amount of extra time given to move into the content\nconst deactivateTimeout = 100\n\n// The minimum time before opening the hovercard via mouseover\nconst activateTimeout = 250\n\n// Get the content class of a given selector.\n// (Prefixes the selector with `Popover-message--`).\nfunction contentClass(suffix: string): string {\n  const contentClassPrefix = 'Popover-message--'\n  return contentClassPrefix + suffix\n}\n\n// Track a load of the hovercard in octolytics if it stays for > 500ms.\nfunction trackLoad(cardContentBody: HTMLElement) {\n  setTimeout(() => {\n    if (document.body && document.body.contains(cardContentBody)) {\n      const trackingElement = cardContentBody.querySelector('[data-hydro-view]')\n      if (trackingElement instanceof HTMLElement) {\n        trackView(trackingElement)\n      }\n    }\n  }, 500)\n}\n\nfunction hideCard() {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n\n  cardContentContainer.style.display = 'none'\n  cardContentContainer.children[0]!.textContent = ''\n\n  activatingElement = null\n  currentTarget = null\n}\n\nfunction selectRectNearestMouse(target: Element): ClientRect {\n  const rects = target.getClientRects()\n  let foundRect = rects[0] || target.getBoundingClientRect() || {top: 0, left: 0, height: 0, width: 0}\n\n  if (rects.length > 0) {\n    for (const rect of rects) {\n      if (rect.left < mouseX && rect.right > mouseX) {\n        foundRect = rect\n        break\n      }\n    }\n  }\n\n  return foundRect\n}\n\nfunction calculatePositions(target: Element): Position {\n  const {width: contentWidth, height: contentHeight} = cardContentContainer!.getBoundingClientRect()\n  const {left: targetX, top: targetY, height: targetHeight, width: targetWidth} = selectRectNearestMouse(target)\n\n  const roomAbove = targetY > contentHeight\n  const hangLeft = target.classList.contains('js-hovercard-left')\n\n  if (hangLeft) {\n    // If there is room, show hovercard above hover position. Else, show it below\n    const left = targetX - contentWidth - caretDistanceFromTarget\n    const targetCenterY = targetY + targetHeight / 2\n    const top = roomAbove\n      ? targetCenterY - contentHeight + caretPaddingY + caretHeight / 2\n      : targetCenterY - caretPaddingY - caretHeight / 2\n\n    return {\n      containerTop: top,\n      containerLeft: left,\n      contentClassSuffix: roomAbove ? 'right-bottom' : 'right-top',\n    }\n  } else {\n    const roomRight = window.innerWidth - targetX > contentWidth\n    const targetCenterX = targetX + targetWidth / 2\n    const left = roomRight ? targetCenterX - caretPaddingX : targetCenterX - contentWidth + caretPaddingX\n    const top = roomAbove\n      ? targetY - contentHeight - caretDistanceFromTarget\n      : targetY + targetHeight + caretDistanceFromTarget\n\n    const contentClassSuffix = roomAbove\n      ? roomRight\n        ? 'bottom-left'\n        : 'bottom-right'\n      : roomRight\n      ? 'top-left'\n      : 'top-right'\n    return {containerTop: top, containerLeft: left, contentClassSuffix}\n  }\n}\n\nfunction positionCard(target: Element, cardContent: Element) {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n\n  // Hide container, reset popover styles\n  cardContentContainer.style.visibility = 'hidden'\n  cardContentContainer.style.display = 'block'\n  cardContent.classList.remove(\n    contentClass('bottom-left'),\n    contentClass('bottom-right'),\n    contentClass('right-top'),\n    contentClass('right-bottom'),\n    contentClass('top-left'),\n    contentClass('top-right'),\n  )\n\n  const {containerTop, containerLeft, contentClassSuffix} = calculatePositions(target)\n\n  // Add the class for correct caret location\n  cardContent.classList.add(contentClass(contentClassSuffix))\n\n  // Position the popover & inner message correctly\n  cardContentContainer.style.top = `${containerTop + window.pageYOffset}px`\n  cardContentContainer.style.left = `${containerLeft + window.pageXOffset}px`\n\n  // Set z-index override\n  setZIndexOverride(target, cardContentContainer)\n\n  // After positioning correctly, show the popover again\n  cardContentContainer.style.visibility = ''\n}\n\nfunction showCard(fragment: DocumentFragment, target: Element) {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n\n  const cardContent = cardContentContainer.children[0]!\n\n  cardContent.textContent = ''\n\n  const cardContentBody = document.createElement('div')\n  for (const child of fragment.children) {\n    cardContentBody.appendChild(child.cloneNode(true))\n  }\n\n  cardContent.appendChild(cardContentBody)\n\n  positionCard(target, cardContent)\n  trackLoad(cardContentBody)\n\n  cardContentContainer.style.display = 'block'\n}\n\nfunction determineEnclosingSubject(target: Element): string | null {\n  const tag = target.closest('[data-hovercard-subject-tag]')\n  if (tag) return tag.getAttribute('data-hovercard-subject-tag')\n  // Fall back to page context\n  const meta = document.head && document.head.querySelector('meta[name=\"hovercard-subject-tag\"]')\n  if (meta) return meta.getAttribute('content')\n  return null\n}\n\nfunction hovercardUrlFromTarget(target: Element): string {\n  const baseHovercardUrl = target.getAttribute('data-hovercard-url')\n\n  if (baseHovercardUrl) {\n    const subjectTag = determineEnclosingSubject(target)\n    if (subjectTag) {\n      const url = new URL(baseHovercardUrl, window.location.origin)\n      const params = new URLSearchParams(url.search.slice(1))\n      params.append('subject', subjectTag)\n      params.append('current_path', window.location.pathname + window.location.search)\n      url.search = params.toString()\n      return url.toString()\n    }\n\n    return baseHovercardUrl\n  }\n\n  return ''\n}\n\n// Determine if a hovercard is enabled for this type of element.\n//\n// Return boolean will be `true` if this link element has hovercard\n// attributes and the link's particular kind of hovercard is enabled for the\n// viewer and that part of the page.\nfunction hovercardsAreEnabledForType(target: Element): boolean {\n  const hovercardType = target.getAttribute('data-hovercard-type')\n\n  if (hovercardType === 'pull_request' || hovercardType === 'issue') {\n    return !!target.closest('[data-issue-and-pr-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'team') {\n    return !!target.closest('[data-team-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'repository') {\n    return !!target.closest('[data-repository-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'commit') {\n    return !!target.closest('[data-commit-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'project') {\n    return !!target.closest('[data-project-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'discussion') {\n    return !!target.closest('[data-discussion-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'acv_badge') {\n    return !!target.closest('[data-acv-badge-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'sponsors_listing') {\n    return !!target.closest('[data-sponsors-listing-hovercards-enabled]')\n  }\n\n  // User and organization hovercards are enabled everywhere\n  return true\n}\n\n// When mousing over a hovercard target, load the data and show the card.\nasync function activateFn(event: Event, minimumTimeout?: number): Promise<void> {\n  // Don't show hovercards on touch devices. Prevents mobile Safari users\n  // from needing to double tap links with hovercards.\n  // https://humanwhocodes.com/blog/2012/07/05/ios-has-a-hover-problem/\n  const touchDevice = 'ontouchstart' in document\n  if (touchDevice) return\n\n  const target = event.currentTarget\n\n  if (event instanceof MouseEvent) {\n    mouseX = event.clientX\n  }\n\n  if (!(target instanceof Element)) return\n  if (currentTarget === target) return\n  if (target.closest('.js-hovercard-content')) return\n\n  // Don't actually show issue or PR hovercards unless the link has an ancestor\n  // element with data-issue-and-pr-hovercards-enabled\n  if (!hovercardsAreEnabledForType(target)) return\n\n  hideCard()\n\n  // Set the current target as the one we're currently hovering on\n  currentTarget = target\n  activatingElement = document.activeElement\n\n  const hovercardUrl = hovercardUrlFromTarget(target)\n\n  let fragment: DocumentFragment | null | undefined\n  try {\n    const forcedDelay = new Promise(r => window.setTimeout(r, minimumTimeout, 0))\n    fragment = await cachedFetchSafeDocumentFragment(document, hovercardUrl)\n    await forcedDelay\n  } catch (err) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const response: Response = err.response\n    if (response && response.status === 404) {\n      // eslint-disable-next-line i18n-text/no-en\n      const notAvailableMessage = 'Hovercard is unavailable'\n      target.setAttribute('aria-label', notAvailableMessage)\n      target.classList.add('tooltipped', 'tooltipped-ne')\n    } else if (response && response.status === 410) {\n      const data: {[key: string]: string} = await response.clone().json()\n      target.setAttribute('aria-label', data.message!)\n      target.classList.add('tooltipped', 'tooltipped-ne')\n    }\n    return\n  }\n\n  // Ensure that the target is still the active one\n  if (target === currentTarget) {\n    showCard(fragment, target)\n\n    if (event instanceof KeyboardEvent && cardContentContainer instanceof HTMLElement) {\n      cardContentContainer.focus()\n    }\n  }\n}\n\n// Load the data but don't show until at least `activateTimeout` Only used when\n// loading via mouseover.\nfunction activateWithTimeoutFn(event: Event) {\n  activateFn(event, activateTimeout)\n}\n\n// When leaving a hovercard, deactivate unless we're moving to another child.\n// This allows the user to hover into the content area without dismissing.\nfunction deactivateFn(event: Event) {\n  if (!currentTarget) return\n\n  if (event instanceof MouseEvent && event.relatedTarget instanceof HTMLElement) {\n    const relatedTarget = event.relatedTarget\n    if (relatedTarget.closest('.js-hovercard-content') || relatedTarget.closest('[data-hovercard-url]')) {\n      return\n    }\n  } else if (event instanceof KeyboardEvent && activatingElement instanceof HTMLElement) {\n    // Return focus to where it was before the card was opened\n    activatingElement.focus()\n  }\n\n  hideCard()\n}\n\n// Deactivate after 250 ms unless the deactivate timer is canceled as a result\n// of the user entering the hovercard content area.\nfunction deactivateWithTimeoutFn(event: Event) {\n  const targetWas = currentTarget\n\n  deactivateTimer = window.setTimeout(() => {\n    if (currentTarget === targetWas) deactivateFn(event)\n  }, deactivateTimeout)\n}\n\n// Triggered when a key is pressed while either a container is focused, or\n// while inside of an open hovercard.\nfunction keyupFn(event: Event) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  if (!(event instanceof KeyboardEvent)) return\n  switch (event.key) {\n    case 'Escape':\n      deactivateFn(event)\n  }\n  /* eslint-enable no-restricted-syntax */\n}\n\n// Cancel the deactivation timer since the user is inside the content now\nfunction cancelDeactivation() {\n  if (deactivateTimer) clearTimeout(deactivateTimer)\n}\nif (cardContentContainer) {\n  // show if focused or moused over, only hide when both are false.\n  observe('[data-hovercard-url]', {\n    subscribe: el =>\n      compose(\n        fromEvent(el, 'mouseover', onMouseOver),\n        fromEvent(el, 'focusin', onFocusIn),\n        fromEvent(el, 'mouseleave', onMouseLeave),\n        fromEvent(el, 'focusout', onFocusOut),\n        fromEvent(el, 'keyup', keyupFn),\n      ),\n  })\n\n  observe('[data-hovercard-url]', {\n    remove(el) {\n      // Hide the card if we're removing the element that triggered it\n      if (currentTarget === el) hideCard()\n    },\n  })\n\n  observe('.js-hovercard-content', {\n    subscribe: el =>\n      compose(\n        fromEvent(el, 'mouseover', onContentsMouseOver),\n        fromEvent(el, 'focusin', onContentsFocusIn),\n        fromEvent(el, 'mouseleave', onMouseLeave),\n        fromEvent(el, 'focusout', onFocusOut),\n        fromEvent(el, 'keyup', keyupFn),\n      ),\n  })\n\n  // eslint-disable-next-line delegated-events/global-on\n  on('menu:activated', 'details', hideCard)\n\n  // hide the card when a turbo completes a new visit\n  window.addEventListener('turbo:load', hideCard)\n\n  window.addEventListener('statechange', hideCard)\n\n  // FF bug where the target can get focus, then be removed from the DOM\n  // and this doesn't trigger a focusOut event. In this case, focus moved to the window\n  // so we can handle it here.\n  window.addEventListener('focusin', onFocusOut)\n}\n\nfunction onFocusIn(event: Event) {\n  focusIn = true\n  activateFn(event, 0)\n}\n\nfunction onFocusOut(event: Event) {\n  focusIn = false\n  if (!mouseOver) {\n    deactivateFn(event)\n  }\n}\n\nfunction onMouseLeave(event: Event) {\n  mouseOver = false\n  if (!focusIn) {\n    deactivateWithTimeoutFn(event)\n  }\n}\n\nfunction onMouseOver(event: Event) {\n  mouseOver = true\n  activateWithTimeoutFn(event)\n}\n\nfunction onContentsMouseOver() {\n  mouseOver = true\n  cancelDeactivation()\n}\n\nfunction onContentsFocusIn() {\n  focusIn = true\n  cancelDeactivation()\n}\n\nfunction setZIndexOverride(target: Element, container: HTMLElement) {\n  const zIndex = target.getAttribute('data-hovercard-z-index-override')\n  if (zIndex) {\n    container.style.zIndex = zIndex\n  } else {\n    // Reset to initial z-index from Popover\n    container.style.zIndex = '100'\n  }\n}\n","import {sendEvent} from '@github-ui/hydro-analytics'\nimport {loaded} from '@github-ui/document-ready'\n\nconst vitalsToHydro = ['fcp', 'lcp', 'fid', 'inp', 'cls', 'hpc', 'ttfb'] as const\n\ninterface HydroStat {\n  react?: boolean\n  hpcMechanism?: PlatformBrowserSoftNavigationMechanism\n  ssr?: boolean\n  hpcSoft?: boolean\n  hpc?: string\n  ttfb?: string\n  fcp?: string\n  lcp?: string\n  fid?: string\n  inp?: string\n  cls?: string\n}\n\nlet queued: HydroStat | undefined\n\n/**\n * Batched report of vital to hydro\n */\nexport function sendStatToHydro(stat: PlatformBrowserPerformanceWebVitalTiming) {\n  let hydroStat: HydroStat | undefined\n\n  if (!document.querySelector('[data-hydrostats=\"publish\"]')) return\n\n  for (const vital of vitalsToHydro) {\n    if (stat[vital] !== undefined && stat[vital]! < 60_000) {\n      if (!hydroStat) {\n        hydroStat = queueStat()\n        hydroStat.react = !!document.querySelector('react-app')\n        hydroStat.ssr = stat.ssr\n      }\n      hydroStat[vital] = stat[vital]!.toPrecision(6)\n      if (vital === 'hpc') {\n        hydroStat.hpcMechanism = stat.mechanism\n        hydroStat.hpcSoft = stat.soft\n      }\n      break\n    }\n  }\n}\n\n/**\n * Create a new stat object and schedule it to be sent to hydro\n */\nfunction queueStat(): HydroStat {\n  if (!queued) {\n    queued = {}\n    scheduleSend()\n  }\n  return queued\n}\n\n/**\n * Schedule a send to hydro\n */\nasync function scheduleSend() {\n  await loaded\n  window.requestIdleCallback(send)\n}\n\n/**\n * Send the queued event to hydro\n */\nfunction send() {\n  sendEvent('web-vital', queued as Record<string, string | number | boolean | null | undefined>)\n  queued = undefined\n}\n","import {MarkdownQuote, Quote} from '@github/quote-selection'\nimport {debounce} from '@github/mini-throttle'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport visible from '../visible'\n\nlet activeSelection: SelectionContext | null\n\n// Hide the \"Quote reply\" button on threads where there is no textarea to quote\n// text into. This prevents it from showing up on locked threads.\nobserve('.js-comment-quote-reply', function (button) {\n  ;(button as HTMLElement).hidden =\n    button\n      .closest('.js-quote-selection-container')\n      ?.querySelector('.js-inline-comment-form-container textarea, .js-new-comment-form textarea') == null\n})\n\nfunction isHighlightContainer(el: Element): boolean {\n  return el.nodeName === 'DIV' && el.classList.contains('highlight')\n}\n\nfunction hasContent(node: Node): boolean {\n  return node.nodeName === 'IMG' || node.firstChild != null\n}\n\nconst filters: {[key: string]: (arg0: HTMLElement) => string | HTMLElement} = {\n  PRE(el) {\n    const parent = el.parentElement\n    if (parent && isHighlightContainer(parent)) {\n      const match = parent.className.match(/highlight-source-(\\S+)/)\n      const flavor = match ? match[1] : ''\n      const text = (el.textContent || '').replace(/\\n+$/, '')\n      el.textContent = `\\`\\`\\`${flavor}\\n${text}\\n\\`\\`\\``\n      el.append('\\n\\n')\n    }\n    return el\n  },\n  A(el) {\n    const text = el.textContent || ''\n    if (el.classList.contains('user-mention') || el.classList.contains('team-mention')) {\n      return text\n    } else if (el.classList.contains('issue-link') && /^#\\d+$/.test(text)) {\n      return text\n    } else {\n      return el\n    }\n  },\n  IMG(el) {\n    const alt = el.getAttribute('alt')\n    if (alt && el.classList.contains('emoji')) {\n      return alt\n    } else {\n      return el\n    }\n  },\n  DIV(el) {\n    if (el.classList.contains('js-suggested-changes-blob')) {\n      // skip quoting suggested changes widget\n      el.remove()\n    } else if (el.classList.contains('blob-wrapper-embedded')) {\n      // handle embedded blob snippets\n      const container = el.parentElement!\n      const link = container.querySelector<HTMLAnchorElement>('a[href]')!\n      const p = document.createElement('p')\n      p.textContent = link.href\n      container.replaceWith(p)\n    }\n    return el\n  },\n}\n\nfunction insertMarkdownSyntax(root: DocumentFragment): void {\n  const nodeIterator = document.createNodeIterator(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      if (node.nodeName in filters && hasContent(node)) {\n        return NodeFilter.FILTER_ACCEPT\n      } else {\n        return NodeFilter.FILTER_SKIP\n      }\n    },\n  })\n  const results: HTMLElement[] = []\n  let node = nodeIterator.nextNode()\n\n  while (node) {\n    if (node instanceof HTMLElement) {\n      results.push(node)\n    }\n    node = nodeIterator.nextNode()\n  }\n\n  // process deepest matches first\n  results.reverse()\n\n  for (const el of results) {\n    el.replaceWith(filters[el.nodeName]!(el))\n  }\n}\n\non('click', '.js-comment-quote-reply', function ({isTrusted, currentTarget}) {\n  const container = currentTarget.closest<HTMLElement>('.js-comment')!\n  const commentBody = container.querySelector<HTMLElement>('.js-comment-body')!\n  const commentBodyClone = container.querySelector<HTMLElement>('.js-comment-body')!.cloneNode(true)\n  const quoteSelectionContainer = container.closest('.js-quote-selection-container')!\n\n  // Remove elements that contain meta info and should not be present in the quoted text\n  const ignorableElements = commentBody.querySelectorAll('button.js-convert-to-issue-button, span.js-clear')\n  for (const el of ignorableElements) {\n    el.remove()\n  }\n  let quote = new Quote()\n\n  // User pressed `r` but has nothing selected\n  if (!isTrusted && quote.range.collapsed) {\n    return\n  }\n\n  if (quoteSelectionContainer.hasAttribute('data-quote-markdown')) {\n    quote = new MarkdownQuote(\n      quoteSelectionContainer.getAttribute('data-quote-markdown') || '',\n      (fragment: DocumentFragment) => {\n        const parent = quote.range.startContainer.parentElement\n        const codeBlock = parent && parent.closest('pre')\n        if (codeBlock instanceof HTMLElement) {\n          const pp = codeBlock.parentElement\n          if (pp && isHighlightContainer(pp)) {\n            const div = document.createElement('div')\n            div.className = pp.className\n            div.appendChild(fragment)\n            fragment.appendChild(div)\n          }\n        }\n        insertMarkdownSyntax(fragment)\n      },\n    )\n  }\n\n  // If the user has selected text before clicking the dropdown, use that as the quote.\n  // (Workaround for Safari clearing the selection just before <details> is opened).\n  if (activeSelection && commentBody.contains(activeSelection.anchorNode)) {\n    quote.range = activeSelection.range\n  } else if (quote.range.collapsed) {\n    quote.select(commentBody)\n  }\n\n  if (quote.closest('.js-quote-selection-container') !== quoteSelectionContainer) return\n\n  // Capture the current range incase elements switch focus\n  const range = quote.range\n\n  quoteSelectionContainer.dispatchEvent(\n    new CustomEvent('quote-selection', {\n      bubbles: true,\n      detail: quote,\n    }),\n  )\n\n  // Replace the range for elements that changed focus\n  quote.range = range\n\n  for (const textarea of quoteSelectionContainer.querySelectorAll('textarea')) {\n    if (visible(textarea) && !textarea.closest('tracking-block')) {\n      quote.insert(textarea)\n      break\n    }\n  }\n\n  // Restore the HTML to it's initial form. The ignorable elements had to be removed\n  // So that the quote lib would not include then into the selection\n  container.querySelector<HTMLElement>('.js-comment-body')!.replaceWith(commentBodyClone)\n})\n\ntype SelectionContext = {\n  anchorNode: Node | null\n  range: Range\n}\n\n// Workaround for Safari clearing the selection just before a <details> element\n// was activated: persist the previous selection and use its range when quoting.\nlet previousSelection: SelectionContext | null\n\ndocument.addEventListener(\n  'selectionchange',\n  debounce(function () {\n    const selection = window.getSelection()!\n    let range\n    try {\n      range = selection.getRangeAt(0)\n    } catch {\n      previousSelection = null\n      return\n    }\n    previousSelection = {\n      anchorNode: selection.anchorNode,\n      range,\n    }\n  }, 100),\n)\ndocument.addEventListener(\n  'toggle',\n  () => {\n    activeSelection = previousSelection\n  },\n  {capture: true},\n)\n","import {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {Subscription} from '@github-ui/subscription'\n\ntype IdleListener = (isIdle: boolean) => unknown\n\nconst idleListeners: IdleListener[] = []\nconst DEBOUNCE_UNTIL_IDLE = 30000\nconst DEBOUNCE_UNTIL_ACTIVE = 0 // If active, we want to send immediately\nlet idle = ssrSafeDocument?.hidden || false // if the page is hidden on load, consider it idle immediately\nlet visibilityDebounceTimeout: ReturnType<typeof setTimeout> | undefined\n\nexport function addIdleStateListener(listener: IdleListener) {\n  listener(idle)\n  idleListeners.push(listener)\n\n  return new Subscription(() => {\n    const index = idleListeners.indexOf(listener)\n    if (index !== -1) {\n      idleListeners.splice(index, 1)\n    }\n  })\n}\n\n;(() => {\n  // listen for visibility change events, which trigger the wait period for idle changes\n  ssrSafeDocument?.addEventListener('visibilitychange', () => {\n    const pageIsHidden = ssrSafeDocument?.hidden || false\n\n    if (visibilityDebounceTimeout !== undefined) {\n      // we were waiting to send an idle change, cancel the previous timeout and queue a new one\n      clearTimeout(visibilityDebounceTimeout)\n    }\n\n    // When page visibility changes, wait a little bit before marking as idle in case visibility comes back\n    const debouncePeriod = pageIsHidden ? DEBOUNCE_UNTIL_IDLE : DEBOUNCE_UNTIL_ACTIVE\n\n    visibilityDebounceTimeout = setTimeout(() => {\n      if (pageIsHidden === idle) {\n        // idle hasn't changed, don't call any listeners\n        return\n      }\n\n      idle = pageIsHidden\n      visibilityDebounceTimeout = undefined\n\n      // send current idle state to all listeners\n      for (const idleListener of idleListeners) {\n        idleListener(idle)\n      }\n    }, debouncePeriod)\n  })\n})()\n","import {TurboFrameClickEvent} from '@github/turbo'\nimport {SOFT_NAV_STATE, startSoftNav, updateFrame} from '@github-ui/soft-nav'\nimport {getCachedNode, setCachedNode} from './cache'\nimport {\n  addNewScripts,\n  addNewStylesheets,\n  getTurboCacheNodes,\n  getChangedTrackedKeys,\n  replaceElements,\n  waitForStylesheets,\n  dispatchTurboReload,\n  isTurboFrame,\n  isSameRepo,\n  isSameProfile,\n} from './utils'\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {setTitle} from '@github-ui/document-metadata'\nimport {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\nimport {ssrSafeWindow, ssrSafeDocument} from '@github-ui/ssr-utils'\n\ninterface FetchResponse {\n  response: Response\n  responseHTML: Promise<string>\n  location: Location\n}\n\nlet frameNavigation = false\nlet fetchResponse: FetchResponse | null\n\nconst navigatingBetweenDifferentEntities = (event: TurboFrameClickEvent) => {\n  if (!(event.target instanceof HTMLElement)) return\n\n  const frameContainer = event.target.closest('[data-turbo-frame]')\n  const repoContainer = event.target.closest('#js-repo-pjax-container')\n  const url = new URL(event.detail.url, window.location.origin)\n  const userProfileContainer = event.target.closest('#user-profile-frame')\n\n  return (\n    // Don't frame navigate if going to a different repo, since the frame will not\n    // load the new repo's header.\n    (repoContainer && frameContainer && !isSameRepo(url.pathname, location.pathname)) ||\n    // Don't frame navigate if going to a different user profile, since the frame\n    // will not load the new user's side panel information.\n    (userProfileContainer && !isSameProfile(url.pathname, location.pathname))\n  )\n}\n\nssrSafeDocument?.addEventListener('turbo:frame-click', function (event) {\n  if (!(event.target instanceof HTMLElement)) return\n  if (!(event instanceof CustomEvent)) return\n\n  // https://github.com/hotwired/turbo/issues/539\n  // If we are doing a hash navigation, we want to prevent Turbo from performing a visit\n  // so it won't mess with focus styles.\n  if (isHashNavigation(location.href, event.detail.url)) {\n    event.preventDefault()\n    return\n  }\n\n  if (navigatingBetweenDifferentEntities(event)) {\n    dispatchTurboReload('repo_mismatch')\n    event.target.removeAttribute('data-turbo-frame')\n    event.preventDefault()\n  }\n\n  // Here is where Turbo frame navigation starts.\n  if (!event.defaultPrevented) {\n    startSoftNav('turbo.frame')\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-response', event => {\n  fetchResponse = (event as CustomEvent).detail.fetchResponse\n  if (isTurboFrame(event.target)) setCachedNode(window.location.href, getTurboCacheNodes(document))\n})\n\n// Before rendering the new page (frame), we need to make sure the body is ready with\n// all the classes necessary. We do that by replacing the current body's classes with\n// classes that come from the `turbo-body-classes` meta tag.\n// We also are ready to add new scripts and stylesheets to the head, since that won't be\n// modified by the frame render.\n// We don't update the title here because it will be overridden by the frame.\n// We also don't update transients because it will mess with the B/F cache.\nssrSafeDocument?.addEventListener('turbo:before-frame-render', async event => {\n  // preventDefault MUST be the first thing in this event, otherwise rendering will NOT be paused.\n  event.preventDefault()\n\n  const {resume, newFrame} = (event as CustomEvent).detail\n\n  frameNavigation = true\n\n  if (!fetchResponse) return\n\n  const responseHTML = await fetchResponse.responseHTML\n  const responseLocation = fetchResponse.location\n\n  const trustedHTML = turboPolicy.createHTML(responseHTML, fetchResponse.response)\n  const parsedHTML = new DOMParser().parseFromString(trustedHTML, 'text/html')\n  fetchResponse = null\n\n  const sourceFrame = event.target as HTMLElement\n  const targetFrames = parsedHTML.querySelectorAll<HTMLElement>('turbo-frame')\n  const matchingFrame = [...targetFrames].find(frame => frame.id === sourceFrame?.id)\n  const changedKeys = getChangedTrackedKeys(parsedHTML)\n\n  // if the frames or tracked elements don't match, force a reload to the destination page otherwise\n  // the user will get an empty page or a page with the wrong assets.\n  if (!matchingFrame || changedKeys.length > 0) {\n    dispatchTurboReload(`tracked_element_mismatch-${changedKeys.join('-')}`)\n    window.location = responseLocation\n    return\n  }\n\n  setCachedNode(responseLocation.href, getTurboCacheNodes(parsedHTML))\n\n  addNewStylesheets(parsedHTML)\n  addNewScripts(parsedHTML)\n  replaceElements(parsedHTML)\n  replaceFrameClasses(sourceFrame, matchingFrame)\n\n  // We have to treat stylesheets as a blocking resource, so we wait for them to be loaded before continuing\n  // the frame render.\n  await waitForStylesheets()\n\n  resume()\n\n  if (shouldScrollToTop(newFrame)) {\n    window.scrollTo(0, 0)\n  }\n\n  // If we replace classes too early there may be some jitter when navigating to/from full-width pages.\n  replaceBodyClassesFromRequest(parsedHTML)\n})\n\nssrSafeWindow?.addEventListener('popstate', () => {\n  // When going back/forward, we need to restore elements that were replaced by us outside of the frame.\n  // popstate runs before turbo actually restores the page, so we have to wait for the next load to guarantee\n  // that our restoration is done after turbo's.\n  document.addEventListener(\n    'turbo:load',\n    () => {\n      const elements = getCachedNode()?.replacedElements || []\n\n      replaceElements(document, elements)\n    },\n    {once: true},\n  )\n})\n\n// At this point, Turbo finished updating things from its snapshot, so we can manually\n// updates whatever is necessary from the navigation.\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.SUCCESS, () => {\n  // This is a safeguard for back/forwards navigation. If the user clicks those buttons.\n  // Turbo will NOT trigger `turbo:before-fetch-response`, which would make the `body` stale.\n  // Since we are restoring a page from the cache, `turboPageNodes` will be populated, so it\n  // will know what are the `body` classes to restore.\n  replaceBodyClassesFromCachedNodes()\n\n  if (!frameNavigation) return\n\n  frameNavigation = false\n  replaceTitle()\n  replaceTransientTags()\n  updateFrame()\n})\n\nconst replaceBodyClassesFromRequest = (html: Document) => {\n  const classes = html.querySelector<HTMLMetaElement>('meta[name=turbo-body-classes]')?.content\n\n  if (!classes) return\n\n  document.body.setAttribute('class', classes)\n  document.querySelector('[data-turbo-body]')?.setAttribute('class', classes)\n}\n\nconst replaceBodyClassesFromCachedNodes = () => {\n  // If the navigation is a full-page reload, `turboPageNodes` will be reset\n  // and this will be a noop.\n  const classes = getCachedNode()?.bodyClasses\n\n  if (!classes) return\n\n  document.body.setAttribute('class', classes)\n  document.querySelector('[data-turbo-body]')?.setAttribute('class', classes)\n}\n\nconst replaceTitle = () => {\n  const title = getCachedNode()?.title\n\n  if (title) {\n    setTitle(title)\n  }\n}\n\n// Replace all `data-turbo-transient` elements\nconst replaceTransientTags = () => {\n  const cached = getCachedNode()?.transients\n  if (!cached) return\n\n  for (const el of document.querySelectorAll('head [data-turbo-transient]')) {\n    el.remove()\n  }\n\n  for (const el of cached) {\n    // title, scripts and stylesheets have their own logic to be added\n    // so here we'll only deal with the rest of the transient elements\n    // This is just a safeguard in case someone adds `data-turbo-transient`\n    // to one of those elements.\n    if (!el.matches('title, script, link[rel=stylesheet]')) {\n      el.setAttribute('data-turbo-transient', '')\n      document.head.append(el)\n    }\n  }\n}\n\nconst replaceFrameClasses = (oldFrame: HTMLElement | undefined, newFrame: HTMLElement) => {\n  if (!oldFrame) return\n\n  oldFrame.className = newFrame.className\n}\n\nconst shouldScrollToTop = (frame: HTMLElement) =>\n  frame.getAttribute('data-turbo-skip-scroll') !== 'true' && frame.getAttribute('data-turbo-action') === 'advance'\n","import {attr, controller, target} from '@github/catalyst'\nimport {WebauthnGetElement, State} from '@github-ui/webauthn-get-element'\nimport {\n  initializeMobileAuthRequestStatusPoll,\n  hidePromptAndShowErrorMessage as showGitHubMobileErrorState,\n  resetPrompt as resetGitHubMobilePrompt,\n} from '../sessions/github-mobile-two-factor'\nimport {smsSending, smsSuccess} from '../sessions/two-factor'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nenum SudoCredentialOptionsElementState {\n  WebAuthn = 'webauthn',\n  Password = 'password',\n  GitHubMobile = 'github-mobile',\n  TotpApp = 'totp-app',\n  TotpSms = 'totp-sms',\n}\n\n@controller\nexport class SudoCredentialOptionsElement extends HTMLElement {\n  static attrPrefix = ''\n  @attr webauthnAvailable: string\n  @attr githubMobileAvailable: string\n  @attr totpAppAvailable: string\n  @attr totpSmsAvailable: string\n  @attr githubMobilePromptUrl: string\n  @attr githubMobileGenericErrorMessage: string\n  @attr smsGenericErrorMessage: string\n  @attr genericErrorMessage: string\n  @attr totpSmsTriggerUrl: string\n\n  @target flashErrorMessageContainer: HTMLElement\n  @target flashErrorMessageText: HTMLElement\n  @target webauthnContainer: HTMLElement\n  @target githubMobileContainer: HTMLElement\n  @target githubMobileLoading: HTMLElement\n  @target githubMobileLanding: HTMLElement\n  @target totpAppContainer: HTMLElement\n  @target totpSmsContainer: HTMLElement\n  @target totpSmsLanding: HTMLElement\n  @target passwordContainer: HTMLElement\n  @target githubMobileNoChallengeMessage: HTMLElement\n  @target githubMobileChallengeMessage: HTMLElement\n  @target githubMobileChallengeValue: HTMLElement\n\n  @target webauthnNav: HTMLElement\n  @target githubMobileNav: HTMLElement\n  @target totpAppNav: HTMLElement\n  @target totpSmsNav: HTMLElement\n  @target totpSmsResendNav: HTMLElement\n  @target passwordNav: HTMLElement\n\n  @target webauthnGet: WebauthnGetElement\n  @target loginField: HTMLInputElement\n  @target passwordField: HTMLInputElement\n\n  #currentState: SudoCredentialOptionsElementState\n  reRenderPrompt(): void {\n    this.resetPrompt()\n    try {\n      switch (this.#currentState) {\n        case SudoCredentialOptionsElementState.WebAuthn:\n          this.renderWebauthnOption()\n          break\n        case SudoCredentialOptionsElementState.GitHubMobile:\n          this.renderGitHubMobileOption()\n          break\n        case SudoCredentialOptionsElementState.TotpApp:\n          this.renderTotpAppOption()\n          break\n        case SudoCredentialOptionsElementState.TotpSms:\n          this.renderTotpSmsOption()\n          break\n        case SudoCredentialOptionsElementState.Password:\n        default:\n          this.renderPasswordOption()\n          break\n      }\n      this.reRenderNavContainer()\n    } catch (e) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      this.handleUnexpectedPromptError(e)\n    }\n  }\n\n  handleUnexpectedPromptError(unexpectedError: Error) {\n    let errorMessage = ''\n\n    switch (this.#currentState) {\n      case SudoCredentialOptionsElementState.GitHubMobile:\n        errorMessage = this.githubMobileGenericErrorMessage\n        break\n      case SudoCredentialOptionsElementState.TotpSms:\n        errorMessage = this.smsGenericErrorMessage\n        break\n      default:\n        errorMessage = this.genericErrorMessage\n    }\n\n    // if we have an unexpected error, show a generic error message\n    // and try the password prompt as a fallback to prevent the user from being presented with an empty prompt / no options\n    if (unexpectedError && this.#currentState !== SudoCredentialOptionsElementState.Password) {\n      this.renderPasswordOptionWithError(errorMessage)\n      throw unexpectedError // re-throw the error so we can capture any unexpected errors with failbot/sentry\n    }\n  }\n\n  renderPasswordOptionWithError(errorMessage: string): void {\n    this.showPassword()\n    this.showErrorMessage(errorMessage)\n  }\n\n  resetPrompt(): void {\n    this.hideErrorMessage()\n    if (this.isWebAuthnAvailable()) {\n      this.hideWebAuthn()\n    }\n    if (this.isGitHubMobileAvailable()) {\n      this.hideGitHubMobile()\n    }\n    if (this.isTotpAppAvailable()) {\n      this.hideTotpApp()\n    }\n    if (this.isTotpSmsAvailable()) {\n      this.hideTotpSms()\n    }\n    this.hidePassword()\n  }\n\n  hideWebAuthn() {\n    this.safeSetElementVisibility(this.webauthnContainer, false)\n    this.safeSetElementVisibility(this.webauthnNav, false)\n  }\n\n  hideGitHubMobile() {\n    this.safeSetElementVisibility(this.githubMobileContainer, false)\n    this.safeSetElementVisibility(this.githubMobileNav, false)\n    this.safeSetElementVisibility(this.githubMobileLoading, false)\n    this.safeSetElementVisibility(this.githubMobileLanding, false)\n  }\n\n  hideTotpApp() {\n    this.safeSetElementVisibility(this.totpAppContainer, false)\n    this.safeSetElementVisibility(this.totpAppNav, false)\n  }\n\n  hideTotpSms() {\n    this.safeSetElementVisibility(this.totpSmsContainer, false)\n    this.safeSetElementVisibility(this.totpSmsLanding, false)\n    this.safeSetElementVisibility(this.totpSmsNav, false)\n    this.safeSetElementVisibility(this.totpSmsResendNav, false)\n  }\n\n  hidePassword() {\n    this.safeSetElementVisibility(this.passwordContainer, false)\n    this.safeSetElementVisibility(this.passwordNav, false)\n  }\n\n  reRenderNavContainer() {\n    if (this.isWebAuthnAvailable() && this.#currentState !== SudoCredentialOptionsElementState.WebAuthn) {\n      this.safeSetElementVisibility(this.webauthnNav, true)\n    }\n    if (this.isGitHubMobileAvailable() && this.#currentState !== SudoCredentialOptionsElementState.GitHubMobile) {\n      this.safeSetElementVisibility(this.githubMobileNav, true)\n    }\n    if (this.isTotpAppAvailable() && this.#currentState !== SudoCredentialOptionsElementState.TotpApp) {\n      this.safeSetElementVisibility(this.totpAppNav, true)\n    }\n    if (this.isTotpSmsAvailable() && this.#currentState !== SudoCredentialOptionsElementState.TotpSms) {\n      this.safeSetElementVisibility(this.totpSmsNav, true)\n    }\n    if (this.#currentState !== SudoCredentialOptionsElementState.Password) {\n      this.safeSetElementVisibility(this.passwordNav, true)\n    }\n  }\n\n  renderWebauthnOption(): void {\n    this.safeSetElementVisibility(this.webauthnContainer, true)\n    this.webauthnGet?.setState(State.Ready)\n  }\n\n  renderGitHubMobileOption(): void {\n    try {\n      resetGitHubMobilePrompt()\n    } catch {\n      // ignore errors\n    }\n    this.safeSetElementVisibility(this.githubMobileLoading, true)\n    this.safeSetElementVisibility(this.githubMobileLanding, false)\n    this.safeSetElementVisibility(this.githubMobileContainer, false)\n    this.initiateGitHubMobileAuthRequest()\n  }\n\n  renderTotpSmsOption(): void {\n    this.safeSetElementVisibility(this.totpSmsLanding, false)\n    this.safeSetElementVisibility(this.totpSmsContainer, true)\n    this.initiateTotpSmsRequest()\n  }\n\n  renderTotpAppOption(): void {\n    this.safeSetElementVisibility(this.totpAppContainer, true)\n  }\n\n  renderPasswordOption(): void {\n    this.safeSetElementVisibility(this.passwordContainer, true)\n    if (this.loginField) {\n      this.loginField.focus()\n    } else {\n      this.passwordField?.focus()\n    }\n  }\n\n  hasMultipleOptions(): boolean {\n    return (\n      this.isWebAuthnAvailable() ||\n      this.isGitHubMobileAvailable() ||\n      this.isTotpAppAvailable() ||\n      this.isTotpSmsAvailable()\n    )\n  }\n\n  isWebAuthnAvailable(): boolean {\n    return this.webauthnAvailable === 'true'\n  }\n\n  isGitHubMobileAvailable(): boolean {\n    return this.githubMobileAvailable === 'true'\n  }\n\n  isTotpAppAvailable(): boolean {\n    return this.totpAppAvailable === 'true'\n  }\n\n  isTotpSmsAvailable(): boolean {\n    return this.totpSmsAvailable === 'true'\n  }\n\n  showWebauthn(): void {\n    this.#currentState = SudoCredentialOptionsElementState.WebAuthn\n    this.reRenderPrompt()\n  }\n\n  showGitHubMobile(): void {\n    this.#currentState = SudoCredentialOptionsElementState.GitHubMobile\n    this.reRenderPrompt()\n  }\n\n  showTotpApp(): void {\n    this.#currentState = SudoCredentialOptionsElementState.TotpApp\n    this.reRenderPrompt()\n  }\n\n  showTotpSms(): void {\n    this.#currentState = SudoCredentialOptionsElementState.TotpSms\n    this.reRenderPrompt()\n  }\n\n  showPassword(): void {\n    this.#currentState = SudoCredentialOptionsElementState.Password\n    this.reRenderPrompt()\n  }\n\n  githubMobileRetry(e: Event): void {\n    e.preventDefault()\n    this.showGitHubMobile()\n  }\n\n  async initiateGitHubMobileAuthRequest(): Promise<void> {\n    const url = this.githubMobilePromptUrl\n    const csrfToken = (document.getElementById('sudo-credential-options-github-mobile-csrf') as HTMLInputElement).value\n    const data = new FormData()\n    // eslint-disable-next-line github/authenticity-token\n    data.append('authenticity_token', csrfToken)\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: data,\n      })\n\n      if (!response.ok && this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.mobileFailHandler(this.githubMobileGenericErrorMessage)\n        return\n      }\n\n      const json = await response.json()\n      const hasChallenge = !!json.challenge\n\n      this.safeSetElementVisibility(this.githubMobileNoChallengeMessage, !hasChallenge)\n      this.safeSetElementVisibility(this.githubMobileChallengeMessage, hasChallenge)\n      this.safeSetElementVisibility(this.githubMobileChallengeValue, hasChallenge)\n\n      if (hasChallenge) {\n        this.githubMobileChallengeValue.textContent = json.challenge\n      }\n\n      const el = document.getElementsByClassName('js-poll-github-mobile-sudo-authenticate')[0]!\n      initializeMobileAuthRequestStatusPoll(\n        el,\n        () => this.mobileApprovedHandler(),\n        (message: string) => this.mobileFailHandler(message),\n        () => this.mobileCancelCheck(),\n      )\n    } catch (e) {\n      if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.mobileFailHandler(this.githubMobileGenericErrorMessage)\n      }\n    } finally {\n      if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.safeSetElementVisibility(this.githubMobileLoading, false)\n        this.safeSetElementVisibility(this.githubMobileContainer, true)\n      }\n    }\n  }\n\n  async resendTotpSms(): Promise<void> {\n    this.hideErrorMessage()\n    // start the spinner\n    smsSending()\n    try {\n      await this.initiateTotpSmsRequest(true)\n    } catch (e) {\n      // errors are handled in the initiateTotpSmsRequest method\n    }\n    // always stop the spinner\n    document.body.classList.remove('is-sending')\n  }\n\n  async initiateTotpSmsRequest(isResend = false): Promise<void> {\n    const url = new URL(this.totpSmsTriggerUrl, window.location.origin)\n    if (isResend) {\n      url.searchParams.set('resend', 'true')\n    }\n    const csrfToken = (document.getElementById('sudo-credential-options-sms-csrf') as HTMLInputElement).value\n    const data = new FormData()\n    // eslint-disable-next-line github/authenticity-token\n    data.append('authenticity_token', csrfToken)\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: data,\n      })\n      if (!response.ok && this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n        const responseJson = await response.json()\n        this.showErrorMessage(responseJson.error)\n      } else if (this.#currentState === SudoCredentialOptionsElementState.TotpSms && isResend) {\n        smsSuccess()\n      }\n    } catch (e) {\n      if (this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n        this.showErrorMessage(this.smsGenericErrorMessage)\n      }\n    }\n    if (this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n      this.safeSetElementVisibility(this.totpSmsResendNav, true)\n    }\n  }\n\n  mobileApprovedHandler(): void {\n    if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n      const form = this.githubMobileContainer.getElementsByTagName('form')[0]!\n      requestSubmit(form)\n    }\n  }\n\n  mobileFailHandler(message: string): void {\n    if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n      this.showErrorMessage(message)\n      showGitHubMobileErrorState()\n    }\n  }\n\n  mobileCancelCheck(): boolean {\n    return this.#currentState !== SudoCredentialOptionsElementState.GitHubMobile\n  }\n\n  safeSetElementVisibility(elem: HTMLElement, visible: boolean): boolean {\n    if (elem) {\n      elem.hidden = !visible\n      return true\n    }\n    return false\n  }\n\n  showErrorMessage(message: string): void {\n    if (this.flashErrorMessageText) {\n      this.flashErrorMessageText.textContent = message\n      this.safeSetElementVisibility(this.flashErrorMessageContainer, true)\n    }\n  }\n\n  hideErrorMessage(): void {\n    if (this.flashErrorMessageText) {\n      this.flashErrorMessageText.textContent = ''\n    }\n    this.safeSetElementVisibility(this.flashErrorMessageContainer, false)\n  }\n}\n","// Global handler for AJAX loading indicators.\n//\n// Only enabled on new style `data-remote` requests.\n//\n// Examples\n//\n//   .loading-spinner { display: none; }\n//   form.loading .loading-spinner { display: block; }\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('deprecatedAjaxSend', '[data-remote]', function (event) {\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  if (event.defaultPrevented) {\n    return\n  }\n  event.currentTarget.classList.add('loading')\n})\n\n// Clear any errors when the request is tried again\non('deprecatedAjaxComplete', '[data-remote]', function (event) {\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  event.currentTarget.classList.remove('loading')\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\n// Dashboard event stream ajax pagination\nremoteForm('form.js-ajax-pagination, .js-ajax-pagination form', async function (form, wants) {\n  const container = form.closest<HTMLElement>('.js-ajax-pagination')!\n  let response\n  try {\n    response = await wants.html()\n  } catch (err) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (err.response && err.response.status === 404) {\n      container.remove()\n      return\n    } else {\n      throw err\n    }\n  }\n  container.replaceWith(response.html)\n  fire(form, 'page:loaded')\n})\n","import safeStorage from '@github-ui/safe-storage'\nconst {getItem} = safeStorage('localStorage')\n\nexport function debugHydroPayload(debugKey: string, payload: string): void {\n  if (process.env.NODE_ENV === 'development') {\n    if (getItem(debugKey) === 'true') {\n      /* eslint eslint-comments/no-use: off */\n      /* eslint-disable no-console */\n      try {\n        const parsed = JSON.parse(payload)\n        const eventName = parsed?.payload?.event_name ?? parsed?.event_type\n        console.group(`[${debugKey}] ${eventName}`)\n        console.table(parsed)\n        const keys = Object.keys(parsed?.payload || {})\n        for (const key of keys) {\n          const object = parsed.payload[key]\n          if (object instanceof Object && Object.keys(object).length > 0) {\n            console.group(key)\n            console.table(object)\n            console.groupEnd()\n          }\n        }\n        console.groupEnd()\n      } catch (e) {\n        console.group(`[hydro ${debugKey}] - failed to parse payload`)\n        console.log(payload)\n        console.groupEnd()\n      }\n      /* eslint-enable no-console */\n    }\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {debugHydroPayload} from './console-debug'\nconst GENERIC_CLICK_EVENT_NAME = 'analytics.click'\n\non('click', '[data-analytics-event]', event => {\n  // marketing pages will use marketing/analytics-events.ts, instead of behaviors/analytics-events.ts\n  if (isMarketingPage()) {\n    return\n  }\n  const element = event.currentTarget\n\n  const analyticsEvent = element.getAttribute('data-analytics-event')\n  if (!analyticsEvent) return\n\n  const analyticsEventAttributes = JSON.parse(analyticsEvent)\n\n  debugHydroPayload('hydro-debug.click', `{\"event_type\": \"${GENERIC_CLICK_EVENT_NAME}\", \"payload\": ${analyticsEvent}}`)\n  sendEvent(GENERIC_CLICK_EVENT_NAME, analyticsEventAttributes)\n})\n\nfunction isMarketingPage(): boolean {\n  return !!ssrSafeDocument?.head?.querySelector<HTMLMetaElement>('meta[name=\"is_logged_out_page\"]')?.content\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {sendStats} from '@github-ui/stats'\n\nconst selector = ['system', 'disabled']\n  .map(state => `html[data-a11y-animated-images=\"${state}\"] img[data-animated-image]`)\n  .join(', ')\n\nobserve(selector, el => {\n  if (!(el instanceof HTMLImageElement)) return // Element is not an image\n  // Element has a parent link but is not the direct child\n  if (el.closest('a') && !(el.parentElement instanceof HTMLAnchorElement)) return\n\n  let parent = el.parentElement\n  let link = null\n  if (parent instanceof HTMLAnchorElement) {\n    if (parent.childElementCount > 1) return // Image is not the only child of link\n    link = parent\n    link.setAttribute('data-target', 'animated-image.originalLink')\n    parent = link.parentElement\n  }\n\n  el.removeAttribute('data-animated-image')\n  el.setAttribute('data-target', 'animated-image.originalImage')\n\n  const clone = link ? link.cloneNode(true) : el.cloneNode(true)\n\n  const container = document.createElement('animated-image')\n  container.appendChild(clone)\n  parent?.replaceChild(container, link ? link : el)\n\n  sendStats({incrementKey: 'ANIMATED_IMAGE_PLAYER_WRAPPED', requestUrl: window.location.href})\n})\n","// Common behaviors associated with <auto-check>\n\nimport {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {validate} from '../behaviors/html-validation'\n\nconst notes = new WeakMap()\n\nobserve('auto-check', function (el) {\n  if (el.classList.contains('js-prevent-default-behavior')) return\n\n  const input = el.querySelector('input')\n  if (!input) return\n\n  const container = input.closest('.form-group') || el\n  const form = input.form\n\n  let id: string | null\n  function generateId() {\n    if (!id) id = `input-check-${(Math.random() * 10000).toFixed(0)}`\n    return id\n  }\n  const ariaDescribedby = input.getAttribute('aria-describedby')\n\n  input.addEventListener('focusout:delay', () => {\n    input.setAttribute('aria-describedby', [id, ariaDescribedby].join(' '))\n  })\n\n  const note = container.querySelector('p.note')\n  if (note) {\n    if (!note.id) note.id = generateId()\n    notes.set(note, note.innerHTML)\n  }\n\n  el.addEventListener('loadstart', () => {\n    reset(input, container)\n    container.classList.add('is-loading')\n    input.classList.add('is-autocheck-loading')\n\n    validate(form!)\n  })\n\n  el.addEventListener('loadend', () => {\n    container.classList.remove('is-loading')\n    input.classList.remove('is-autocheck-loading')\n  })\n\n  input.addEventListener('auto-check-success', async (event: Event) => {\n    input.classList.add('is-autocheck-successful')\n    container.classList.add('successed')\n\n    validate(form!)\n\n    const {response} = (event as CustomEvent).detail\n    if (!response) return\n\n    const message = await response.text()\n    if (!message) return\n\n    if (note instanceof HTMLElement) {\n      note.innerHTML = message\n      announceFromElement(note)\n    } else {\n      const isOk = response.status === 200\n      const tagName = container.tagName === 'DL' ? 'dd' : 'div'\n      const element = document.createElement(tagName)\n      element.id = generateId()\n      element.classList.add(isOk ? 'success' : 'warning')\n      element.innerHTML = message\n      container.append(element)\n      container.classList.add(isOk ? 'successed' : 'warn')\n      announceFromElement(element)\n      if (isOk) element.hidden = document.activeElement !== input\n    }\n\n    fire(input, 'auto-check-message-updated')\n  })\n\n  input.addEventListener('auto-check-error', async event => {\n    input.classList.add('is-autocheck-errored')\n    container.classList.add('errored')\n\n    validate(form!)\n\n    const {response} = (event as CustomEvent).detail\n    if (!response) return\n\n    const message = await response.text()\n\n    if (note instanceof HTMLElement) {\n      // eslint-disable-next-line i18n-text/no-en\n      note.innerHTML = message || 'Something went wrong'\n      announceFromElement(note)\n    } else {\n      const tagName = container.tagName === 'DL' ? 'dd' : 'div'\n      const error = document.createElement(tagName)\n      error.id = generateId()\n      error.classList.add('error')\n      // eslint-disable-next-line i18n-text/no-en\n      error.innerHTML = message || 'Something went wrong'\n      container.append(error)\n      announceFromElement(error)\n    }\n  })\n\n  input.addEventListener('input', () => {\n    input.removeAttribute('aria-describedby')\n    if (!input.value) reset(input, container)\n  })\n\n  input.addEventListener('blur', () => {\n    const successMessage = container.querySelector<HTMLElement>('.success')\n    if (successMessage) successMessage.hidden = true\n  })\n\n  input.addEventListener('focus', () => {\n    const successMessage = container.querySelector<HTMLElement>('.success')\n    if (successMessage) successMessage.hidden = false\n  })\n\n  form!.addEventListener('reset', () => {\n    reset(input, container)\n  })\n})\n\n// Reset the autocheck state.\nfunction reset(input: HTMLInputElement, container: Element) {\n  container.classList.remove('is-loading', 'successed', 'errored', 'warn')\n  input.classList.remove('is-autocheck-loading', 'is-autocheck-successful', 'is-autocheck-errored')\n\n  const note = container.querySelector('p.note')\n  if (note) {\n    const content = notes.get(note)\n    if (content) note.innerHTML = content\n  }\n\n  if (container.tagName === 'DL') {\n    container.querySelector('dd.error')?.remove()\n    container.querySelector('dd.warning')?.remove()\n    container.querySelector('dd.success')?.remove()\n  } else {\n    container.querySelector('div.error')?.remove()\n    container.querySelector('div.warning')?.remove()\n    container.querySelector('div.success')?.remove()\n  }\n}\n","// Common behaviors associated with <auto-complete>\n\nimport AutocompleteElement from '@github/auto-complete-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Display spinner during query server fetch.\nobserve('auto-complete', function (el) {\n  el.addEventListener('loadstart', () => el.classList.add('is-auto-complete-loading'))\n  el.addEventListener('loadend', () => el.classList.remove('is-auto-complete-loading'))\n})\n\nobserve('auto-complete', {constructor: AutocompleteElement, initialize: toggleSubmitButton})\n\non('auto-complete-change', 'auto-complete', function (event) {\n  toggleSubmitButton(event.currentTarget as AutocompleteElement)\n})\n\n// TODO Upstream `required` attribute to <auto-complete> so it can\n// participate in data-disable-invalid form validation.\n//\n// Toggle the submit button disabled/enabled based on the completer.\nfunction toggleSubmitButton(completer: AutocompleteElement) {\n  const form = completer.closest('form')\n  if (!form) return\n  const button = form.querySelector('.js-auto-complete-button')\n  if (!(button instanceof HTMLButtonElement)) return\n  button.disabled = !completer.value\n}\n","// Autosearch form\n//\n// Automatically replaces the contents of a container against a search field\n// in the search form.\n//\n// Note: Using `data-throttled-autosubmit` means that the form will autosubmit\n// on input with a bit of throttle so that we don't send unnessesary requests\n// to the server. See `app/assets/modules/github/behaviors/autosubmit.js`.\n//\n// Markup:\n//\n// `data-autosearch-results-container` - The ID of the container to update with results\n//\n// <form action=\"/search\" data-autosearch-results-container=\"search-results\">\n//   <input type=\"search\" placeholder=\"Find something\" data-throttled-autosubmit>\n//   <div id=\"search-results\">\n//     This content will get replaced when the input changes\n//   </div>\n// </form>\n//\nimport {combineGetFormSearchParams} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '../parse-html'\nimport {replaceState} from '../history'\n\nlet previousController: AbortController | null = null\non('submit', '[data-autosearch-results-container]', async function (event) {\n  const form = event.currentTarget\n  if (!(form instanceof HTMLFormElement)) return\n  event.preventDefault()\n\n  previousController?.abort()\n  form.classList.add('is-sending')\n  const url = new URL(form.action, window.location.origin)\n  const method = form.method\n  const formData = new FormData(form)\n  const serialized = combineGetFormSearchParams(url, formData)\n  let body = null\n  if (method === 'get') {\n    url.search = serialized\n  } else {\n    body = formData\n  }\n  const {signal} = (previousController = new AbortController())\n  const request = new Request(url.toString(), {\n    method,\n    body,\n    signal,\n    headers: {Accept: 'text/html', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  let response\n  try {\n    response = await fetch(request)\n  } catch {\n    // Ignore network errors\n  }\n  form.classList.remove('is-sending')\n  if (!response || !response.ok || signal.aborted) return\n  const id = form.getAttribute('data-autosearch-results-container')\n  const resultsContainer = id ? document.getElementById(id) : null\n  if (resultsContainer) {\n    resultsContainer.textContent = ''\n    resultsContainer.appendChild(parseHTML(document, await response.text()))\n  }\n  replaceState(null, '', `?${serialized}`)\n})\n","// Click to select clone urls\n\nimport {microtask} from '@github-ui/eventloop-tasks'\nimport {onFocus} from '../onfocus'\n\nonFocus('input[data-autoselect], textarea[data-autoselect]', async function (input) {\n  await microtask()\n  ;(input as HTMLInputElement | HTMLTextAreaElement).select()\n})\n","// Form AutoSubmit Behavior\n//\n// Automatically submits form when one of its fields change.\n//\n// Examples\n//\n//   <form action=\"/subscribe\" data-autosubmit>\n//     <input type=radio name=state value=1> Subscribe\n//     <input type=radio name=state value=0> Unsubscribe\n//   </form>\n\nimport {debounce} from '@github/mini-throttle'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {requestSubmit} from '@github-ui/form-utils'\n\non('change', 'form[data-autosubmit]', function (event) {\n  const target = event.currentTarget\n  requestSubmit(target as HTMLFormElement)\n})\n\non('change', 'input[data-autosubmit], select[data-autosubmit]', submit)\n\n// Submit a form from a change event.\nfunction submit(event: Event) {\n  const input = event.target\n  if (!(input instanceof HTMLInputElement) && !(input instanceof HTMLSelectElement)) return\n\n  const form = input.form\n  requestSubmit(form!)\n}\n\nconst debouncedSubmit = debounce(submit, 300)\n\nobserve('input[data-throttled-autosubmit]', {\n  subscribe: el => fromEvent(el, 'input', debouncedSubmit),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Sets the text of the avatar reset button depending on whether or not the\n// user has a gravatar associated with their GitHub account.\nasync function detectGravatar(el: Element) {\n  const gravitarUrl = el.getAttribute('data-url') || ''\n  const hasGravitar = await fetchGravatarInfo(gravitarUrl)\n\n  if (hasGravitar) {\n    const gravatarText = el.getAttribute('data-gravatar-text')\n    if (gravatarText != null) {\n      el.textContent = gravatarText\n    }\n  }\n}\n\nobserve('.js-detect-gravatar', function (el) {\n  detectGravatar(el)\n})\n\n// Fetch the gravitarUrl, and check the `has_gravatar` property from the returning JSON.\nasync function fetchGravatarInfo(gravitarUrl: string): Promise<boolean> {\n  const url = gravitarUrl\n  if (!url) return false\n\n  try {\n    const response = await fetch(url, {headers: {Accept: 'application/json'}})\n    if (!response.ok) return false\n    const data = (await response.json()) as {has_gravatar: boolean}\n    return data.has_gravatar\n  } catch {\n    return false\n  }\n}\n","import {addThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '../history'\nimport visible from '../visible'\nimport {softNavigate} from '@github-ui/soft-navigate'\n\nconst priceSelectors = ['.unstyled-additional-seats-price-obj', '.unstyled-base-price-obj', '.unstyled-final-price-obj']\n\ninterface PriceStruct {\n  default_currency: string\n  local_currency: string\n}\n\ntype SelectorValue = PriceStruct | string | number\n\nfunction isAPriceStruct(obj: SelectorValue): obj is PriceStruct {\n  if (typeof obj === 'string') return false\n  if (typeof obj === 'number') return false\n  return 'default_currency' in obj && 'local_currency' in obj\n}\n\ninterface UserPlan {\n  free: boolean\n  is_enterprise_cloud_trial: boolean\n  seats: number\n  no_additional_seats: boolean\n  selectors: Record<string, SelectorValue>\n  url: string\n}\n\nlet previousController: AbortController | null = null\non('click', '.js-org-signup-duration-change', event => {\n  event.preventDefault()\n  const el = event.currentTarget\n  const newDuration = el.getAttribute('data-plan-duration')!\n\n  updateDurationFields(newDuration)\n  updateSeatFieldURLs(newDuration)\n  for (const seatsField of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    updateTotals(seatsField)\n  }\n  toggleDurationUnitPrices()\n})\n\non('change', '.js-org-signup-duration-toggle', function ({currentTarget}) {\n  const url = new URL(currentTarget.getAttribute('data-url')!, window.location.origin)\n\n  softNavigate(url.toString())\n})\n\nasync function updateTotals(el: HTMLInputElement | HTMLSelectElement) {\n  const itemKey = el.getAttribute('data-item-name') || 'items'\n  const itemRawCount = el.value\n  const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  const itemMinimum = parseInt(el.getAttribute('data-item-minimum')!) || 0\n  const itemMaximum = parseInt(el.getAttribute('data-item-maximum')!) || 1_000_000 //1 mil is default when limit_maximum_seats_for_plan_upgrades is disabled\n  const itemCount = parseInt(el.getAttribute('data-item-count')!) || 0\n  const itemDelta = Math.max(itemMinimum, parseInt(itemRawCount) || 0)\n  const contactUs = itemDelta > itemMaximum\n\n  const downgradeButton = document.querySelector('.js-downgrade-button')\n  const downgradeDisabledMessage = document.getElementById('downgrade-disabled-message')\n  if (downgradeButton instanceof HTMLButtonElement) {\n    downgradeButton.disabled = itemDelta === itemCount\n  }\n\n  if (downgradeDisabledMessage instanceof HTMLElement && downgradeButton instanceof HTMLButtonElement) {\n    downgradeDisabledMessage.hidden = !downgradeButton.disabled\n  }\n\n  params.append(itemKey, itemDelta.toString())\n\n  const transformInput = document.querySelector('.js-transform-user')\n  if (transformInput) params.append('transform_user', '1')\n\n  url.search = params.toString()\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let data: UserPlan | null = null\n  try {\n    const response = await fetch(url.toString(), {signal, headers: {Accept: 'application/json'}})\n    if (!response.ok) return\n    data = (await response.json()) as UserPlan\n  } catch {\n    // ignore network errors\n  }\n  if (signal.aborted) return\n  if (!data) return\n\n  const contact = document.querySelector('.js-contact-us')\n  /* eslint-disable-next-line github/no-d-none */\n  if (contact) contact.classList.toggle('d-none', !contactUs)\n\n  const planCost = document.querySelector('.js-cost-info') as HTMLElement\n  if (planCost) planCost.hidden = contactUs\n\n  const paymentSummary = document.querySelector('.js-payment-summary')\n  /* eslint-disable-next-line github/no-d-none */\n  if (paymentSummary) paymentSummary.classList.toggle('d-none', contactUs)\n\n  const submit = document.querySelector('.js-submit-billing')\n  if (submit instanceof HTMLElement) submit.hidden = contactUs\n\n  const billing = document.querySelector('.js-billing-section')\n  if (billing) billing.classList.toggle('has-removed-contents', data.free || data.is_enterprise_cloud_trial)\n\n  const upgrade = document.querySelector('.js-upgrade-info')\n  /* eslint-disable-next-line github/no-d-none */\n  if (upgrade) upgrade.classList.toggle('d-none', itemDelta <= 0)\n\n  const downgrade = document.querySelector('.js-downgrade-info')\n  /* eslint-disable-next-line github/no-d-none */\n  if (downgrade) downgrade.classList.toggle('d-none', itemDelta >= 0)\n\n  const extraSeats = document.querySelector('.js-extra-seats-line-item')\n  /* eslint-disable-next-line github/no-d-none */\n  if (extraSeats) extraSeats.classList.toggle('d-none', data.no_additional_seats)\n\n  const seatField = document.querySelector('.js-seat-field')\n  if (seatField) updateSeatFields(itemRawCount)\n\n  const minimumSeatsTooltip = document.querySelector('.js-minimum-seats-disclaimer')\n  if (minimumSeatsTooltip) {\n    minimumSeatsTooltip.classList.toggle('tooltipped', data.seats === 5)\n    minimumSeatsTooltip.classList.toggle('tooltipped-nw', data.seats === 5)\n  }\n\n  const ref = data.selectors\n  for (const selector in ref) {\n    for (const element of document.querySelectorAll(selector)) {\n      if (isPriceSelector(selector) && isAPriceStruct(ref[selector]!)) {\n        element.textContent = ''\n        element.appendChild(priceCurrencyTag('default-currency', (<PriceStruct>ref[selector]).default_currency))\n        element.appendChild(priceCurrencyTag('local-currency', (<PriceStruct>ref[selector]).local_currency))\n      } else {\n        element.textContent = <string>ref[selector]\n      }\n    }\n  }\n\n  replaceState(history.state, '', data.url)\n}\n\nfunction isPriceSelector(selector: string): boolean {\n  return priceSelectors.includes(selector)\n}\n\nfunction priceCurrencyTag(className: string, price: string): HTMLSpanElement {\n  const span = document.createElement('span')\n  span.classList.add(className)\n  span.textContent = price\n  return span\n}\n\nfunction toggleDurationUnitPrices() {\n  for (const unitPrice of document.querySelectorAll<HTMLElement>('.js-unit-price')) {\n    unitPrice.hidden = !unitPrice.hidden\n  }\n}\n\nfunction updateDurationFields(newDuration: string) {\n  const oldDuration = newDuration === 'year' ? 'month' : 'year'\n  for (const planDurationText of document.querySelectorAll('.js-plan-duration-text')) {\n    planDurationText.textContent = newDuration\n  }\n\n  for (const planDurationAdjective of document.querySelectorAll('.unstyled-available-plan-duration-adjective')) {\n    planDurationAdjective.textContent = `${newDuration}ly`\n  }\n\n  for (const durationLink of document.querySelectorAll('.js-org-signup-duration-change')) {\n    durationLink.setAttribute('data-plan-duration', oldDuration)\n  }\n  const planDurationInput = <HTMLInputElement>document.getElementById('signup-plan-duration')\n  if (planDurationInput) {\n    planDurationInput.value = newDuration\n  }\n}\n\nfunction updateSeatFields(numberOfSeats: string) {\n  for (const el of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    const maxSeatForPlan = el.getAttribute('data-item-maximum')!\n    const popover = el?.parentNode?.querySelector<HTMLElement>('.Popover')\n\n    if (maxSeatForPlan && maxSeatForPlan.length) {\n      if (parseInt(numberOfSeats, 10) > parseInt(maxSeatForPlan, 10)) {\n        el.classList.add('color-border-danger-emphasis')\n        popover?.removeAttribute('hidden')\n      } else {\n        el.classList.remove('color-border-danger-emphasis')\n        popover?.setAttribute('hidden', 'true')\n      }\n    }\n  }\n}\n\nfunction updateSeatFieldURLs(newDuration: string) {\n  for (const el of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n    const params = new URLSearchParams(url.search.slice(1))\n    params.delete('plan_duration')\n    params.append('plan_duration', newDuration)\n    url.search = params.toString()\n    el.setAttribute('data-url', url.toString())\n  }\n}\n\nobserve('.js-addon-purchase-field', {\n  constructor: HTMLInputElement,\n  add(el) {\n    if (visible(el)) updateTotals(el)\n\n    addThrottledInputEventListener(el, function () {\n      updateTotals(el)\n    })\n  },\n})\n\nobserve('.js-addon-downgrade-field', {\n  constructor: HTMLSelectElement,\n  add(el) {\n    if (visible(el)) updateTotals(el)\n\n    el.addEventListener('change', function () {\n      updateTotals(el)\n    })\n  },\n})\n\nfunction handleOrgChange(event: Event) {\n  const addonField = document.querySelector('.js-addon-purchase-field')\n  const selectedRadio = (event.target as Element).querySelector('input:checked')\n\n  if (addonField instanceof HTMLInputElement && selectedRadio instanceof HTMLInputElement) {\n    const newUrl = selectedRadio.getAttribute('data-upgrade-url')\n\n    if (newUrl) {\n      addonField.setAttribute('data-url', newUrl)\n      addonField.value = '0'\n      updateTotals(addonField)\n    }\n  }\n}\n\non('details-menu-selected', '.js-organization-container', handleOrgChange, {capture: true})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\n// Flip tooltip direction of child elements if an item gets .is-stuck\n// so tooltips are still visible when the user scrolls down a blob and\n// the button bar sticks to the top\nobserve('.js-blob-header.is-stuck', {\n  add(el) {\n    flipTooltip(el)\n  },\n  remove(el) {\n    flipTooltip(el, true)\n  },\n})\n\nfunction flipTooltip(element: Element, inverse = false) {\n  const pairs = {\n    'tooltipped-nw': 'tooltipped-sw',\n    'tooltipped-n': 'tooltipped-s',\n    'tooltipped-ne': 'tooltipped-se',\n  }\n\n  for (const [key, value] of Object.entries(pairs)) {\n    const from = inverse ? value : key\n    const to = inverse ? key : value\n    for (const el of element.querySelectorAll(`.${from}`)) {\n      el.classList.replace(from, to)\n    }\n  }\n}\n\non('click', '.js-blob-dropdown-click', event => {\n  const trackingData = event.currentTarget.getAttribute('data-dropdown-tracking')\n\n  if (!trackingData) return\n\n  const parsedTrackingData = JSON.parse(trackingData)\n  sendEvent(parsedTrackingData.type, parsedTrackingData.context)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction changeSelection(event: Event) {\n  const input = event.target as HTMLElement\n  const container = input?.closest<HTMLDetailsElement>('.js-branch-protection-integration-select')\n  const currentSelection = container?.querySelector<HTMLElement>('.js-branch-protection-integration-select-current')\n  const item = input?.closest<HTMLElement>('.js-branch-protection-integration-select-item')\n  const label = item?.querySelector<HTMLElement>('.js-branch-protection-integration-select-label')\n  if (currentSelection && label && container) {\n    currentSelection.innerHTML = label.innerHTML\n    container.open = false\n  }\n}\n\non('change', '.js-branch-protection-integration-select-input', changeSelection)\n","// Bulk actions\n//\n// Provides a way to update bulk actions buttons/menus from a fetched url\n// when check boxes are updated.\n//\n//     <div class=\"js-bulk-actions-container\" data-bulk-actions-url=\"/bulk/actions/url\" data-bulk-actions-parameter=\"member_ids\">\n//       <div class=\"js-bulk-actions\">\n//         <!-- buttons/menus to be updated -->\n//       </div>\n//\n//       <div class=\"js-bulk-actions-item\" data-bulk-actions-id=\"1\">\n//         <input type=\"checkbox\" class=\"js-bulk-actions-toggle\">\n//       </div>\n//     </div>\n//\n// If [data-bulk-actions-parameter] is not assigned, `input.js-bulk-actions-toggle`'s name and value will be used instead.\n//\n//     <div class=\"js-bulk-actions-container\" data-bulk-actions-url=\"/bulk/actions/url\">\n//       <div class=\"js-bulk-actions\">\n//         <!-- buttons/menus to be updated -->\n//       </div>\n//\n//       <input type=\"checkbox\" name=\"member_ids[]\" value=\"1\" class=\"js-bulk-actions-toggle\">\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {debounce} from '@github/mini-throttle'\n\n// Get the bulk-actions-url from the container.\nfunction bulkUrl(container: Element): string {\n  const url = new URL(container.getAttribute('data-bulk-actions-url')!, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  const name = container.getAttribute('data-bulk-actions-parameter')\n  const checkedItems = Array.from(container.querySelectorAll<HTMLInputElement>('.js-bulk-actions-toggle:checked'))\n  if (name) {\n    const ids = checkedItems\n      .map(el => el.closest<HTMLElement>('.js-bulk-actions-item')!.getAttribute('data-bulk-actions-id')!)\n      .sort()\n    for (const id of ids) {\n      params.append(`${name}[]`, id)\n    }\n  } else {\n    for (const input of checkedItems.sort((a, b) => (a.value > b.value ? 1 : -1))) {\n      params.append(input.name, input.value)\n    }\n  }\n\n  url.search = params.toString()\n  return url.toString()\n}\n\nlet previousController: AbortController | null = null\n// Update the bulk actions container with new HTML fetched from the server.\nasync function updateBulkActions(event: Event) {\n  const container = event.target\n  if (!(container instanceof HTMLElement)) return\n  const actionsContainer = container.querySelector<HTMLElement>('.js-bulk-actions')!\n  const isItemSelected = !!container.querySelector('.js-bulk-actions-toggle:checked')\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let html = ''\n  try {\n    // TODO: Drop `X-Requested-With` header once controllers are cleaned up of `request.xhr?`\n    const response = await fetch(bulkUrl(container), {signal, headers: {'X-Requested-With': 'XMLHttpRequest'}})\n    if (!response.ok) return\n    html = await response.text()\n  } catch {\n    // Ignore network errors\n  }\n  if (signal.aborted) return\n  if (!html) return\n\n  if (!isItemSelected) {\n    actionsContainer.innerHTML = html\n    toggleMembershipTabs(container)\n  } else {\n    toggleMembershipTabs(container)\n    actionsContainer.innerHTML = html\n  }\n\n  fire(container, 'bulk-actions:updated')\n}\n\n// Toggle the membership tabs based on the amount of checked bulk-actions.\nfunction toggleMembershipTabs(container: HTMLElement) {\n  const membershipTabs = document.querySelector('.js-membership-tabs')\n  if (membershipTabs) {\n    const checked = container.querySelectorAll('.js-bulk-actions-toggle:checked')\n    /* eslint-disable-next-line github/no-d-none */\n    membershipTabs.classList.toggle('d-none', checked.length > 0)\n  }\n}\n\non('change', '.js-bulk-actions-toggle', function (event) {\n  const toggle = event.currentTarget\n  const container = toggle.closest<HTMLElement>('.js-bulk-actions-container')!\n  fire(container, 'bulk-actions:update')\n})\n\non('bulk-actions:update', '.js-bulk-actions-container', debounce(updateBulkActions, 100))\n","import {onInput} from '../onfocus'\n\nonInput('.js-csv-filter-field', function (event) {\n  const query = (event.target as HTMLInputElement).value.toLowerCase()\n  for (const row of document.querySelectorAll('.js-csv-data tbody tr')) {\n    if (!(row instanceof HTMLElement)) continue\n    if (!row.textContent) continue\n    row.hidden = !!query && !row.textContent.toLowerCase().includes(query)\n  }\n})\n","import {loaded} from '@github-ui/document-ready'\nimport {sendStats} from '@github-ui/stats'\n\ntype Ok<T> = {kind: 'ok'; value: T | null}\ntype Err<E> = {kind: 'err'; value: E}\ntype Result<T, E> = Ok<T> | Err<E>\n\nfunction getLocalJSON<T>(key: string): Result<T, Error> {\n  try {\n    const text = window.localStorage.getItem(key)\n    return {kind: 'ok', value: text ? JSON.parse(text) : null}\n  } catch (e) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    return {kind: 'err', value: e}\n  }\n}\n\nfunction setLocalJSON<T>(key: string, value: T): Result<null, Error> {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value))\n    return {kind: 'ok', value: null}\n  } catch (e) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    return {kind: 'err', value: e}\n  }\n}\n\nfunction gatherBundleURLs() {\n  const urls: {[key: string]: string} = {}\n  for (const script of document.getElementsByTagName('script')) {\n    const match = script.src.match(/\\/([\\w-]+)-[0-9a-f]{8,}\\.js$/)\n    if (match) urls[`${match[1]}.js`] = script.src\n  }\n  for (const link of document.getElementsByTagName('link')) {\n    const match = link.href.match(/\\/([\\w-]+)-[0-9a-f]{8,}\\.css$/)\n    if (match) urls[`${match[1]}.css`] = link.href\n  }\n  return urls\n}\n\ntype Bundles = Record<string, string>\n\nfunction report() {\n  const urls = gatherBundleURLs()\n  const read = getLocalJSON<Bundles>('bundle-urls')\n  if (read.kind === 'err') {\n    setLocalJSON('bundle-urls', urls)\n    return\n  }\n  const previousURLs = read.value || {}\n  const downloadedBundles = Object.keys(urls).filter(bundle => previousURLs[bundle] !== urls[bundle])\n  if (downloadedBundles.length) {\n    const write = setLocalJSON('bundle-urls', {...previousURLs, ...urls})\n    if (write.kind === 'ok') {\n      sendStats({downloadedBundles})\n    }\n  }\n}\n\n;(async () => {\n  await loaded\n  window.requestIdleCallback(report)\n})()\n","// Behaviors complementing buttons or minibuttons\n//\n// See also\n//   primer/buttons.scss\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction cancelEvent(event: Event) {\n  event.preventDefault()\n  event.stopPropagation()\n}\n\n// Prevent minibutton click if target is disabled\nobserve('a.btn.disabled', {\n  subscribe: el => fromEvent(el, 'click', cancelEvent),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport subscribe from '@github/check-all'\n\nobserve('.js-check-all-container', {\n  constructor: HTMLElement,\n  subscribe,\n})\n","import {deleteCookie, getCookies} from '../cookies'\n\n// This module detects a logout that has just occurred and clears browser data\n// for the origin that might contain sensitive things such as localstorage.\n\n// Set by lib/github/authentication/logout_result.rb on logout\nexport const JustLoggedOutCookieName = 'logout-was-successful'\n\nfunction clearData() {\n  for (const storage of [sessionStorage, localStorage]) {\n    try {\n      storage.clear()\n    } catch {\n      // ignore failure to clear\n    }\n  }\n}\n\nexport function clearDataIfJustLoggedOut() {\n  if (getCookies(JustLoggedOutCookieName).length > 0) {\n    clearData()\n    deleteCookie(JustLoggedOutCookieName)\n  }\n}\n\nclearDataIfJustLoggedOut()\n","import {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst duration = 2000\n\non('clipboard-copy', '[data-copy-feedback]', event => {\n  const clipboardCopyElement = event.currentTarget\n  const message = clipboardCopyElement.getAttribute('data-copy-feedback')!\n  const originalLabel = clipboardCopyElement.getAttribute('aria-label')\n  const direction = clipboardCopyElement.getAttribute('data-tooltip-direction') || 's'\n\n  clipboardCopyElement.setAttribute('aria-label', message)\n  clipboardCopyElement.classList.add('tooltipped', `tooltipped-${direction}`)\n  if (!(clipboardCopyElement instanceof HTMLElement)) return\n  announceFromElement(clipboardCopyElement)\n\n  setTimeout(() => {\n    if (originalLabel) {\n      clipboardCopyElement.setAttribute('aria-label', originalLabel)\n    } else {\n      clipboardCopyElement.removeAttribute('aria-label')\n    }\n    clipboardCopyElement.classList.remove('tooltipped', `tooltipped-${direction}`)\n  }, duration)\n})\n\nfunction timerCallback(currentTarget: HTMLElement) {\n  clipboardCopyElementTimers.delete(currentTarget)\n  toggleCopyButton(currentTarget)\n}\n\n// Toggle a copy button.\nfunction toggleCopyButton(button: HTMLElement) {\n  const copyIcon = button.querySelector('.js-clipboard-copy-icon')\n  const checkIcon = button.querySelector('.js-clipboard-check-icon')\n\n  button.classList.toggle('ClipboardButton--success')\n\n  if (copyIcon) {\n    /* eslint-disable-next-line github/no-d-none */\n    copyIcon.classList.toggle('d-none')\n  }\n  if (checkIcon) {\n    if (checkIcon.classList.contains('d-sm-none')) {\n      checkIcon.classList.toggle('d-sm-none')\n    } else {\n      /* eslint-disable-next-line github/no-d-none */\n      checkIcon.classList.toggle('d-none')\n    }\n  }\n}\n\nconst clipboardCopyElementTimers = new WeakMap<HTMLElement, number>()\n\non('clipboard-copy', '.js-clipboard-copy:not([data-view-component])', function ({currentTarget}) {\n  if (!(currentTarget instanceof HTMLElement)) return\n\n  const currentTimeout = clipboardCopyElementTimers.get(currentTarget)\n  if (currentTimeout) {\n    clearTimeout(currentTimeout)\n  } else {\n    toggleCopyButton(currentTarget)\n  }\n\n  clipboardCopyElementTimers.set(currentTarget, window.setTimeout(timerCallback, duration, currentTarget))\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {reportError} from '@github-ui/failbot'\n\n// When a code nav response returns precise and search-based backends,\n// we allow the user to retry their code nav query with the alternative\n// backend.  This observe block is responsible for handling the retry\n// logic,  making the async fetch request,  and updating the\n// code nav modal with the new response.\non('click', '.js-code-nav-retry', async function (event) {\n  // Ignore clicks with modifier keys\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) return\n  /* eslint-enable no-restricted-syntax */\n\n  const popover = document.querySelector<HTMLElement>('.js-tagsearch-popover')\n  if (!popover) return\n\n  const popoverContent = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')\n  if (!popoverContent) return\n\n  // Because the definitions endpoint is responsible for rendering\n  // the code nav modal's tabs and content,  a different dom element\n  // target is required for overwriting the html returned from the fetch.\n  let updateTarget: HTMLElement | null\n  const target = event.currentTarget as HTMLElement\n  const codeNavKind = target.getAttribute('data-code-nav-kind')\n  if (codeNavKind === 'definitions') {\n    updateTarget = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')\n  } else {\n    updateTarget = popover.querySelector<HTMLElement>('.js-code-nav-references')\n  }\n  if (!updateTarget) return\n\n  const retryUrl = target.getAttribute('data-code-nav-url')\n  if (!retryUrl) return\n\n  const codeNavUrl = new URL(retryUrl, window.location.origin)\n  try {\n    const response = await fetch(codeNavUrl.toString(), {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n    if (!response.ok) {\n      return\n    }\n    const html = await response.text()\n    if (!html) return\n\n    updateTarget.innerHTML = html\n  } catch {\n    return\n  }\n\n  // Because a user has to scroll to trigger this retry behavior,\n  // the code nav modal's scroll will need to be reset.\n  popoverContent.scrollTop = 0\n})\n\nobserve('.js-code-nav-container', {\n  constructor: HTMLElement,\n  subscribe(file) {\n    const repoContainer = file\n    const popover = document.querySelector('.js-tagsearch-popover') as HTMLElement\n    if (!(popover instanceof HTMLElement))\n      return {\n        unsubscribe() {\n          // Used as a no operation placeholder for unsubscribing if there is no popover.\n        },\n      }\n    const popoverContent = popover.querySelector<HTMLElement>('.js-tagsearch-popover-content')!\n    const popoverHTML = new WeakMap()\n    const wrapCache = new WeakMap()\n\n    let activeToken: Element | undefined\n\n    // initialize requires both `popover` and `activeToken` to be defined.\n    initialize()\n\n    // The code nav modal is sticky in the PR view.  When a user navigates to a location from the modal,\n    // and uses the 'back' button,  the code nav modal is still present,  and the active token (click target)\n    // retains the CSS classes added to it by the `onMouseOver()` event listener.\n    // This function ensures regardless of the user's previous navigation actions that the code nav modal is\n    // always reset to hidden on a new blob view, and any previous active token classes are removed from their elements.\n    function initialize() {\n      hidePopover()\n      for (const el of document.getElementsByClassName('pl-token')) {\n        el.classList.remove('pl-token', 'active')\n      }\n    }\n\n    async function onMouseMove(event: MouseEvent) {\n      const range = matchFromPoint(/\\w+[!?]?/g, event.clientX, event.clientY)\n      if (!range) return\n\n      const rangeElement = range.commonAncestorContainer.parentElement\n      if (!rangeElement) return\n      for (const className of rangeElement.classList) {\n        if (['pl-token', 'pl-c', 'pl-s', 'pl-k'].includes(className)) return\n      }\n\n      if (rangeElement.closest('.js-skip-tagsearch')) {\n        return\n      }\n\n      const text = range.toString()\n      if (!text || text.match(/\\n|\\s|[();&.=\",]/)) return\n\n      let didCheckText = wrapCache.get(rangeElement)\n      if (!didCheckText) {\n        didCheckText = new Set()\n        wrapCache.set(rangeElement, didCheckText)\n      }\n      if (didCheckText.has(text)) return\n      didCheckText.add(text)\n\n      const fileContainer = rangeElement.closest('.js-tagsearch-file')\n      if (!fileContainer) return\n\n      const path = fileContainer.getAttribute('data-tagsearch-path') || ''\n      let lang = fileContainer.getAttribute('data-tagsearch-lang') || ''\n\n      // Handle Ruby embedded in ERB templates\n      if (lang === 'HTML+ERB') {\n        if (rangeElement.closest('.pl-sre')) {\n          lang = 'Ruby'\n        } else {\n          return\n        }\n      }\n\n      if (file.classList.contains('js-code-block-container')) {\n        lang = getCodeBlockLanguage(rangeElement) || ''\n        // Ignore any requests where the range element is not in a code block\n        // with a supported language\n        if (!lang) return\n      }\n\n      const pos = getRowAndColumn(range)\n      const wrapper = document.createElement('span')\n      wrapper.classList.add('pl-token')\n      wrapper.addEventListener('click', onClick)\n\n      /*\n       * Blackbird FF controls code nav perf improvements by moving fetch\n       * action to click instead of hover. Will also show search on click, even\n       * if there are no definitions/references.\n       */\n      let html = undefined\n      html = await fetchPopoverContents(popover, text, lang, pos, path)\n      if (!html) return\n\n      addPopoverElement(wrapper, html)\n      popoverHTML.set(wrapper, html)\n\n      range.surroundContents(wrapper)\n    }\n\n    // Ensure popover list is reset to the top.\n    function resetScrollTop() {\n      popoverContent.scrollTop = 0\n    }\n\n    async function onClick(event: MouseEvent) {\n      // Ignore clicks with modifier keys\n      // TODO: Refactor to use data-hotkey\n      /* eslint eslint-comments/no-use: off */\n      /* eslint-disable no-restricted-syntax */\n      if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) return\n      /* eslint-enable no-restricted-syntax */\n\n      const target = event.currentTarget as HTMLElement\n\n      if (target === activeToken) {\n        hidePopover()\n      } else {\n        setActivePopover(target)\n        populatePopover(target)\n        showPopover()\n      }\n\n      event.preventDefault()\n    }\n\n    function addPopoverElement(wrapper: Element, html: string) {\n      const temp = document.createElement('span')\n      temp.innerHTML = html\n      const details = temp.firstElementChild\n      if (!details) return\n\n      const dataHydroClick = details.getAttribute('data-hydro-click')\n      const dataHydroClickHMAC = details.getAttribute('data-hydro-click-hmac')\n      if (dataHydroClickHMAC && dataHydroClick) {\n        wrapper.setAttribute('data-hydro-click', dataHydroClick)\n        wrapper.setAttribute('data-hydro-click-hmac', dataHydroClickHMAC)\n      }\n    }\n\n    function setActivePopover(token: HTMLElement) {\n      if (activeToken) activeToken.classList.remove('active')\n      activeToken = token\n      activeToken.classList.add('active')\n    }\n\n    function populatePopover(token: HTMLElement) {\n      popoverContent.innerHTML = popoverHTML.get(token) || ''\n\n      positionPopover(token)\n    }\n\n    function positionPopover(token: HTMLElement) {\n      const cRect = repoContainer.getClientRects()[0]!\n      const rects = token.getClientRects()\n      // If no rects are found return early.\n      if (rects.length === 0) return\n      const rect = rects[0]!\n      popover.style.position = 'absolute'\n      popover.style.zIndex = '3'\n      if (repoContainer.classList.contains('position-relative')) {\n        popover.style.top = `${rect.bottom - cRect.top + 7}px`\n        popover.style.left = `${rect.left - cRect.left - 10}px`\n      } else {\n        popover.style.top = `${window.scrollY + rect.bottom}px`\n        popover.style.left = `${window.scrollX + rect.left}px`\n      }\n    }\n\n    function showPopover() {\n      if (!popover.hidden) {\n        // When existing popover is active and user clicks on different symbol, we need to still reset the navigation tabs and scrollTop for the popover's new contents.\n        resetScrollTop()\n        return\n      }\n      popover.hidden = false\n\n      // Setting a scrollTop value only succeeds if the HTML element is visible.\n      resetScrollTop()\n\n      document.addEventListener('click', onDocumentClick)\n      document.addEventListener('keyup', onKeyup)\n      /* eslint-disable-next-line github/prefer-observers */\n      window.addEventListener('resize', onResize)\n    }\n\n    function hidePopover() {\n      if (popover.hidden) return\n      popover.hidden = true\n\n      if (activeToken) activeToken.classList.remove('active')\n      activeToken = undefined\n\n      document.removeEventListener('click', onDocumentClick)\n      document.removeEventListener('keyup', onKeyup)\n      window.removeEventListener('resize', onResize)\n    }\n\n    function onResize() {\n      if (!(activeToken instanceof HTMLElement)) return\n      positionPopover(activeToken)\n    }\n\n    function onDocumentClick(event: MouseEvent) {\n      const {target} = event\n      if (!(target instanceof Node)) return\n\n      if (!popover.contains(target) && !activeToken!.contains(target)) {\n        hidePopover()\n      }\n    }\n\n    function onKeyup(event: KeyboardEvent) {\n      // TODO: Refactor to use data-hotkey\n      /* eslint eslint-comments/no-use: off */\n      /* eslint-disable no-restricted-syntax */\n      switch (event.key) {\n        case 'Escape':\n          hidePopover()\n          break\n      }\n      /* eslint-enable no-restricted-syntax */\n    }\n\n    file.addEventListener('mousemove', onMouseMove)\n\n    return {\n      unsubscribe() {\n        file.removeEventListener('mousemove', onMouseMove)\n      },\n    }\n  },\n})\n\nasync function fetchPopoverContents(\n  popover: HTMLElement,\n  text: string,\n  lang: string,\n  pos: [number, number],\n  path: string,\n): Promise<string> {\n  const urlStr = popover.getAttribute('data-tagsearch-url')\n  if (!urlStr) return ''\n  const ref = popover.getAttribute('data-tagsearch-ref')\n  if (!ref) return ''\n  let codeNavContext = popover.getAttribute('data-tagsearch-code-nav-context')\n  if (!codeNavContext) {\n    codeNavContext = 'UNKNOWN_VIEW'\n  }\n\n  const url = new URL(urlStr, window.location.origin)\n  const params = new URLSearchParams()\n  params.set('q', text)\n  params.set('blob_path', path)\n  params.set('ref', ref)\n  params.set('language', lang)\n  params.set('row', pos[0].toString())\n  params.set('col', pos[1].toString())\n  params.set('code_nav_context', codeNavContext)\n  url.search = params.toString()\n\n  try {\n    const response = await fetch(url.toString(), {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n    if (!response.ok) {\n      return ''\n    }\n    const html = await response.text()\n\n    // Ignore responses with no definitions\n    if (/js-tagsearch-no-definitions/.test(html)) return ''\n\n    return html\n  } catch {\n    return ''\n  }\n}\n\ninterface CaretPosition {\n  offsetNode: Node\n  offset: number\n}\ndeclare global {\n  interface Document {\n    caretPositionFromPoint(x: number, y: number): CaretPosition | null\n  }\n}\n\n// Returns matching text range given screen offsets.\n//\n// Examples\n//\n//   // Find nearest word under mouse cursor\n//   matchFromPoint(/\\w+/g, event.clientX, event.clientY)\n//\n// Returns Range or null if nothing matches position.\nfunction matchFromPoint(regexp: RegExp, x: number, y: number): Range | undefined | null {\n  let textNode: Node | undefined\n  let offset: number | undefined\n\n  if (document.caretPositionFromPoint) {\n    const caret = document.caretPositionFromPoint(x, y)\n    if (caret) {\n      textNode = caret.offsetNode\n      offset = caret.offset\n    }\n  } else if (document.caretRangeFromPoint) {\n    const range = document.caretRangeFromPoint(x, y)\n    if (range) {\n      textNode = range.startContainer\n      offset = range.startOffset\n    }\n  }\n\n  if (!textNode || typeof offset !== 'number' || textNode.nodeType !== Node.TEXT_NODE) return\n\n  const text = textNode.textContent\n  const isEmpty = text?.replaceAll('\\n', '').trim() === ''\n  if (!text || isEmpty || textNode.nodeType !== Node.TEXT_NODE) {\n    return null\n  }\n  const match = findNearestMatch(text, regexp, offset)\n  if (!match) return null\n\n  const matchedRange = document.createRange()\n  matchedRange.setStart(textNode, match[1])\n  matchedRange.setEnd(textNode, match[2])\n\n  return matchedRange\n}\n\n// Find nearest match in string given a starting offset.\n//\n// Similar to String#scan, but only returns one result around the given offset.\n//\n// Examples\n//\n//   findNearestMatch(\"The quick brown fox jumps over the lazy dog\", /\\w+/g, 1)\n//   // [\"The\", 0, 3]\n//\n//   findNearestMatch(\"The quick brown fox jumps over the lazy dog\", /\\w+/g, 18)\n//   [\"fox\", 16, 19]\n//\n// Return matching string, start and end offsets. Otherwise returns null for no match.\nexport function findNearestMatch(str: string, regexp: RegExp, offset: number): [string, number, number] | null {\n  let m\n  let lastIndex = null\n  while ((m = regexp.exec(str))) {\n    // Prevent infinite loop from zero-length matches\n    if (regexp.lastIndex === lastIndex) {\n      reportError(new Error('regexp did not advance in findNearestMatch()'))\n      return null\n    }\n    lastIndex = regexp.lastIndex\n    const len = m.index + m[0].length\n    if (m.index <= offset && offset <= len) {\n      return [m[0], m.index, len]\n    }\n  }\n  return null\n}\n\n// Get the language name of the embedded code block that the given element is\n// located in. This will be used for files such as Markdown that can contain\n// nested code blocks in multiple languages.\n//\n// Return language name or null\nfunction getCodeBlockLanguage(element: Element): string | null {\n  // FIXME Use js- class or data attributes for the language lookup/mappings\n  const codeBlockElement = element.closest('.highlight')\n  if (codeBlockElement) {\n    for (const className of codeBlockElement.classList) {\n      switch (className) {\n        case 'highlight-source-go':\n          return 'Go'\n        case 'highlight-source-js':\n          return 'JavaScript'\n        case 'highlight-source-python':\n          return 'Python'\n        case 'highlight-source-ruby':\n          return 'Ruby'\n        case 'highlight-source-ts':\n          return 'TypeScript'\n      }\n    }\n  }\n\n  return null\n}\n\n// Returns a zero-indexed position of the range in utf16 code units.\nexport function getRowAndColumn(range: Range): [number, number] {\n  let node = range.startContainer\n  let offset = range.startOffset\n  let passParent = false\n  for (;;) {\n    let prev = node.previousSibling\n    while (!passParent && prev) {\n      // Diff views include additional DOM elements like comments and buttons that\n      // don't appear in the DOM for regular blob views. HTML Comment and Button nodes\n      // should not be included when calculating the offset (or column position). We only\n      // want to count text that appears in the repository, so that the resulting column position\n      // will align with the column position indexed by the code-navigation service for the symbol\n      // under the user's cursor.\n      if (!['#comment', 'BUTTON'].includes(prev.nodeName)) {\n        offset += (prev.textContent || '').length\n      }\n      prev = prev.previousSibling\n    }\n    const parent = node.parentElement\n    if (parent) {\n      if (parent.classList.contains('js-code-nav-pass')) {\n        // Compared with the standard blob view, the DOM structure in diff views is slightly different.\n        // To make sure we don't over count the offset for the clicked symbol, some DOM elements'\n        // text content should not be considered when calculating the symbol's column offset.\n        // This conditional signals to not count any additional offsets until the parent DOM\n        // element containing the symbol's line number is found.\n        passParent = true\n      } else if (parent.classList.contains('js-file-line')) {\n        const lineNumber = parent.previousElementSibling!\n        if (!lineNumber.classList.contains('js-code-nav-line-number')) {\n          throw new Error('invariant')\n        }\n        const row = parseInt(lineNumber.getAttribute('data-line-number') || '1', 10)\n        return [row - 1, offset]\n      }\n      node = parent\n    } else {\n      return [0, 0]\n    }\n  }\n}\n","// Commenting: AJAX form submission\n//\n// Markup\n//\n//     <form class=\"js-new-comment-form\">\n//       <div class=\"js-comment-form-error\" hidden>\n//       </div>\n//\n//       <textarea class=\"js-comment-field\"></textarea>\n//\n//       <button type=\"submit\">\n//         Comment\n//       </button>\n//     </form>\n//\n// Primer Validation example:\n// see: https://primer.style/css/components/forms#form-group-validation\n//\n//   <form class=\"js-new-comment-form\">\n//     <div class=\"form-group js-remove-error-state-on-click\">\n//       <textarea class=\"js-comment-field\" aria-describedby=\"body-input-validation\",\n//       </textarea>\n//\n//       <p class=\"note error js-comment-form-error\" id=\"body-input-validation\" hidden></p>\n//\n//       <button type=\"submit\">\n//         Comment\n//       </button>\n//     </div>\n//   </form>\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {ErrorWithResponse} from '@github/remote-form'\nimport {changeValue} from '@github-ui/form-utils'\nimport {remoteForm} from '@github/remote-form'\nimport {replaceContent} from '../../updatable-content'\n\n// Check if element is in viewport\nfunction isInViewport(el: HTMLElement) {\n  const rect = el.getBoundingClientRect()\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  )\n}\n\n// Hide any comment errors on retry.\nfunction clearFormError(form: Element) {\n  const formError = form.querySelector('.js-comment-form-error')\n  if (formError instanceof HTMLElement) {\n    formError.hidden = true\n  }\n}\n\n// Remove error state when Primer Form Validation enabled field is clicked on\non('click', '.errored.js-remove-error-state-on-click', function ({currentTarget}) {\n  currentTarget.classList.remove('errored')\n})\n\n// Reset form after AJAX request is successful\nremoteForm('.js-new-comment-form', async function (form, wants) {\n  let response\n  clearFormError(form)\n  try {\n    response = await wants.json()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    handleFormError(form, error)\n  }\n\n  if (!response) {\n    return\n  }\n\n  form.reset()\n  for (const field of form.querySelectorAll<HTMLInputElement>('.js-resettable-field')) {\n    changeValue(field, field.getAttribute('data-reset-value') || '')\n  }\n  const writeTab = form.querySelector('.js-write-tab')\n  if (writeTab instanceof HTMLElement) {\n    const inViewPort = isInViewport(writeTab)\n    if (inViewPort) {\n      writeTab.click()\n    }\n  }\n  const ref = response.json.updateContent\n\n  for (const selector in ref) {\n    const html = ref[selector]\n    const el = document.querySelector(selector)\n    if (el instanceof HTMLElement) {\n      replaceContent(el, html)\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn(`couldn't find ${selector} for immediate update`)\n    }\n  }\n\n  fire(form, 'comment:success')\n})\n\n// Show comment error if ajax request fails.\nfunction handleFormError(form: Element, error: ErrorWithResponse) {\n  // eslint-disable-next-line i18n-text/no-en\n  let message = \"You can't comment at this time\"\n  if (error.response && error.response.status === 422) {\n    const data = error.response.json\n    if (data.errors) {\n      if (Array.isArray(data.errors)) {\n        message += `  your comment ${data.errors.join(', ')}`\n      } else {\n        message = data.errors\n      }\n    }\n  }\n\n  message += '. '\n\n  const formError = form.querySelector('.js-comment-form-error')\n  if (formError instanceof HTMLElement) {\n    formError.textContent = message\n    formError.hidden = false\n\n    const formGroupValidationFormWrapper = formError.closest('div.form-group.js-remove-error-state-on-click')\n\n    if (formGroupValidationFormWrapper) {\n      formGroupValidationFormWrapper.classList.add('errored')\n    }\n  }\n}\n","// Commenting: Close button\n//\n// When comment fields also have a \"Close\" button, update the copy of the\n// button when text is present to indicate that the form will both post a\n// comment and close the discussion.\n//\n// Markup\n//\n//     <form>\n//       <textarea class=\"js-comment-field\"></textarea>\n//       <div>\n//         <button type=\"submit\">Comment</button>\n//         <button type=\"submit\" class=\"js-comment-and-button\"\n//           data-comment-text=\"Close with comment\">\n//           Close\n//         </button>\n//       </div>\n//     </form>\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst setButtonText = (button: HTMLButtonElement, hasValue: boolean) => {\n  const spanText = button.querySelector('.js-form-action-text')\n  const textTarget = spanText ? spanText : button\n  textTarget.textContent = hasValue\n    ? button.getAttribute('data-comment-text')!\n    : textTarget.getAttribute('data-default-action-text')!\n}\n\nconst createInputHandler = (button: HTMLButtonElement): ((event: Event) => void) => {\n  let previousHasValue: string\n\n  // Handle input.\n  return (event: Event) => {\n    const target = event.currentTarget\n    const newValue = (target as HTMLInputElement).value.trim()\n\n    if (newValue !== previousHasValue) {\n      previousHasValue = newValue\n      setButtonText(button, Boolean(newValue))\n    }\n  }\n}\n\nobserve('.js-comment-and-button', {\n  constructor: HTMLButtonElement,\n  initialize(button) {\n    const commentField = button.form!.querySelector<HTMLElement>('.js-comment-field')!\n    const handleInput = createInputHandler(button)\n\n    return {\n      add() {\n        commentField.addEventListener('input', handleInput)\n        commentField.addEventListener('change', handleInput)\n      },\n      remove() {\n        commentField.removeEventListener('input', handleInput)\n        commentField.removeEventListener('change', handleInput)\n      },\n    }\n  },\n})\n","// Commenting: Focus CSS hacks\n//\n// Bubbles js-comment-field focus state up to js-write-bucket.\n//\n// So we can have a focused ring around the drag and drop section.\n//\n// TODO: `focused` class should be `is-focused`\n\nimport {onFocus} from '../../onfocus'\n\n// Sync focused class.\nfunction toggleFocus(el: Element, focused: boolean) {\n  const container = el.closest('.js-write-bucket')\n  if (container) {\n    container.classList.toggle('focused', focused)\n  }\n}\n\n// Clean up focused class on blur.\nfunction blurred(event: Event) {\n  const el = event.currentTarget\n  if (el instanceof Element) {\n    toggleFocus(el, false)\n  }\n}\n\nonFocus('.js-comment-field', function (el) {\n  toggleFocus(el, true)\n  el.addEventListener('blur', blurred, {once: true})\n})\n","// Scan an ArrayBuffer as PNG, yielding each chunk along the way.\n//\n// Example:\n//\n//   scanner = new PNGScanner buffer\n//   scanner.scan (chunkType, chunkLength) ->\n//     if chunkType is \"IHDR\"\n//       imageWidth = @readLong()\n//       imageHeight = @readLong()\n//\n// The callback will get called for each PNG chunk as described in\n// http://www.w3.org/TR/PNG/#11Chunks. During the callback, the scanner will be\n// positioned on the start of chunk's data portion, where individual values are\n// accessible with:\n//\n// - readChar(): reads 1-byte value (uint8)\n// - readShort(): reads 2-byte value (uint16)\n// - readLong(): reads 4-byte value (uint32)\n// - readString(length): reads <length> ASCII characters as a string\n// - advance(bytes): skips <bytes> bytes forward\n//\n// Scanning will end if the callback returns `false` at any point.\n\nconst PNG_HEADER = 0x89504e47\nconst CRC_WIDTH = 4\n\nexport default class PNGScanner {\n  dataview: DataView\n  pos: number\n\n  static fromFile(file: Blob): Promise<PNGScanner> {\n    return new Promise(function (resolve, reject) {\n      const reader = new FileReader()\n      reader.onload = function () {\n        resolve(new PNGScanner(reader.result as ArrayBuffer))\n      }\n      reader.onerror = function () {\n        reject(reader.error)\n      }\n      reader.readAsArrayBuffer(file)\n    })\n  }\n\n  constructor(buffer: ArrayBuffer) {\n    this.dataview = new DataView(buffer)\n    this.pos = 0\n  }\n\n  advance(bytes: number) {\n    this.pos += bytes\n  }\n\n  readInt(bytes: 1 | 2 | 4) {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const self = this\n\n    // I want the do { } syntax *so* bad.\n    const value = (function () {\n      switch (bytes) {\n        case 1:\n          return self.dataview.getUint8(self.pos)\n        case 2:\n          return self.dataview.getUint16(self.pos)\n        case 4:\n          return self.dataview.getUint32(self.pos)\n        default:\n          // I shouldn't need this, but flow can't figure out that all values of bytes are handled by the above switch\n          throw new Error('bytes parameter must be 1, 2 or 4')\n      }\n    })()\n    this.advance(bytes)\n    return value\n  }\n\n  readChar() {\n    return this.readInt(1)\n  }\n\n  readShort() {\n    return this.readInt(2)\n  }\n\n  readLong() {\n    return this.readInt(4)\n  }\n\n  readString(length: number): string {\n    const buf = []\n    for (let i = 0; i < length; i++) {\n      buf.push(String.fromCharCode(this.readChar()))\n    }\n    return buf.join('')\n  }\n\n  scan(fn: (this: PNGScanner, type: string, len: number) => boolean) {\n    if (this.readLong() !== PNG_HEADER) {\n      throw new Error('invalid PNG')\n    }\n\n    this.advance(4)\n\n    for (;;) {\n      const len = this.readLong()\n      const type = this.readString(4)\n      const resumeAt = this.pos + len + CRC_WIDTH\n      if (fn.call(this, type, len) === false || type === 'IEND') {\n        break\n      }\n      this.pos = resumeAt\n    }\n  }\n}\n","import PNGScanner from './png-scanner'\n\nconst METERS_PER_INCH = 0.0254\n\nexport type ImageDimensions = {\n  width: number\n  height: number\n  ppi: number\n}\n\n// Returns a Promise that resolves with an object indicating:\n//\n// - width: image width in pixels\n// - height: image height in pixels\n// - ppi: pixels-per-inch count (optional)\n//\n// Only PNG file uploads are supported at the moment. All other types will\n// resolve with an empty metadata object.\nexport default async function imageDimensions(file: File): Promise<ImageDimensions | null> {\n  if (file.type !== 'image/png') {\n    return null\n  }\n  const slice = file.slice(0, 10240, file.type)\n  const scanner = await PNGScanner.fromFile(slice)\n  const meta = {\n    width: 0,\n    height: 0,\n    ppi: 1,\n  }\n\n  scanner.scan(function (type) {\n    switch (type) {\n      case 'IHDR': {\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        meta.width = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        meta.height = this.readLong()\n        return true\n      }\n      case 'pHYs': {\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const ppuX = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const ppuY = this.readLong()\n        /* eslint-disable-next-line @typescript-eslint/no-invalid-this */\n        const unit = this.readChar()\n        let inchesRatio\n        if (unit === 1) {\n          inchesRatio = METERS_PER_INCH\n        }\n        if (inchesRatio) {\n          meta.ppi = Math.round(((ppuX + ppuY) / 2) * inchesRatio)\n        }\n        return false\n      }\n      case 'IDAT': {\n        return false\n      }\n    }\n\n    return true\n  })\n\n  return meta\n}\n","import type {CaretCoordinates} from '@koddsson/textarea-caret'\nimport getCaretCoordinates from '@koddsson/textarea-caret'\n\ntype CaretCache = Map<number, CaretPosition>\nconst inputCache = new WeakMap<HTMLElement, CaretCache>()\n\n/**\n * Bundles together the caret coordinates and the caret's\n * index within a given textarea\n */\nclass CaretPosition {\n  index: number\n  coords: CaretCoordinates\n  textArea: HTMLTextAreaElement\n\n  constructor(index: number, coords: CaretCoordinates, textArea: HTMLTextAreaElement) {\n    this.index = index\n    this.coords = coords\n    this.textArea = textArea\n  }\n\n  get top() {\n    return this.coords.top\n  }\n\n  get left() {\n    return this.coords.left\n  }\n\n  get height() {\n    return this.coords.height\n  }\n\n  currentChar(lookBack = 1) {\n    return this.textArea.value.substring(this.index - lookBack, this.index)\n  }\n  /**\n   * Compare the line of the y coordinates to the caret.\n   * Returns -1 if y is on a previous line\n   * Returns 1 if y is on a subsequent line\n   * Returns 0 if y is on the same line\n   */\n  checkLine(y: number): -1 | 0 | 1 {\n    if (y < this.coords.top) {\n      return -1\n    }\n\n    if (y > this.coords.top + this.coords.height) {\n      return 1\n    }\n\n    return 0\n  }\n\n  /**\n   * The absolute horizontal distance between the x position and the\n   * caret's x position.\n   */\n  xDistance(x: number): number {\n    return Math.abs(this.left - x)\n  }\n}\n\n/**\n * Get the cached x/y coordinates for the given caret index and textarea.\n */\nfunction fetchCaretCoords(textArea: HTMLTextAreaElement, caretIndex: number): CaretPosition {\n  let caretCache\n  if (inputCache.has(textArea)) {\n    caretCache = inputCache.get(textArea)!\n  } else {\n    caretCache = new Map()\n    inputCache.set(textArea, caretCache)\n  }\n\n  if (caretCache.has(caretIndex)) {\n    return caretCache.get(caretIndex)\n  } else {\n    // calling getCaretCoordinates(textArea, caretIndex, {debug: true})\n    // will append a div to the document showing you where `textarea-caret` thinks the caret is\n    const coords = new CaretPosition(caretIndex, getCaretCoordinates(textArea, caretIndex), textArea)\n    caretCache.set(caretIndex, coords)\n    return coords\n  }\n}\n\n/**\n * This function recursively searches for the caret index that corresponds to the given coordinates.\n * We keep track of the number of iterations purely for logging to the console during\n * this PR.\n */\nconst binaryCursorSearch = (\n  textArea: HTMLTextAreaElement,\n  lower: number,\n  upper: number,\n  mouseX: number,\n  mouseY: number,\n  iterations: number,\n): number => {\n  if (upper === lower) {\n    return upper\n  }\n\n  /**\n   * Out of our final candidates, eliminate any that aren't on the same line as the mouse position.\n   * Pick the one that's closest in the x direction.\n   *\n   * If _none_ of the candidates are on the same line, bail and arbitrarily return the upper bound\n   */\n  const bestPosition = (candidates: CaretPosition[]): number => {\n    const sameLineCandidates = candidates\n      .filter(c => c.checkLine(mouseY) === 0)\n      .sort((a, b) => (a.xDistance(mouseX) > b.xDistance(mouseX) ? 1 : -1))\n    if (sameLineCandidates.length === 0) {\n      return upper\n    } else {\n      return sameLineCandidates[0]!.index\n    }\n  }\n  // if we're down to two or three positions check them all\n  if (upper - lower === 1) {\n    const l = fetchCaretCoords(textArea, lower)\n    const u = fetchCaretCoords(textArea, upper)\n    return bestPosition([l, u])\n  }\n\n  if (upper - lower === 2) {\n    const l = fetchCaretCoords(textArea, lower)\n    const m = fetchCaretCoords(textArea, upper - 1)\n    const u = fetchCaretCoords(textArea, upper)\n\n    return bestPosition([l, m, u])\n  }\n\n  // The new midpoint is halfway between the upper and lower bounds\n  // If that ends up being the same as the upper or lower, it means we've descended\n  // all the way to the bottom of our search tree. We don't backtrack.\n  const mid = Math.floor((upper + lower) / 2)\n  if (mid === lower || mid === upper) {\n    return mid\n  }\n  const midCoords = fetchCaretCoords(textArea, mid)\n\n  // If the midpoint caret position is below the mouse coordinates, we need to search\n  // farther along in the textarea\n  if (mouseY > midCoords.top + midCoords.height) {\n    return binaryCursorSearch(textArea, mid + 1, upper, mouseX, mouseY, iterations + 1)\n  }\n\n  // If the midpoint caret position is above the mouse coordinates, we need to search\n  // behind the current midpoint in the textarea\n  if (mouseY < midCoords.top) {\n    return binaryCursorSearch(textArea, lower, mid - 1, mouseX, mouseY, iterations + 1)\n  }\n\n  // if we're within a few pixels, avoid further searching\n  const ETA = 3\n  if (midCoords.xDistance(mouseX) < ETA) {\n    return mid\n  }\n\n  // if mid is on the same line as the cursor, we need to check the x position\n  if (midCoords.left < mouseX) {\n    // if iterating further will cause us to change lines, stop here\n    if (fetchCaretCoords(textArea, mid + 1).checkLine(mouseY) !== 0) {\n      return mid\n    }\n    return binaryCursorSearch(textArea, mid + 1, upper, mouseX, mouseY, iterations + 1)\n  }\n\n  if (midCoords.left > mouseX) {\n    // if iterating further will cause us to change lines, stop here\n    if (fetchCaretCoords(textArea, mid - 1).checkLine(mouseY) !== 0) {\n      return mid\n    }\n\n    return binaryCursorSearch(textArea, lower, mid - 1, mouseX, mouseY, iterations + 1)\n  }\n\n  return mid\n}\n\n/**\n * The driver function for the binary search.\n */\nconst findCursorPosition = (textArea: HTMLTextAreaElement, x: number, y: number): number => {\n  const startIndex = 0\n  const endIndex = textArea.value.length\n  const iterations = 0\n  return binaryCursorSearch(textArea, startIndex, endIndex, x, y, iterations)\n}\n\n/**\n * Assigns the final cursor position after finding it\n */\nfunction setCursorPosition(textarea: HTMLTextAreaElement, x: number, y: number) {\n  const newPosition = findCursorPosition(textarea, x, y)\n\n  textarea.setSelectionRange(newPosition, newPosition)\n}\n\n/**\n * Sets the caret in a textarea based on a DragEvent within that textarea.\n * Unfortunately there's no html api to do that directly (x/y -> caret). This function uses an iterative\n * approach to find the caret position from the x/y coordinates of the drag event.\n *\n * Under the hood we use the [textarea-caret npm package](https://www.npmjs.com/package/textarea-caret)\n * to find the x/y coordinates of the caret based on the caret index, and feed those results into a binary search.\n *\n * We use a cache to speed up the search, which is reinitialized when the user drags over the textarea for the first time.\n */\nexport function updateCaret(textArea: HTMLTextAreaElement, dragEvent: DragEvent) {\n  const rect = textArea.getBoundingClientRect()\n  // We want to clear the cache when the user first drags an attachment into the textarea.\n  // It's better to have to recalculate too much than to have a stale cache with wrong results.\n  if (dragEvent.type === 'dragenter') {\n    inputCache.delete(textArea)\n  }\n\n  const x = dragEvent.clientX - rect.left\n  const y = dragEvent.clientY - rect.top + textArea.scrollTop\n  setCursorPosition(textArea, x, y)\n}\n","import {insertText, replaceSelection, replaceText} from '../../text'\nimport {subscribe} from '@github/paste-markdown'\nimport type {Attachment} from '@github/file-attachment-element'\nimport type {ImageDimensions} from '../../image-dimensions'\nimport {getCodeEditor, getReactEditor} from '../../code-editor'\nimport imageDimensions from '../../image-dimensions'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {updateCaret} from './caret-placement'\n\n// This is a map of all the attachments (and their placeholders) that have been succesfully uploaded\nconst uploadedItems: Map<string, string> = new Map()\n\n// In paste-markdown the subscribe function listens for all of paste event handlers and\n// returns an unsubscribe function to remove them from the element.\nobserve('.js-paste-markdown', {\n  initialize(el) {\n    let unsubscribe: () => void\n    const pasteUrlLinksAsPlainText = el.hasAttribute('data-paste-url-links-as-plain-text')\n    return {\n      add() {\n        unsubscribe = subscribe(el as HTMLElement, {\n          defaultPlainTextPaste: {urlLinks: pasteUrlLinksAsPlainText},\n        }).unsubscribe\n      },\n      remove() {\n        unsubscribe()\n      },\n    }\n  },\n})\n\nconst attachmentPlaceholders = new WeakMap<Attachment, string>()\n\n/**\n * Caches the attachment's placeholder text as it was inserted into the `<textarea>` element.\n * This is intended to make removing the placeholder later easier. The sole reason we're doing all\n * of this is because `insertText` sometimes adds a `\\n` before the inserted text, and sometimes doesn't.\n * Rather than adding more logic to figure out what happened, we memoize the result.\n *\n * This is exported so we can use it in testing\n */\nexport function cachePlaceholder(attachment: Attachment, placeholder: string) {\n  attachmentPlaceholders.set(attachment, placeholder)\n}\n\n/**\n *  Gets the cached placeholder for the attachment. Falls back to calculating the replacement text\n *  if there is no entry. The worst case outcome here is that we leave an extra newline character\n *  in the textarea.\n *\n *  This function is only exported for testing purposes\n */\nexport function getPlaceholder(attachment: Attachment): string {\n  return attachmentPlaceholders.get(attachment) || replacementText(attachment)\n}\n\n// Based off `isImage` from @github/file-attachment-element\n// Eventually, we should upstream this\nfunction isVideo(attachment: Attachment): boolean {\n  return ['video/mp4', 'video/quicktime'].includes(attachment.file.type)\n}\n\nfunction parameterizeName(name: string): string {\n  return name\n    .replace(/[[\\]\\\\\"<>&]/g, '.') // Convert unwanted chars to separator\n    .replace(/\\.{2,}/g, '.') // No more than 1 separator in a row\n    .replace(/^\\.|\\.$/gi, '') // Remove leading/trailing separator\n}\n\n// Returns an uploading status message while the file is uploading. The\n// placeholder will be replaced with a URL to the image once the upload\n// is complete.\nfunction placeholderText(attachment: Attachment): string {\n  // Video uploads do not include braces around the text\n  if (isVideo(attachment)) return `\\nUploading ${attachment.file.name}\\n`\n\n  const prefix = attachment.isImage() ? '!' : ''\n  return `${prefix}[Uploading ${attachment.file.name}]()`\n}\n\n// Strips non-word characters from a file name so it's safe to use in a\n// markdown image alt tag without needing to be escaped.\nfunction altText(name: string): string {\n  return parameterizeName(name)\n    .replace(/\\.[^.]+$/, '') // Strip file extension\n    .replace(/\\./g, ' ') // Bring back some white space\n}\n\nconst RETINA_PPI = 72 * 2\n\nfunction disableSubmit(event: CustomEvent & {currentTarget: Element}) {\n  const closestForm = (event.target as HTMLElement).closest('form')\n\n  if (closestForm) {\n    const submitButton = closestForm.querySelector<HTMLButtonElement>('.btn-primary')\n    if (submitButton) {\n      submitButton.disabled = true\n    }\n  }\n}\n\nfunction enableSubmit(event: CustomEvent & {currentTarget: Element}) {\n  const closestForm = (event.target as HTMLElement).closest('form')\n\n  if (closestForm) {\n    const submitButton = closestForm.querySelector<HTMLButtonElement>('.btn-primary')!\n    submitButton.disabled = false\n  }\n}\n\ntype CustomEventPayload = CustomEvent & {currentTarget: Element}\n\n/**\n * This function is only exported to make async testing easier\n */\nexport async function onUploadCompleted(event: CustomEventPayload) {\n  const {attachment} = event.detail\n  const target = event.currentTarget\n  let tagText\n  if (attachment.isImage()) {\n    tagText = await imageTag(attachment)\n  } else if (isVideo(attachment)) {\n    tagText = videoMarkdown(attachment)\n  } else {\n    tagText = mdLink(attachment)\n  }\n  // note at this point event.currentTarget is possibly null\n  // see https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n  setValidityAndLinkText('', tagText, event, target)\n\n  // Checking if there are any pending replacements to be made\n  if (uploadedItems.size > 0) {\n    findAndReplacePlaceholders()\n  }\n}\n\nfunction mdLink(attachment: Attachment): string {\n  return `[${attachment.file.name}](${attachment.href})`\n}\n\nfunction videoMarkdown(attachment: Attachment): string {\n  return `\\n${attachment.href!}\\n`\n}\n\nasync function imageTag(attachment: Attachment): Promise<string> {\n  const dimensions = await imageSize(attachment.file)\n  const alt = altText(attachment.file.name)\n  const src = attachment.href\n  if (dimensions.ppi === RETINA_PPI) {\n    const width = Math.round(dimensions.width / 2)\n    // eslint-disable-next-line github/unescaped-html-literal\n    return `<img width=\"${width}\" alt=\"${alt}\" src=\"${src}\">`\n  }\n  return `![${alt}](${src})`\n}\n\nasync function imageSize(file: File): Promise<ImageDimensions> {\n  const empty = {width: 0, height: 0, ppi: 0}\n  try {\n    return (await imageDimensions(file)) ?? empty\n  } catch {\n    return empty\n  }\n}\n\n/**\n * When swapping out the placeholder for an image or video, we need\n * to remember to get the extra leading newline for video uploads\n */\nfunction replacementText(attachment: Attachment) {\n  const placeholder = placeholderText(attachment)\n  if (isVideo(attachment)) {\n    return `\\n${placeholder}\\n`\n  } else {\n    return `${placeholder}\\n`\n  }\n}\n\n/**\n * Make the textarea valid and remove the placeholder. The submit button will\n * get enabled outside this function.\n */\nfunction removeFailedUpload(event: CustomEventPayload) {\n  const field = event.currentTarget.querySelector<HTMLTextAreaElement>('.js-comment-field')\n  const textToRemove = getPlaceholder(event.detail.attachment)\n  if (field) {\n    // Regular editor\n    field.setCustomValidity('')\n    replaceText(field, textToRemove, '')\n  } else {\n    // CodeMirror (code editor)\n    const editor = getEditor(event.currentTarget)\n\n    if (!editor) return\n\n    const cursor = editor.getSearchCursor(textToRemove)\n    cursor.findNext()\n    cursor.replace('')\n  }\n}\n\n/**\n *  Updates text inserted in editor for dropped assets, be it a regular editor\n *  (textarea) or a code editor (CodeMirror) editing a Markdown file\n *\n *  If validity is 'uploading', inserts \"[Uploading asset-name](...)\" at cursor,\n *  otherwise replace that placeholder with href\n *\n *  target is only required if event.currentTarget is lost (e.g., after await)\n */\n\nfunction setValidityAndLinkText(\n  validity: 'uploading' | '',\n  tagText: string,\n  event: CustomEventPayload,\n  target?: EventTarget & Element,\n) {\n  const field = (target || event.currentTarget).querySelector<HTMLTextAreaElement>('.js-comment-field')!\n  const fileUploadLoadingText = (target || event.currentTarget).querySelector<HTMLSpanElement>(\n    '.js-file-upload-loading-text',\n  )!\n  const placeholder = placeholderText(event.detail.attachment)\n  const {batch} = event.detail\n\n  if (field) {\n    const selectedText = field.value.substring(field.selectionStart, field.selectionEnd)\n    // Regular text editor\n    if (validity === 'uploading') {\n      let insertedPlaceholder\n      if (selectedText.length) {\n        insertedPlaceholder = replaceSelection(field, selectedText, placeholder)\n      } else {\n        insertedPlaceholder = insertText(field, placeholder, {appendNewline: true})\n      }\n      // If things go wrong, the most reliable way we can remove the placeholder\n      // for an attachment is to cache it.  This is mostly so we don't have to\n      // try to figure out if `insertText` added a leading newline into the\n      // textarea\n      attachmentPlaceholders.set(event.detail.attachment, insertedPlaceholder)\n    } else {\n      if (!field.value.includes(placeholder)) {\n        // Adding a mapping from the attachement's placeholder test to the generated tag\n        // Only doing this if the placeholder isn't already in the textarea, because then\n        // it will be replaced with the tag in the normal flow\n        uploadedItems.set(placeholder, tagText)\n      }\n\n      replaceText(field, placeholder, tagText, document.activeElement === field)\n    }\n    batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n  } else {\n    // CodeMirror (code editor)\n    const editor = getEditor(target || event.currentTarget)\n\n    if (editor) {\n      if (validity === 'uploading') {\n        if (editor.getSelection().length) {\n          // replace selected text with placeholder\n          editor.replaceSelection(placeholder)\n        } else {\n          // insert placeholder at cursor\n          const cursor = editor.getCursor()\n          const toReplace = replacementText(event.detail.attachment)\n          editor.replaceRange(toReplace, cursor)\n        }\n      } else {\n        const cursor = editor.getSearchCursor(placeholder)\n        cursor.findNext()\n        cursor.replace(tagText)\n      }\n    }\n\n    batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n  }\n  if (fileUploadLoadingText) {\n    const fileUploadMessage = fileUploadLoadingText.getAttribute('data-file-upload-message')\n    fileUploadLoadingText.textContent = `${fileUploadMessage} (${batch.uploaded() + 1}/${batch.size})`\n  }\n}\n\nfunction getEditor(target: Element) {\n  const reactCodeEditorElement = target.querySelector<HTMLElement>('.js-react-code-editor')\n\n  if (reactCodeEditorElement) {\n    return getReactEditor(reactCodeEditorElement)\n  }\n\n  const codeEditorElement = target.querySelector<HTMLTextAreaElement>('.js-code-editor')\n\n  if (!codeEditorElement) return\n\n  const codeEditor = getCodeEditor(codeEditorElement)\n\n  if (!codeEditor) return\n\n  return codeEditor.editor\n}\n\non('upload:setup', '.js-upload-markdown-image', function (event) {\n  setValidityAndLinkText('uploading', '', event)\n})\n\non('upload:complete', '.js-upload-markdown-image', onUploadCompleted)\n\non('upload:error', '.js-upload-markdown-image', function (event) {\n  removeFailedUpload(event)\n  const {batch} = event.detail\n  batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n})\n\nfunction updateCursor(event: DragEvent) {\n  // The file-attachment-element bubbles up dragover and dragenter events after preventing their default\n  // behavior. We want to manually position the cursor in the textarea so that it reflects where the user\n  // will drop the file.\n  event.stopPropagation()\n\n  const attachmentElement = event.currentTarget as HTMLElement\n\n  if (!attachmentElement) return\n\n  const textArea = attachmentElement.querySelector<HTMLTextAreaElement>('.js-comment-field')\n  if (textArea) {\n    updateCaret(textArea, event)\n  } else {\n    const editor = getEditor(attachmentElement)\n    if (editor) {\n      const c = editor.coordsChar({left: event.pageX, top: event.pageY})\n      editor.setCursor(c)\n      editor.focus()\n    }\n  }\n}\n\n/**\n * This function isn't used in production, it's only for keeping a fast feedback looop in dev/troubleshooting.\n * To use in dev mode, add\n * ```\n * on('click', 'textarea', debugUpdateCaret)\n * ```\n * to this file and uncomment the `console.log`\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst debugUpdateCaret = (event: MouseEvent) => {\n  const textArea = event.currentTarget as HTMLTextAreaElement\n  const rect = textArea.getBoundingClientRect()\n  const x = event.clientX - rect.left\n  const y = event.clientY - rect.top + textArea.scrollTop\n  // eslint-disable-next-line no-console\n  console.log({\n    x,\n    y,\n    cursor: textArea.selectionStart,\n    t: textArea.value.substring(textArea.selectionStart - 10, textArea.selectionStart),\n  })\n  const d = new DragEvent('dragenter', {clientX: event.clientX, clientY: event.clientY})\n  updateCaret(textArea, d)\n}\n\non('dragenter', 'file-attachment', updateCursor)\n\non('dragover', 'file-attachment', updateCursor)\n\non('upload:invalid', '.js-upload-markdown-image', function (event) {\n  removeFailedUpload(event)\n  const {batch} = event.detail\n  batch.isFinished() ? enableSubmit(event) : disableSubmit(event)\n})\n\n// Checks all of the issue form textareas for placeholders that need to be replaced with tags\nfunction findAndReplacePlaceholders() {\n  const textAreas = document.querySelectorAll<HTMLTextAreaElement>('.issue-form-textarea')\n  for (const textArea of textAreas) {\n    for (const [placeholder, tagText] of uploadedItems) {\n      if (!textArea.value.includes(placeholder)) continue\n      replaceText(textArea, placeholder, tagText, document.activeElement === textArea)\n      uploadedItems.delete(placeholder)\n    }\n  }\n}\n","// Commenting: Write and Preview tabs\n//\n// Markup\n//\n//     <form class=\"js-new-comment-form\">\n//       <div class=\"js-previewable-comment-form write-selected\"\n//           data-preview-url=\"/preview\">\n//\n//         <ul>\n//           <li><a href=\"#\" class=\"js-write-tab selected\">Write</a></li>\n//           <li><a href=\"#\" class=\"js-preview-tab\">Preview</a></li>\n//         </ul>\n//\n//         <textarea class=\"js-comment-field\"></textarea>\n//\n//       </div>\n//     </form>\n//\n// TODO: Everything should be using js- prefixed classes\n// TODO: Remove all static copy\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport TabContainerElement from '@github/tab-container-element'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '../../onfocus'\n\n// Finds the CSRF token value in a `js-data-preview-url-csrf` hidden input\n// element in the preview div. If we don't find a token for the preview\n// div, find the CSRF token value in the hidden `authenticity_token` form\n// input to be used in the parent form submission (i.e. the form that this is\n// previewing).\n//\n// Returns the CSRF token String.\nfunction token(container: Element): string {\n  const dataToken = container.querySelector('.js-data-preview-url-csrf')\n  // eslint-disable-next-line github/authenticity-token\n  const formTokenRef = container.closest<HTMLFormElement>('form')!.elements.namedItem('authenticity_token')\n  if (dataToken instanceof HTMLInputElement) {\n    return dataToken.value\n  } else if (formTokenRef instanceof HTMLInputElement) {\n    return formTokenRef.value\n  } else {\n    throw new Error('Comment preview authenticity token not found')\n  }\n}\n\n// Bidirectionally switches between \"Write\" and \"Preview\" tabs.\nfunction activateTab(tab: Element): HTMLElement {\n  const container = tab.closest<HTMLElement>('.js-previewable-comment-form')!\n  const isPreview = tab.classList.contains('js-preview-tab')\n  if (isPreview) {\n    const writeContent = container.querySelector<HTMLElement>('.js-write-bucket')!\n    const previewBody = container.querySelector<HTMLElement>('.js-preview-body')!\n    if (writeContent.clientHeight > 0) {\n      previewBody.style.minHeight = `${writeContent.clientHeight}px`\n    }\n  }\n  container.classList.toggle('preview-selected', isPreview)\n  container.classList.toggle('write-selected', !isPreview)\n  const currentSelectedTabs = container.querySelector<HTMLElement>(\n    '.tabnav-tab.selected, .tabnav-tab[aria-selected=\"true\"]',\n  )!\n  currentSelectedTabs.setAttribute('aria-selected', 'false')\n  currentSelectedTabs.classList.remove('selected')\n  tab.classList.add('selected')\n  tab.setAttribute('aria-selected', 'true')\n  const writeTab = container.querySelector<HTMLElement>('.js-write-tab')!\n  if (isPreview) {\n    // On Apple devices, the Meta (Cmd)+Shift plane is in lower case. So\n    // Cmd+Shift+p is correct, while `Control+P` is also correct.\n    writeTab.setAttribute('data-hotkey', 'Control+P,Meta+Shift+p')\n  } else {\n    writeTab.removeAttribute('data-hotkey')\n  }\n  return container\n}\n\non('click', '.js-write-tab', function (event) {\n  const target = event.currentTarget\n  const commentForm = target.closest<HTMLElement>('.js-previewable-comment-form')!\n  // <tab-container> changes are handled in the `tab-container-change` event handler\n  if (commentForm instanceof TabContainerElement) {\n    setTimeout(() => {\n      commentForm.querySelector<HTMLElement>('.js-comment-field')!.focus()\n    })\n    return\n  }\n\n  const container = activateTab(target)\n  fire(commentForm, 'preview:toggle:off')\n  const pollForm = commentForm.querySelector('.js-discussion-poll-form-component')\n  if (pollForm) {\n    fire(pollForm, 'poll-preview:toggle:off')\n  }\n  setTimeout(() => {\n    container.querySelector<HTMLElement>('.js-comment-field')!.focus()\n  })\n  const toolbar = commentForm.querySelector('markdown-toolbar')\n  if (toolbar instanceof HTMLElement) {\n    toolbar.hidden = false\n  }\n})\n\non('click', '.js-preview-tab', function (event) {\n  const target = event.currentTarget\n  const commentForm = target.closest<HTMLElement>('.js-previewable-comment-form')!\n  // <tab-container> changes are handled in the `tab-container-change` event handler\n  if (commentForm instanceof TabContainerElement) return\n\n  const container = activateTab(target)\n  fire(commentForm, 'preview:toggle:on')\n\n  setTimeout(() => {\n    renderPreview(container)\n  })\n  const toolbar = commentForm.querySelector('markdown-toolbar')\n  if (toolbar instanceof HTMLElement) {\n    toolbar.hidden = true\n  }\n  event.stopPropagation()\n  event.preventDefault()\n})\n\non('tab-container-change', '.js-previewable-comment-form', function (event) {\n  const relatedTarget = event.detail.relatedTarget\n  const isPreviewPanel = relatedTarget && relatedTarget.classList.contains('js-preview-panel')\n  const container = event.currentTarget\n  const writeTab = container.querySelector<HTMLElement>('.js-write-tab')!\n\n  if (isPreviewPanel) {\n    const writeContent = container.querySelector<HTMLElement>('.js-write-bucket')!\n    const previewBody = container.querySelector<HTMLElement>('.js-preview-body')!\n    const skipSizing = previewBody.hasAttribute('data-skip-sizing')\n\n    if (!skipSizing && writeContent.clientHeight > 0) {\n      previewBody.style.minHeight = `${writeContent.clientHeight}px`\n    }\n\n    writeTab.setAttribute('data-hotkey', 'Control+P,Meta+Shift+p')\n    renderPreview(container)\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = true\n    }\n  } else {\n    writeTab.removeAttribute('data-hotkey')\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = false\n    }\n\n    const pollForm = document.querySelector('.js-discussion-poll-form-component')\n    if (pollForm) {\n      fire(pollForm, 'poll-preview:toggle:off')\n    }\n  }\n\n  container.classList.toggle('preview-selected', isPreviewPanel)\n  container.classList.toggle('write-selected', !isPreviewPanel)\n})\n\n// Allow triggering preview rendering from outside code\n// TODO Replace event with exported module function.\non('preview:render', '.js-previewable-comment-form', function (event) {\n  const previewTab = (event.target as Element).querySelector<HTMLElement>('.js-preview-tab')!\n  const container = activateTab(previewTab)\n  setTimeout(() => {\n    renderPreview(container)\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = true\n    }\n  })\n})\n\nfunction previewForm(container: Element): FormData {\n  const text = container.querySelector<HTMLTextAreaElement>('.js-comment-field')!.value\n  const path = container.querySelector<HTMLInputElement>('.js-path')?.value\n  const lineNumber = container.querySelector<HTMLInputElement>('.js-line-number')?.value\n  const startLineNumber = container.querySelector<HTMLInputElement>('.js-start-line-number')?.value\n  const side = container.querySelector<HTMLInputElement>('.js-side')?.value\n  const startSide = container.querySelector<HTMLInputElement>('.js-start-side')?.value\n  const startCommitOid = container.querySelector<HTMLInputElement>('.js-start-commit-oid')?.value\n  const endCommitOid = container.querySelector<HTMLInputElement>('.js-end-commit-oid')?.value\n  const baseCommitOid = container.querySelector<HTMLInputElement>('.js-base-commit-oid')?.value\n  const commentId = container.querySelector<HTMLInputElement>('.js-comment-id')?.value\n\n  const form = new FormData()\n  form.append('text', text)\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token(container))\n  if (path) form.append('path', path)\n  if (lineNumber) form.append('line_number', lineNumber)\n  if (startLineNumber) form.append('start_line_number', startLineNumber)\n  if (side) form.append('side', side)\n  if (startSide) form.append('start_side', startSide)\n  if (startCommitOid) form.append('start_commit_oid', startCommitOid)\n  if (endCommitOid) form.append('end_commit_oid', endCommitOid)\n  if (baseCommitOid) form.append('base_commit_oid', baseCommitOid)\n  if (commentId) form.append('comment_id', commentId)\n  return form\n}\n\nfunction fetchPreview(container: Element): Promise<string> {\n  const url = container.getAttribute('data-preview-url')!\n  const data = previewForm(container)\n  fire(container, 'preview:setup', {data})\n  return cachedFetch(url, data)\n}\n\nconst cachedFetch = memoize(uncachedFetch, {hash})\nlet previousController: AbortController | null = null\nasync function uncachedFetch(url: string, body: FormData): Promise<string> {\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  const response = await fetch(url, {method: 'post', body, signal})\n  if (!response.ok) throw new Error('something went wrong')\n  return response.text()\n}\n\nfunction hash(url: string, body: FormData): string {\n  const params = [...body.entries()].toString()\n  return `${url}:${params}`\n}\n\nasync function renderPreview(container: Element) {\n  const commentBody = container.querySelector<HTMLElement>('.comment-body')!\n\n  // eslint-disable-next-line github/unescaped-html-literal\n  commentBody.innerHTML = '<p>Loading preview&hellip;</p>'\n  try {\n    const html = await fetchPreview(container)\n    // eslint-disable-next-line github/unescaped-html-literal\n    commentBody.innerHTML = html || '<p>Nothing to preview</p>'\n    // Alert listeners that content has been fetched and written to the dom\n    fire(container, 'preview:rendered')\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.name !== 'AbortError') {\n      // eslint-disable-next-line github/unescaped-html-literal\n      commentBody.innerHTML = '<p>Error rendering preview</p>'\n    }\n  }\n}\n\nobserve('.js-preview-tab', function (tab) {\n  tab.addEventListener('mouseenter', async () => {\n    const container = tab.closest<HTMLElement>('.js-previewable-comment-form')!\n    try {\n      await fetchPreview(container)\n    } catch (error) {\n      // Ignore fetch errors on silent prefetch\n    }\n  })\n})\n\nonKey('keydown', '.js-comment-field', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  const field = event.target as HTMLInputElement\n\n  // On Apple devices, the Meta (Cmd)+Shift plane is in lower case. So\n  // normalising the key toUpperCase is necessary\n  if ((event.ctrlKey || event.metaKey) && event.shiftKey && event.key.toUpperCase() === 'P') {\n    const container = field.closest<HTMLElement>('.js-previewable-comment-form')!\n    if (container.classList.contains('write-selected')) {\n      if (container instanceof TabContainerElement) {\n        container.querySelector<HTMLElement>('.js-preview-tab')!.click()\n      } else {\n        // eslint-disable-next-line github/no-blur\n        field.blur()\n        container.dispatchEvent(\n          new CustomEvent('preview:render', {\n            bubbles: true,\n            cancelable: false,\n          }),\n        )\n      }\n      event.preventDefault()\n      event.stopImmediatePropagation()\n    }\n  }\n  /* eslint-enable no-restricted-syntax */\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onKey} from '../../onfocus'\n\n// This regex matches a comment containing only \"-1\", \"+1\", \":-\", \":-1\", \":+\", or \":+1\"\nconst plusOneMarker = /^(\\+1|-1|:\\+1?|:-1?)$/\n\n// Checks to see if a comment is a reaction like comment.\nconst isReactionLikeComment = (text: string): boolean => {\n  let matched = false\n  for (const line of text.split('\\n')) {\n    const l = line.trim()\n    if (!l || l.startsWith('>')) continue\n    // If a line has matched previously, but this one doesnt,\n    // it means the line has more than just a reaction - so return false\n    if (matched && plusOneMarker.test(l) === false) {\n      return false\n    }\n    if (!matched && plusOneMarker.test(l)) {\n      matched = true\n    }\n  }\n  return matched\n}\n\non('focusout', '#new_comment_field', function (event) {\n  const newCommentTextField = event.currentTarget\n\n  const suggestion = newCommentTextField.closest('.js-reaction-suggestion')\n  if (suggestion) {\n    clearReactionSuggestion(suggestion)\n  }\n})\n\non('focusin', '#new_comment_field', function (event) {\n  toggleReactionSuggestion(event)\n})\n\nonKey('keyup', '#new_comment_field', function (event) {\n  toggleReactionSuggestion(event)\n})\n\n// Toggle reaction suggestion.\nfunction toggleReactionSuggestion(event: Event) {\n  const eventTarget = event.target as HTMLTextAreaElement\n\n  const text = eventTarget.value\n  const reactionSuggestion = eventTarget.closest('.js-reaction-suggestion')\n\n  if (!reactionSuggestion) {\n    return\n  }\n\n  if (isReactionLikeComment(text)) {\n    reactionSuggestion.classList.remove('hide-reaction-suggestion')\n    reactionSuggestion.classList.add('reaction-suggestion')\n    const suggestionText = reactionSuggestion.getAttribute('data-reaction-markup')!\n    reactionSuggestion.setAttribute('data-reaction-suggestion-message', suggestionText)\n  } else {\n    clearReactionSuggestion(reactionSuggestion)\n  }\n}\n\n// Clear reaction suggestion.\nfunction clearReactionSuggestion(reactionSuggestion: Element) {\n  reactionSuggestion.classList.remove('reaction-suggestion')\n  reactionSuggestion.classList.add('hide-reaction-suggestion')\n  reactionSuggestion.removeAttribute('data-reaction-suggestion-message')\n}\n","import {isShortcutAllowed} from './keyboard-shortcuts-helper'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Support 'c' key to open commits too\non('navigation:keydown', '.js-commits-list-item', function (event) {\n  if (!isShortcutAllowed(event.detail.originalEvent)) return\n\n  if (!(event.target instanceof Element)) return\n  if (event.detail.hotkey === 'c') {\n    event.target.querySelector<HTMLElement>('.js-navigation-open')!.click()\n  }\n})\n","import {onInput} from '../onfocus'\n\nonInput('.js-company-name-input', function (event) {\n  const field = event.target as HTMLInputElement\n\n  const form = field.form!\n\n  const corpTOSLink = form.querySelector('.js-corp-tos-link')\n  const regTOSLink = form.querySelector('.js-tos-link')\n\n  if (regTOSLink) {\n    // TODO Replace with hidden attribute so aria-hidden is not required.\n    /* eslint-disable-next-line github/no-d-none */\n    regTOSLink.classList.add('d-none')\n    regTOSLink.setAttribute('aria-hidden', 'true')\n\n    if (corpTOSLink) {\n      // TODO Replace with hidden attribute so aria-hidden is not required.\n      /* eslint-disable-next-line github/no-d-none */\n      corpTOSLink.classList.remove('d-none')\n      corpTOSLink.setAttribute('aria-hidden', 'false')\n    }\n  }\n\n  const hints = form.querySelectorAll('.js-company-name-text')\n  if (hints.length === 0) {\n    return\n  }\n\n  for (const hint of hints) {\n    if (field.value) {\n      const hasWording = hint.hasAttribute('data-wording')\n\n      if (hasWording) {\n        const wording = hint.getAttribute('data-wording')!\n        hint.textContent = ` ${wording} ${field.value}`\n      } else {\n        hint.textContent = field.value\n      }\n    } else {\n      hint.textContent = ''\n    }\n  }\n})\n","import {changeValue} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Update the TOS statement with company name\n//   e.g. By clicking on \"Create an organization\" below, you are agreeing to the Terms of Service and the Privacy Policy on behalf of your company, GitHub, Inc.\nobserve('.js-company-owned:not(:checked)', {\n  constructor: HTMLInputElement,\n  add(el) {\n    const form = el.form!\n    const input = form.querySelector<HTMLInputElement>('.js-company-name-input')!\n    const hint = document.querySelector<HTMLElement>('.js-company-name-text')!\n    const corpTOSLink = document.querySelector<HTMLElement>('.js-corp-tos-link')!\n    const regTOSLink = document.querySelector<HTMLElement>('.js-tos-link')!\n\n    if (input) {\n      if (el.getAttribute('data-optional')) {\n        input.removeAttribute('required')\n      }\n      changeValue(input, '')\n    }\n\n    // TODO Replace with hidden attribute so aria-hidden is not required.\n    /* eslint-disable-next-line github/no-d-none */\n    regTOSLink.classList.remove('d-none')\n    regTOSLink.setAttribute('aria-hidden', 'false')\n    /* eslint-disable-next-line github/no-d-none */\n    corpTOSLink.classList.add('d-none')\n    corpTOSLink.setAttribute('aria-hidden', 'true')\n\n    if (hint) {\n      hint.textContent = ''\n    }\n  },\n})\n\nobserve('.js-company-owned:checked', {\n  constructor: HTMLInputElement,\n  add(el) {\n    const form = el.form!\n    const input = form.querySelector('.js-company-name-input')\n\n    if (input) {\n      input.setAttribute('required', '')\n      fire(input, 'focus')\n      fire(input, 'input')\n    }\n  },\n})\n\n// Make the CorpTOS the default on the \"Business Plus\" AKA Business plan\n// TODO Replace with delegated-events\nobserve('.js-company-owned-autoselect', {\n  constructor: HTMLInputElement,\n  add(field) {\n    const planChoice = field\n\n    function autoselect() {\n      if (planChoice.checked && planChoice.form) {\n        const corpTos = planChoice.form.querySelector<HTMLInputElement>('.js-company-owned')!\n        changeValue(corpTos, true)\n      }\n    }\n\n    planChoice.addEventListener('change', autoselect)\n    autoselect()\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type IncludeFragmentElement from '@github/include-fragment-element'\nimport RemoteInputElement from '@github/remote-input-element'\nimport {fromEvent} from '@github-ui/subscription'\nimport {microtask} from '@github-ui/eventloop-tasks'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '../onfocus'\n\n// Match deprecated .js-select-menu state classes.\nobserve('details.select-menu details-menu include-fragment', function (el) {\n  const details = el.closest('details')\n  if (!details) return\n  el.addEventListener('loadstart', function () {\n    details.classList.add('is-loading')\n    details.classList.remove('has-error')\n  })\n  el.addEventListener('error', function () {\n    details.classList.add('has-error')\n  })\n  el.addEventListener('loadend', function () {\n    details.classList.remove('is-loading')\n    const filter = details.querySelector('.js-filterable-field')\n    if (filter) fire(filter, 'filterable:change')\n  })\n})\n\n// Clear filter when menu closes.\nobserve('details details-menu .js-filterable-field', {\n  constructor: HTMLInputElement,\n  add(filter) {\n    const details = filter.closest<HTMLElement>('details')!\n    details.addEventListener('toggle', function () {\n      if (!details.hasAttribute('open')) {\n        filter.value = ''\n        fire(filter, 'filterable:change')\n      }\n    })\n  },\n})\n\n// Temporary fix for role=menu containing input\nobserve('details-menu[role=menu] [role=menu]', el => {\n  const menu = el.closest('details-menu[role]')\n  if (menu && menu !== el) menu.removeAttribute('role')\n})\n\n// Clear filter when menu closes.\nobserve('details details-menu remote-input input', {\n  constructor: HTMLInputElement,\n  add(filter) {\n    const details = filter.closest<HTMLElement>('details')!\n    details.addEventListener('toggle', function () {\n      if (!details.hasAttribute('open')) {\n        filter.value = ''\n      }\n    })\n  },\n})\n\n// On form reset fire change on input so details-menu can apply state changes.\nobserve('form details-menu', menu => {\n  const form = menu.closest<HTMLElement>('form')!\n  form.addEventListener('reset', () => {\n    setTimeout(() => resetMenus(form), 0)\n  })\n})\n\n// Re-fires the `change` event for checked radios in a details-menu form.\nfunction resetMenus(form: Element) {\n  const inputs = form.querySelectorAll('details-menu [role=menuitemradio] input[type=radio]:checked')\n  for (const input of inputs) {\n    fire(input, 'change')\n  }\n}\n\n/**\n * Auto trigger the first item on Enter when filterable field is focused.\n */\nonKey('keypress', 'details-menu .js-filterable-field, details-menu filter-input input', (event: KeyboardEvent) => {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  if (event.key === 'Enter') {\n    const input = event.currentTarget\n    const menu = (input as HTMLInputElement).closest<HTMLElement>('details-menu')!\n    const firstItem = menu.querySelector('[role^=\"menuitem\"]:not([hidden])')\n    if (firstItem instanceof HTMLElement && !firstItem.classList.contains('select-menu-clear-item')) firstItem.click()\n    event.preventDefault()\n  }\n  /* eslint-enable no-restricted-syntax */\n})\n\n// Focus filterable field after selecting an item\non(\n  'details-menu-selected',\n  'details-menu',\n  event => {\n    const menu = event.currentTarget\n\n    const filterableField = (menu as HTMLElement).querySelector('.js-filterable-field')\n    if (filterableField instanceof HTMLInputElement && filterableField.value) filterableField.focus()\n  },\n  {capture: true},\n)\n\n// On selection, sync selectedItem.value to input[id=data-menu-input]\non(\n  'details-menu-selected',\n  '[data-menu-input]',\n  event => {\n    if (!(event.target instanceof Element)) return\n    const id = event.target.getAttribute('data-menu-input')!\n    const el = document.getElementById(id)\n    if (!(el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement)) return\n    el.value = ((event as CustomEvent).detail.relatedTarget as HTMLButtonElement).value\n  },\n  {capture: true},\n)\n\n// Restore focus on the previously focused element after results have been updated\n// Otherwise return focus to input\nobserve('details-menu remote-input', {\n  constructor: RemoteInputElement,\n  initialize(el) {\n    const resultsContainer = document.getElementById(el.getAttribute('aria-owns') || '')\n    if (!resultsContainer) return\n\n    let activeElementId: string | null = null\n    el.addEventListener('load', () => {\n      if (document.activeElement && resultsContainer.contains(document.activeElement) && document.activeElement.id) {\n        activeElementId = document.activeElement.id\n      } else {\n        activeElementId = null\n      }\n    })\n\n    el.addEventListener('loadend', () => {\n      if (activeElementId) {\n        const focusEl =\n          resultsContainer.querySelector(`#${activeElementId}`) || resultsContainer.querySelector('[role^=\"menu\"]')\n        if (focusEl instanceof HTMLElement) {\n          focusEl.focus()\n        } else if (el.input) {\n          el.input.focus()\n        }\n      }\n    })\n  },\n})\n\non(\n  'details-menu-selected',\n  'details-menu[data-menu-max-options]',\n  event => {\n    const max = +event.currentTarget.getAttribute('data-menu-max-options')!\n    const checkedItems = event.currentTarget.querySelectorAll('[role=\"menuitemcheckbox\"][aria-checked=\"true\"]')\n    const atLimit = max === checkedItems.length\n    event.currentTarget.querySelector<HTMLElement>('[data-menu-max-options-warning]')!.hidden = !atLimit\n    for (const item of event.currentTarget.querySelectorAll<HTMLInputElement>('[role=\"menuitemcheckbox\"] input')) {\n      item.disabled = atLimit && !item.checked\n    }\n  },\n  {capture: true},\n)\n\n// Make js-select-menu & navigation behaviors work with detail select menus\nobserve('details > details-menu', {\n  subscribe(el) {\n    const details = el.closest<HTMLElement>('details')!\n    return fromEvent(details, 'toggle', fireMenuToggleEvent)\n  },\n})\n\n// Fire a menu:[de]activate[d] event depending on the state of the menu.\nasync function fireMenuToggleEvent({currentTarget}: Event) {\n  const details = currentTarget as HTMLElement\n  const isOpen = details.hasAttribute('open')\n\n  if (isOpen) {\n    const filterableField = details.querySelector('.js-filterable-field')\n    if (filterableField instanceof HTMLInputElement) filterableField.focus()\n  }\n\n  fire(details, isOpen ? 'menu:activate' : 'menu:deactivate')\n  await microtask()\n  fire(details, isOpen ? 'menu:activated' : 'menu:deactivated')\n}\n\nobserve('details > details-menu[preload]:not([src])', {\n  subscribe(el) {\n    return fromEvent(el.parentElement!, 'mouseover', function (event) {\n      const menu = event.currentTarget as HTMLElement\n      const loader = menu.querySelector<IncludeFragmentElement>('include-fragment[src]')\n      loader?.load()\n    })\n  },\n})\n","// Behaviors complementing dialogs\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Eagerly load an <include-fragment> inside a <modal-dialog> when a user hovers on the button to click it\nobserve('button[data-show-dialog-id]', button => {\n  button?.addEventListener('mouseenter', () => {\n    const id = button.getAttribute('data-show-dialog-id')\n    const dialog = button.ownerDocument.getElementById(id!)\n    dialog?.querySelector('include-fragment[loading=lazy]')?.setAttribute('loading', 'eager')\n  })\n})\n","// Disable\n//\n// Disables clicked buttons with text in `data-disable-with`.\n//\n// `<input type=submit>` or `<button type=submit>`\n//\n// `data-disable-with` - Message to set `<input>` value or `<button>` innerHTML to.\n//\n//     <input type=\"submit\" data-disable-with=\"Submitting...\">\n\nimport {afterRemote} from '@github/remote-form'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst originalText = new WeakMap()\nconst selector = ['input[type=submit][data-disable-with]', 'button[data-disable-with]'].join(', ')\n\n// Get button text.\nfunction getButtonText(el: Element) {\n  if (el instanceof HTMLInputElement) {\n    return el.value || 'Submit'\n  } else {\n    return el.innerHTML || ''\n  }\n}\n\n// Sets a button text.\nfunction setButtonText(el: Element, text: string) {\n  if (el instanceof HTMLInputElement) {\n    el.value = text\n  } else {\n    el.innerHTML = text\n  }\n}\n\non(\n  'submit',\n  'form',\n  function (event) {\n    for (const button of event.currentTarget.querySelectorAll(selector)) {\n      originalText.set(button, getButtonText(button))\n      const disabledText = button.getAttribute('data-disable-with')\n      if (disabledText) {\n        setButtonText(button, disabledText)\n      }\n      ;(button as HTMLInputElement | HTMLButtonElement).disabled = true\n    }\n  },\n  {capture: true},\n)\n\n// Revert a form to it's previous state.\nfunction revert(form: HTMLFormElement) {\n  for (const button of form.querySelectorAll(selector)) {\n    const text = originalText.get(button)\n    if (text != null) {\n      setButtonText(button, text)\n      // Button doesn't have a `data-disable-invalid` property or form is valid\n      if (!button.hasAttribute('data-disable-invalid') || form.checkValidity()) {\n        // Enable the button\n        ;(button as HTMLInputElement | HTMLButtonElement).disabled = false\n      }\n      originalText.delete(button)\n    }\n  }\n}\n\n// Enable controls when AJAX request finishes\non('deprecatedAjaxComplete', 'form', function ({currentTarget, target}) {\n  if (currentTarget === target) {\n    revert(currentTarget as HTMLFormElement)\n  }\n})\n\nafterRemote(revert)\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-feature-preview-indicator-container', container => {\n  fetchFeaturePreviewIndicator(container)\n})\n\ntype FeatureResponse = {\n  show_indicator: boolean\n}\n\n// Load the indicator status and update any indicators on the page.\nasync function fetchFeaturePreviewIndicator(container: Element) {\n  const url = container.getAttribute('data-feature-preview-indicator-src')!\n  const show = await fetchIndicator(url)\n  const indicators = container.querySelectorAll<HTMLElement>('.js-feature-preview-indicator')\n  for (const indicator of indicators) {\n    indicator.hidden = !show\n  }\n}\n\nasync function fetchIndicator(url: string): Promise<boolean> {\n  try {\n    const response = await fetch(url, {headers: {Accept: 'application/json'}})\n    if (!response.ok) return false\n    const json = (await response.json()) as FeatureResponse\n    return json.show_indicator\n  } catch {\n    return false\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {dialog} from '../details-dialog'\nimport {fetchSafeDocumentFragment} from '../fetch'\nimport {remoteForm} from '@github/remote-form'\nimport {sendStats} from '@github-ui/stats'\n\n/*\n  Opens the feature preview dialog to a given feature specified by it's slug\n\n  <button data-feature-preview-trigger-url=\"<%= feature_previews_path(user_id: login, selected_slug: \"my_feature\") %>\">\n    Opt in to the feature preview for My Feature\n  </button>\n\n  You can react to a feature being enrolled/unenrolled by the user with these events:\n\n  - `feature-preview-enroll:my_feature`\n  - `feature-preview-unenroll:my_feature`\n\n  e.g.\n\n  document.addEventListener('feature-preview-enroll:my_feature', () => {\n    optInButton.hidden = true\n    optOutButton.hidden = false\n  })\n\n  document.addEventListener('feature-preview-unenroll:my_feature', () => {\n    optInButton.hidden = false\n    optOutButton.hidden = true\n  })\n*/\n\non('click', '[data-feature-preview-trigger-url]', async event => {\n  const trigger = event.currentTarget\n  const url = trigger.getAttribute('data-feature-preview-trigger-url')!\n\n  const newDialog = await dialog({\n    content: fetchSafeDocumentFragment(document, url),\n    dialogClass: 'feature-preview-dialog',\n  })\n\n  const closeDetails = trigger.getAttribute('data-feature-preview-close-details')!\n  const closeHmac = trigger.getAttribute('data-feature-preview-close-hmac')!\n\n  newDialog.addEventListener('dialog:remove', () => {\n    sendStats({hydroEventPayload: closeDetails, hydroEventHmac: closeHmac}, true)\n  })\n\n  const indicators = document.querySelectorAll<HTMLElement>('.js-feature-preview-indicator')\n  for (const indicator of indicators) {\n    indicator.hidden = true\n  }\n})\n\nremoteForm('.js-feature-preview-unenroll', async (form, wants) => {\n  await wants.text()\n  const feature = form.querySelector<HTMLInputElement>('.js-feature-preview-slug')!.value\n  fire(form, `feature-preview-unenroll:${feature}`)\n})\n\nremoteForm('.js-feature-preview-enroll', async (form, wants) => {\n  await wants.text()\n  const feature = form.querySelector<HTMLInputElement>('.js-feature-preview-slug')!.value\n  fire(form, `feature-preview-enroll:${feature}`)\n})\n","import type {Attachment} from '@github/file-attachment-element'\nimport {sendStats} from '@github-ui/stats'\n\nexport type UploadError = {\n  status: number\n  body: string\n}\n\n// 204 No Content\ntype S3ResponseData = Record<string, unknown>\n\n// 201 Created\ntype EnterpriseResponseData = {\n  id: number\n  href: string\n}\n\ntype UploadResponseData = EnterpriseResponseData | S3ResponseData\n\ntype S3UploadPolicy = {\n  asset_upload_url: string\n  asset_upload_authenticity_token: string\n  upload_authenticity_token: string\n  upload_url: string\n  form: Record<string, string>\n  header: Record<string, string>\n  same_origin: boolean\n  asset: {\n    id: number\n    href: string\n    name: string\n  }\n}\n\ntype EnterpriseUploadPolicy = {\n  upload_authenticity_token: string\n  upload_url: string\n  form: {[key: string]: string}\n  header: Record<string, string>\n  same_origin: boolean\n  asset: {\n    name: string\n  }\n}\n\nexport type UploadPolicyData = S3UploadPolicy | EnterpriseUploadPolicy\n\nexport type AttachmentUploadDelegate = {\n  attachmentUploadDidStart(attachment: Attachment, policy: UploadPolicyData): void\n  attachmentUploadDidProgress(attachment: Attachment, percent: number): void\n  attachmentUploadDidComplete(attachment: Attachment, policy: UploadPolicyData, data: UploadResponseData): void\n  attachmentUploadDidError(attachment: Attachment, error: UploadError): void\n}\n\nexport default class AttachmentUpload {\n  attachment: Attachment\n  policy: UploadPolicyData\n\n  constructor(attachment: Attachment, policy: UploadPolicyData) {\n    this.attachment = attachment\n    this.policy = policy\n  }\n\n  async process(delegate: AttachmentUploadDelegate): Promise<void> {\n    const startTime = window.performance.now()\n    const headers = new Headers(this.policy.header || {})\n\n    const xhr = new XMLHttpRequest()\n    xhr.open('POST', this.policy.upload_url, true)\n\n    for (const [key, value] of headers) {\n      xhr.setRequestHeader(key, value)\n    }\n\n    xhr.onloadstart = () => {\n      delegate.attachmentUploadDidStart(this.attachment, this.policy)\n    }\n\n    xhr.upload.onprogress = e => {\n      if (e.lengthComputable) {\n        const percent = Math.round((e.loaded / e.total) * 100)\n        delegate.attachmentUploadDidProgress(this.attachment, percent)\n      }\n    }\n\n    await send(xhr, uploadForm(this.attachment, this.policy))\n\n    if (xhr.status === 204) {\n      markComplete(this.policy)\n      delegate.attachmentUploadDidComplete(this.attachment, this.policy, {})\n    } else if (xhr.status === 201) {\n      markComplete(this.policy)\n      delegate.attachmentUploadDidComplete(this.attachment, this.policy, JSON.parse(xhr.responseText))\n    } else {\n      delegate.attachmentUploadDidError(this.attachment, {status: xhr.status, body: xhr.responseText})\n    }\n\n    const endTime = window.performance.now()\n    const timeDiff = endTime - startTime\n    const uploadTiming: PlatformBrowserPerformanceUploadTiming = {\n      duration: timeDiff,\n      size: this.attachment?.file?.size,\n      fileType: this.attachment?.file?.type,\n      success: xhr.status === 204 || xhr.status === 201,\n    }\n    sendStats({uploadTiming}, true)\n  }\n}\n\nfunction send(xhr: XMLHttpRequest, body: FormData): Promise<XMLHttpRequest> {\n  return new Promise((resolve, reject) => {\n    xhr.onload = () => resolve(xhr)\n    xhr.onerror = reject\n    xhr.send(body)\n  })\n}\n\nfunction uploadForm(attachment: Attachment, policy: UploadPolicyData): FormData {\n  const form = new FormData()\n  if (policy.same_origin) {\n    // eslint-disable-next-line github/authenticity-token\n    form.append('authenticity_token', policy.upload_authenticity_token)\n  }\n  for (const key in policy.form) {\n    form.append(key, policy.form[key]!)\n  }\n  form.append('file', attachment.file)\n  return form\n}\n\nfunction markComplete(policy: UploadPolicyData) {\n  /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n  // @ts-ignore\n  const url = typeof policy.asset_upload_url === 'string' ? policy.asset_upload_url : null\n  const token =\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore\n    typeof policy.asset_upload_authenticity_token == 'string' ? policy.asset_upload_authenticity_token : null\n\n  if (!(url && token)) return\n\n  const form = new FormData()\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token)\n\n  fetch(url, {\n    method: 'PUT',\n    body: form,\n    credentials: 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n","import type {Attachment, default as FileAttachmentElement} from '@github/file-attachment-element'\nimport type {AttachmentUploadDelegate, UploadError, UploadPolicyData} from './attachment-upload'\n\nimport AttachmentUpload from './attachment-upload'\nimport type Batch from './batch'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n\nexport async function upload(batch: Batch, container: FileAttachmentElement) {\n  const delegate = createDelegate(batch, container)\n  for (const attachment of batch.attachments) {\n    const policy = await validate(batch, attachment, container)\n    if (!policy) return\n    try {\n      const uploader = new AttachmentUpload(attachment, policy)\n      await uploader.process(delegate)\n    } catch {\n      batch.setAttachmentAsFailed(attachment)\n      fire(container, 'upload:error', {batch, attachment})\n      resetState(container, 'is-failed')\n      return\n    }\n  }\n}\n\nasync function validate(batch: Batch, attachment: Attachment, container: Element): Promise<UploadPolicyData | null> {\n  const form = policyForm(attachment, container)\n  const preprocess: Array<Promise<unknown>> = []\n  fire(container, 'upload:setup', {batch, attachment, form, preprocess})\n\n  try {\n    await Promise.all(preprocess)\n    const response = await fetch(policyRequest(form, container))\n    if (response.ok) {\n      return await response.json()\n    }\n    batch.setAttachmentAsFailed(attachment)\n    fire(container, 'upload:invalid', {batch, attachment})\n    const body = await response.text()\n    const status = response.status\n    const {state, messaging} = policyErrorState({status, body}, attachment.file)\n    resetState(container, state, messaging)\n  } catch {\n    batch.setAttachmentAsFailed(attachment)\n    fire(container, 'upload:invalid', {batch, attachment})\n    resetState(container, 'is-failed')\n  }\n  return null\n}\n\nfunction policyForm(attachment: Attachment, container: Element): FormData {\n  const token = container.querySelector<HTMLInputElement>('.js-data-upload-policy-url-csrf')!.value\n  const repoId = container.getAttribute('data-upload-repository-id')\n  const subjectType = container.getAttribute('data-subject-type')\n  const subject = container.getAttribute('data-subject-param')\n  const file = attachment.file\n\n  const form = new FormData()\n  form.append('name', file.name)\n  form.append('size', String(file.size))\n  form.append('content_type', file.type)\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token)\n  if (subjectType) form.append('subject_type', subjectType)\n  if (subject) form.append('subject', subject)\n  if (repoId) {\n    form.append('repository_id', repoId)\n  }\n  if (attachment.directory) {\n    form.append('directory', attachment.directory)\n  }\n\n  return form\n}\n\nfunction policyRequest(form: FormData, container: Element): Request {\n  return new Request(container.getAttribute('data-upload-policy-url')!, {\n    method: 'POST',\n    body: form,\n    credentials: 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n\nfunction createDelegate(batch: Batch, container: Element): AttachmentUploadDelegate {\n  return {\n    attachmentUploadDidStart(attachment, policy) {\n      attachment.saving(0)\n      resetState(container, 'is-uploading')\n      fire(container, 'upload:start', {batch, attachment, policy})\n    },\n    attachmentUploadDidProgress(attachment, percent) {\n      attachment.saving(percent)\n      fire(container, 'upload:progress', {batch, attachment})\n    },\n    attachmentUploadDidComplete(attachment, policy, result) {\n      attachment.saved(savedAttributes(result, policy))\n      fire(container, 'upload:complete', {batch, attachment})\n      if (batch.isFinished()) {\n        resetState(container, 'is-default')\n      }\n    },\n    attachmentUploadDidError(attachment, response) {\n      batch.setAttachmentAsFailed(attachment)\n      fire(container, 'upload:error', {batch, attachment})\n      const {state} = policyErrorState(response)\n      resetState(container, state)\n    },\n  }\n}\n\n// Extracts the uploaded attachment's attributes that reference the stored\n// file on the server. These can come from the upload response in the case of\n// our Enterprise Alambic file server or from the initial policy creation,\n// prior to file upload, in the case of Amazon S3 used by github.com.\nfunction savedAttributes(\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  result: any,\n  policy: UploadPolicyData,\n): {id: string | null; href: string | null; name: string | null} {\n  const id =\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore\n    (result.id == null ? null : String(result.id)) || (policy.asset.id == null ? null : String(policy.asset.id))\n  const href =\n    (typeof result.href === 'string' ? result.href : null) ||\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore\n    (typeof policy.asset.href === 'string' ? policy.asset.href : null)\n  return {id, href, name: policy.asset.name}\n}\n\ntype PolicyErrorMessaging = {\n  message: string\n  target: string\n}\n\ntype PolicyErrorState = {\n  state: string\n  messaging?: PolicyErrorMessaging\n}\n\n// Create a CSS class name that matches the errors coming from the policy\n// POST. The /upload/policies/* resource returns a 422 response with a JSON\n// body describing why the policy is invalid.\nfunction policyErrorState(response: UploadError, file?: File): PolicyErrorState {\n  // Amazon S3 error.\n  if (response.status === 400) {\n    return {state: 'is-bad-file'}\n  }\n\n  if (response.status !== 422) {\n    return {state: 'is-failed'}\n  }\n\n  const hash = JSON.parse(response.body)\n\n  // If we have the expected JSON response with errors key, try to find the right\n  // error message. If there's a server-side error or user got logged out, we\n  // won't have hash.errors, so skip this and return generic failure message.\n  if (!hash || !hash.errors) {\n    return {state: 'is-failed'}\n  }\n\n  for (const error of hash.errors) {\n    switch (error.field) {\n      case 'size': {\n        const size = file ? file.size : null\n        if (size != null && size === 0) {\n          return {state: 'is-empty'}\n        }\n        return {\n          state: 'is-too-big',\n          messaging: {\n            message: trimSizeErrorMessage(error.message),\n            target: '.js-upload-too-big',\n          },\n        }\n      }\n      case 'file_count':\n        return {state: 'is-too-many'}\n      case 'width':\n      case 'height':\n        return {state: 'is-bad-dimensions'}\n      case 'name':\n        if (error.code === 'already_exists') {\n          return {state: 'is-duplicate-filename'}\n        }\n        return {state: 'is-bad-file'}\n      case 'content_type':\n        return {state: 'is-bad-file'}\n      case 'uploader_id':\n        return {state: 'is-bad-permissions'}\n      case 'repository_id':\n        return {state: 'is-repository-required'}\n      case 'format':\n        return {state: 'is-bad-format'}\n    }\n  }\n  return {state: 'is-failed'}\n}\n\n/**\nDue to limitations on the server, size errors may be returned with the string\n'size ' prepended on the error message we want from the server. If the message\nstarts with `size` then chop it off with its leading space and return the error\nwe want from the server.\n\nExamples:\n\n'size Yowza that's a big file' => 'Yowza that's a big file'\n'Yowza that's a big file' => 'Yowza that's a big file'\n */\nconst trimSizeErrorMessage = (message: string) => {\n  return message.startsWith('size') ? message.substring(5) : message\n}\n\nconst possibleStates = [\n  'is-default',\n  'is-uploading',\n  'is-bad-file',\n  'is-duplicate-filename',\n  'is-too-big',\n  'is-too-many',\n  'is-hidden-file',\n  'is-failed',\n  'is-bad-dimensions',\n  'is-empty',\n  'is-bad-permissions',\n  'is-repository-required',\n  'is-bad-format',\n]\n\nexport function resetState(container: Element, state: string, messaging?: PolicyErrorMessaging) {\n  if (messaging) {\n    const {message, target} = messaging\n    const el = container.querySelector(target)\n    if (el) el.innerHTML = message\n  }\n  container.classList.remove(...possibleStates)\n  container.classList.add(state)\n}\n","import type {Attachment} from '@github/file-attachment-element'\n\n// A collection of files to be uploaded together. A batch reports progress of\n// the collection rather than each individual file.\nexport default class Batch {\n  attachments: Attachment[]\n  size: number\n  total: number\n  failedAttachments: Attachment[]\n\n  constructor(attachments: Attachment[]) {\n    this.attachments = attachments\n    this.failedAttachments = []\n\n    // How many total files to upload.\n    this.size = this.attachments.length\n\n    // How many total bytes to upload.\n    this.total = sum(this.attachments, a => a.file.size)\n  }\n\n  // The completion percentage of the batch as a whole.\n  //\n  // Returns a Number between 0 and 100.\n  percent(): number {\n    const bytes = (a: Attachment) => (a.file.size * a.percent) / 100\n    const total = sum(this.attachments, bytes)\n    return Math.round((total / this.total) * 100)\n  }\n\n  uploaded(): number {\n    const value = (a: Attachment) => (a.isSaved() ? 1 : 0)\n    return sum(this.attachments, value)\n  }\n\n  // The completion state of the batch.\n  //\n  // Returns true when all files have been uploaded.\n  isFinished(): boolean {\n    return this.attachments.every(attachment => this.failedAttachments.includes(attachment) || attachment.isSaved())\n  }\n\n  // Mark an attachment as failed in this batch\n  setAttachmentAsFailed(attachment: Attachment) {\n    if (this.attachments.includes(attachment) && !this.failedAttachments.includes(attachment)) {\n      this.failedAttachments.push(attachment)\n    }\n  }\n}\n\nfunction sum<T>(items: T[], map: (item: T) => number): number {\n  return items.reduce((total, item) => total + map(item), 0)\n}\n","import {resetState, upload} from '../upload/batch-upload'\nimport Batch from '../upload/batch'\nimport type FileAttachmentElement from '@github/file-attachment-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Synchronize element state with primer styles. This should be replaced with CSS.\nobserve('file-attachment[hover]', {\n  add(el) {\n    el.classList.add('dragover')\n  },\n  remove(el) {\n    el.classList.remove('dragover')\n  },\n})\n\n// Cancel empty drops after filtering out hidden dot files.\non('file-attachment-accept', 'file-attachment', function (event) {\n  const {attachments} = event.detail\n  if (attachments.length === 0) {\n    resetState(event.currentTarget, 'is-hidden-file')\n    event.preventDefault()\n  }\n})\n\n// Upload batched files after passing validation.\non('file-attachment-accepted', 'file-attachment', function (event) {\n  // CodeEditor will hide this element if it wants to handle uploads\n  const dragAndDropLabel = event.currentTarget.querySelector<HTMLElement>('.drag-and-drop')\n  if (dragAndDropLabel && dragAndDropLabel.hidden) {\n    return\n  }\n\n  const {attachments} = event.detail\n  upload(new Batch(attachments), event.currentTarget as FileAttachmentElement)\n})\n\nlet count = 0\n\nobserve('file-attachment', {\n  add(el) {\n    if (count++ === 0) {\n      document.addEventListener('drop', onDocumentDrop)\n      document.addEventListener('dragover', onDocumentDragover)\n    }\n    const form = el.closest('form')\n    if (form) {\n      form.addEventListener('reset', onFormReset)\n    }\n  },\n  remove(el) {\n    if (--count === 0) {\n      document.removeEventListener('drop', onDocumentDrop)\n      document.removeEventListener('dragover', onDocumentDragover)\n    }\n\n    const form = el.closest('form')\n    if (form) {\n      form.removeEventListener('reset', onFormReset)\n    }\n  },\n})\n\nfunction hasFile(transfer: DataTransfer): boolean {\n  return Array.from(transfer.types).indexOf('Files') >= 0\n}\n\n// Ignores accidental drops that miss the textarea.\nfunction onDocumentDrop(event: DragEvent) {\n  const transfer = event.dataTransfer\n  if (transfer && hasFile(transfer)) {\n    event.preventDefault()\n  }\n}\n\n// Prevent accidental drops until we're over a textarea.\nfunction onDocumentDragover(event: DragEvent) {\n  const transfer = event.dataTransfer\n  if (transfer && hasFile(transfer)) {\n    event.preventDefault()\n  }\n}\n\n// Parent form has been reset. Reset uploadable state back to default.\nfunction onFormReset({currentTarget}: Event) {\n  const container = (currentTarget as Element).querySelector<HTMLElement>('file-attachment')!\n  resetState(container, 'is-default')\n}\n","import FilterInputElement from '@github/filter-input-element'\nimport {announce} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('filter-input-updated', 'filter-input', event => {\n  const input = (event.currentTarget as FilterInputElement).input\n  if (!(document.activeElement && document.activeElement === input)) return\n  const {count, total} = event.detail\n  // eslint-disable-next-line i18n-text/no-en\n  announce(`Found ${count} out of ${total} ${total === 1 ? 'item' : 'items'}`)\n})\n\non(\n  'toggle',\n  'details',\n  event => {\n    // Wait for the next click to ensure that focus has left input\n    setTimeout(() => resetFilter(event.target as Element), 0)\n  },\n  {capture: true},\n)\n\non(\n  'tab-container-changed',\n  'tab-container',\n  event => {\n    if (!(event.target instanceof HTMLElement)) return\n    const {relatedTarget: panel} = event.detail\n    const filterInput = event.target.querySelector('filter-input')\n    if (filterInput instanceof FilterInputElement) {\n      filterInput.setAttribute('aria-owns', panel.id)\n    }\n  },\n  {capture: true},\n)\n\nfunction resetFilter(target: Element) {\n  const filterInput = target.querySelector<FilterInputElement>('filter-input')\n  if (filterInput && !target.hasAttribute('open')) {\n    filterInput.reset()\n  }\n}\n","type Predicate = (el: Element, query: string) => boolean | null\ntype Options = {limit?: number | null}\n\nexport function filterList(list: Element, query: string, isVisible: Predicate, options: Options = {}): number {\n  const limit = options.limit ?? Infinity\n  let visible = 0\n  for (const item of list.children) {\n    const show = isVisible(item, query)\n    if (show == null) {\n      // ignore\n    } else if (show && visible < limit) {\n      visible++\n      toggle(item as HTMLElement, true)\n    } else {\n      toggle(item as HTMLElement, false)\n    }\n  }\n  return visible\n}\n\nfunction toggle(el: HTMLElement, show: boolean) {\n  el.style.display = show ? '' : 'none'\n  el.hidden = !show\n}\n","import type {TextScore} from './fuzzy-filter'\nimport {compare} from './fuzzy-filter'\nimport {filterSort} from './filter-sort'\n\nconst originalOrder = new WeakMap<Element, HTMLElement[]>()\n\ninterface FilterOptions {\n  limit?: number | null\n  sortKey: (item: HTMLElement) => TextScore | null | undefined\n}\n\n// Filters and sorts list element items against a text query. For use with lists that\n// are already in the DOM, not with lists of results that are changed dynamically\n// via ajax.\n//\n// Returns Number of visible items.\nexport function filterSortList(list: Element, string: string, options: FilterOptions): number {\n  const query = string.toLowerCase()\n  const limit = options.limit\n\n  let allItems = originalOrder.get(list)\n  const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n  const children = Array.from(list.children)\n  if (!allItems) {\n    allItems = Array.from(list.children) as HTMLElement[]\n    originalOrder.set(list, allItems)\n  } else if (list.classList.contains('filter-sort-list-refresh')) {\n    // if we get this class, it means the items in the list might have been changed\n    // in this case, we check if there are new items to be added to the cache\n    // this is the case when creating a new label from the label picker (see app/assets/modules/github/issues/labels.ts)\n    list.classList.remove('filter-sort-list-refresh')\n    const currentItems = Array.from(list.children) as HTMLElement[]\n    for (const currentItem of currentItems) {\n      if (!allItems.includes(currentItem)) {\n        allItems.push(currentItem)\n      }\n    }\n  }\n  for (const item of children) {\n    list.removeChild(item)\n    if (item instanceof HTMLElement) item.style.display = ''\n  }\n\n  const found = query ? filterSort(allItems, options.sortKey, compare) : allItems\n  const limited = limit == null ? found : found.slice(0, limit)\n  const visible = limited.length\n  const results = document.createDocumentFragment()\n  for (const item of limited) {\n    results.appendChild(item)\n  }\n\n  // This ensures that checked input before and after filtering is the same one\n  // See https://github.com/github/github/issues/88129#issuecomment-434839397\n  let inputStateReset = false\n  if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n    for (const checkedInput of results.querySelectorAll('input[type=\"radio\"]:checked')) {\n      if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n        checkedInput.checked = false\n        inputStateReset = true\n      }\n    }\n  }\n\n  list.appendChild(results)\n\n  // Dispatch a change event after render for details-menu or any other code reacting to the input state\n  if (checkedInputBeforeFilter && inputStateReset) {\n    checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n  }\n\n  // hide all dividers if query.length > 0\n  const dividers = list.querySelectorAll('.js-divider')\n  for (const divider of dividers) {\n    /* eslint-disable-next-line github/no-d-none */\n    divider.classList.toggle('d-none', Boolean(query && query.trim().length > 0))\n  }\n\n  return visible\n}\n","import verifySsoSession from './sso'\n\ninterface FilterOptions {\n  limit?: number | null\n}\n\n// Only login, name & selected are attributes required on both server side and payload rendered elements.\n// IE if we construct a user element from a .js-filterable-suggested-user HTMLElement.\ninterface User {\n  id?: string\n  type?: string\n  login: string\n  name: string\n  selected: boolean\n  disabled?: boolean\n  element?: HTMLElement\n  description?: string\n  avatar?: string\n  class?: string\n  suggestion?: boolean\n}\n\ninterface Data {\n  suggestions: User[]\n  users: User[]\n}\n\ninterface TypeAheadData {\n  lastSearchResult: Data\n  lastSearchText?: string\n  cachedSuggestions: User[]\n\n  // Used to cache a user ID to a pre-existing rendered element (if they exist in multiple search results).\n  // This is needed to persist their selected state across multiple searches.\n  // Key is user.id (as a string) to the rendered element\n  userResultCache: Map<string, HTMLElement>\n}\n\n// Used to abort any previous type-ahead request if not needed\nlet abortController = new AbortController()\n\nconst typeAheadCache = new WeakMap<Element, TypeAheadData>()\nconst cache = new WeakMap<Element, Data>()\nconst currentQueryForList = new WeakMap<Element, string>()\n\nasync function getData(\n  list: Element,\n  queryText: string,\n  typeAhead: boolean,\n  queryOnEmptyQueryString: boolean,\n): Promise<Data> {\n  if (typeAhead && !typeAheadCache.has(list)) {\n    initializeTypeAheadCache(list)\n  }\n\n  const data = await fetchQueryIfNeeded(list, queryText, typeAhead, queryOnEmptyQueryString)\n  const hasPreRenderedData = list.hasAttribute('data-filterable-data-pre-rendered')\n\n  if (hasPreRenderedData) {\n    data.suggestions = getPreRenderedUsers(list, typeAhead)\n  }\n\n  return data\n}\n\nasync function fetchQueryIfNeeded(\n  list: Element,\n  queryText: string,\n  typeAhead: boolean,\n  queryOnEmptyQueryString: boolean,\n): Promise<Data> {\n  const url = new URL(list.getAttribute('data-filterable-src') || '', window.location.origin)\n  if (url.pathname === '/') throw new Error('could not get data-filterable-src')\n\n  if (typeAhead) {\n    const typeAheadData = typeAheadCache.get(list)!\n    const trimmedText = queryText.trim()\n    if (typeAheadData.lastSearchText === trimmedText) return typeAheadData.lastSearchResult\n    const isInitialLoad = typeAheadData.lastSearchText === undefined\n    typeAheadData.lastSearchText = trimmedText\n\n    const inputId = list.getAttribute('data-filterable-for') || ''\n    const inputElement = document.getElementById(inputId)\n\n    // Abort any old requests (if any)\n    abortController.abort()\n    if (trimmedText === '' && !queryOnEmptyQueryString) {\n      typeAheadData.lastSearchResult = {suggestions: [], users: []}\n    } else {\n      // Abort controller needs to be re-created, there exists one per abort.\n      abortController = new AbortController()\n      const requestHeaders = {\n        headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n        signal: abortController.signal,\n      }\n\n      const params = url.searchParams || new URLSearchParams()\n      params.set('q', queryText)\n      params.set('typeAhead', 'true')\n      url.search = params.toString()\n\n      if (!isInitialLoad) {\n        inputElement?.classList.add('is-loading')\n      }\n\n      const response = await fetch(url.toString(), requestHeaders)\n      typeAheadData.lastSearchResult = await response.json()\n    }\n\n    inputElement?.classList.remove('is-loading')\n    return typeAheadData.lastSearchResult\n  } else {\n    const requestHeaders = {headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'}}\n    const response = await fetch(url.toString(), requestHeaders)\n    return await response.json()\n  }\n}\n\n// This function will try to find any server side rendered users through the tag `.js-filterable-suggested-user`\n// If any are found, they will be added to the API returned data.\n// This users are distinct from the 'suggestions' currently returned through the reviewers API call.\nfunction getPreRenderedUsers(list: Element, typeAhead: boolean): User[] {\n  const data = []\n  // Add all server rendered users to the `suggestions` list (if any).\n  const suggestedUsers = list.querySelectorAll<HTMLElement>('.js-filterable-suggested-user')\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (suggestedUsers.length > 0) {\n    // Read the server-side rendered elements that need to be added to suggestions.\n    // This is a work-around to allow the server-side rendered elements to work with the filtering.\n    for (const suggestedUser of list.querySelectorAll<HTMLElement>('.js-filterable-suggested-user')) {\n      suggestedUser.classList.remove('js-filterable-suggested-user')\n\n      // Deconstruct the element into a <User> object\n      data.push({\n        name: suggestedUser.querySelector('.js-description')!.textContent!,\n        login: suggestedUser.querySelector('.js-username')!.textContent!,\n        selected: suggestedUser.getAttribute('aria-checked') === 'true',\n        element: suggestedUser,\n        suggestion: true,\n      })\n    }\n  }\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (typeAhead) {\n    const typeAheadData = typeAheadCache.get(list)!\n    if (suggestedUsers.length > 0) {\n      typeAheadData.cachedSuggestions = data\n      typeAheadData.userResultCache.clear()\n    }\n\n    return typeAheadData.cachedSuggestions\n  }\n\n  return data\n}\n\nfunction initializeTypeAheadCache(list: Element) {\n  typeAheadCache.set(list, {\n    lastSearchResult: {suggestions: [], users: []},\n    cachedSuggestions: [],\n    userResultCache: new Map<string, HTMLElement>(),\n  })\n}\n\n// This is like `substringFilterList`, but instead of filtering down direct\n// children of a DOM element, obtain most data from a JSON payload and search\n// within that instead, only generating actual DOM elements when they are\n// \"revealed\" by matching the search term. Similarly, remove elements from the\n// DOM when they don't match a search term and they're not selected.\n//\n// Also, because elements might already exist in the DOM because of their\n// pre-selected state, merge those elements with the data coming from JSON.\nexport async function substringMemoryFilterList(\n  list: Element,\n  queryText: string,\n  options: FilterOptions,\n): Promise<number> {\n  currentQueryForList.set(list, queryText)\n\n  await verifySsoSession()\n\n  const showSuggestionsHeaderOnLoad = list.hasAttribute('data-filterable-show-suggestion-header')\n  const typeAhead = list.hasAttribute('data-filterable-type-ahead')\n  const queryOnEmptyQueryString = list.hasAttribute('data-filterable-type-ahead-query-on-empty')\n\n  let data = cache.get(list)\n\n  if (!data) {\n    try {\n      data = await getData(list, queryText, typeAhead, queryOnEmptyQueryString)\n      if (!typeAhead) cache.set(list, data)\n    } catch (error) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.name === 'AbortError') {\n        // A stale type-ahead request was aborted\n        return -1\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // This logic only exists when type-ahead is disabled\n  if (!typeAhead && currentQueryForList.get(list) !== queryText) {\n    return -1\n  }\n\n  const limit = options.limit\n  const template = list.querySelector<HTMLTemplateElement>('template')!\n\n  // an index of items already rendered into DOM due to being preselected\n  const existingElements: {[key: string]: HTMLInputElement} = {}\n  for (const existing of list.querySelectorAll<HTMLInputElement>('input[type=hidden]')) {\n    existingElements[`${existing.name}${existing.value}`] = existing\n  }\n\n  // remove all non-selected items after the template element\n  let cutoffPoint = template.nextElementSibling\n  while (cutoffPoint) {\n    const el = cutoffPoint\n    cutoffPoint = el.nextElementSibling\n    if (\n      el instanceof HTMLElement &&\n      (typeAhead || el.getAttribute('aria-checked') === 'true' || el.classList.contains('select-menu-divider'))\n    ) {\n      el.hidden = true\n    } else {\n      el.remove()\n    }\n  }\n\n  let visible = 0\n\n  const queryTextEmpty = queryText.trim() === ''\n  const items = document.createDocumentFragment()\n  const suggestionsDivider = list.querySelector<HTMLElement>('.js-divider-suggestions')\n  const restDivider = list.querySelector<HTMLElement>('.js-divider-rest')\n  const typeAheadData = typeAheadCache.get(list)\n\n  function addItem(user: User) {\n    const containsQueryText = `${user.login} ${user.name}`.toLowerCase().trim().includes(queryText)\n    const matching = !(limit != null && visible >= limit) && containsQueryText\n    const shouldGenerate = matching || user.selected || user.suggestion\n    if (shouldGenerate) {\n      const item = createReviewerItem(user, template, existingElements, typeAheadData)\n      item.hidden = !matching\n      if (matching) visible++\n      items.appendChild(item)\n    }\n  }\n\n  let anyVisibleNonSelectedSuggestions = false\n\n  // We show suggestions header if we\n  // 1) Actually have suggestions, or\n  // 2) If we still want to show suggestions title (declared by the attribute), but don't ever have any suggestions\n  // (ie data.suggestions is undefined), the criteria simply becomes whether or not there is any query text.\n  if (suggestionsDivider && (data.suggestions?.length > 0 || (showSuggestionsHeaderOnLoad && data.users.length > 0))) {\n    const suggestions = data.suggestions ?? []\n    const selectedSuggestions = suggestions.filter(u => u.selected)\n    const nonSelectedSuggestions = suggestions.filter(u => !u.selected)\n\n    for (const u of selectedSuggestions) {\n      addItem(u)\n    }\n\n    // Put the suggestions after the already assigned users\n    items.appendChild(suggestionsDivider)\n    const preSuggestionsVisibleCount = visible\n    for (const u of nonSelectedSuggestions) {\n      addItem(u)\n    }\n    anyVisibleNonSelectedSuggestions = visible > preSuggestionsVisibleCount\n\n    suggestionsDivider.hidden = !anyVisibleNonSelectedSuggestions || (typeAhead && !queryTextEmpty)\n\n    // Special case where we want to force show the suggestions header even without suggestions in the payload.\n    if (showSuggestionsHeaderOnLoad && data.users.length > 0) {\n      suggestionsDivider.hidden = !queryTextEmpty\n    }\n  }\n\n  if (restDivider) {\n    items.appendChild(restDivider)\n  }\n\n  const preUsersVisibleCount = visible\n  for (const u of data.users) {\n    addItem(u)\n  }\n\n  if (restDivider) {\n    restDivider.hidden = preUsersVisibleCount === visible || !anyVisibleNonSelectedSuggestions\n  }\n\n  list.append(items)\n  return visible\n}\n\nfunction createReviewerItem(\n  user: User,\n  template: HTMLTemplateElement,\n  existingElements: Record<string, HTMLElement>,\n  typeAheadData: TypeAheadData | undefined,\n): HTMLElement {\n  if (user.element != null) {\n    return user.element\n  }\n\n  if (typeAheadData?.userResultCache.has(user.id!)) {\n    return typeAheadData.userResultCache.get(user.id!)!\n  }\n\n  const li = template.content.cloneNode(true) as HTMLElement\n  const input = li.querySelector<HTMLInputElement>('input[type=checkbox], input[type=radio]')!\n\n  if (user.type) {\n    input.name = `reviewer_${user.type}_ids[]`\n  }\n  input.value = user.id!\n\n  const inputKey = `${input.name}${user.id}`\n  let selected = user.selected\n  if (existingElements[inputKey]) {\n    selected = true\n    existingElements[inputKey]!.remove()\n    delete existingElements[inputKey]\n  }\n\n  const item = li.querySelector<HTMLElement>('[role^=menuitem]')!\n  if (selected) {\n    item.setAttribute('aria-checked', 'true')\n    input.checked = true\n  }\n\n  if (user.disabled) {\n    item.setAttribute('aria-disabled', 'true')\n  }\n\n  const login = li.querySelector('.js-username')\n  if (login) login.textContent = user.login\n  const fullName = li.querySelector('.js-description')\n  if (fullName) fullName.textContent = user.name\n  const description = li.querySelector('.js-extended-description')\n  if (description) {\n    if (user.description) {\n      description.textContent = user.description\n    } else {\n      description.remove()\n    }\n  }\n  const avatar = li.querySelector<HTMLImageElement>('.js-avatar')!\n  avatar.className = `${avatar.className} ${user.class}`\n  avatar.src = user.avatar!\n\n  user.element = item\n\n  typeAheadData?.userResultCache.set(user.id!, item)\n\n  return user.element\n}\n","import verifySsoSession from './sso'\n\ninterface FilterOptions {\n  limit?: number | null\n}\n\ninterface Label {\n  id: string\n  name: string\n  htmlName: string\n  color: string\n  selected: boolean\n  element?: HTMLElement\n  description?: string\n}\n\ninterface Data {\n  labels: Label[]\n}\n\ninterface TypeAheadData {\n  lastSearchResult: Data\n  lastSearchText?: string\n  cachedSuggestions: Label[]\n\n  // Used to cache a user ID to a pre-existing rendered element (if they exist in multiple search results).\n  // This is needed to persist their selected state across multiple searches.\n  // Key is label.id (as a string) to the rendered element\n  labelResultCache: Map<string, HTMLElement>\n}\n\n// Used to abort any previous type-ahead request if not needed\nlet abortController = new AbortController()\n\nconst typeAheadCache = new WeakMap<Element, TypeAheadData>()\nconst cache = new WeakMap<Element, Data>()\nconst currentQueryForList = new WeakMap<Element, string>()\n\n// This is like `substringFilterList`, but instead of filtering down direct\n// children of a DOM element, obtain most data from a JSON payload and search\n// within that instead, only generating actual DOM elements when they are\n// \"revealed\" by matching the search term. Similarly, remove elements from the\n// DOM when they don't match a search term and they're not selected.\n//\n// Also, because elements might already exist in the DOM because of their\n// pre-selected state, merge those elements with the data coming from JSON.\nexport async function labelsTypeaheadFilterList(\n  list: Element,\n  queryText: string,\n  options: FilterOptions,\n): Promise<number> {\n  await verifySsoSession()\n\n  currentQueryForList.set(list, queryText)\n  let data = cache.get(list)\n\n  // If we don't have data, fetch it\n  if (!data) {\n    try {\n      data = await getData(list, queryText)\n    } catch (error) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.name === 'AbortError') {\n        // A stale type-ahead request was aborted\n        return -1\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // create an index of items already rendered into DOM - already selected items\n  const existingElements: {[key: string]: HTMLInputElement} = {}\n  for (const existing of list.querySelectorAll<HTMLInputElement>('label[aria-checked=true] > div > input[hidden]')) {\n    existingElements[`${existing.name}${existing.value}`] = existing\n  }\n\n  const template = list.querySelector<HTMLTemplateElement>('template')!\n\n  // remove all non-selected items after the template element\n  let cutoffPoint = template.nextElementSibling\n  while (cutoffPoint) {\n    const el = cutoffPoint\n    cutoffPoint = el.nextElementSibling\n    if (\n      el instanceof HTMLElement &&\n      (el.getAttribute('aria-checked') === 'true' || el.classList.contains('select-menu-divider'))\n    ) {\n      el.hidden = true\n    } else {\n      el.remove()\n    }\n  }\n\n  // create new list of items\n  const items = document.createDocumentFragment()\n  const typeAheadData = typeAheadCache.get(list)\n  const limit = options.limit\n  let visible = 0\n\n  function addItem(label: Label) {\n    const containsQueryText = `${label.name}`.toLowerCase().trim().includes(queryText.toLocaleLowerCase())\n    const matching = !(limit != null && visible >= limit) && containsQueryText\n    const shouldGenerate = matching || label.selected\n    if (shouldGenerate) {\n      const item = createLabelItem(label, template, existingElements, typeAheadData)\n      item.hidden = !matching\n      if (matching) visible++\n      items.appendChild(item)\n    }\n  }\n\n  for (const l of data.labels) {\n    addItem(l)\n  }\n\n  // add new items to DOM\n  list.append(items)\n  return visible\n}\n\nfunction initializeTypeAheadCache(list: Element) {\n  typeAheadCache.set(list, {\n    lastSearchResult: {labels: []},\n    cachedSuggestions: [],\n    labelResultCache: new Map<string, HTMLElement>(),\n  })\n}\n\nasync function getData(list: Element, queryText: string): Promise<Data> {\n  if (!typeAheadCache.has(list)) {\n    initializeTypeAheadCache(list)\n  }\n\n  const hasPreRenderedData = list.hasAttribute('data-filterable-data-pre-rendered')\n  if (hasPreRenderedData) {\n    return getPreRenderedLabels(list)\n  }\n\n  return await fetchQueryIfNeeded(list, queryText)\n}\n\n// This function will try to find any server side rendered users through the tag `.js-filterable-label`\n// If any are found, they will be added to the API returned data.\nfunction getPreRenderedLabels(list: Element): Data {\n  const data = []\n  // Add all server rendered labels to our data\n  const labels = list.querySelectorAll<HTMLElement>('.js-filterable-label')\n  list.removeAttribute('data-filterable-data-pre-rendered')\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (labels.length > 0) {\n    // Read the server-side rendered elements that need to be added to suggestions.\n    // This is a work-around to allow the server-side rendered elements to work with the filtering.\n    for (const renderedLabel of list.querySelectorAll<HTMLElement>('.js-filterable-label')) {\n      renderedLabel.classList.remove('js-filterable-label')\n\n      // Deconstruct the element into a <Label> object\n      data.push({\n        id: renderedLabel.querySelector('input[hidden]')!.getAttribute('value') || '',\n        name: renderedLabel.querySelector('input[hidden]')!.getAttribute('data-label-name') || '',\n        htmlName: renderedLabel.querySelector('.js-label-name-html')!.textContent!,\n        description: renderedLabel.querySelector('.js-label-description')?.textContent || '',\n        color: renderedLabel.querySelector('.js-label-color')!.getAttribute('label-color') || '',\n        selected: renderedLabel.getAttribute('aria-checked') === 'true',\n        element: renderedLabel,\n      })\n    }\n  }\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  const typeAheadData = typeAheadCache.get(list)!\n  if (data.length > 0) {\n    typeAheadData.cachedSuggestions = data\n    typeAheadData.lastSearchText = ''\n    typeAheadData.lastSearchResult = {labels: data}\n  }\n\n  return typeAheadData.lastSearchResult\n}\n\nasync function fetchQueryIfNeeded(list: Element, queryText: string): Promise<Data> {\n  const url = new URL(list.getAttribute('data-filterable-src') || '', window.location.origin)\n  if (url.pathname === '/') throw new Error('could not get data-filterable-src')\n\n  const typeAheadData = typeAheadCache.get(list)!\n  const trimmedText = queryText.trim()\n  if (typeAheadData.lastSearchText === trimmedText) {\n    return typeAheadData.lastSearchResult\n  }\n\n  typeAheadData.lastSearchText = trimmedText\n\n  const inputId = list.getAttribute('data-filterable-for') || ''\n  const inputElement = document.getElementById(inputId)\n\n  // Abort any old requests (if any)\n  abortController.abort()\n  // Abort controller needs to be re-created, there exists one per abort.\n  abortController = new AbortController()\n  const requestHeaders = {\n    headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n    signal: abortController.signal,\n  }\n\n  const params = url.searchParams || new URLSearchParams()\n  params.set('q', queryText)\n  params.set('typeAhead', 'true')\n  url.search = params.toString()\n\n  inputElement?.classList.add('is-loading')\n\n  const response = await fetch(url.toString(), requestHeaders)\n  typeAheadData.lastSearchResult = await response.json()\n\n  inputElement?.classList.remove('is-loading')\n  return typeAheadData.lastSearchResult\n}\n\nfunction createLabelItem(\n  label: Label,\n  template: HTMLTemplateElement,\n  existingElements: Record<string, HTMLElement>,\n  typeAheadData: TypeAheadData | undefined,\n): HTMLElement {\n  if (label.element != null) {\n    return label.element\n  }\n\n  const resultCache = typeAheadData?.labelResultCache.get(label.id)\n  if (resultCache) {\n    return resultCache\n  }\n\n  const li = template.content.cloneNode(true) as HTMLElement\n  const input = li.querySelector<HTMLInputElement>('input[type=checkbox]')!\n\n  input.value = label.id!\n  input.setAttribute('data-label-name', label.name)\n\n  const inputKey = `${input.name}${label.id}`\n  let selected = label.selected\n  if (existingElements[inputKey]) {\n    selected = true\n    existingElements[inputKey]!.remove()\n    delete existingElements[inputKey]\n  }\n\n  const item = li.querySelector<HTMLElement>('[role^=menuitem]')!\n  if (selected) {\n    item.setAttribute('aria-checked', 'true')\n    input.checked = true\n  }\n\n  const id = li.querySelector('.js-label-id')\n  if (id) id.setAttribute('data-name', label.id)\n\n  const color = li.querySelector('.js-label-color')\n  if (color) {\n    const newStyle = color.getAttribute('style')?.replace('background-color:', `background-color:#${label.color};`)\n    color.setAttribute('style', newStyle!)\n  }\n\n  const htmlName = li.querySelector('.js-label-name-html')\n  if (htmlName) htmlName.innerHTML = label.htmlName!\n\n  const labelDescription = li.querySelector('.js-label-description')\n  if (labelDescription) {\n    if (label.description) {\n      labelDescription.textContent = label.description\n    } else {\n      labelDescription.remove()\n    }\n  }\n\n  label.element = item\n  typeAheadData?.labelResultCache.set(label.id, item)\n\n  return label.element\n}\n","// Filterable Behavior\n//\n// Automatically filters and sorts a list of items against a text field.\n//\n// Markup\n//\n// * js-filterable-field  - Set on field to enable filtering.\n// * data-filterable-for  - Set to ID of input field to bind too.\n// * data-filterable-type - Filtering type. Either \"prefix\", \"substring\", \"fuzzy\", or \"fuzzy-prio\". Defaults to \"prefix\"\n// The difference between \"fuzzy\" and \"fuzzy-prio\", is the latter supports an additional attribute `data-prio-filter-value`\n// to specify a custom priority value that will be weighted more heavily when determining the score.\n//\n// <input id=\"file-filter-field\" class=\"js-filterable-field\" autocomplete=\"off\">\n//\n// <ul data-filterable-for=\"file-filter-field\" data-filterable-type=\"fuzzy\">\n//   <li>Foo</li>\n//   <li>Bar</li>\n//   <li>Baz</li>\n// </ul>\n//\n//\n// Events\n//\n// filterable:change\n//\n// * **Bubbles** Yes\n// * **Cancelable** No\n// * **Target** List container Element\n// * **Context info**\n//   * relatedTarget - Input field Element\n//\n// $('ul').on('filterable:change', function() {\n//   console.log('order changed')\n// })\n//\n\nimport {addThrottledInputEventListener, removeThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {announce} from '@github-ui/aria-live'\nimport {filterList} from '../filter-list'\nimport {filterSortList} from '../filter-sort-list'\nimport {fuzzyScore} from '../fuzzy-filter'\nimport {microtask} from '@github-ui/eventloop-tasks'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {substringMemoryFilterList} from '../substring-memory-filter-list'\nimport {labelsTypeaheadFilterList} from '../labels-typeahead-filter-list'\n\nobserve('.js-filterable-field', {\n  constructor: HTMLInputElement,\n  initialize(field) {\n    if (!field.autocomplete) {\n      field.autocomplete = 'off'\n    }\n\n    // A null value will default to whatever is specified within `throttled-input.ts`\n    const throttleWaitInMs = field.hasAttribute('type-ahead') ? 200 : null\n    let value = field.value\n\n    async function onInputChange(input: HTMLInputElement | HTMLTextAreaElement) {\n      if (value === input.value) return\n      value = input.value\n      await microtask()\n      fire(input, 'filterable:change')\n    }\n\n    async function onFocus() {\n      value = field.value\n      await microtask()\n      fire(field, 'filterable:change')\n    }\n\n    return {\n      add(el) {\n        el.addEventListener('focus', onFocus)\n        addThrottledInputEventListener(el, onInputChange, {wait: throttleWaitInMs})\n        if (document.activeElement === el) onFocus()\n      },\n      remove(el) {\n        el.removeEventListener('focus', onFocus)\n        removeThrottledInputEventListener(el, onInputChange)\n      },\n    }\n  },\n})\n\n// Trigger 'filterable:change' on an input after any\n// direct val() calls\non('filterable:change', '.js-filterable-field', async function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const queryString = target.value.trim().toLowerCase()\n  const filterable = document.querySelectorAll(`[data-filterable-for=\"${target.id}\"]`)\n  for (const list of filterable) {\n    const visible = await filter(list, queryString)\n    if (visible === -1) return\n    if (document.activeElement && target === document.activeElement) {\n      announce(`${visible} results found.`)\n    }\n\n    list.dispatchEvent(\n      new CustomEvent('filterable:change', {\n        bubbles: true,\n        cancelable: false,\n        detail: {\n          inputField: target,\n        },\n      }),\n    )\n  }\n})\n\nfunction defaultText(content: Element): string {\n  return content.hasAttribute('data-filter-value')\n    ? content.getAttribute('data-filter-value')!.toLowerCase().trim()\n    : content.textContent!.toLowerCase().trim()\n}\n\nasync function filter(list: Element, queryString: string): Promise<number> {\n  const limit = parseInt(list.getAttribute('data-filterable-limit')!, 10) || null\n\n  let visible = 0\n  switch (list.getAttribute('data-filterable-type')) {\n    case 'fuzzy-prio': {\n      const searchQuery = queryString.toLowerCase()\n      const sortKey = (item: HTMLElement) => {\n        const prioText = item.getAttribute('data-prio-filter-value')!.toLowerCase().trim()\n        const text = item.textContent!.toLowerCase().trim()\n\n        // Increase the weighting of the score of the custom priority value\n        const prioScore = fuzzyScore(prioText, searchQuery, 0.01) * 2\n        let score = fuzzyScore(text, searchQuery, 0.01)\n        if (prioScore > score) score = prioScore\n\n        return score > 0 ? {score, text} : null\n      }\n      visible = filterSortList(list, queryString, {limit, sortKey})\n      break\n    }\n    case 'fuzzy': {\n      const searchQuery = queryString.toLowerCase()\n      const sortKey = (item: HTMLElement) => {\n        const text = defaultText(item)\n        const score = fuzzyScore(text, searchQuery)\n        return score > 0 ? {score, text} : null\n      }\n      visible = filterSortList(list, queryString, {limit, sortKey})\n      break\n    }\n    case 'substring':\n      visible = filterList(list, queryString.toLowerCase(), substring, {limit})\n      break\n    case 'substring-memory':\n      visible = await substringMemoryFilterList(list, queryString, {limit})\n      break\n    case 'labels-typeahead':\n      visible = await labelsTypeaheadFilterList(list, queryString, {limit})\n      break\n    default:\n      visible = filterList(list, queryString.toLowerCase(), prefix, {limit})\n      break\n  }\n\n  list.classList.toggle('filterable-active', queryString.length > 0)\n  list.classList.toggle('filterable-empty', visible === 0)\n\n  return visible\n}\n\nfunction prefix(el: Element, queryString: string): boolean {\n  return el.textContent!.toLowerCase().trim().startsWith(queryString)\n}\n\n// Does the text of the given element match the given query string?\n//\n// Note: you can add a `data-skip-substring-filter` attribute to exclude an\n// element from substring filtering.\n//\n// Returns Boolean or null, if element cannot be filtered\nfunction substring(el: Element, queryString: string): boolean | null {\n  if (el.hasAttribute('data-skip-substring-filter')) return null\n  if (el.classList.contains('select-menu-no-results')) return null\n  const target = el.querySelector('[data-filterable-item-text]') || el\n  return target.textContent!.toLowerCase().trim().includes(queryString)\n}\n\n// Toggle new create new item form when filter doesn't match any existing items\non('filterable:change', 'details-menu .select-menu-list', function (event) {\n  const list = event.currentTarget\n  const form = list.querySelector('.js-new-item-form')\n\n  if (form) {\n    toggleForm(list, form, event.detail.inputField.value)\n  }\n})\n\nfunction toggleForm(list: Element, form: Element, filterText: string) {\n  const show = filterText.length > 0 && !itemExists(list, filterText)\n  list.classList.toggle('is-showing-new-item-form', show)\n\n  if (!show) return\n\n  form.querySelector<HTMLElement>('.js-new-item-name')!.textContent = filterText\n\n  const item = form.querySelector('.js-new-item-value')\n  if (item instanceof HTMLInputElement || item instanceof HTMLButtonElement) {\n    item.value = filterText\n  }\n}\n\n// Detect if filtered item is already present in the list.\n//\n// container  - filterable list element\n// filterText - String value of filter field\n//\n// Returns true if item already exists, otherwise false.\nfunction itemExists(container: Element, filterText: string): boolean {\n  for (const item of container.querySelectorAll('[data-menu-button-text]')) {\n    const text = (item as HTMLElement).textContent!.toLowerCase().trim()\n    if (text === filterText.toLowerCase()) {\n      return true\n    }\n  }\n  return false\n}\n\n// Hoist empty class to parent for styling.\nobserve('tab-container .select-menu-list .filterable-empty, details-menu .select-menu-list .filterable-empty', {\n  add(el) {\n    const list = el.closest<HTMLElement>('.select-menu-list')!\n    list.classList.add('filterable-empty')\n  },\n  remove(el) {\n    const list = el.closest<HTMLElement>('.select-menu-list')!\n    list.classList.remove('filterable-empty')\n  },\n})\n","// Installs observer to account for sticky/fixed overlay offsets when navigating\n// to a fragment.\nimport {computeFixedYOffset, scrollToFragmentTarget} from '../sticky-scroll-into-view'\nimport hashChange from './hash-change'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction scrollTargetIntoViewIfNeeded() {\n  const root = <HTMLHtmlElement>document.firstElementChild!\n  if (root.classList.contains('js-skip-scroll-target-into-view')) return\n\n  if (computeFixedYOffset(document)) {\n    scrollToFragmentTarget(document)\n  }\n}\n\nhashChange(scrollTargetIntoViewIfNeeded)\n\non('click', 'a[href^=\"#\"]', function (event) {\n  const {currentTarget} = event\n  if (!(currentTarget instanceof HTMLAnchorElement)) return\n\n  // this defers the execution of scrollTargetIntoViewIfNeeded until after all the click stuff happened, including after scroll\n  setTimeout(scrollTargetIntoViewIfNeeded, 0)\n})\n","import {loaded} from '@github-ui/document-ready'\n\n// Flash\n//\n// Fades out and removes flash element from the page on close.\n//\n// Markup\n//\n//     <div class=\"flash-messages\">\n//       <div class=\"flash\">\n//         <%= octicon('x', :class => 'flash-close js-flash-close') %>\n//         Flash Message\n//       </div>\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', '.js-flash-close', function (event) {\n  const container = event.currentTarget.closest('.flash-messages')\n\n  const flash = event.currentTarget.closest('.flash')\n  flash!.remove()\n\n  if (container && !container.querySelector('.flash')) {\n    container.remove()\n  }\n})\n\n// /**\n//  * Contains accessibility logic for server-rendered flash.\n//  * This JS ensures that the flash content with '.js-flash-alert[role=\"alert\"]' is announced.\n//  * See: https://github.com/github/accessibility/issues/290\n//  * Please consult #accessibility if you have any questions.\n//  */\n;(async function () {\n  await loaded\n\n  const flashAlertContent: HTMLElement | null = document.querySelector('.js-flash-alert[role=\"alert\"]')\n  if (flashAlertContent) {\n    // Delay and non-breaking space to ensure that screen readers announce this alert.\n    const textNode = document.createTextNode('\\u00A0')\n    setTimeout(() => {\n      flashAlertContent.appendChild(textNode)\n    }, 200)\n  }\n})()\n","import {deleteCookie, getCookies} from './cookies'\nimport {TemplateInstance} from '@github/template-parts'\n\nconst ALLOWED_FLASH_COOKIES = ['flash-notice', 'flash-error', 'flash-message', 'flash-warn']\n\n// Find cookies named something like \"flash-notice\" and render the\n// .js-flash-template template for them.\nexport function displayFlash(el: HTMLTemplateElement) {\n  for (const {key, value} of ALLOWED_FLASH_COOKIES.flatMap(getCookies)) {\n    deleteCookie(key)\n    let message\n    try {\n      message = atob(decodeURIComponent(value))\n    } catch {\n      continue\n    }\n    el.after(new TemplateInstance(el, {className: key, message}))\n  }\n}\n","import {displayFlash} from '../flash'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('template.js-flash-template', {\n  constructor: HTMLTemplateElement,\n  add(el) {\n    displayFlash(el)\n  },\n})\n","// Delayed Focus Events\n//\n// Provides a family cancelable focus/blur that trigger slightly later.\n// This makes it easier to build menus that only display when you are\n// focused in on a field.\n//\n// Events\n//\n// `focusin:delay`\n//\n// Fired when field is being focused for the first time. Will not fire\n// if field is blurred, and refocused in less than 200ms.\n//\n// * **Synchronicity** Sync\n// * **Bubbles** Yes\n// * **Cancelable** Yes\n// * **Target** Element that is receiving focus.\n//\n// `focusout:delay`\n//\n// Fired when field has been blurred for the first time. Won't fire if\n// the field is not refocused in under 200ms or the `focusout:delay` is\n// canceled.\n//\n// * **Synchronicity** Sync\n// * **Bubbles** Yes\n// * **Cancelable** No\n// * **Target** Element that is receiving focus.\n//\n// ```javascript\n// on('focusin:delay', function() {\n//   showAutocompletions()\n// })\n//\n// on('focusout:delay', function() {\n//   hideAutocompletions()\n// })\n// ```\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n\nconst focused = new WeakMap()\n\n// We use the \"focus\" and \"blur\" event in the capture phase because Firefox\n// historically had a limitation with \"focusin\" and \"focusout\" not bubbling.\ndocument.addEventListener(\n  'focus',\n  function (event: Event) {\n    const target = event.target\n    if (target instanceof Element && !focused.get(target)) {\n      fire(target, 'focusin:delay')\n      focused.set(target, true)\n    }\n  },\n  {capture: true},\n)\n\ndocument.addEventListener(\n  'blur',\n  function (event: Event) {\n    setTimeout(function () {\n      const target = event.target\n      if (target instanceof Element && target !== document.activeElement) {\n        fire(target, 'focusout:delay')\n        focused.delete(target)\n      }\n    }, 200)\n  },\n  {capture: true},\n)\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('.js-form-toggle-target', async function (form, wants) {\n  try {\n    await wants.text()\n  } catch {\n    return\n  }\n\n  const container = form.closest<HTMLElement>('.js-form-toggle-container')!\n  container.querySelector<HTMLElement>('.js-form-toggle-target[hidden]')!.hidden = false\n  form.hidden = true\n})\n","import FuzzyListElement from '../fuzzy-list-element'\nimport {announce} from '@github-ui/aria-live'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction noticeHandler(event: Event) {\n  if (!(event instanceof CustomEvent)) return\n  announce(`${event.detail} results found.`)\n}\n\nobserve('fuzzy-list', {\n  constructor: FuzzyListElement,\n  subscribe: fuzzyList => fromEvent(fuzzyList, 'fuzzy-list-sorted', noticeHandler),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Behaviors related to special cases in GFM content\n// Toggles quoted email reply content\non('click', '.email-hidden-toggle', function (event) {\n  // assert nextElementSibling is .email-hidden-reply\n  const replyContainer = event.currentTarget.nextElementSibling\n  if (!(replyContainer instanceof HTMLElement)) return\n\n  replyContainer.style.display = ''\n  replyContainer.classList.toggle('expanded')\n\n  event.preventDefault()\n})\n","import {addThrottledInputEventListener} from '../throttled-input'\nimport {fetchSafeDocumentFragment} from '../fetch'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport type {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\n\n// Toggle verify SSL visibility for https web hook URLs\nobserve('.js-hook-url-field', {\n  constructor: HTMLInputElement,\n  add(input) {\n    function checkUrl() {\n      const form = input.form\n      if (!form) return\n      let url\n      try {\n        // eslint-disable-next-line no-restricted-syntax\n        url = new URL(input.value)\n      } catch (e) {\n        // Do nothing.\n      }\n      const invalidNotice = form.querySelector('.js-invalid-url-notice')\n      if (invalidNotice instanceof HTMLElement) {\n        invalidNotice.hidden = !!(input.value === '' || (url && /^https?:/.test(url.protocol)))\n      }\n      const insecureNotice = form.querySelector('.js-insecure-url-notice')\n      if (insecureNotice instanceof HTMLElement && url && input.value) {\n        insecureNotice.hidden = /^https:$/.test(url.protocol)\n      }\n      const sslFields = form.querySelector('.js-ssl-hook-fields')\n      if (sslFields instanceof HTMLElement) {\n        sslFields.hidden = !(url && 'https:' === url.protocol)\n      }\n    }\n\n    addThrottledInputEventListener(input, checkUrl)\n    checkUrl()\n  },\n})\n\nfunction chooseEvents(selector: string): void {\n  const events = document.querySelectorAll<HTMLInputElement>('.js-hook-event-checkbox')\n  for (const eventCheckbox of events) {\n    eventCheckbox.checked = eventCheckbox.matches(selector)\n  }\n}\n\non('change', '.js-hook-event-choice', function (event) {\n  const checkbox = event.currentTarget as HTMLInputElement\n  const customIsSelected = checkbox.checked && checkbox.value === 'custom'\n  const hookEventsField = checkbox.closest('.js-hook-events-field')\n  if (hookEventsField) hookEventsField.classList.toggle('is-custom', customIsSelected)\n\n  if (checkbox.checked) {\n    if (customIsSelected) {\n      const hookWildcardEvent = document.querySelector<HTMLInputElement>('.js-hook-wildcard-event')!\n      hookWildcardEvent.checked = false\n    } else if (checkbox.value === 'push') {\n      chooseEvents('[value=\"push\"]')\n    } else if (checkbox.value === 'all') {\n      chooseEvents('.js-hook-wildcard-event')\n    }\n  }\n})\n\n// Load more delivery logs\non('click', '.js-hook-deliveries-pagination-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  button.disabled = true\n  const wrapper = button.parentElement!\n\n  const url = button.getAttribute('data-url')!\n  wrapper.before(await fetchSafeDocumentFragment(document, url))\n  wrapper.remove()\n})\n\n// Redeliver Payload Button\nremoteForm('.js-redeliver-hook-form', async function (form, wants) {\n  let response\n  try {\n    response = await wants.html()\n  } catch (responseError) {\n    form.classList.add('failed')\n    return\n  }\n\n  // replace the whole deliveries index\n  const deliveriesDetails = document.querySelector<HTMLElement>(`.js-hook-deliveries-container`)!\n  deliveriesDetails.replaceWith(response.html)\n})\n\nfunction registerInsecureSslVerificationDialog() {\n  const dialog = document.getElementById('insecure_ssl_verification') as ModalDialogElement | null\n  const disallowInsecureRadio = document.getElementById('insecure_ssl_0') as HTMLInputElement | null\n  const allowInsecureRadio = document.getElementById('insecure_ssl_1') as HTMLInputElement | null\n\n  if (dialog && disallowInsecureRadio && allowInsecureRadio) {\n    // on radio buttons, 'change' only fires when they become checked\n    allowInsecureRadio.addEventListener('change', event => {\n      event.stopPropagation()\n      disallowInsecureRadio.checked = true\n      dialog.show()\n    })\n\n    dialog.addEventListener('close', () => {\n      allowInsecureRadio.checked = true\n    })\n  }\n}\n\nregisterInsecureSslVerificationDialog()\n","// Hotkey Behavior\n//\n// See https://github.com/github/hotkey\n\nimport {areCharacterKeyShortcutsEnabled, isNonCharacterKeyShortcut} from './keyboard-shortcuts-helper'\nimport {install, uninstall} from '@github/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Disable character key shortcuts based on user preference\nobserve('[data-hotkey]', {\n  constructor: HTMLElement,\n  add(element) {\n    if (areCharacterKeyShortcutsEnabled()) {\n      install(element)\n    } else {\n      const shortcut = element.getAttribute('data-hotkey')\n      if (shortcut) {\n        const validShortcuts = filterOutCharacterKeyShortcuts(shortcut)\n        if (validShortcuts.length > 0) {\n          element.setAttribute('data-hotkey', validShortcuts)\n          install(element)\n        }\n      }\n    }\n  },\n  remove(element) {\n    uninstall(element)\n  },\n})\n\n// This function keeps non-character key shortcuts and filters out character key shortcuts.\n// See `isNonCharacterKeyShortcut` for more information.\nexport default function filterOutCharacterKeyShortcuts(string: string) {\n  const shortcuts = string.split(',')\n  return shortcuts\n    .filter((s: string) => {\n      return isNonCharacterKeyShortcut(s)\n    })\n    .join(',')\n}\n","import {onCLS, onFCP, onFID, onLCP, onTTFB, onINP} from 'web-vitals'\nimport type {Metric} from 'web-vitals'\nimport {loaded} from '@github-ui/document-ready'\nimport {wasServerRendered} from '@github-ui/ssr-utils'\nimport {sendStats} from '@github-ui/stats'\nimport {HPCTimingEvent} from './hpc'\nimport {MECHANISM_MAPPING, getCurrentReactAppName} from '@github-ui/soft-nav'\nimport {sendStatToHydro} from './hydro-stats'\n\ntype MetricOrHPC = Metric | HPCTimingEvent\nconst initialRenderIsSSR = wasServerRendered()\n\nexport function sendVitals(metric: MetricOrHPC) {\n  const {name, value} = metric\n  const stat: PlatformBrowserPerformanceWebVitalTiming = {\n    name: window.location.href,\n    app: getCurrentReactAppName() || 'rails',\n  }\n  stat[name.toLowerCase() as Lowercase<typeof name>] = value\n\n  if (name === 'HPC') {\n    stat.soft = metric.soft\n    stat.ssr = metric.ssr\n    stat.mechanism = MECHANISM_MAPPING[metric.mechanism]\n  } else {\n    stat.ssr = initialRenderIsSSR\n  }\n\n  const syntheticTest = document.querySelector('meta[name=\"synthetic-test\"]')\n  if (syntheticTest) {\n    stat.synthetic = true\n  }\n\n  sendStats({webVitalTimings: [stat]})\n\n  sendStatToHydro(stat)\n\n  updateStaffBar(name, value)\n}\n\nfunction updateStaffBar(name: string, value: number) {\n  const staffBarContainer = document.querySelector('#staff-bar-web-vitals')\n  const metricContainer = staffBarContainer?.querySelector(`[data-metric=${name.toLowerCase()}]`)\n\n  if (!metricContainer) {\n    return\n  }\n\n  metricContainer.textContent = value.toPrecision(6)\n}\n\nfunction isTimingSuppported(): boolean {\n  return !!(window.performance && window.performance.timing && window.performance.getEntriesByType)\n}\n\nasync function sendTimingResults() {\n  if (!isTimingSuppported()) return\n\n  await loaded\n  await new Promise(resolve => setTimeout(resolve))\n\n  sendResourceTimings()\n  sendNavigationTimings()\n}\n\nconst sendResourceTimings = () => {\n  const resourceTimings = window.performance\n    .getEntriesByType('resource')\n\n    .map(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (timing: any): PlatformBrowserPerformanceNavigationTiming => ({\n        name: timing.name,\n        entryType: timing.entryType,\n        startTime: timing.startTime,\n        duration: timing.duration,\n        initiatorType: timing.initiatorType,\n        nextHopProtocol: timing.nextHopProtocol,\n        workerStart: timing.workerStart,\n\n        workerTiming: (timing.workerTiming || []).map(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (workerTiming: any): PlatformBrowserPerformanceWorkerTiming => ({\n            duration: workerTiming.duration,\n            startTime: workerTiming.startTime,\n            name: workerTiming.name,\n            entryType: workerTiming.entryType,\n          }),\n        ),\n\n        serverTiming: (timing.serverTiming || []).map(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (serverTiming: any): PlatformBrowserPerformanceServerTiming => ({\n            duration: serverTiming.duration,\n            description: serverTiming.description,\n            name: serverTiming.name,\n          }),\n        ),\n        redirectStart: timing.redirectStart,\n        redirectEnd: timing.redirectEnd,\n        fetchStart: timing.fetchStart,\n        domainLookupStart: timing.domainLookupStart,\n        domainLookupEnd: timing.domainLookupEnd,\n        connectStart: timing.connectStart,\n        connectEnd: timing.connectEnd,\n        secureConnectionStart: timing.secureConnectionStart,\n        requestStart: timing.requestStart,\n        responseStart: timing.responseStart,\n        responseEnd: timing.responseEnd,\n        transferSize: timing.transferSize,\n        encodedBodySize: timing.encodedBodySize,\n        decodedBodySize: timing.decodedBodySize,\n      }),\n    )\n\n  if (resourceTimings.length) {\n    sendStats({resourceTimings})\n  }\n}\n\nconst sendNavigationTimings = () => {\n  const navigationTimings = window.performance\n    .getEntriesByType('navigation')\n\n    .map(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (timing: any): PlatformBrowserPerformanceNavigationTiming => ({\n        activationStart: timing.activationStart,\n        name: timing.name,\n        entryType: timing.entryType,\n        startTime: timing.startTime,\n        duration: timing.duration,\n        initiatorType: timing.initiatorType,\n        nextHopProtocol: timing.nextHopProtocol,\n        workerStart: timing.workerStart,\n        workerTiming: (timing.workerTiming || []).map(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (workerTiming: any): PlatformBrowserPerformanceWorkerTiming => ({\n            duration: workerTiming.duration,\n            startTime: workerTiming.startTime,\n            name: workerTiming.name,\n            entryType: workerTiming.entryType,\n          }),\n        ),\n\n        serverTiming: (timing.serverTiming || []).map(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (serverTiming: any): PlatformBrowserPerformanceServerTiming => ({\n            duration: serverTiming.duration,\n            description: serverTiming.description,\n            name: serverTiming.name,\n          }),\n        ),\n        redirectStart: timing.redirectStart,\n        redirectEnd: timing.redirectEnd,\n        fetchStart: timing.fetchStart,\n        domainLookupStart: timing.domainLookupStart,\n        domainLookupEnd: timing.domainLookupEnd,\n        connectStart: timing.connectStart,\n        connectEnd: timing.connectEnd,\n        secureConnectionStart: timing.secureConnectionStart,\n        requestStart: timing.requestStart,\n        responseStart: timing.responseStart,\n        responseEnd: timing.responseEnd,\n        transferSize: timing.transferSize,\n        encodedBodySize: timing.encodedBodySize,\n        decodedBodySize: timing.decodedBodySize,\n        unloadEventStart: timing.unloadEventStart,\n        unloadEventEnd: timing.unloadEventEnd,\n        domInteractive: timing.domInteractive,\n        domContentLoadedEventStart: timing.domContentLoadedEventStart,\n        domContentLoadedEventEnd: timing.domContentLoadedEventEnd,\n        domComplete: timing.domComplete,\n        loadEventStart: timing.loadEventStart,\n        loadEventEnd: timing.loadEventEnd,\n        type: timing.type,\n        redirectCount: timing.redirectCount,\n      }),\n    )\n\n  if (navigationTimings.length) {\n    sendStats({navigationTimings})\n  }\n}\n\nsendTimingResults()\nonCLS(sendVitals)\nonFCP(sendVitals)\nonFID(sendVitals)\nonLCP(sendVitals)\nonTTFB(sendVitals)\nonINP(sendVitals)\n","import {onLCP} from 'web-vitals'\nimport {SOFT_NAV_STATE, SoftNavMechanism} from '@github-ui/soft-nav'\nimport {wasServerRendered} from '@github-ui/ssr-utils'\nimport {sendVitals} from './timing-stats'\n\ninterface HPCEventTarget extends EventTarget {\n  addEventListener(\n    type: 'hpc:timing',\n    listener: (event: HPCTimingEvent) => void,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  addEventListener(type: string, listener: (event: Event) => void, options?: boolean | AddEventListenerOptions): void\n}\n\nexport class HPCTimingEvent extends Event {\n  name = 'HPC' as const\n  value: number\n\n  constructor(public soft: boolean, public ssr: boolean, public mechanism: SoftNavMechanism | 'hard', start: number) {\n    super('hpc:timing')\n    this.value = performance.now() - start\n  }\n}\n\n// We use an AbortController to cleanup event listeners when we soft navigate.\nlet abortController = new AbortController()\n\n// Restart HPC measurement. This will stop any ongoing HPC calls and start a new timer.\nfunction resetHPC({soft = false, mechanism = 'hard'}: {soft: boolean; mechanism?: SoftNavMechanism | 'hard'}) {\n  abortController.abort()\n  abortController = new AbortController()\n\n  // Initialize HPC\n  const hpcStart = soft ? performance.now() : 0\n  const hpc: HPCEventTarget = new EventTarget() as HPCEventTarget\n  let tabHidden = false\n  let animationFrame: number\n  let dataHPCanimationFrame: number\n\n  // Observer to listen to ALL mutations to the DOM. We need to check all added nodes\n  // for the `data-hpc` attribue. If none are found, we keep listening until all mutations are done.\n  const hpcDOMInsertionObserver = new MutationObserver(mutations => {\n    let hasDataHPC = false\n\n    // if the mutation didn't add any nodes, we don't track its HPC\n    if (mutations.every(mutation => mutation.addedNodes.length === 0)) return\n\n    cancelAnimationFrame(animationFrame)\n\n    for (const mutation of mutations) {\n      if (mutation.type !== 'childList') continue\n\n      for (const node of mutation.addedNodes) {\n        if (!(node instanceof Element)) continue\n\n        if (node.hasAttribute('data-hpc') || node.querySelector('[data-hpc]')) {\n          hasDataHPC = true\n          break\n        }\n      }\n\n      if (hasDataHPC) break\n    }\n\n    if (hasDataHPC) {\n      window.performance.measure('HPC', 'navigationStart')\n      // data-hpc found, we can stop listening to mutations.\n      hpcDOMInsertionObserver.disconnect()\n      // only cancel the animation frame if the controller aborts.\n      dataHPCanimationFrame = requestAnimationFrame(() => {\n        hpc.dispatchEvent(new HPCTimingEvent(soft, wasServerRendered(), mechanism, hpcStart))\n      })\n    } else {\n      animationFrame = requestAnimationFrame(() => {\n        hpc.dispatchEvent(new Event('hpc:dom-insertion'))\n      })\n    }\n  })\n  hpcDOMInsertionObserver.observe(document, {childList: true, subtree: true})\n\n  // Stop listening for HPC events if the user has interacted, as interactions\n  // can cause DOM mutations, which we want to avoid capturing for HPC.\n  const listenerOpts = {capture: true, passive: true, once: true, signal: abortController.signal}\n  const stop = () => abortController.abort()\n\n  // eslint-disable-next-line github/require-passive-events\n  document.addEventListener('touchstart', stop, listenerOpts)\n  document.addEventListener('mousedown', stop, listenerOpts)\n  document.addEventListener('keydown', stop, listenerOpts)\n  document.addEventListener('pointerdown', stop, listenerOpts)\n\n  let emulatedHPCTimer: ReturnType<typeof setTimeout>\n  hpc.addEventListener(\n    'hpc:dom-insertion',\n    () => {\n      clearTimeout(emulatedHPCTimer)\n      // Whenever we see a DOM insertion, we keep track of when it happened.\n      const event = new HPCTimingEvent(soft, wasServerRendered(), mechanism, hpcStart)\n\n      // If no mutations happen for 2500ms, we assume that the DOM is fully loaded, so we send the\n      // last seen mutation values.\n      emulatedHPCTimer = setTimeout(() => hpc.dispatchEvent(event), 2500)\n    },\n    {signal: abortController.signal},\n  )\n\n  hpc.addEventListener(\n    'hpc:timing',\n    (e: HPCTimingEvent) => {\n      if (!tabHidden && e.value < 60_000) sendVitals(e)\n\n      abortController.abort()\n    },\n    {signal: abortController.signal},\n  )\n\n  // If the stop event is triggered, we want to stop listening to DOM mutations.\n  abortController.signal.addEventListener('abort', () => {\n    cancelAnimationFrame(dataHPCanimationFrame)\n    cancelAnimationFrame(animationFrame)\n    clearTimeout(emulatedHPCTimer)\n    hpcDOMInsertionObserver.disconnect()\n  })\n\n  // If the user changes tab, we don't want to send the recorded metrics since it may send garbage data.\n  document.addEventListener(\n    'visibilitychange',\n    () => {\n      tabHidden = true\n      abortController.abort()\n    },\n    {signal: abortController.signal},\n  )\n\n  // In a hard-load, if the script is evaluated after the `data-hpc` element is rendered,\n  // we default the HPC value to LCP.\n  if (!soft && document.querySelector('[data-hpc]')) {\n    onLCP(({value}) => {\n      window.performance.measure('HPC', {start: 'navigationStart', end: value})\n      sendVitals({name: 'HPC', value, soft, ssr: wasServerRendered(), mechanism: 'hard'} as HPCTimingEvent)\n    })\n\n    abortController.abort()\n  }\n}\n\n// Any time we trigger a new soft navigation, we want to reset HPC.\ndocument.addEventListener(SOFT_NAV_STATE.START, ({mechanism}) => {\n  resetHPC({soft: true, mechanism})\n})\n\n// Start HPC at page load.\nresetHPC({soft: false})\n","import {loaded} from '@github-ui/document-ready'\nimport {sendPageView} from '@github-ui/hydro-analytics'\nimport {SOFT_NAV_STATE, getSoftNavMechanism} from '@github-ui/soft-nav'\n;(async function () {\n  // Turbo loads should be treated like pageloads\n  document.addEventListener(SOFT_NAV_STATE.FRAME_UPDATE, () =>\n    sendPageView({\n      turbo: 'true',\n    }),\n  )\n\n  document.addEventListener(SOFT_NAV_STATE.SUCCESS, () => {\n    if (getSoftNavMechanism() === 'turbo.frame') {\n      return\n    } else {\n      sendPageView({\n        turbo: 'true',\n      })\n    }\n  })\n\n  // Send a page view as soon as the page is loaded\n  await loaded\n  sendPageView()\n})()\n","import type {Context} from '@github/hydro-analytics-client'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\non('click', '[data-octo-click]', function (event) {\n  const targetEl = event.currentTarget\n  if (!(targetEl instanceof HTMLElement)) {\n    return\n  }\n\n  const eventType = targetEl.getAttribute('data-octo-click') || ''\n  const context: Context = {}\n\n  if (targetEl.hasAttribute('data-ga-click')) {\n    const gaEvent = targetEl.getAttribute('data-ga-click')!\n    const parts = gaEvent.split(',')\n    context.category = parts[0]!.trim()\n    context.action = parts[1]!.trim()\n  }\n\n  if (targetEl.hasAttribute('data-octo-dimensions')) {\n    const dimensionsList = targetEl.getAttribute('data-octo-dimensions')!.split(',')\n\n    for (const dimensionPair of dimensionsList) {\n      const [key, value] = dimensionPair.split(/:(.+)/)\n      if (key) {\n        context[key] = value || ''\n      }\n    }\n  }\n  sendEvent(eventType, context)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendData} from '../hydro-tracking'\nimport {debugHydroPayload} from './console-debug'\n\non('click', '[data-hydro-click]', function (event) {\n  const el = event.currentTarget\n  const payload = el.getAttribute('data-hydro-click') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  debugHydroPayload('hydro-debug.click', payload)\n  sendData(payload, hmac, hydroClientContext)\n})\n","// Handle immediate updates returned from the server on ajax success.\n//\n// See ShowPartial#render_immediate_partials\n\nimport {remoteForm} from '@github/remote-form'\nimport {replaceContent} from '../updatable-content'\n\nremoteForm('.js-immediate-updates', async function (form, wants) {\n  let updateContent\n\n  try {\n    const response = await wants.json()\n    updateContent = response.json.updateContent\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.json) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      updateContent = error.response.json.updateContent\n    }\n  }\n\n  if (updateContent) {\n    for (const selector in updateContent) {\n      const html = updateContent[selector]\n      const el = document.querySelector(selector)\n      if (el instanceof HTMLElement) {\n        replaceContent(el, html)\n      }\n    }\n  }\n})\n","import {sendStats} from '@github-ui/stats'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\ndocument.addEventListener('DOMContentLoaded', onDOMContentLoaded)\n\nasync function onDOMContentLoaded() {\n  if (isFeatureEnabled('IMAGE_METRIC_TRACKING') === false) return\n\n  const images = Array.from(document.querySelectorAll('img.js-img-time')).slice(0, 5)\n  const startTime = Date.now()\n  const stats: PlatformBrowserPerformanceTransparentRedirectTiming[] = []\n\n  await Promise.all(images.map(image => measureRedirectTiming(image, startTime, stats)))\n\n  if (stats.length > 0) sendStats({transparentRedirectTimings: stats})\n}\n\nasync function measureRedirectTiming(\n  image: Element,\n  startTime: number,\n  stats: PlatformBrowserPerformanceTransparentRedirectTiming[],\n) {\n  const LOCAL_STORAGE_PATH_REGEX =\n    /\\/assets\\/storage\\/user\\/([0-9]+)\\/files\\/([{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?)/\n  const PROD_STORAGE_PATH_REGEX = /assets\\/([0-9]+)\\/([{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?)/\n\n  const source = image.getAttribute('src')\n  if (!source) return\n\n  const url = new URL(source, window.location.origin)\n  const pathRegex = LOCAL_STORAGE_PATH_REGEX.test(url.pathname) ? LOCAL_STORAGE_PATH_REGEX : PROD_STORAGE_PATH_REGEX\n  const [, userID, fileGUID] = url.pathname.match(pathRegex) || []\n  if (!userID || !fileGUID) return\n\n  await fetch(`/assets/measure/${userID}/${fileGUID}`)\n\n  const duration = Date.now() - startTime\n  const stat: PlatformBrowserPerformanceTransparentRedirectTiming = {duration, fileGUID, userID}\n  stats.push(stat)\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('[data-indeterminate]', {\n  constructor: HTMLInputElement,\n  initialize(el) {\n    el.indeterminate = true\n  },\n})\n","import {logPageView} from '../jump-to/page-views'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction load() {\n  import('../jump-to')\n}\n\nobserve('.js-jump-to-field', {\n  constructor: HTMLInputElement,\n  add(el) {\n    el.addEventListener('focusin', load, {once: true})\n    logPageView(window.location.pathname)\n  },\n})\n","import {dialog} from '../details-dialog'\nimport {eventToHotkeyString} from '@github/hotkey'\nimport {fetchSafeDocumentFragment} from '../fetch'\nimport {isFormField} from '@github-ui/form-utils'\nimport {isShortcutAllowed} from './keyboard-shortcuts-helper'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nlet shortcutModalShown = false\n\nasync function showKeyboardShortcuts() {\n  if (shortcutModalShown) return\n  shortcutModalShown = true\n\n  const metaKeyboardShortcuts = document.querySelector<HTMLMetaElement>('meta[name=github-keyboard-shortcuts]')!\n  const options = {contexts: metaKeyboardShortcuts.content}\n  const url = `/site/keyboard_shortcuts?${new URLSearchParams(options).toString()}`\n\n  const shortcutModal = await dialog({\n    content: fetchSafeDocumentFragment(document, url),\n    labelledBy: 'keyboard-shortcuts-heading',\n  })\n  shortcutModal.style.width = '800px'\n  shortcutModal.addEventListener(\n    'dialog:remove',\n    function () {\n      shortcutModalShown = false\n    },\n    {once: true},\n  )\n}\n\n// Toggles ajax request to display keyboard shortcuts.\n//\n// Add a class of `js-keyboard-shortcuts` to get this behavior on your page.\non('click', '.js-keyboard-shortcuts', showKeyboardShortcuts)\n\ndocument.addEventListener('keydown', (event: Event) => {\n  if (!(event instanceof KeyboardEvent)) return\n  if (!isShortcutAllowed(event)) return\n\n  if (event.target instanceof Node && isFormField(event.target)) return\n  if (eventToHotkeyString(event) !== 'Shift+?') return\n  showKeyboardShortcuts()\n})\n\nobserve('.js-modifier-key', {\n  constructor: HTMLElement,\n  add(container) {\n    if (/Macintosh/.test(navigator.userAgent)) {\n      let shortcut = container.textContent\n      if (shortcut) {\n        shortcut = shortcut.replace(/ctrl/, '')\n        shortcut = shortcut.replace(/alt/, '')\n        container.textContent = shortcut\n      }\n    }\n  },\n})\n\nobserve('.js-modifier-label-key', {\n  add(container) {\n    let shortcutLabel = container.textContent?.replace(/ctrl/i, 'Ctrl')\n    if (!shortcutLabel) return\n    if (/Macintosh/.test(navigator.userAgent)) {\n      shortcutLabel = shortcutLabel.replace(/ctrl/i, 'Cmd')\n      shortcutLabel = shortcutLabel.replace(/alt/i, 'Option')\n    }\n    container.textContent = shortcutLabel\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Length-limited input with warning.\n//\n// Limit the length of user input and provide a warning with a character count\n// when the user approaches the length limit.\n//\n// Three classes must be set.\n//  - js-length-limited-input.\n//  - js-length-limited-input-container.\n//  - js-length-limited-input-warning (probably also hidden by default).\n//\n// Two data attributes should be set on .js-length-limited-input:\n//  - data-warning-text, a string template for the warning message.\n//    Use `{{remaining}}` to interpolate the number of characters remaining.\n//  - data-input-max-length.\n//\n// @example\n// ```html\n//    <dd class=\"js-length-limited-input-container\">\n//      <input type=\"text\"\n//             class=\"js-length-limited-input\"\n//             data-warning-text=\"You have {{remaining}} characters remaining\"\n//             data-input-max-length=\"160\">\n//\n//      <p class=\"js-length-limited-input-warning d-none\">\n//      </p>\n//    </dd>\n// ```\nfunction displayLengthWarning(event: Event) {\n  // The user input field (<input>, <textarea>, etc)\n  const inputField = event.currentTarget\n  if (!(inputField instanceof HTMLInputElement || inputField instanceof HTMLTextAreaElement)) return\n\n  // The character limit, set in data attribute \"max-length\"\n  const maxLength = parseInt(inputField.getAttribute('data-input-max-length') || '', 10)\n\n  // The remaining length to start showing the warning for, defaults to 5\n  const warningLength = parseInt(inputField.getAttribute('data-warning-length') || '', 10) || 5\n\n  // The user input field (<input>, <textarea>, etc)\n  const inputValue = inputField.value\n\n  // New lines need to be counted as two characters. They are by the server.\n  const inputValueWithNewLinesFix = inputValue.replace(/(\\r\\n|\\n|\\r)/g, '\\r\\n')\n\n  // Characters remaining before the limit is reached\n  let remainingLength = maxLength - inputValueWithNewLinesFix.length\n\n  // HTML maxLength attribute does not count carriage returns correctly.\n  // It is also inconsistent between Chrome and Firefox\n  // and therefore can't be used bugfree without browser sniffing\n  // Creating our own maxLength implementation instead.\n  if (remainingLength <= 0) {\n    let truncatedInputValue = inputValueWithNewLinesFix.substr(0, maxLength)\n    // Trim trailing \\r so we don't truncate in the middle of a \\r\\n newline\n    if (truncatedInputValue.endsWith('\\r')) {\n      truncatedInputValue = truncatedInputValue.substr(0, maxLength - 1)\n      remainingLength = 1\n    } else {\n      remainingLength = 0\n    }\n    inputField.value = truncatedInputValue\n  }\n\n  // The warning message to display after the remaining character count\n  const warningText = inputField.getAttribute('data-warning-text')!\n\n  // The container enclosing the length-limited input field\n  const inputContainer = inputField.closest<HTMLElement>('.js-length-limited-input-container')!\n\n  // The container for the warning message\n  const warningArea = inputContainer.querySelector<HTMLElement>('.js-length-limited-input-warning')!\n\n  if (remainingLength <= warningLength) {\n    warningArea.textContent = warningText.replace(new RegExp('{{remaining}}', 'g'), `${remainingLength}`)\n    /* eslint-disable-next-line github/no-d-none */\n    warningArea.classList.remove('d-none')\n  } else {\n    warningArea.textContent = ''\n    /* eslint-disable-next-line github/no-d-none */\n    warningArea.classList.add('d-none')\n  }\n}\n\nobserve('.js-length-limited-input', {\n  add(el) {\n    el.addEventListener('input', displayLengthWarning)\n    el.addEventListener('change', displayLengthWarning)\n  },\n  remove(el) {\n    el.removeEventListener('input', displayLengthWarning)\n    el.removeEventListener('change', displayLengthWarning)\n  },\n})\n","// If the current page is openable in github.dev, do so on click.\n// This would be achievable without any custom JS by just using\n// data-hotkey except for two things:\n//  - PJAX and other replaceState-triggered location updates like\n//    the `y` hotkey need to be respected.\n//  - the editor cares about the hash of the page.\n// So we'll construct the href client-side.\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction isVisible(el: HTMLElement) {\n  try {\n    const rect = el.getBoundingClientRect()\n    if (rect.height === 0 && rect.width === 0) {\n      return false\n    }\n    if (el.style.opacity === '0' || el.style.visibility === 'hidden') {\n      return false\n    }\n  } catch {\n    // fall through to return true below\n  }\n  return true\n}\n\non('click', '.js-github-dev-shortcut', function (event) {\n  event.preventDefault()\n  // If content exists in any visble comment field, prompt before navigating to github.dev\n  for (const el of document.querySelectorAll<HTMLTextAreaElement>('textarea.js-comment-field')) {\n    // eslint-disable-next-line i18n-text/no-en\n    if (el.value && isVisible(el) && !confirm('Are you sure you want to open github.dev?')) {\n      return\n    }\n  }\n  // Assumption: the href of the shortcut is the base URL for\n  // the serverless editor, e.g. https://github.dev/\n  const target = event.currentTarget as HTMLAnchorElement\n  target.pathname = window.location.pathname\n  target.hash = window.location.hash\n  window.location.href = target.href\n})\n\non('click', '.js-github-dev-new-tab-shortcut', function (event) {\n  // Assumption: the href of the shortcut is the base URL for\n  // the serverless editor, e.g. https://github.dev/\n  const target = event.currentTarget as HTMLAnchorElement\n  target.pathname = window.location.pathname\n  target.hash = window.location.hash\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\n\non('click', '.js-member-search-filter', function (event) {\n  event.preventDefault()\n\n  const filter = event.currentTarget.getAttribute('data-filter')!\n  const menu = event.currentTarget.closest<HTMLElement>('[data-filter-on]')!\n  const filterOn = menu.getAttribute('data-filter-on')!\n  const field = document.querySelector<HTMLInputElement>('.js-member-filter-field')!\n\n  // Remove any existing filters on the opened dropdown.\n  const currentValue = field.value\n\n  // Regex allows a-z chars, underscores & strings wrapped in single quotes (required for custom roles)\n  const regex = new RegExp(`${filterOn}:(?:[a-z]|_|((').*(')))+`)\n  const currentFilters = currentValue.toString().trim().replace(regex, '')\n\n  field.value = `${currentFilters} ${filter}`.replace(/\\s\\s/, ' ').trim()\n  field.focus()\n  fire(field, 'input')\n})\n","// Notice Behavior\n//\n// Add basic data-remote success hook for hiding notice on ajax\n// success.\n//\n// Markup\n//\n//     <div class=\"js-notice\">\n//       Hey!\n//       <a href=\"/dismiss\" class=\"js-notice-dismiss\">\n//         Dismiss\n//       </a>\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {showGlobalError} from '../behaviors/ajax-error'\n\nremoteForm('.js-notice-dismiss', async function (form, send) {\n  await send.text()\n  const notice = form.closest<HTMLElement>('.js-notice')!\n  notice.remove()\n})\n\non('submit', '.js-notice-dismiss-remote', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    showGlobalError()\n    return\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  } else {\n    const notice = form.closest<HTMLElement>('.js-notice')!\n    notice.remove()\n  }\n})\n","// Append any window.location.hash changes to the permalink.\n//\n// For example, if you're viewing:\n// /github/linguist/blob/master/lib/linguist/languages.yml#L12\n//\n// You probably want the permalink to preserve the #L12, and go to:\n// /github/linguist/blob/SHA/lib/linguist/languages.yml#L12\n//\n//\n// Also update link that we want to keep in sync with the permalink change.\n//\n// For example, if you `y` a Markdown file and click the \"Display as source blob\"\n// button, probably you want its link (href) to change from:\n// /github/linguist/blob/master/README.md?plain=1\n//\n// to:\n// /github/linguist/blob/SHA/README.md?plain=1\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '../history'\n\non('click', '.js-permalink-shortcut', function (event) {\n  const target = event.currentTarget as HTMLAnchorElement\n  try {\n    replaceState(null, '', target.href + window.location.hash)\n  } catch (error) {\n    window.location.href = target.href + window.location.hash\n  }\n  for (const element of document.querySelectorAll('.js-permalink-replaceable-link')) {\n    if (element instanceof HTMLAnchorElement) {\n      element.href = element.getAttribute('data-permalink-href')!\n    }\n  }\n  event.preventDefault()\n})\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('.js-permission-menu-form', async function (form, wants) {\n  const success = form.querySelector<HTMLElement>('.js-permission-success')!\n  const error = form.querySelector<HTMLElement>('.js-permission-error')!\n\n  success.hidden = true\n  error.hidden = true\n  form.classList.add('is-loading')\n\n  let response\n  try {\n    response = await wants.json()\n  } catch (e) {\n    // If the request errored, we'll set the error state and return.\n    form.classList.remove('is-loading')\n    error.hidden = false\n    return\n  }\n\n  form.classList.remove('is-loading')\n  success.hidden = false\n\n  const container = form.closest('.js-org-repo')\n  if (container) {\n    const data = response.json\n    container.classList.toggle('with-higher-access', data['members_with_higher_access'])\n  }\n})\n","import {microtask} from '@github-ui/eventloop-tasks'\nimport {sendStats} from '@github-ui/stats'\n\nlet lastTurboRequestUrl: string | null = null\n\n// Collect User Timing metrics so we can track time-to-load on turbo actions\nconst turboMeasure = 'last_turbo_request'\nconst turboStartMark = 'turbo_start'\nconst turboEndMark = 'turbo_end'\n\n// Mark turbo start on performance timeline and save url for last turbo request.\nfunction markTurboStart(event: Event) {\n  if (!(event instanceof CustomEvent)) return\n  if (!event.detail?.url || event.defaultPrevented) return\n\n  window.performance.mark(turboStartMark)\n  lastTurboRequestUrl = event.detail.url\n}\n\n// Mark turbo end on performance timeline and report results.\nasync function trackTurboTiming() {\n  await microtask()\n\n  if (!window.performance.getEntriesByName(turboStartMark).length) return\n\n  window.performance.mark(turboEndMark)\n  window.performance.measure(turboMeasure, turboStartMark, turboEndMark)\n  const measures = window.performance.getEntriesByName(turboMeasure)\n\n  const measure = measures.pop()\n  const duration = measure ? measure.duration : null\n  if (!duration) return\n\n  if (lastTurboRequestUrl) {\n    sendStats({\n      requestUrl: lastTurboRequestUrl,\n      turboDuration: Math.round(duration),\n    })\n  }\n  clearTurboMarks()\n}\n\n// Clear turbo marks from performance timeline.\nfunction clearTurboMarks() {\n  window.performance.clearMarks(turboStartMark)\n  window.performance.clearMarks(turboEndMark)\n  window.performance.clearMeasures(turboMeasure)\n}\n\nif ('getEntriesByName' in window.performance) {\n  document.addEventListener('turbo:before-fetch-request', markTurboStart)\n  document.addEventListener('turbo:render', trackTurboTiming)\n}\n","// Quick submit using -Enter or Ctrl+Enter\n//\n// When `.js-quick-submit` field is focused, -Enter or Ctrl+Enter will submit\n// the form it belongs to unless the first submit button of that form is disabled.\n\nimport {onKey} from '../onfocus'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nonKey('keydown', '.js-quick-submit', function (event: KeyboardEvent) {\n  quickSubmit(event)\n})\n\nfunction quickSubmit(event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  const field = event.target as HTMLInputElement | HTMLTextAreaElement\n\n  if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {\n    const form = field.form!\n    const button = form.querySelector('input[type=submit], button[type=submit]')\n    if (event.shiftKey) {\n      const altButton = form.querySelector('.js-quick-submit-alternative')\n      if ((altButton instanceof HTMLInputElement || altButton instanceof HTMLButtonElement) && !altButton.disabled) {\n        requestSubmit(form, altButton)\n      }\n    } else if (button instanceof HTMLInputElement || button instanceof HTMLButtonElement) {\n      if (!button.disabled) {\n        requestSubmit(form)\n      }\n    } else {\n      requestSubmit(form)\n    }\n    event.preventDefault()\n  }\n  /* eslint-enable no-restricted-syntax */\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('body.js-print-popup', () => {\n  window.print()\n  setTimeout(window.close, 1000)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('poll-include-fragment[data-redirect-url]', function (el) {\n  const url = el.getAttribute('data-redirect-url')!\n  el.addEventListener('load', function () {\n    window.location.href = url\n  })\n})\n\nobserve('poll-include-fragment[data-reload]', function (el) {\n  el.addEventListener('load', function () {\n    window.location.reload()\n  })\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {debounce} from '@github/mini-throttle'\nimport {showGlobalError} from '../behaviors/ajax-error'\nimport {parseHTML} from '../parse-html'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst resizeObserver = new ResizeObserver(entries => {\n  for (const entry of entries) {\n    // The reaction buttons are 26 +/- 0.1px depending on :shrug:. If the menu overflows it'll go to 2 rows, and be closer to 52px than 26px\n    if (entry.contentRect.height > 40) {\n      hideReactionOverflow(entry.target as HTMLElement)\n    }\n  }\n})\n\nobserve('.js-reactions-container', function (el) {\n  resizeObserver.observe(el)\n})\n\nfunction hideReactionOverflow(reactionContainer: HTMLElement) {\n  const availableWidth = reactionContainer.offsetWidth * 0.7\n  const reactionButtons = reactionContainer.querySelectorAll<HTMLElement>('.js-reaction-group-button')\n  const allReactionsPopover = reactionContainer.querySelector<HTMLElement>('.js-all-reactions-popover')\n\n  let totalButtonWidth = 0\n  for (const button of reactionButtons) {\n    totalButtonWidth += button.clientWidth\n  }\n  totalButtonWidth += allReactionsPopover?.clientWidth || 0\n\n  if (availableWidth < totalButtonWidth) {\n    let remainingWidth = availableWidth\n\n    if (allReactionsPopover) {\n      allReactionsPopover.removeAttribute('hidden')\n      remainingWidth -= allReactionsPopover.offsetWidth\n    }\n\n    for (const button of reactionButtons) {\n      const buttonWidth = button.offsetWidth\n      if (buttonWidth > remainingWidth) {\n        button.setAttribute('hidden', 'hidden')\n      } else {\n        button.removeAttribute('hidden')\n      }\n      remainingWidth -= buttonWidth\n    }\n  }\n}\n\nconst debouncedPickReaction = debounce(async (e: Event) => {\n  const form = e.target as HTMLFormElement\n\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      headers: new Headers({\n        'X-Requested-With': 'XMLHttpRequest',\n      }),\n      body: new FormData(form),\n    })\n  } catch {\n    showGlobalError()\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n\n  if (response && response.status === 200) {\n    const json = await response.json()\n\n    const comment = form.closest<HTMLElement>('.js-comment')\n    const reactionsContainer = comment?.querySelector<HTMLElement>('.js-reactions-container')\n    const reactionsHeader = comment?.querySelector<HTMLElement>('.js-comment-header-reaction-button')\n    if (json && reactionsContainer && reactionsHeader) {\n      const newReactions = parseHTML(document, json['reactions_container'].trim())\n      const newReactionButton = parseHTML(document, json['comment_header_reaction_button'].trim())\n      reactionsContainer.replaceWith(newReactions)\n      reactionsHeader.replaceWith(newReactionButton)\n    }\n    const elementToFocus = comment?.querySelector<HTMLElement>('.js-reactions-focus')\n    if (elementToFocus) elementToFocus.focus()\n  }\n}, 1000)\n\nconst newHandlePickReaction = async (e: Event) => {\n  const form = e.target as HTMLFormElement\n\n  // .js-comment is the one thing that all of our reaction forms have as a common parent\n  const comment = form.closest<HTMLElement>('.js-comment')\n  const reactionsHeader = comment?.querySelector<HTMLDetailsElement>('details.js-comment-header-reaction-button')\n\n  if (reactionsHeader) {\n    reactionsHeader.open = false\n  }\n\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      headers: new Headers({\n        'X-Requested-With': 'XMLHttpRequest',\n      }),\n      body: new FormData(form),\n    })\n  } catch {\n    showGlobalError()\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n\n  // If the response is ok, we do nothing. optimistic-reactions.ts has already\n  // updated the UI and set the focused element appropriately.\n  // This keeps us from having to work around edge cases related to out of order requests.\n}\n\non('submit', '.js-pick-reaction', e => {\n  e.preventDefault()\n  debouncedPickReaction(e)\n})\n\non('submit', '.js-optimistic-pick-reaction', e => {\n  e.preventDefault()\n  newHandlePickReaction(e)\n})\n\nfunction showReactionContent(event: MouseEvent) {\n  const target = event.target as HTMLElement\n\n  const label = target.getAttribute('data-reaction-label')!\n  const container = target.closest<HTMLElement>('.js-add-reaction-popover')!\n  const description = container.querySelector<HTMLElement>('.js-reaction-description')!\n\n  if (!description.hasAttribute('data-default-text')) {\n    description.setAttribute('data-default-text', description.textContent || '')\n  }\n\n  description.textContent = label\n}\n\nfunction hideReactionContent(event: MouseEvent) {\n  const container = (event.target as HTMLElement).closest<HTMLElement>('.js-add-reaction-popover')!\n  const description = container.querySelector<HTMLElement>('.js-reaction-description')!\n\n  const defaultText = description.getAttribute('data-default-text')\n  if (defaultText) {\n    description.textContent = defaultText\n  }\n}\n\non(\n  'toggle',\n  '.js-reaction-popover-container',\n  function (event) {\n    const isOpen = event.currentTarget.hasAttribute('open')\n    for (const item of (event.target as Element).querySelectorAll<HTMLElement>('.js-reaction-option-item')) {\n      if (isOpen) {\n        item.addEventListener('mouseenter', showReactionContent)\n        item.addEventListener('mouseleave', hideReactionContent)\n      } else {\n        item.removeEventListener('mouseenter', showReactionContent)\n        item.removeEventListener('mouseleave', hideReactionContent)\n      }\n    }\n  },\n  {capture: true},\n)\n","// Remote\n//\n// Implements `data-remote` for forms.\n//\n//\n// Markup\n//\n// `<form>`\n//\n// ``` definition-table\n// Attribute - Description\n//\n// `data-remote`\n//   Enables remote behavior on the element if set to anything.\n//\n// `method`\n//   Changes the method of the AJAX request. Defaults to `\"get\"`. Maps to\n//   jQuery's [type](http://api.jquery.com/jQuery.ajax/).\n//\n// `action`\n//   URL for AJAX request. Defaults to the current url. Maps to jQuery's\n//   [`url`](http://api.jquery.com/jQuery.ajax/).\n//\n// `data-type`\n//   Specify the data type of the response. Can be `\"xml\"`, `\"json\"`,\n//   `\"script\"`, or `\"html\"`. Defaults to jQuery's *\"intelligent guess\"*\n//   from the response content type. Maps to jQuery's\n//   [`dataType`](http://api.jquery.com/jQuery.ajax/).\n// ```\n//\n// ``` html\n// <form action=\"/comment\" method=\"post\" data-remote></form>\n// ```\n//\n//\n// Events\n//\n// Use delegated jQuery's global AJAX events to handle successful\n// and error states. See jQuery's [AJAX event\n// documentation](http://docs.jquery.com/Ajax_Events) for a complete\n// reference.\n//\n// `deprecatedAjaxSuccess`\n//\n// This event is only called if the request was successful (no errors from the server, no errors with the data).\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// ```\n//\n// `ajaxError`\n//\n// This event is only called if an error occurred with the request (you can never\n// have both an error and a success callback with a request).\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// Extra arguments\n//   `status` - Status response number\n//   `error` - Error message string\n//   `text` - Response text string\n// ```\n//\n// `deprecatedAjaxComplete`\n//\n// This event is called regardless of if the request was successful, or not. You\n// will always receive a complete callback, even for synchronous requests.\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// ```\n//\n//     on('deprecatedAjaxSend', '.new-comment', function(event) {\n//        event.currentTarget.classList.add('loading')\n//     })\n//\n//     on('deprecatedAjaxComplete', '.new-comment', function(event) {\n//        event.currentTarget.classList.remove('loading')\n//     })\n//\n//     on('deprecatedAjaxSuccess', '.new-comment', function (event) {\n//        event.currentTarget.classList.add('success')\n//     })\n//\n//     on('deprecatedAjaxError', '.new-comment', function (event) {\n//       alert(\"Something went wrong!\")\n//     })\n//\n//\n// Intercept all form submissions with data-remote and turn\n// it into a XHR request instead.\n\nimport type {Kicker, SimpleRequest, SimpleResponse} from '@github/remote-form'\nimport {afterRemote, beforeRemote, remoteForm} from '@github/remote-form'\nimport {findPersistedSubmitButtonValue, persistSubmitButtonValue} from '@github-ui/form-utils/remote-submit'\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport verifySso from '../sso'\nimport {showGlobalError} from './ajax-error'\n\nfunction submitWithLegacyEvents(form: HTMLFormElement, send: Kicker, req: SimpleRequest) {\n  const dataType = form.getAttribute('data-type')\n  if (dataType === 'json') {\n    req.headers.set('Accept', 'application/json')\n  }\n\n  fire(form, 'deprecatedAjaxSend', {request: req})\n\n  send\n    .text()\n    /* eslint-disable-next-line github/no-then */\n    .catch(err => {\n      if (err.response) {\n        return err.response\n      } else {\n        throw err\n      }\n    })\n    /* eslint-disable-next-line github/no-then */\n    .then(\n      (response: SimpleResponse) => {\n        if (response.status < 300) {\n          fire(form, 'deprecatedAjaxSuccess')\n        } else {\n          fire(form, 'deprecatedAjaxError', {error: response.statusText, status: response.status, text: response.text})\n        }\n      },\n      err => {\n        fire(form, 'deprecatedAjaxError', {error: err.message, status: 0, text: null})\n      },\n    )\n    /* eslint-disable-next-line github/no-then */\n    .then(() => {\n      fire(form, 'deprecatedAjaxComplete')\n    })\n}\n\n// Persist submit button value for ALL forms, regardless of whether they are\n// ajax-enabled or not. The submit value is reset after either `deprecatedAjaxComplete`\n// has fired or `remoteForm` has finished processing.\non(\n  'click',\n  ['form button:not([type])', 'form button[type=submit]', 'form input[type=submit]'].join(', '),\n  function (event) {\n    const button = event.currentTarget as HTMLButtonElement | HTMLInputElement\n    const form = button.form\n    if (form && !event.defaultPrevented) {\n      persistSubmitButtonValue(button)\n    }\n  },\n)\n\nremoteForm('form[data-remote]', submitWithLegacyEvents)\n\n// Restore forms after AJAX submissions\non('deprecatedAjaxComplete', 'form', function ({currentTarget}) {\n  const el = findPersistedSubmitButtonValue(currentTarget as HTMLFormElement)\n  if (el) el.remove()\n})\n\nafterRemote(form => {\n  const button = findPersistedSubmitButtonValue(form)\n  if (button) button.remove()\n})\n\nbeforeRemote(verifySso)\n\non('click', '.js-remote-submit-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  const form = button.form as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    // Ignore network errors\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n})\n","// Removed Contents behavior\n//\n// When \"has-removed-contents\" is added to an Element, its contents are\n// detached from the document and stored in memory. Once the class is removed,\n// the original contents are automatically reinserted into the document.\n//\n// WARNING: Adding new content to an Element while it has its contents detatch\n// has undefined behavior.\n//\n// This behavior is useful when working with form with multiple states. Using\n// d-none is only presentational and doesn't exclude the form fields from\n// being submitted or participating in validation requirements.\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.has-removed-contents', function () {\n  let contents: ChildNode[]\n  return {\n    add(parent) {\n      contents = Array.from(parent.childNodes)\n      for (const el of contents) {\n        parent.removeChild(el)\n      }\n      const form = parent.closest('form')\n      if (form) fire(form, 'change')\n    },\n    remove(parent) {\n      for (const el of contents) {\n        parent.appendChild(el)\n      }\n      const form = parent.closest('form')\n      if (form) fire(form, 'change')\n    },\n  }\n})\n","import {sendStats} from '@github-ui/stats'\n\nif (PerformanceObserver && (PerformanceObserver.supportedEntryTypes || []).includes('longtask')) {\n  const observer = new PerformanceObserver(function (list) {\n    const longTasks = list.getEntries().map(({name, duration}) => ({name, duration, url: window.location.href}))\n    sendStats({longTasks})\n  })\n  observer.observe({entryTypes: ['longtask']})\n}\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('form[data-replace-remote-form]', async function (form, wants) {\n  form.classList.remove('is-error')\n  form.classList.add('is-loading')\n  try {\n    let target: Element = form\n\n    const response = await wants.html()\n    const container = form.closest('[data-replace-remote-form-target]')\n    if (container) {\n      const id = container.getAttribute('data-replace-remote-form-target')\n      target = id ? document.getElementById(id)! : container\n    }\n    target.replaceWith(response.html)\n  } catch (e) {\n    form.classList.remove('is-loading')\n    form.classList.add('is-error')\n  }\n})\n","import MarkdownToolbarElement from '@github/markdown-toolbar-element'\nimport {dialog} from '../details-dialog'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst selectionEnds = new WeakMap()\n\nfunction getTextarea(el: HTMLElement): HTMLTextAreaElement {\n  return el.closest<MarkdownToolbarElement>('markdown-toolbar')!.field!\n}\n\non('click', '.js-markdown-link-button', async function ({currentTarget}) {\n  const template = document.querySelector<HTMLTemplateElement>('.js-markdown-link-dialog')!\n  const content = template.content.cloneNode(true)\n  if (!(content instanceof DocumentFragment)) return\n\n  const dialogEl = await dialog({\n    content,\n    labelledBy: 'box-title',\n  })\n  if (!(currentTarget instanceof HTMLElement)) return\n  selectionEnds.set(dialogEl, getTextarea(currentTarget).selectionEnd)\n})\n\non('click', '.js-markdown-link-insert', ({currentTarget}) => {\n  const container = currentTarget.closest<HTMLElement>('details-dialog')!\n  const textarea = document.querySelector<HTMLTextAreaElement>(`#${currentTarget.getAttribute('data-for-textarea')!}`)!\n  const selectionEnd = selectionEnds.get(container) || 0\n\n  const href = container.querySelector<HTMLInputElement>('#js-dialog-link-href')!.value\n  const text = container.querySelector<HTMLInputElement>('#js-dialog-link-text')!.value\n  const link = `[${text}](${href}) `\n  const before = textarea.value.slice(0, selectionEnd)\n  const after = textarea.value.slice(selectionEnd)\n  textarea.value = before + link + after\n  textarea.focus()\n  textarea.selectionStart = textarea.selectionEnd = selectionEnd + link.length\n})\n","import {eventToHotkeyString} from '@github/hotkey'\nimport {insertText} from '../text'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onKey} from '../onfocus'\n\non(\n  'details-menu-select',\n  '.js-saved-reply-menu',\n  function (event) {\n    if (!(event.target instanceof Element)) return\n\n    const body = event.detail.relatedTarget.querySelector('.js-saved-reply-body')\n\n    // Since this details-menu-select can hold options which arent saved\n    // replies, we guard to ensure that only saved replies are handled here.\n    if (!body) return\n\n    const text = (body.textContent || '').trim()\n    const container = event.target.closest<HTMLElement>('.js-previewable-comment-form')!\n\n    const comment = container.querySelector<HTMLTextAreaElement>('textarea.js-comment-field')!\n    insertText(comment, text)\n    setTimeout(() => comment.focus(), 0)\n  },\n  {capture: true},\n)\n\nonKey('keydown', '.js-saved-reply-shortcut-comment-field', function (event) {\n  if (eventToHotkeyString(event) === 'Control+.') {\n    const container = (event.target as Element).closest<HTMLElement>('.js-previewable-comment-form')!\n    const menu = container.querySelector<HTMLElement>('.js-saved-reply-container')!\n    menu.setAttribute('open', '')\n    event.preventDefault()\n  }\n})\n\nonKey('keydown', '.js-saved-reply-filter-input', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  if (/^Control\\+[1-9]$/.test(eventToHotkeyString(event))) {\n    const container = (event.target as Element).closest<HTMLElement>('.js-saved-reply-container')!\n    const replies = container.querySelectorAll('[role=\"menuitem\"]')\n    const savedReplyNumber = Number(event.key)\n    const reply = replies[savedReplyNumber - 1]\n    if (reply instanceof HTMLElement) {\n      reply.click()\n      event.preventDefault()\n    }\n  } else if (event.key === 'Enter') {\n    const container = (event.target as Element).closest<HTMLElement>('.js-saved-reply-container')!\n    const replies = container.querySelectorAll('[role=\"menuitem\"]')\n\n    if (replies.length > 0 && replies[0] instanceof HTMLButtonElement) {\n      replies[0].click()\n    }\n\n    event.preventDefault()\n  }\n  /* eslint-enable no-restricted-syntax */\n})\n","import type {BlobRange} from '../blob-anchor'\nimport {DOMRangeFromBlob} from '../blob-anchor'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {surroundContents} from '../range'\nimport {GetCharIndexFromBytePosition} from '../text'\n\nfunction queryLineElement(snippet: Element, line: number) {\n  return snippet.querySelector(`#LC${line}`)\n}\n\nfunction highlightRange(blobRange: BlobRange, snippet: Element, adjustStart: boolean, adjustEnd: boolean) {\n  const range = DOMRangeFromBlob(blobRange, line => queryLineElement(snippet, line))\n  if (!range) return\n\n  if (adjustStart) {\n    const adjustedStart = GetCharIndexFromBytePosition(range.startContainer.textContent!, range.startOffset)\n    if (adjustedStart === -1) return\n    range.setStart(range.startContainer, adjustedStart)\n  }\n\n  if (adjustEnd) {\n    const adjustedEnd = GetCharIndexFromBytePosition(range.endContainer.textContent!, range.endOffset)\n    if (adjustedEnd === -1) return\n    range.setEnd(range.endContainer, adjustedEnd)\n  }\n\n  const span = document.createElement('span')\n  const highlightClasses = ['text-bold', 'hx_keyword-hl', 'rounded-2', 'd-inline-block']\n\n  span.classList.add(...highlightClasses)\n  surroundContents(range, span)\n}\n\nexport function highlightColumns(blobRange: BlobRange, snippet: Element) {\n  if (blobRange.start.line !== blobRange.end.line) {\n    // highlight first line, and adjust only the start as there may be Unicode characters\n    // preceding the start column\n    const startBlobRange = {\n      start: {line: blobRange.start.line, column: blobRange.start.column},\n      end: {line: blobRange.start.line, column: null},\n    }\n    highlightRange(startBlobRange, snippet, true, false)\n\n    for (let i = blobRange.start.line + 1; i < blobRange.end.line; i += 1) {\n      // highlight middle lines, and do not adjust anything since we're highlighting\n      // the whole line\n      const fullBlobRange = {\n        start: {line: i, column: 0},\n        end: {line: i, column: null},\n      }\n      highlightRange(fullBlobRange, snippet, false, false)\n    }\n\n    // highlight last line, and only adjust the end as there may be Unicode characters\n    // in the middle of the match\n    const endBlobRange = {\n      start: {line: blobRange.end.line, column: 0},\n      end: {line: blobRange.end.line, column: blobRange.end.column},\n    }\n    highlightRange(endBlobRange, snippet, false, true)\n  } else {\n    highlightRange(blobRange, snippet, true, true)\n  }\n}\n\nexport function parseColumnHighlightRange(snippet: Element): BlobRange | null {\n  const startLine = parseInt(snippet.getAttribute('data-start-line')!)\n  const endLine = parseInt(snippet.getAttribute('data-end-line')!)\n  const startColumn = parseInt(snippet.getAttribute('data-start-column')!)\n  // The end column is a special case, as 0 acts as a special value\n  const dataEndColumn = parseInt(snippet.getAttribute('data-end-column')!)\n\n  // Nothing to highlight if start and end lines and start and end cols are the\n  // same, as column ranges are half-open\n  if (startLine === endLine && startColumn === dataEndColumn) return null\n\n  // 0 here indicates that no end column was provided, so the highlight should\n  // continue to the end of the line.\n  // DOMRangeFromBlob will interpret null in a similar way to this.\n  const endColumn = dataEndColumn !== 0 ? dataEndColumn : null\n\n  return {\n    start: {line: startLine, column: startColumn},\n    end: {line: endLine, column: endColumn},\n  }\n}\n\nobserve('.js-highlight-code-snippet-columns', function (snippet: Element) {\n  const blobRange = parseColumnHighlightRange(snippet)\n  if (blobRange !== null) {\n    highlightColumns(blobRange, snippet)\n  }\n})\n","import {getStoredShelfParamsForCurrentPage, storeAndStripShelfParams} from './notification-shelf-referrer-params'\nimport IncludeFragmentElement from '@github/include-fragment-element'\nimport type {Kicker} from '@github/remote-form'\nimport {remoteForm} from '@github/remote-form'\nimport {updateNotificationStates} from './update-notification-states'\n\n// Perform an action and change the status of the notification shelf.\nexport async function remoteShelfActionForm() {\n  return remoteForm('.js-notification-shelf .js-notification-action form', async function (form, wants) {\n    const shouldRedirect = form.hasAttribute('data-redirect-to-inbox-on-submit')\n\n    if (shouldRedirect) {\n      await performRequest(wants)\n      const inboxButton = document.querySelector<HTMLAnchorElement>('.js-notifications-back-to-inbox')!\n\n      if (inboxButton) {\n        inboxButton.click()\n      }\n\n      return\n    }\n\n    updateNotificationStates(form, form)\n    await performRequest(wants)\n  })\n}\n\nexport function urlWithoutNotificationParameters() {\n  const searchParams = new URLSearchParams(window.location.search)\n  const cleanSearchParams = storeAndStripShelfParams(searchParams)\n\n  if (cleanSearchParams) {\n    const newUrl = new URL(window.location.href, window.location.origin)\n    newUrl.search = cleanSearchParams.toString()\n    return newUrl.toString()\n  }\n}\n\nexport function loadShelfFromStoredParams(includeFragmentEl: Element) {\n  if (!(includeFragmentEl instanceof IncludeFragmentElement)) {\n    return\n  }\n\n  const params = getStoredShelfParamsForCurrentPage()\n  if (!params) return\n\n  const baseUrl = includeFragmentEl.getAttribute('data-base-src')\n  if (!baseUrl) return\n\n  const shelfURL = new URL(baseUrl, window.location.origin)\n  const searchParams = new URLSearchParams(shelfURL.search)\n\n  for (const [key, value] of Object.entries(params)) {\n    if (typeof value === 'string') searchParams.set(key, value)\n  }\n  shelfURL.search = searchParams.toString()\n  includeFragmentEl.setAttribute('src', shelfURL.toString())\n}\n\n// Submits an AJAX request, but ignores any errors.\nasync function performRequest(wants: Kicker) {\n  try {\n    await wants.text()\n  } catch (error) {\n    // TODO show error message\n  }\n}\n","import {\n  loadShelfFromStoredParams,\n  remoteShelfActionForm,\n  urlWithoutNotificationParameters,\n} from './../notifications/v2/notification-shelf-helpers'\nimport {getStoredShelfParamsForCurrentPage} from './../notifications/v2/notification-shelf-referrer-params'\nimport {loaded} from '@github-ui/document-ready'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '../history'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav'\n\nremoteShelfActionForm()\n\n// Remove the notification_referrer_id parameter from the url on page load and on Turbo loads\nfunction removeNotificationParams() {\n  const newUrl = urlWithoutNotificationParameters()\n  if (newUrl) replaceState(null, '', newUrl)\n}\nremoveNotificationParams()\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, removeNotificationParams)\n\n// pass the notifications params through turbo requests so we properly show the shelf\ndocument.addEventListener('turbo:before-fetch-request', function (event) {\n  const params = getStoredShelfParamsForCurrentPage(event.detail.url.pathname)\n\n  if (params) {\n    const newParams = new URLSearchParams(event.detail.url.search)\n    for (const [key, value] of Object.entries<string>(params)) {\n      if (value) {\n        newParams.set(key, value)\n      }\n    }\n    event.detail.url.search = newParams.toString()\n  }\n})\n\nobserve('.js-notification-shelf-include-fragment', loadShelfFromStoredParams)\n\non('submit', '.js-mark-notification-form', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n  event.preventDefault()\n  try {\n    await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    // Ignore network errors\n  }\n})\n\n// mark related notification as read\nasync function markNotificationAsRead() {\n  await loaded\n\n  const form = document.querySelector('.js-mark-notification-form')\n  if (form instanceof HTMLFormElement) {\n    requestSubmit(form)\n  }\n}\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, markNotificationAsRead)\nmarkNotificationAsRead()\n","import {onFocus, onKey} from '../onfocus'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {install, uninstall} from '@github/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst MD_BREAKPOINT = 768\n\nfunction isJumpToAvailable(field: Element): boolean {\n  return !!field.closest('.js-jump-to-field')\n}\n\nfunction toggleSearchScope(field: HTMLElement, enabled: boolean) {\n  // We don't want legacy search behaviour of changing scope on backspace when using Jump To.\n  if (isJumpToAvailable(field)) {\n    return\n  }\n  const form = document.querySelector<HTMLFormElement>('.js-site-search-form')!\n  document.querySelector<HTMLElement>('.js-site-search')!.classList.toggle('scoped-search', enabled)\n\n  let url\n  let placeholder\n  if (enabled) {\n    url = form.getAttribute('data-scoped-search-url')!\n    placeholder = field.getAttribute('data-scoped-placeholder')!\n  } else {\n    url = form.getAttribute('data-unscoped-search-url')!\n    placeholder = field.getAttribute('data-unscoped-placeholder')!\n  }\n\n  form.setAttribute('action', url)\n  field.setAttribute('placeholder', placeholder)\n}\n\nfunction toggleSearchInputHotkey(element: HTMLElement, isRegularSearchInput: boolean) {\n  if (window.innerWidth < MD_BREAKPOINT) {\n    isRegularSearchInput ? uninstall(element) : install(element)\n  } else if (window.innerWidth >= MD_BREAKPOINT) {\n    isRegularSearchInput ? install(element) : uninstall(element)\n  }\n}\n\nonKey('keyup', '.js-site-search-field', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  const field = event.target as HTMLInputElement\n\n  const emptyQuery = field.value.length === 0\n  if (emptyQuery && event.key === 'Backspace' && field.classList.contains('is-clearable')) {\n    toggleSearchScope(field, false)\n  }\n  if (emptyQuery && event.key === 'Escape') {\n    toggleSearchScope(field, true)\n  }\n  field.classList.toggle('is-clearable', emptyQuery)\n  /* eslint-enable no-restricted-syntax */\n})\n\nonFocus('.js-site-search-focus', function (field) {\n  const container = field.closest<HTMLElement>('.js-chromeless-input-container')!\n  container.classList.add('focus')\n\n  // Restore scope on blur\n  function blurHandler() {\n    container.classList.remove('focus')\n    if ((field as HTMLInputElement).value.length === 0 && field.classList.contains('js-site-search-field')) {\n      toggleSearchScope(field, true)\n    }\n    field.removeEventListener('blur', blurHandler)\n  }\n\n  field.addEventListener('blur', blurHandler)\n})\n\non('submit', '.js-site-search-form', function (event) {\n  if (!(event.target instanceof Element)) return\n  const input = event.target.querySelector<HTMLInputElement>('.js-site-search-type-field')!\n  input.value = new URLSearchParams(window.location.search).get('type') || ''\n})\n\nconst observer = new ResizeObserver(entries => {\n  for (const {target} of entries) {\n    const isRegularSearchInput = target.classList.contains('regular-search-input')\n    if (target.classList.contains('sm-search-input') || isRegularSearchInput) {\n      toggleSearchInputHotkey(target as HTMLElement, isRegularSearchInput)\n    }\n  }\n})\n\n// install/uninstall hotkeys on regular search input when screen size reaches medium breakpoint\nobserve('.regular-search-input', {\n  constructor: HTMLElement,\n  add(element) {\n    observer.observe(element)\n  },\n  remove(element) {\n    uninstall(element)\n    observer.unobserve(element)\n  },\n})\n\n// install/uninstall hotkeys on search input in collapsed menu when screen size reaches medium breakpoint\nobserve('.sm-search-input', {\n  constructor: HTMLElement,\n  add(element) {\n    observer.observe(element)\n  },\n  remove(element) {\n    uninstall(element)\n    observer.unobserve(element)\n  },\n})\n\non('click', '.js-toggle-appheader-search', function () {\n  const searchBar = document.querySelector<HTMLElement>('.js-global-bar-second-row')!\n\n  if (searchBar) {\n    searchBar.toggleAttribute('hidden')\n\n    if (!searchBar.getAttribute('hidden')) {\n      const searchInput = searchBar.querySelector<HTMLInputElement>('.js-site-search-focus')!\n\n      if (searchInput) {\n        searchInput.focus()\n      }\n    }\n  }\n})\n","// Size to Fit textarea behavior\n//\n// Auto sizes any textareas marked with `.js-size-to-fit` to its text\n// contents height.\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport subscribe from '@github/textarea-autosize'\n\nobserve('textarea.js-size-to-fit', {\n  constructor: HTMLTextAreaElement,\n  subscribe,\n})\n","/**\n * Smooth scrolling anchor.\n *\n * Have an in-page anchor link and want the page to smoothly scroll to its destination? Look no further.\n *\n * Apply the `.js-smoothscroll-anchor` on the anchor tag to trigger smooth scrolling.\n *\n * This will override the default behavior of jumping the page to the element targeted by the hash in the `href`\n * and instead smoothly scroll to it. No additional CSS is required.\n *\n * @deprecated Replace this behavior with `scroll-behavior: smooth;`\n *   https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior.\n *\n * @example\n * ```html\n * <a href=\"#some-id\" class=\"js-smoothscroll-anchor\">Scroll to #some-id</a>\n * <div id=\"some-id\" style=\"margin-top: 300px;\">\n *   <h3>Scroll to me</h3>\n * </div>\n * ```\n */\n\nimport {findFragmentTarget} from '../fragment-target'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', '.js-smoothscroll-anchor', function (event) {\n  const anchor = event.currentTarget\n  if (!(anchor instanceof HTMLAnchorElement)) return\n\n  const target = findFragmentTarget(document, anchor.hash)\n  if (!target && anchor.hash === '#top') {\n    // When navigating to the top of the page, reset the URL hash to clear `:target`\n    // pseudo-classes on page elements, then smooth scroll to the top of the page.\n    const top = document.querySelector('html')\n    if (top) {\n      const originalScroll = top.style.scrollBehavior\n      top.style.scrollBehavior = 'smooth'\n      window.location.hash = ''\n      top.scrollIntoView({behavior: 'smooth'})\n      top.style.scrollBehavior = originalScroll\n      event.preventDefault()\n      return\n    }\n  }\n  if (!target) return\n  ;(target as HTMLElement).focus()\n\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)')\n\n  if (prefersReducedMotion && prefersReducedMotion.matches) {\n    target.scrollIntoView()\n  } else {\n    target.scrollIntoView({behavior: 'smooth'})\n  }\n\n  event.preventDefault()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst hiddenTimePeriodOnScrollInMs = 1000\n\nconst abortControllers = new WeakMap()\n\nconst snippetClipboardCopyTemplate = document.querySelector<HTMLTemplateElement>('#snippet-clipboard-copy-button')\n\nasync function insertSnippetClipboardCopyButton(el: HTMLElement, signal: AbortSignal): Promise<void> {\n  const clipboardContent = el.getAttribute('data-snippet-clipboard-copy-content')\n  if (clipboardContent === null) return\n\n  // Remove this attribute so that we don't add a second button.\n  el.removeAttribute('data-snippet-clipboard-copy-content')\n\n  if (!(snippetClipboardCopyTemplate instanceof HTMLTemplateElement)) return\n\n  const documentFragment = snippetClipboardCopyTemplate.content.cloneNode(true) as DocumentFragment\n\n  const clonedZeroClipboardContainer = documentFragment.children[0]\n  if (!(clonedZeroClipboardContainer instanceof HTMLElement)) return\n\n  const clipboardCopyElement = clonedZeroClipboardContainer.children[0]\n  if (!(clipboardCopyElement instanceof HTMLElement)) return\n\n  clipboardCopyElement.setAttribute('value', clipboardContent)\n\n  document.addEventListener(\n    'selectionchange',\n    () => {\n      const selection = document.getSelection()\n      if (selection && el.contains(selection.anchorNode)) {\n        const selectedText = selection?.toString()\n        clipboardCopyElement.style.display = selectedText.trim() === '' ? 'inherit' : 'none'\n      }\n    },\n    {signal},\n  )\n\n  const scrollableElement = el.querySelector('pre')\n  if (scrollableElement !== null) {\n    let timer: ReturnType<typeof setTimeout> | undefined\n\n    /* eslint-disable-next-line github/prefer-observers */\n    scrollableElement.addEventListener(\n      'scroll',\n      () => {\n        if (timer) clearTimeout(timer)\n\n        clipboardCopyElement.style.display = 'none'\n        timer = setTimeout(() => {\n          clipboardCopyElement.style.display = 'inherit'\n        }, hiddenTimePeriodOnScrollInMs)\n      },\n      {signal},\n    )\n  }\n\n  el.appendChild(clonedZeroClipboardContainer)\n}\n\nobserve('[data-snippet-clipboard-copy-content]', {\n  constructor: HTMLElement,\n  add(el) {\n    if (el.parentElement && el.parentElement.classList.contains('js-no-snippet-clipboard-copy')) return\n\n    const abortController = new AbortController()\n    abortControllers.set(el, abortController)\n\n    insertSnippetClipboardCopyButton(el, abortController.signal)\n  },\n})\n\nobserve('.snippet-clipboard-content clipboard-copy', {\n  constructor: HTMLElement,\n  remove(el) {\n    const controller = abortControllers.get(el)\n    if (controller) {\n      controller.abort()\n    }\n  },\n})\n","// Social Buttons\n//\n// Behavior for the Watch, Fork, and Star buttons within repo nav.\n//\n// Expects the JSON response to a .js-social-form XHR request to be in this format:\n//\n// On success:\n//\n// { \"count\": \"1,234\" }\n//\n// Count is formatted with delimiters. The social count in any .js-social child of .js-social-container will be updated\n// to the new value.\n//\n// If the form is annotated with the .js-deferred-toggler-target class, the .js-toggler container will have its state\n// toggled after the successful response has arrived (and not optimistically as .js-toggler-target behaves).\n//\n// Any .js-social-updatable child of .js-social-container with a data-url will also be re-fetched and updated with new\n// content.\n//\n// Failure cases:\n//\n// 409 Conflict - indicates that the user needs to confirm the social action in a dialog.\n//\n// {\n//   \"confirmationDialog\": {\n//     \"templateSelector\": \"[CSS selector to find DOM element containing <template> for dialog contents]\",\n//     \"inputs\": { \"arbitraryTemplateParts\": \"...\" }\n//   }\n// }\n//\n// Any other 4xx or 5xx error will result in a generic global error being shown.\n\nimport type {SimpleResponse} from '@github/remote-form'\nimport {TemplateInstance} from '@github/template-parts'\nimport {dialog} from '../details-dialog'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {showGlobalError} from './ajax-error'\nimport {updateContent} from '../updatable-content'\n\nfunction handleSocialResponse(\n  container: HTMLElement,\n  newCount: string,\n  isDeferredTogglerTarget: boolean,\n): Promise<void[]> {\n  updateSocialCounts(container, newCount)\n  if (isDeferredTogglerTarget) container.classList.toggle('on')\n\n  const updatePromises = Array.from(container.querySelectorAll<HTMLElement>('.js-social-updatable'), updateContent)\n  return Promise.all(updatePromises)\n}\n\nremoteForm('.js-social-form', async function (form, wants) {\n  let response: SimpleResponse\n  const container = form.closest<HTMLElement>('.js-social-container')\n  const isDeferredTogglerTarget = form.classList.contains('js-deferred-toggler-target')\n\n  try {\n    response = await wants.json()\n\n    if (container) await handleSocialResponse(container, response.json.count, isDeferredTogglerTarget)\n  } catch (e) {\n    // 409 Conflict: the user needs to accept a confirmation dialog. Find its template and trigger it.\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (e.response?.status === 409 && e.response.json.confirmationDialog) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      const dialogPayload = e.response.json.confirmationDialog\n      const confirmationDialogTemplate = document.querySelector<HTMLTemplateElement>(dialogPayload.templateSelector)\n      const confirmCsrfToken = form.querySelector<HTMLInputElement>('.js-confirm-csrf-token')?.value\n\n      if (confirmationDialogTemplate instanceof HTMLTemplateElement && confirmCsrfToken) {\n        const content = new TemplateInstance(confirmationDialogTemplate, {\n          confirmUrl: form.action,\n          confirmCsrfToken,\n          ...(dialogPayload.inputs || {}),\n        })\n        const dialogElement = await dialog({content})\n\n        dialogElement.addEventListener('social-confirmation-form:success', async event => {\n          if (!(event instanceof CustomEvent)) return\n          if (container) await handleSocialResponse(container, event.detail.count, isDeferredTogglerTarget)\n        })\n\n        dialogElement.addEventListener('social-confirmation-form:error', () => {\n          showGlobalError()\n        })\n      }\n    } else {\n      // If the social form is also a toggler, but *not* a deferred one, it was optimistically toggled on click. Because\n      // the action failed, we need to toggle it back off here so it won't be in an incorrect state.\n      if (container && !isDeferredTogglerTarget) container.classList.toggle('on')\n\n      showGlobalError()\n    }\n  }\n})\n\nremoteForm('.js-social-confirmation-form', async function (form, wants) {\n  try {\n    const response = await wants.json()\n    fire(form, 'social-confirmation-form:success', response.json)\n  } catch {\n    fire(form, 'social-confirmation-form:error')\n  }\n})\n\nexport function updateSocialCounts(container: HTMLElement, newCount: string) {\n  for (const count of container.querySelectorAll('.js-social-count')) {\n    count.textContent = newCount\n\n    const singularSuffix = count.getAttribute('data-singular-suffix')\n    const pluralSuffix = count.getAttribute('data-plural-suffix')\n    const suffix = newCount === '1' ? singularSuffix : pluralSuffix\n\n    if (suffix) {\n      count.setAttribute('aria-label', `${newCount} ${suffix}`)\n    }\n  }\n}\n","import {getSession, Dispatchable} from '@github-ui/alive'\nimport type {Metadata, MetadataUpdate, Subscription} from '@github/alive-client'\nimport {IDLE_METADATA_KEY, Topic, isPresenceChannel} from '@github/alive-client'\nimport {compose, fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {taskQueue} from '@github-ui/eventloop-tasks'\nimport {addIdleStateListener} from '../alive/idle-state'\n\nfunction isPresent(value: Topic | null): value is Topic {\n  return value != null\n}\n\nfunction subscriptions(el: Element): Array<Subscription<Dispatchable>> {\n  return channels(el).map((topic: Topic) => ({subscriber: el, topic}))\n}\n\nfunction channels(el: Element): Topic[] {\n  const names = (el.getAttribute('data-channel') || '').trim().split(/\\s+/)\n  return names.map(Topic.parse).filter(isPresent)\n}\n\nasync function watchSocketChannels() {\n  const session = await getSession()\n\n  if (!session) {\n    return\n  }\n\n  type Subs = Array<Subscription<Dispatchable>>\n  const queueSubscribe = taskQueue<Subs>(subs => session.subscribe(subs.flat()))\n  const queueUnsubscribe = taskQueue<Dispatchable>(els => session.unsubscribeAll(...els))\n  const queueMetadata = taskQueue<MetadataUpdate<Dispatchable>>(updates => session.updatePresenceMetadata(updates))\n\n  observe('.js-socket-channel[data-channel]', {\n    subscribe: el => {\n      const elementSubscriptions = subscriptions(el)\n      const presenceChannels = elementSubscriptions\n        .map(subscription => subscription.topic.name)\n        .filter(channelName => isPresenceChannel(channelName))\n\n      let listenerSubscription = {\n        unsubscribe() {\n          // nothing to clean up by default.  This will be overridden if there are presence channels\n        },\n      }\n\n      if (presenceChannels.length) {\n        let latestMetadata: Metadata | undefined = undefined\n        let latestIdle: boolean | undefined\n        const queueMetadataOrIdleChange = () => {\n          const metadata: Metadata[] = []\n\n          // combine metadata and idle values\n          if (latestMetadata) {\n            metadata.push(latestMetadata)\n          }\n          if (latestIdle !== undefined) {\n            metadata.push({[IDLE_METADATA_KEY]: latestIdle ? 1 : 0})\n          }\n\n          // Send the metadata to all presence channels on this element\n          for (const channelName of presenceChannels) {\n            queueMetadata({subscriber: el, channelName, metadata})\n          }\n        }\n\n        listenerSubscription = compose(\n          // listen for metadata updates emitted on the element\n          fromEvent(el, 'socket:set-presence-metadata', (e: Event) => {\n            const {detail} = e as CustomEvent\n            latestMetadata = detail\n            queueMetadataOrIdleChange()\n          }),\n          // listen for idle changes, which will cause us to send a metadata update\n          addIdleStateListener(idle => {\n            latestIdle = idle\n            queueMetadataOrIdleChange()\n          }),\n        )\n      }\n\n      // Process normal subscriptions after setting up metadata listeners\n      // This needs to come second so that idle state is ready when we subscribe\n      queueSubscribe(elementSubscriptions)\n\n      return listenerSubscription\n    },\n    remove: el => queueUnsubscribe(el),\n  })\n}\n\nwatchSocketChannels()\n","// Detects signout/signin events via `flash[:stale_session_signedin]` and\n// notifies other browser tabs so that they can:\n//\n// 1. display the \"You signed out in another tab\" banner; and\n// 2. disable pjaxing and form submission.\n//\n// On browsers that don't support BroadcastChannel, the `logged-in`\n// localStorage key is used to send messages between tabs.\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction sessionChanged(loggedIn: string) {\n  const flash = document.querySelector<HTMLElement>('.js-stale-session-flash')!\n  const flashSignedIn = flash.querySelector<HTMLElement>('.js-stale-session-flash-signed-in')!\n  const flashSignedOut = flash.querySelector<HTMLElement>('.js-stale-session-flash-signed-out')!\n\n  flash.hidden = false\n  flashSignedIn.hidden = loggedIn === 'false'\n  flashSignedOut.hidden = loggedIn === 'true'\n\n  window.addEventListener('popstate', function (event: PopStateEvent) {\n    if (event.state && event.state.container != null) {\n      location.reload()\n    }\n  })\n\n  document.addEventListener('submit', function (event: Event) {\n    event.preventDefault()\n  })\n}\n\nlet bc: Pick<BroadcastChannel, 'postMessage' | 'onmessage'> | null = null\nif (typeof BroadcastChannel === 'function') {\n  try {\n    bc = new BroadcastChannel('stale-session')\n    bc.onmessage = event => {\n      if (typeof event.data === 'string') sessionChanged(event.data)\n    }\n  } catch {\n    // ignore\n  }\n}\nif (!bc) {\n  let postingMessage = false\n\n  bc = {\n    postMessage(message: string) {\n      postingMessage = true\n      try {\n        window.localStorage.setItem('logged-in', message)\n      } finally {\n        postingMessage = false\n      }\n    },\n    onmessage: null,\n  }\n\n  window.addEventListener('storage', function (event) {\n    /* eslint eslint-comments/no-use: off */\n    /* eslint-disable no-restricted-syntax */\n    if (!postingMessage && event.storageArea === window.localStorage && event.key === 'logged-in') {\n      try {\n        if (event.newValue === 'true' || event.newValue === 'false') {\n          sessionChanged(event.newValue)\n        }\n      } finally {\n        window.localStorage.removeItem(event.key)\n      }\n    }\n    /* eslint-enable no-restricted-syntax */\n  })\n}\n\nconst element = document.querySelector('.js-stale-session-flash[data-signedin]')\nif (element) {\n  const value = element.getAttribute('data-signedin') || ''\n  bc?.postMessage(value)\n}\n\nconst broadcastMsgOnSignOut = () => {\n  bc?.postMessage('false')\n}\n\nobserve('.js-loggout-form', function (el: Element) {\n  el.addEventListener('submit', broadcastMsgOnSignOut)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nobserve('form.js-auto-replay-enforced-sso-request', {\n  constructor: HTMLFormElement,\n  initialize(el) {\n    requestSubmit(el)\n  },\n})\n","import {fetchSafeDocumentFragment} from '../fetch'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport verifySsoSession from '../sso'\n\nfunction updateStatusPosition(container: Element, menu: HTMLElement, details: Element) {\n  const containerHeight = container.getBoundingClientRect().height\n  const menuRect = menu.getBoundingClientRect()\n  const iconRect = details.getBoundingClientRect()\n  let top = iconRect.top\n  // Ensure popover stays off the bottom of the page by at least 10 pixels\n  if (top + menuRect.height + 10 >= containerHeight) {\n    top = Math.max(containerHeight - menuRect.height - 10, 0)\n  }\n  let left = iconRect.right\n  // Show popover to the left\n  if (details.closest('.js-build-status-to-the-left') != null) {\n    left = Math.max(iconRect.left - menuRect.width - 10, 0)\n  }\n  menu.style.top = `${top}px`\n  menu.style.left = `${left}px`\n  menu.style.right = 'auto'\n}\n\non(\n  'toggle',\n  '.js-build-status .js-dropdown-details',\n  function (event) {\n    const details = event.currentTarget\n    const menu = details.querySelector<HTMLElement>('.js-status-dropdown-menu')\n    if (!menu) return\n\n    function closeOnToggle() {\n      if (!details.hasAttribute('open')) closeStatusPopover()\n    }\n\n    function closeOnScroll(scrollEvent: Event) {\n      if (!menu!.contains(scrollEvent.target as Element)) closeStatusPopover()\n    }\n\n    function closeStatusPopover() {\n      details.removeAttribute('open')\n      /* eslint-disable-next-line github/no-d-none */\n      menu!.classList.add('d-none')\n      details.appendChild(menu!)\n      details.removeEventListener('toggle', closeOnToggle)\n      window.removeEventListener('scroll', closeOnScroll)\n    }\n\n    details.addEventListener('toggle', closeOnToggle)\n\n    if (menu.classList.contains('js-close-menu-on-scroll')) {\n      /* eslint-disable-next-line github/prefer-observers */\n      window.addEventListener('scroll', closeOnScroll, {capture: true})\n    }\n\n    /* eslint-disable-next-line github/no-d-none */\n    menu.classList.remove('d-none')\n    menu.querySelector<HTMLElement>('.js-details-container')!.classList.add('open')\n    if (menu.classList.contains('js-append-menu-to-body')) {\n      // Move menu to body so it can overlay on top of other elements\n      document.body.appendChild(menu)\n      updateStatusPosition(document.body, menu, details)\n    }\n  },\n  {capture: true},\n)\n\nasync function loadStatus(el: Element) {\n  const details = el.querySelector('.js-dropdown-details')\n  const menu = el.querySelector('.js-status-dropdown-menu') || el.closest('.js-status-dropdown-menu')\n\n  if (!(menu instanceof HTMLElement)) {\n    // Status does not have an associated dropdown menu\n    return\n  }\n\n  const loader = menu.querySelector('.js-status-loader')\n  if (!loader) {\n    return\n  }\n\n  const loadingArea = menu.querySelector<HTMLElement>('.js-status-loading')!\n  const errorArea = menu.querySelector<HTMLElement>('.js-status-error')!\n\n  const url = loader.getAttribute('data-contents-url')!\n\n  /* eslint-disable-next-line github/no-d-none */\n  loadingArea.classList.remove('d-none')\n  /* eslint-disable-next-line github/no-d-none */\n  errorArea.classList.add('d-none')\n\n  let html\n  try {\n    await verifySsoSession()\n    html = await fetchSafeDocumentFragment(document, url)\n  } catch (error) {\n    /* eslint-disable-next-line github/no-d-none */\n    loadingArea.classList.add('d-none')\n    /* eslint-disable-next-line github/no-d-none */\n    errorArea.classList.remove('d-none')\n  }\n\n  if (html) {\n    loader.replaceWith(html)\n    menu.querySelector<HTMLElement>('.js-details-container')!.classList.add('open')\n    if (details && menu.classList.contains('js-append-menu-to-body')) {\n      updateStatusPosition(document.body, menu, details)\n    }\n  }\n}\n\non('click', '.js-status-retry', ({currentTarget}) => {\n  loadStatus(currentTarget)\n})\n\nfunction onMouseEnter(event: Event) {\n  const currentTarget = event.currentTarget as Element\n  loadStatus(currentTarget)\n}\n\nobserve('.js-build-status', {\n  add(el) {\n    el.addEventListener('mouseenter', onMouseEnter, {once: true})\n  },\n  remove(el) {\n    el.removeEventListener('mouseenter', onMouseEnter)\n  },\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport sudo from '../sudo'\n\non('click', 'button[data-sudo-required], summary[data-sudo-required]', checkSudo)\nobserve('form[data-sudo-required]', {\n  constructor: HTMLFormElement,\n  subscribe: form => fromEvent(form, 'submit', checkSudo),\n})\n\nasync function checkSudo(event: Event) {\n  const currentTarget = event.currentTarget\n  if (!(currentTarget instanceof HTMLElement)) return\n  const sudoRequired = currentTarget.getAttribute('data-sudo-required')\n  if (sudoRequired === 'false') return\n\n  event.stopPropagation()\n  event.preventDefault()\n  const sudoPassed = await sudo()\n\n  if (sudoPassed) {\n    currentTarget.removeAttribute('data-sudo-required')\n    if (currentTarget instanceof HTMLFormElement) {\n      requestSubmit(currentTarget)\n    } else {\n      currentTarget.click()\n    }\n  }\n}\n","import {compare, fuzzyScore} from '../../fuzzy-filter'\nimport {compose, fromEvent} from '@github-ui/subscription'\nimport {fetchSafeDocumentFragment} from '../../fetch'\nimport {filterSort} from '../../filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst selectors: {[key: string]: string} = {\n  'actor:': 'ul.js-user-suggestions',\n  'user:': 'ul.js-user-suggestions',\n  'operation:': 'ul.js-operation-suggestions',\n  'org:': 'ul.js-org-suggestions',\n  'action:': 'ul.js-action-suggestions',\n  'repo:': 'ul.js-repo-suggestions',\n  'country:': 'ul.js-country-suggestions',\n}\n\nobserve('text-expander[data-audit-url]', {\n  subscribe: el =>\n    compose(fromEvent(el, 'text-expander-change', onchange), fromEvent(el, 'text-expander-value', onvalue)),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (!isActivationKey(detail.key)) return\n  const value = detail.item.getAttribute('data-value')!\n  detail.value = `${detail.key}${value}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (!isActivationKey(key)) return\n  const menu = event.target as HTMLElement\n  const url = menu.getAttribute('data-audit-url')!\n  provide(auditMenu(url, key, text))\n}\n\nfunction search(items: Element[], searchQuery: string): Element[] {\n  const query = searchQuery.toLowerCase()\n  const key = (item: Element) => {\n    const text = item.textContent!.toLowerCase().trim()\n    const score = fuzzyScore(text, query)\n    return score > 0 ? {score, text} : null\n  }\n  return query ? filterSort(items, key, compare) : items\n}\n\nconst children = memoize((el: Element) => [...el.children], {hash: (el: Element) => el.className})\n\nasync function auditMenu(url: string, key: string, query: string): Promise<{fragment?: HTMLElement; matched: boolean}> {\n  const lists = await cachedMenu(url)\n  const list = lists.querySelector<HTMLElement>(selector(key))\n  if (!list) return {matched: false}\n  const results = search(children(list), query).slice(0, 5)\n  const clone = list.cloneNode(false) as HTMLElement\n  clone.textContent = ''\n  for (const el of results) clone.append(el)\n  return {fragment: clone, matched: results.length > 0}\n}\n\nfunction isActivationKey(key: string): boolean {\n  return Object.getOwnPropertyNames(selectors).includes(key)\n}\n\nfunction selector(key: string): string {\n  const found = selectors[key]\n  if (!found) throw new Error(`Unknown audit log expander key: ${key}`)\n  return found\n}\n\nasync function fetchMenu(url: string): Promise<HTMLElement> {\n  const fragment = await fetchSafeDocumentFragment(document, url)\n  const root = document.createElement('div')\n  root.append(fragment)\n  return root\n}\nconst cachedMenu = memoize(fetchMenu)\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {compare} from '../../fuzzy-filter'\nimport {fetchSafeDocumentFragment} from '../../fetch'\nimport {filterSort} from '../../filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction getValue(el: Element): string | undefined | null {\n  if (el.hasAttribute('data-use-colon-emoji')) {\n    return el.getAttribute('data-value')\n  }\n\n  const emojiEl = el.firstElementChild\n  if (emojiEl && 'G-EMOJI' === emojiEl.tagName && !emojiEl.firstElementChild) {\n    return emojiEl.textContent\n  } else {\n    return el.getAttribute('data-value')\n  }\n}\n\nfunction search(items: Element[], searchQuery: string): Element[] {\n  const query = ` ${searchQuery.toLowerCase().replace(/_/g, ' ')}`\n  const key = (item: Element) => {\n    const text = item.getAttribute('data-emoji-name')!\n    const score = emojiScore(emojiText(item), query)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction emojiText(item: Element): string {\n  const aliases = item.getAttribute('data-text')!.trim().toLowerCase().replace(/_/g, ' ')\n  return ` ${aliases}`\n}\n\nfunction emojiScore(aliases: string, query: string): number {\n  const score = aliases.indexOf(query)\n  return score > -1 ? 1000 - score : 0\n}\n\nobserve('text-expander[data-emoji-url]', {\n  subscribe: el =>\n    compose(fromEvent(el, 'text-expander-change', onchange), fromEvent(el, 'text-expander-value', onvalue)),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== ':') return\n  detail.value = getValue(detail.item)\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== ':') return\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-emoji-url')!\n  provide(emojiMenu(url, text))\n}\n\nasync function emojiMenu(url: string, query: string): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const [list, children] = await cachedEmoji(url)\n  const results = search(children, query).slice(0, 5)\n  list.textContent = ''\n  for (const el of results) list.append(el)\n  return {fragment: list, matched: results.length > 0}\n}\n\nasync function fetchEmoji(url: string): Promise<[HTMLElement, Element[]]> {\n  const fragment = await fetchSafeDocumentFragment(document, url)\n  const root = fragment.firstElementChild as HTMLElement\n  return [root, [...root.children]]\n}\nconst cachedEmoji = memoize(fetchEmoji)\n","import {compare, fuzzyScore} from '../../fuzzy-filter'\nimport {compose, fromEvent} from '@github-ui/subscription'\nimport {html, render, unsafeHTML} from '@github-ui/jtml-shimmed'\n\nimport TextExpanderElement from '@github/text-expander-element'\nimport {filterSort} from '../../filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {parseHTML} from '../../parse-html'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\n// Structure of the JSON data returned by the suggester endpoint.\ninterface Data {\n  suggestions: SuggestionData[]\n  icons: Icons\n}\n\n// Limited subset of the JSON Data returned by the suggester that matches a user's current query prefix.\ninterface SearchResults {\n  matches: SuggestionData[]\n  icons: Icons\n}\n\ninterface SuggestionData {\n  id: number\n  number: number\n  title: string\n  type: string\n}\n\ninterface Icons {\n  [key: string]: string\n}\n\n// Maximum number of results in the intial batch of results fetched by cachedJSON. If there are exactly this many\n// results for the suggester, then the repository almost certainly has more that are not included. This should be\n// kept in sync with:\n// - `SUGGESTION_LIMIT` constant in packages/communities/app/models/suggester/repository_suggester.rb\n// - `SUGGESTION_LIMIT` in packages/issues/app/models/issue.rb\n// - `SUGGESTION_LIMIT` in packages/discussions/app/models/discussion.rb\nconst REFINED_QUERY_THRESHOLD = 1000\n\n// The minimum number of characters required to trigger a follow-up \"refined\" query.\nconst REFINED_QUERY_PREFIX_SIZE = 3\n\n// The number of previous \"refined\" query results to cache.\nconst REFINED_QUERY_CACHE_SIZE = 5\n\n// The maximum number of suggester results to display at once.\nconst SEARCH_RESULTS_MAX = 5\n\nfunction asText(item: SuggestionData): string {\n  return `${item.number} ${item.title.trim().toLowerCase()}`\n}\n\nfunction search(items: SuggestionData[], query: string): SuggestionData[] {\n  if (!query) return items\n  const re = new RegExp(`\\\\b${escapeRegExp(query)}`)\n  const hashedScore = /^\\d+$/.test(query)\n    ? (text: string) => issueNumberScore(text, re)\n    : (text: string) => fuzzyScore(text, query)\n  const key = (item: SuggestionData) => {\n    const text = asText(item)\n    const score = hashedScore(text)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction escapeRegExp(regex: string): string {\n  return regex.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n}\n\n// Returns a score that gets higher as the query that matches a number starting\n// on a word boundary is found earlier in the string.\nfunction issueNumberScore(text: string, query: RegExp): number {\n  const score = text.search(query)\n  if (score > -1) {\n    return 1000 - score\n  } else {\n    return 0\n  }\n}\n\n// Apply the search function to JSON data acquired from the suggester endpoint. Return a (possibly empty) subset of\n// that data that matches the user's current suggester query, up to a maximum of SEARCH_RESULTS_MAX, ordered by\n// match quality.\nfunction searchWithin(data: Data, query: string): SearchResults {\n  const matches = search(data.suggestions, query).slice(0, SEARCH_RESULTS_MAX)\n  return {matches, icons: data.icons}\n}\n\nfunction renderResults(issues: SuggestionData[], container: HTMLElement, icons: Icons, query = ''): void {\n  const itemsTemplate = (items: SuggestionData[]) => html`\n    <ul\n      role=\"listbox\"\n      class=\"suggester-container suggester suggestions list-style-none position-absolute\"\n      data-query=\"${query}\"\n    >\n      ${items.map(itemTemplate)}\n    </ul>\n  `\n\n  const itemTemplate = (item: SuggestionData) => {\n    const icon = item.type in icons ? parseHTML(document, icons[item.type]!) : ''\n    return html`\n      <li class=\"markdown-title\" role=\"option\" id=\"suggester-issue-${item.id}\" data-value=\"${item.number}\">\n        <span class=\"d-inline-block mr-1\">${icon}</span>\n        <small>#${item.number}</small> ${\n          // eslint-disable-next-line no-restricted-syntax\n          unsafeHTML(item.title)\n        }\n      </li>\n    `\n  }\n\n  render(itemsTemplate(issues), container)\n}\n\nobserve('text-expander[data-issue-url]', {\n  subscribe: el => {\n    const subscriptions = [\n      fromEvent(el, 'text-expander-change', onchange),\n      fromEvent(el, 'text-expander-value', onvalue),\n      fromEvent(el, 'keydown', onkeydown),\n      fromEvent(el, 'click', onclick),\n    ]\n\n    return compose(...subscriptions)\n  },\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== '#') return\n  const value = detail.item.getAttribute('data-value')!\n  detail.value = `#${value}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== '#') return\n  if (text === '#') {\n    hideSuggestions(event.target)\n    return\n  }\n\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-issue-url')!\n  provide(issueMenu(url, text, menu))\n}\n\nfunction hideSuggestions(target: EventTarget | null) {\n  if (!target) return\n\n  const textExpander = (target as HTMLElement).closest('text-expander') as TextExpanderElement\n  if (textExpander) {\n    textExpander.dismiss()\n  }\n}\n\nfunction onclick(event: Event) {\n  hideSuggestions(event.target)\n}\n\nfunction onkeydown(event: Event) {\n  const specialKeys = ['ArrowRight', 'ArrowLeft']\n  const {key} = event as KeyboardEvent\n  if (specialKeys.indexOf(key) < 0) return\n\n  hideSuggestions(event.target)\n}\n\nasync function issueMenu(\n  url: string,\n  query: string,\n  menu: Element,\n): Promise<{fragment: HTMLElement; matched: boolean}> {\n  let searchResults: SearchResults\n\n  if (isFeatureEnabled('ENHANCED_ISSUE_SUGGESTER')) {\n    searchResults = await queryResults(url, query, menu)\n  } else {\n    if (isFeatureEnabled('ENHANCED_ISSUE_SUGGESTER_DARKSHIP')) {\n      // Trigger, but do not await, a potential refined query. Use the results from cachedJSON instead.\n      queryResults(url, query, null)\n    }\n    const data = await cachedJSON<Data>(url)\n    searchResults = searchWithin(data, query)\n  }\n\n  const list = document.createElement('div')\n  renderResults(searchResults.matches, list, searchResults.icons, query)\n  const root = list.firstElementChild as HTMLElement\n  return {fragment: root, matched: searchResults.matches.length > 0}\n}\n\n// Track which query prefixes have already triggered refined query requests, but have not returned results yet.\nconst queriesInProgress = new Set<string>()\n\n// Cache the most recent REFINED_QUERY_CACHE_SIZE refined query results, keyed by query prefix.\nconst queryCache = new Map<string, Data>()\n\n// Identify the most appropriate collection of suggester data given the current query and return promise that resolves\n// to SearchResults containing the result of applying the query to that data.\n//\n// If the query is shorter than REFINED_QUERY_PREFIX_SIZE, use cached data of the most recently updated 1k issues,\n// pull requests, and discussions for this repository.\n//\n// If the query is at least REFINED_QUERY_PREFIX_SIZE characters long and the query's prefix does not currently have\n// cached data available, trigger a refined query request if one is not already running, then search within the cached\n// data of the most recently updated 1k as an interim. When the refined query request's response arrives, the menu\n// will be replaced if the active query still has this prefix.\n//\n// If the query is at least REFINED_QUERY_PREFIX_SIZE characters long and the query's prefix has cached data\n// available, use those cached data to construct the search results.\nasync function queryResults(url: string, query: string, menu: Element | null): Promise<SearchResults> {\n  const basicResults = await cachedJSON<Data>(url)\n  const basicSearchResults = searchWithin(basicResults, query)\n\n  if (query.length < REFINED_QUERY_PREFIX_SIZE || basicResults.suggestions.length < REFINED_QUERY_THRESHOLD) {\n    return basicSearchResults\n  }\n\n  const prefix = query.slice(0, REFINED_QUERY_PREFIX_SIZE)\n  const refinedResults = queryCache.get(prefix)\n\n  if (refinedResults) {\n    return searchWithin(refinedResults, query)\n  }\n\n  if (!queriesInProgress.has(prefix)) {\n    queriesInProgress.add(prefix)\n    const refinedPromise = refinedQuery(url, prefix, menu)\n    if (basicSearchResults.matches.length === 0) {\n      const deferredRefinedResults = await refinedPromise\n      return searchWithin(deferredRefinedResults, query)\n    }\n  }\n\n  return searchWithin(basicResults, query)\n}\n\n// Query dotcom for a list of suggestion results that match the given query prefix. This appends a `?q=` query\n// parameter to the normal issue suggestions URL.\n//\n// When the response arrives, updates queryCache with the new results. If a non-null `menu` element is provided and\n// the current suggestions menu within it is still showing results for a query with the same prefix, the menu's\n// options will be updated live to show suggestions from the refined query results, instead. Any active selection\n// within the menu will be preserved in the new menu contents.\nasync function refinedQuery(url: string, prefix: string, menu: Element | null): Promise<Data> {\n  const refinedQueryUrl = new URL(url, window.location.origin)\n  refinedQueryUrl.searchParams.set('q', prefix)\n\n  const data: Data = await jsonRequest(refinedQueryUrl.toString())\n\n  queryCache.set(prefix, data)\n  queriesInProgress.delete(prefix)\n\n  // Evict cached query results, oldest first, to bring us down to the cache limit.\n  if (queryCache.size > REFINED_QUERY_CACHE_SIZE) {\n    const overage = queryCache.size - REFINED_QUERY_CACHE_SIZE\n    const oldestKeys = Array.from(queryCache.keys()).slice(0, overage)\n    for (const key of oldestKeys) {\n      queryCache.delete(key)\n    }\n  }\n\n  // Replace live suggestions if still visible, preserving any active selection\n  const liveSuggestions = menu?.querySelector<HTMLElement>('ul.suggestions')\n  const liveQuery = liveSuggestions?.getAttribute('data-query')\n\n  if (liveSuggestions && liveQuery?.startsWith(prefix)) {\n    const selectedID = menu?.querySelector<Element>('[aria-activedescendant]')?.getAttribute('aria-activedescendant')\n\n    const list = document.createElement('div')\n    const results = searchWithin(data, liveQuery)\n    renderResults(results.matches, list, results.icons)\n    if (selectedID) {\n      for (const selectedElement of list.querySelectorAll(`#${selectedID}`)) {\n        selectedElement.setAttribute('aria-selected', 'true')\n      }\n    }\n\n    const root = list.firstElementChild as HTMLElement\n    liveSuggestions.replaceChildren(...root.children)\n  }\n\n  return data\n}\n\nasync function jsonRequest<T>(url: RequestInfo): Promise<T> {\n  const response = await self.fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n}\n\nconst cachedJSON = memoize(jsonRequest)\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {html, render} from '@github-ui/jtml-shimmed'\nimport {compare} from '../../fuzzy-filter'\nimport {filterSort} from '../../filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface UserData {\n  login: string\n  type: string\n  id: string\n  name: string\n  description: string\n  participant?: boolean\n}\n\nfunction asText(item: UserData): string {\n  return item.description\n    ? `${item.name} ${item.description}`.trim().toLowerCase() // team\n    : `${item.login} ${item.name}`.trim().toLowerCase() // user\n}\n\nfunction search(items: UserData[], query: string): UserData[] {\n  if (!query) return items\n  const scorer = fuzzyScorer(query)\n  const key = (item: UserData) => {\n    const text = asText(item)\n    const score = scorer(text, item.participant)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction renderResults(usersAndTeams: UserData[], container: HTMLElement): void {\n  const itemsTemplate = (items: UserData[]) => html`\n    <ul role=\"listbox\" class=\"suggester-container suggester suggestions list-style-none position-absolute\">\n      ${items.map(itemTemplate)}\n    </ul>\n  `\n\n  const itemTemplate = (item: UserData) => {\n    const name = item.type === 'user' ? item.login : item.name\n    const desc = item.type === 'user' ? item.name : item.description\n    return html`\n      <li role=\"option\" id=\"suggester-${item.id}-${item.type}-${name}\" data-value=\"${name}\">\n        <span>${name}</span>\n        <small>${desc}</small>\n      </li>\n    `\n  }\n\n  render(itemsTemplate(usersAndTeams), container)\n}\n\nfunction fuzzyScorer(query: string): (text: string, participant?: boolean) => number {\n  if (!query) return () => 2.0\n  const queryChars = query.toLowerCase().split('')\n  return (text: string, participant?: boolean): number => {\n    if (!text) return 0.0\n    const match = shortestMatch(text, queryChars)\n    if (!match) return 0.0\n    const value = query.length / (match[1] as number)\n    const score = value / ((match[0] as number) / 2 + 1)\n    if (participant) return score + 1\n    return score\n  }\n}\n\n// Get the shortest match (least distance between start and end index) for all\n// the query characters in the given text.\n//\n// Returns an array in format [firstIndex, matchLength, [matchIndexes]]\nfunction shortestMatch(text: string, queryChars: string[]): Array<number | number[]> | null {\n  let indexes\n  let j\n  let len\n  let match\n  const starts = allIndexesOf(text, queryChars[0]!)\n  if (starts.length === 0) {\n    return null\n  }\n  if (queryChars.length === 1) {\n    return [starts[0]!, 1, []]\n  }\n  match = null\n  for (j = 0, len = starts.length; j < len; j++) {\n    const start = starts[j]!\n    if (!(indexes = indexesOfChars(text, queryChars, start + 1))) {\n      continue\n    }\n    const length = indexes[indexes.length - 1]! - start\n    if (!match || length < (match[1] as number)) {\n      match = [start, length, indexes]\n    }\n  }\n  return match\n}\n\n// Find all indexes of character inside a string.\nfunction allIndexesOf(string: string, char: string) {\n  let index = 0\n  const results1 = []\n  while ((index = string.indexOf(char, index)) > -1) {\n    results1.push(index++)\n  }\n  return results1\n}\n\n// Find all indexes of characters of query string in order.\nfunction indexesOfChars(string: string, chars: string[], startingIndex: number): number[] | undefined {\n  let index = startingIndex\n  const indexes = []\n  for (let i = 1; i < chars.length; i += 1) {\n    index = string.indexOf(chars[i]!, index)\n    if (index === -1) return\n    indexes.push(index++)\n  }\n  return indexes\n}\n\nobserve('text-expander[data-mention-url]', {\n  subscribe: el =>\n    compose(fromEvent(el, 'text-expander-change', onchange), fromEvent(el, 'text-expander-value', onvalue)),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== '@') return\n  const login = detail.item.getAttribute('data-value')!\n  detail.value = `@${login}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== '@') return\n  // do not allow multi-word mentions\n  if (text?.split(' ').length > 1) return\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-mention-url')!\n  provide(mentionMenu(url, text))\n}\n\nasync function mentionMenu(url: string, query: string): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const data: UserData[] = await cachedJSON(url)\n  const list = document.createElement('div')\n  const results = search(data, query).slice(0, 5)\n  renderResults(results, list)\n  const root = list.firstElementChild as HTMLElement\n  return {fragment: root, matched: results.length > 0}\n}\n\nconst cachedJSON = memoize(async function <T>(url: RequestInfo): Promise<T> {\n  const response = await self.fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('change', 'input.js-survey-contact-checkbox', function (event: Event) {\n  const currentTarget = event.currentTarget as HTMLInputElement\n  const question = currentTarget.closest<HTMLElement>('.js-survey-question-form')!\n  const hiddenInput = question.querySelector<HTMLElement>('.js-survey-contact-checkbox-hidden')!\n  if (currentTarget.checked) {\n    hiddenInput.setAttribute('disabled', 'true')\n  } else {\n    hiddenInput.removeAttribute('disabled')\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non(\n  'details-menu-selected',\n  '.js-sync-select-menu-text',\n  function (event) {\n    const button = document.querySelector<HTMLElement>('.js-sync-select-menu-button')!\n    const text = (event.detail.relatedTarget as Element).querySelector<HTMLElement>(\n      'span[data-menu-button-text]',\n    )!.textContent\n    button.textContent = text\n    button.focus()\n  },\n  {capture: true},\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', 'tab-container [role=\"tab\"]', function (event) {\n  const {currentTarget} = event\n\n  const menu = currentTarget.closest<HTMLElement>('tab-container')!\n  const filter = menu.querySelector('.js-filterable-field, [data-filter-placeholder-input]')\n  if (filter instanceof HTMLInputElement) {\n    const placeholder = currentTarget.getAttribute('data-filter-placeholder')\n    if (placeholder) {\n      filter.setAttribute('placeholder', placeholder)\n    }\n    filter.focus()\n  }\n})\n\non('tab-container-changed', 'tab-container', function (event) {\n  const panel = event.detail.relatedTarget\n  const url = panel.getAttribute('data-fragment-url')\n  const includeFragment = panel.querySelector('include-fragment')\n  if (url && includeFragment && !includeFragment.hasAttribute('src')) {\n    includeFragment.src = url\n  }\n})\n","import {preservePosition} from 'scroll-anchoring'\nimport {replaceState} from '../history'\n\ndocument.addEventListener('keydown', (event: KeyboardEvent) => {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  if (event.key !== 'Escape') return\n  if (event.target !== document.body) return\n\n  const element = document.querySelector('.js-targetable-element:target')\n  if (!element) return\n\n  preservePosition(element, () => {\n    // Clear the `:target` element\n    window.location.hash = ''\n    // Clear the hash part of the URL\n    replaceState(window.history.state, '', window.location.pathname + window.location.search)\n  })\n  /* eslint-enable no-restricted-syntax */\n})\n\ndocument.addEventListener('click', (event: MouseEvent) => {\n  // Return early if there is no highlighted element\n  const highlightedElement = document.querySelector('.js-targetable-element:target')\n  if (!highlightedElement) return\n\n  // Don't mess with the URL if we clicked on a link\n  if (event.target instanceof HTMLAnchorElement) return\n\n  // Don't do anything if the user clicked on the already highlighted element\n  if (!(event.target instanceof HTMLElement)) return\n  if (highlightedElement.contains(event.target)) return\n\n  preservePosition(highlightedElement, () => {\n    // Clear the `:target` element\n    window.location.hash = ''\n    // Clear the hash part of the URL\n    replaceState(window.history.state, '', window.location.pathname + window.location.search)\n  })\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Load team members to display in the mention's tooltip from the server on hover.\nasync function members(event: Event) {\n  const target = event.currentTarget as HTMLElement\n  if (teamHovercardEnabled(target)) {\n    target.classList.remove('tooltipped')\n    return\n  }\n  const url = target.getAttribute('data-url')\n  if (!url) return\n\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  if (!response.ok) return\n  const data = (await response.json()) as {total: number; members: string[]}\n\n  const id = target.getAttribute('data-id')!\n  const mentions = document.querySelectorAll(`.js-team-mention[data-id='${id}']`)\n  for (const el of mentions) {\n    el.removeAttribute('data-url')\n  }\n\n  try {\n    if (data.total === 0) {\n      // eslint-disable-next-line i18n-text/no-en\n      data.members.push('This team has no members')\n    } else if (data.total > data.members.length) {\n      data.members.push(`${data.total - data.members.length} more`)\n    }\n    tip(mentions, sentence(data.members))\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const status = error.response ? error.response.status : 500\n    const message = target.getAttribute(status === 404 ? 'data-permission-text' : 'data-error-text')!\n    tip(mentions, message)\n  }\n}\n\n// Add a tooltip to the elements. Adds the text just before the tooltip classes so\n// the tooltip appears fully formed on mouse hover.\nfunction tip(elements: NodeList, text: string): void {\n  for (const el of elements) {\n    if (!(el instanceof HTMLElement)) continue\n    el.setAttribute('aria-label', text)\n    el.classList.add('tooltipped', 'tooltipped-s', 'tooltipped-multiline')\n  }\n}\n\n// Comma separate a list of strings with `and` at the end, like\n// Rails' to_sentence.\nfunction sentence(xs: string[]): string {\n  if ('ListFormat' in Intl) {\n    const lists = new Intl.ListFormat()\n    return lists.format(xs)\n  }\n\n  if (xs.length === 0) {\n    return ''\n  } else if (xs.length === 1) {\n    return xs[0]!\n  } else if (xs.length === 2) {\n    return xs.join(' and ')\n  } else {\n    const last = xs[xs.length - 1]\n    return xs.slice(0, -1).concat(`and ${last}`).join(', ')\n  }\n}\n\nfunction teamHovercardEnabled(element: HTMLElement): boolean {\n  return !!element.getAttribute('data-hovercard-url') && !!element.closest('[data-team-hovercards-enabled]')\n}\n\nobserve('.js-team-mention', function (el) {\n  el.addEventListener('mouseenter', members)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\ninterface Request {\n  url: string\n  headers: Headers\n}\n\nfunction getTimelineLastModified(): string | null {\n  const marker = document.querySelector('.js-timeline-marker')\n  return marker != null ? marker.getAttribute('data-last-modified') : null\n}\n\n// Add the X-Timeline-Last-Modified header to the request based on the\n// the last modified time from the timeline marker element.\nfunction addTimelineLastModifiedHeader(request: Request) {\n  if (isCrossDomain(request)) {\n    return\n  }\n\n  const lastModified = getTimelineLastModified()\n  if (lastModified) {\n    request.headers.set('X-Timeline-Last-Modified', lastModified)\n  }\n}\n\nfunction isCrossDomain(request: Request): boolean {\n  let requestURL\n  try {\n    // eslint-disable-next-line no-restricted-syntax\n    requestURL = new URL(request.url)\n  } catch (urlError) {\n    return true\n  }\n  return requestURL.host !== window.location.host\n}\n\nremoteForm('.js-needs-timeline-marker-header', function (form, wants, request) {\n  addTimelineLastModifiedHeader(request)\n})\n\non('deprecatedAjaxSend', '[data-remote]', function (event) {\n  const {request} = event.detail\n  addTimelineLastModifiedHeader(request)\n})\n","import {isDetailsTargetExpanded, toggleDetailsTarget} from '../details'\nimport {fetchSafeDocumentFragment} from '../../fetch'\nimport hashChange from '../hash-change'\nimport {loadDeferredContent} from '../include-fragment'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst SCROLL_WAIT_MEDIA_TIMEOUT = 5000\nconst COMMENT_IMAGE = '.js-comment-body img'\nconst COMMENT_VIDEO = '.js-comment-body video'\n\nhashChange(function () {\n  focusOrLoadElement()\n})\n\nobserve('.js-timeline-progressive-focus-container', function (container) {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const pullTimeline = document.querySelector<HTMLElement>('.js-pull-discussion-timeline')\n  if (pullTimeline) return\n\n  const target = document.getElementById(anchor)\n\n  if (target && container.contains(target)) {\n    focusElement(target)\n  }\n})\n\nfunction focusOrLoadElement(shouldLoadElement = true): void {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const target = document.getElementById(anchor)\n  if (target) {\n    focusElement(target)\n  } else {\n    if (loadComments(anchor)) return\n\n    const loader = document.querySelector<HTMLElement>('#js-timeline-progressive-loader')\n\n    if (loader && shouldLoadElement) {\n      loadElement(anchor, loader)\n    }\n  }\n}\n\nfunction loadComments(anchor: string): boolean {\n  return (\n    loadResolvedComments(anchor) ||\n    loadHiddenComments(anchor, '.js-thread-hidden-comment-ids') ||\n    loadHiddenComments(anchor, '.js-review-hidden-comment-ids')\n  )\n}\n\nfunction loadResolvedComments(anchor: string): boolean {\n  const commentContainer = findCommentContainer(anchor, '.js-comment-container')\n  if (!commentContainer) return false\n\n  loadDeferredContent(commentContainer)\n  return true\n}\n\nfunction loadHiddenComments(anchor: string, selector: string): boolean {\n  const commentContainer = findCommentContainer(anchor, selector)\n  if (!commentContainer) return false\n\n  commentContainer.addEventListener('page:loaded', function () {\n    focusOrLoadElement()\n  })\n  commentContainer.querySelector<HTMLButtonElement>('button[type=submit]')!.click()\n  return true\n}\n\nfunction findCommentContainer(anchor: string, selector: string): Element | null {\n  const commentContainers = document.querySelectorAll(selector)\n\n  for (const commentContainer of commentContainers) {\n    const threadCommentIds = commentContainer.getAttribute('data-hidden-comment-ids')\n\n    if (threadCommentIds) {\n      const commentIds = threadCommentIds.split(',')\n      const anchorCommentId = anchor.match(/\\d+/g)?.[0]\n\n      if (anchorCommentId && commentIds.includes(anchorCommentId)) {\n        return commentContainer\n      }\n    }\n  }\n  return null\n}\n\nobserve('.js-inline-comments-container', function (container) {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const target = document.getElementById(anchor)\n\n  if (target && container.contains(target)) {\n    focusElement(target)\n  }\n})\n\n// adds support for deep-link loading discussion comments when the comment thread is nested\nobserve('#js-discussions-timeline-anchor-loader', {\n  constructor: HTMLElement,\n  add: element => {\n    const existingProgressiveLoader = document.querySelector('#js-timeline-progressive-loader')\n    if (existingProgressiveLoader) return\n\n    const anchor = urlAnchor()\n    if (!anchor) return\n\n    const target = document.getElementById(anchor)\n    if (!target) {\n      loadElement(anchor, element)\n    }\n  },\n})\n\n// resolves when comment body videos have loaded enough data to render the preview image\nasync function videosReady(): Promise<unknown> {\n  const videos: NodeListOf<HTMLVideoElement> = document.querySelectorAll(COMMENT_VIDEO)\n  const videoLoads = Array.from(videos).map(v => {\n    return new Promise<HTMLVideoElement>(resolve => {\n      if (v.readyState >= v.HAVE_METADATA) {\n        resolve(v)\n      } else {\n        // don't wait forever :)\n        const timeout = setTimeout(() => resolve(v), SCROLL_WAIT_MEDIA_TIMEOUT)\n        const done = () => {\n          clearTimeout(timeout)\n          resolve(v)\n        }\n        v.addEventListener('loadeddata', () => {\n          if (v.readyState >= v.HAVE_METADATA) done()\n        })\n        v.addEventListener('error', () => done())\n      }\n    })\n  })\n  return Promise.all(videoLoads)\n}\n\n// resolves when comment body images are loaded\nasync function imagesReady(): Promise<unknown> {\n  const images: NodeListOf<HTMLImageElement> = document.querySelectorAll(COMMENT_IMAGE)\n  const imageLoads = Array.from(images).map(i => {\n    new Promise<HTMLImageElement>(resolve => {\n      if (i.complete) {\n        resolve(i)\n      } else {\n        const timeout = setTimeout(() => resolve(i), SCROLL_WAIT_MEDIA_TIMEOUT)\n        const done = () => {\n          clearTimeout(timeout)\n          resolve(i)\n        }\n        i.addEventListener('load', () => done())\n        i.addEventListener('error', () => done())\n      }\n    })\n  })\n  return Promise.all(imageLoads)\n}\n\nasync function mediaLoaded(): Promise<unknown> {\n  return Promise.all([videosReady(), imagesReady()])\n}\n\nasync function focusElement(element: HTMLElement): Promise<void> {\n  await mediaLoaded()\n  expandDetailsIfPresent(element)\n  const link = element.querySelector<HTMLElement>(`[href='#${element.id}']`)\n  element.scrollIntoView()\n  if (link) {\n    const oldValue = link.getAttribute('data-turbo')\n    link.setAttribute('data-turbo', 'false')\n    link.click()\n    if (oldValue === null) {\n      link.removeAttribute('data-turbo')\n    } else {\n      link.setAttribute('data-turbo', oldValue)\n    }\n  }\n}\n\nasync function loadElement(anchor: string, loader: HTMLElement): Promise<void> {\n  if (!loader) return\n\n  const path = loader.getAttribute('data-timeline-item-src')\n  if (!path) return\n\n  const url = new URL(path, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  params.append('anchor', anchor)\n  url.search = params.toString()\n\n  let html\n  try {\n    html = await fetchSafeDocumentFragment(document, url.toString())\n  } catch (err) {\n    return\n  }\n\n  const newTimelineItem = html.querySelector('.js-timeline-item')\n  if (!newTimelineItem) return\n\n  const gid = newTimelineItem.getAttribute('data-gid')\n  if (!gid) return\n\n  const currentTimelineItem = document.querySelector(`.js-timeline-item[data-gid='${gid}']`)\n\n  if (currentTimelineItem) {\n    currentTimelineItem.replaceWith(newTimelineItem)\n\n    focusOrLoadElement(false)\n  } else {\n    const container = document.getElementById('js-progressive-timeline-item-container')\n    if (container) container.replaceWith(html)\n    focusOrLoadElement(false)\n  }\n}\n\nfunction expandDetailsIfPresent(element: HTMLElement): void {\n  const detailsContainer = element.closest<HTMLElement>('details, .js-details-container')\n  if (!detailsContainer) return\n  if (detailsContainer.nodeName === 'DETAILS') {\n    detailsContainer.setAttribute('open', 'open')\n  } else if (!isDetailsTargetExpanded(detailsContainer)) {\n    toggleDetailsTarget(detailsContainer)\n  }\n}\n\nfunction urlAnchor(): string {\n  return window.location.hash.slice(1)\n}\n","import {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-discussion', announceTimelineEvents)\n\nfunction announceTimelineEvents() {\n  let existingTimelineItems: WeakSet<Element> = new WeakSet()\n  setExistingTimelineItems()\n\n  document.addEventListener('turbo:load', setExistingTimelineItems)\n\n  observe('.js-timeline-item', el => {\n    if (!(el instanceof HTMLElement)) return\n    if (existingTimelineItems.has(el)) return\n\n    announceFromElement(el)\n  })\n\n  function setExistingTimelineItems() {\n    existingTimelineItems = new WeakSet(document.querySelectorAll('.js-timeline-item'))\n  }\n}\n","import {ready} from '@github-ui/document-ready'\n;(async function () {\n  if ('serviceWorker' in navigator) {\n    await ready\n    const serviceWorkerPath = document.querySelector<HTMLLinkElement>('link[rel=\"service-worker-src\"]')?.href\n    if (serviceWorkerPath) {\n      navigator.serviceWorker.register(serviceWorkerPath, {scope: '/'})\n    } else {\n      await unregisterAllServiceWorkers()\n    }\n  }\n})()\n\nasync function unregisterAllServiceWorkers() {\n  let registrations: readonly ServiceWorkerRegistration[] = []\n  try {\n    registrations = await navigator.serviceWorker.getRegistrations()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.name === 'SecurityError') return\n  }\n\n  for (const registration of registrations) {\n    registration.unregister()\n  }\n}\n","// Toggler Behavior\n//\n// target    - Element with a \".js-toggler-target\" class name, clicking\n//             triggers toggle.\n// container - Element with a \".js-toggler-container\" class name,\n//             contains one or more targets.\n//\n// The toggle state is defined as \"off\" or \"on\". A \".on\" class name is\n// added to the container when the state is \"on\". \".on\" is removed if\n// the state is \"off\".\n//\n// Some extra AJAX states are available if any target makes use of\n// `data-remote`.\n//\n// loading - Added to the container before the request is sent and\n//           after it finishes.\n// success - Added to the container after a successful response\n//           returns.\n// error   - Added to the container after any bad responses.\n//\n// Examples\n//\n//   .starring-container .unstarred { display: block; }\n//   .starring-container.on .unstarred { display: none; }\n//   .starring-container .starred { display: none; }\n//   .starring-container.on .starred { display: block; }\n//\n//   <div class=\"js-toggler-container starring-container\">\n//     <button type=\"button\" href=\"#\" class=\"starred js-toggler-target\">Unstar repository</button>\n//     <button type=\"button\" class=\"unstarred js-toggler-target\">Star repository</button>\n//   </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\non('click', '.js-toggler-container .js-toggler-target', function (event) {\n  // Ignore right-click events.\n  if (event.button !== 0) return\n\n  const container = event.currentTarget.closest('.js-toggler-container')\n  if (container) container.classList.toggle('on')\n})\n\nremoteForm('.js-toggler-container', async (form, wants) => {\n  form.classList.remove('success', 'error')\n  form.classList.add('loading')\n\n  try {\n    await wants.text()\n    form.classList.add('success')\n  } catch (responseError) {\n    form.classList.add('error')\n  } finally {\n    form.classList.remove('loading')\n  }\n})\n","import {PageRenderer, session, setProgressBarDelay} from '@github/turbo'\nimport {formatKeyToError} from './utils'\n\ninterface HeadSnapshot {\n  detailsByOuterHTML: {\n    [outerHTML: string]: {\n      tracked: boolean\n      elements: Element[]\n    }\n  }\n}\n\nsetProgressBarDelay(0)\n\nsession.isVisitable = () => true\n\n// get the reason why a Turbo request had to be reloaded so we can report metrics\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst originalTrackedElementsAreIdentical = Object.getOwnPropertyDescriptor(PageRenderer.prototype, 'reloadReason').get!\nObject.defineProperty(PageRenderer.prototype, 'reloadReason', {\n  get() {\n    const reloadReason = originalTrackedElementsAreIdentical.call(this)\n\n    if (reloadReason.reason !== 'tracked_element_mismatch') {\n      return reloadReason\n    }\n\n    const currentTracked = Object.fromEntries(getSnapshotSignatures(this.currentHeadSnapshot))\n    const changedKeys = []\n\n    for (const [key, value] of getSnapshotSignatures(this.newHeadSnapshot)) {\n      if (currentTracked[key] !== value) {\n        changedKeys.push(formatKeyToError(key))\n      }\n    }\n\n    return {\n      reason: `tracked_element_mismatch-${changedKeys.join('-')}`,\n    }\n  },\n})\n\nfunction* getSnapshotSignatures(snapshot: HeadSnapshot): IterableIterator<[string, string]> {\n  for (const detail of Object.values(snapshot.detailsByOuterHTML)) {\n    if (detail.tracked) {\n      for (const element of detail.elements) {\n        if (element instanceof HTMLMetaElement && element.getAttribute('http-equiv')) {\n          yield [element.getAttribute('http-equiv') || '', element.getAttribute('content') || '']\n        }\n      }\n    }\n  }\n}\n","import {navigator} from '@github/turbo'\n\ntype State = Record<string, unknown> & {\n  turbo?: {restorationIdentifier: string}\n  skipTurbo?: boolean\n  usr?: {skipTurbo: boolean}\n}\n\n// keep Turbo's history up to date with the browser's in case code calls native history API's directly\nconst patchHistoryApi = (name: 'replaceState' | 'pushState') => {\n  const oldHistory = history[name]\n\n  history[name] = function (this: History, state?: State, unused?: string, url?: string | URL | null) {\n    const skipTurbo = state?.skipTurbo || state?.usr?.skipTurbo\n\n    // we need to merge the state from turbo with the state given to pushState in case others are adding data to the state\n    function oldHistoryWithMergedState(\n      this: History,\n      turboState: State,\n      turboUnused: string,\n      turboUrl?: string | URL | null,\n    ) {\n      const mergedState = skipTurbo ? {...state, skipTurbo: true} : {...state, ...turboState}\n      oldHistory.call(this, mergedState, turboUnused, turboUrl)\n    }\n\n    navigator.history.update(\n      oldHistoryWithMergedState,\n      new URL(url || location.href, location.href),\n      state?.turbo?.restorationIdentifier,\n    )\n  }\n}\n\npatchHistoryApi('replaceState')\npatchHistoryApi('pushState')\n","import {session} from '@github/turbo'\n\ninterface ProgressBar {\n  setValue(n: number): void\n  hide(): void\n  show(): void\n}\n\ninterface BrowserAdapter {\n  progressBar: ProgressBar\n}\n\nconst adapter = session.adapter as typeof session.adapter & BrowserAdapter\n\n// Start the ProgressBar at the top of the page.\nexport const beginProgressBar = () => {\n  adapter.progressBar.setValue(0)\n  adapter.progressBar.show()\n}\n\n// Complete the ProgressBar at the top of the page.\nexport const completeProgressBar = () => {\n  adapter.progressBar.setValue(1)\n  adapter.progressBar.hide()\n}\n","import {ready} from '@github-ui/document-ready'\nimport {CacheNode, getDocumentAttributes, getTurboCacheNodes} from './utils'\n\nconst turboPageNodes: Map<string, CacheNode> = new Map()\nconst turboDocumentAttributes: Map<string, Attr[]> = new Map()\n\nexport const getCachedNode = () => turboPageNodes.get(document.location.href)\nexport const setCachedNode = (url: string, node: CacheNode) => turboPageNodes.set(url, node)\nexport const setDocumentAttributesCache = () =>\n  turboDocumentAttributes.set(document.location.href, getDocumentAttributes())\nexport const getCachedAttributes = () => turboDocumentAttributes.get(document.location.href)\n;(async () => {\n  await ready\n  setCachedNode(document.location.href, getTurboCacheNodes(document))\n  setDocumentAttributesCache()\n})()\n","import {observe} from '@github/selector-observer'\nimport {isTurboFrame, waitForStylesheets, dispatchTurboReload, replaceElementAttributes} from './utils'\nimport {beginProgressBar, completeProgressBar} from './progress-bar'\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {getCachedAttributes, setDocumentAttributesCache} from './cache'\nimport {startSoftNav} from '@github-ui/soft-nav'\nimport {ssrSafeWindow, ssrSafeDocument} from '@github-ui/ssr-utils'\n\nif (ssrSafeWindow) {\n  // We want to make sure that links inside a `data-turbo-frame` container also have the data attribute.\n  observe('[data-turbo-frame]', {\n    constructor: HTMLElement,\n    add(el) {\n      if (el.tagName === 'A' || el.getAttribute('data-turbo-frame') === '') return\n\n      for (const link of el.querySelectorAll('a:not([data-turbo-frame])')) {\n        link.setAttribute('data-turbo-frame', el.getAttribute('data-turbo-frame') || '')\n      }\n    },\n  })\n}\n\nssrSafeDocument?.addEventListener('turbo:click', function (event) {\n  if (!(event.target instanceof HTMLElement)) return\n  if (!(event instanceof CustomEvent)) return\n\n  // https://github.com/hotwired/turbo/issues/539\n  // If we are doing a hash navigation, we want to prevent Turbo from performing a visit\n  // so it won't mess with focus styles.\n  if (isHashNavigation(location.href, event.detail.url)) {\n    event.preventDefault()\n    // return early so we don't start a soft-nav\n    return\n  }\n\n  // Here is where ALL non-frame Turbo navigation starts. We start by emitting the `soft-nav:start` event with the correct `turbo` mechanism.\n  if (!event.defaultPrevented) {\n    startSoftNav('turbo')\n  }\n})\n\n// Emulate `onbeforeunload` event handler for Turbo navigations to\n// support warning a user about losing unsaved content\nssrSafeDocument?.addEventListener('turbo:before-fetch-request', function (event) {\n  const unloadMessage = window.onbeforeunload?.(event)\n\n  if (unloadMessage) {\n    const navigate = confirm(unloadMessage)\n    if (navigate) {\n      window.onbeforeunload = null\n    } else {\n      event.preventDefault()\n      completeProgressBar()\n    }\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-request', event => {\n  if (event.defaultPrevented) return\n\n  const frame = event.target as Element\n  if (isTurboFrame(frame)) {\n    beginProgressBar()\n  }\n\n  // attach a Turbo specific header for visit requests so the server can track Turbo usage\n  if (frame?.tagName === 'HTML') {\n    const ev = event as CustomEvent\n    ev.detail.fetchOptions.headers['Turbo-Visit'] = 'true'\n  }\n})\n\ntype FetchRequest = {\n  readonly delegate: FetchRequestDelegate\n}\ninterface FetchRequestDelegate {\n  requestErrored(request: FetchRequest, error: Error): void\n}\ntype FrameElement = {\n  readonly delegate: FrameElementDelegate\n}\ntype FrameElementDelegate = unknown\n\n// TODO: turbo upstream will emit this event eventually https://github.com/hotwired/turbo/pull/640\n// and we can remove the types above\nconst frame = ssrSafeDocument?.createElement('turbo-frame') as unknown as FrameElement\nconst controllerPrototype = Object.getPrototypeOf(frame.delegate)\nconst originalRequestErrored = controllerPrototype.requestErrored\ncontrollerPrototype.requestErrored = function (request: FetchRequest, error: Error) {\n  this.element.dispatchEvent(\n    new CustomEvent('turbo:fetch-error', {\n      bubbles: true,\n      detail: {request, error},\n    }),\n  )\n  return originalRequestErrored.apply(this, request, error)\n}\n\n// when a frame fetch request errors due to a network error\n// we reload the page to prevent hanging the progress bar indefinitely\nssrSafeDocument?.addEventListener('turbo:fetch-error', event => {\n  // we don't want to reload the page due to an error on a form\n  // since we might throw away the users work or submit the form again\n  // other handling would be needed for this use case\n  if (event.target instanceof HTMLFormElement) {\n    return\n  }\n\n  const fetchRequest = (event as CustomEvent).detail.request\n\n  window.location = fetchRequest.location\n  event.preventDefault()\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-response', event => {\n  const fetchResponse = (event as CustomEvent).detail.fetchResponse\n\n  // Turbo is misbehaving when we Drive to our 404 page, so we\n  // can force a reload if the response is 404 and prevent Turbo\n  // from continuing.\n  if (fetchResponse.statusCode === 404) {\n    dispatchTurboReload('404')\n    window.location = fetchResponse.location\n    event.preventDefault()\n  }\n\n  // Here we want to ensure that every time we navigate away from a page using Turbo, we set a restorationIdentifier.\n  // We have to do this because React removes the identifier to avoid an unwanted request when doing client-side navigations.\n  // But, since we are Turboing away from a page (React or not), we need to ensure that the identifier is present, so when we\n  // back navigate, the page will be refetched.\n  history.replaceState({...history.state, skipTurbo: false}, '', location.href)\n})\n\nssrSafeDocument?.addEventListener('turbo:frame-render', event => {\n  if (isTurboFrame(event.target)) {\n    completeProgressBar()\n  }\n})\n\n// copy over new attributes on <html> to the existing page\nssrSafeDocument?.addEventListener('turbo:before-render', async event => {\n  if (!(event instanceof CustomEvent)) return\n\n  event.preventDefault()\n\n  event.detail.render = customDriveRender\n\n  await waitForStylesheets()\n\n  event.detail.resume(true)\n\n  // Update <html> attributes\n  replaceElementAttributes(document.documentElement, event.detail.newBody.ownerDocument.documentElement)\n  setDocumentAttributesCache()\n})\n\nconst nextEventLoopTick = () =>\n  new Promise<void>(resolve => {\n    setTimeout(() => resolve(), 0)\n  })\n\nconst customDriveRender = async (currentBody: HTMLBodyElement, newBody: HTMLBodyElement) => {\n  await nextEventLoopTick()\n\n  const currentTurboBody = currentBody.querySelector('[data-turbo-body]')\n  const newTurboBody = newBody.querySelector('[data-turbo-body]')\n\n  if (currentTurboBody && newTurboBody) {\n    replaceElementAttributes(currentBody, newBody)\n    currentTurboBody.replaceWith(newTurboBody)\n  } else {\n    dispatchTurboReload('missing_turbo_body')\n    window.location.reload()\n  }\n}\n\nssrSafeWindow?.addEventListener('popstate', () => {\n  const currentDocument = document.documentElement\n  const cachedAttributes = getCachedAttributes()\n\n  if (!cachedAttributes) return\n\n  for (const attr of currentDocument.attributes) {\n    if (!cachedAttributes.find(cached => cached.nodeName === attr.nodeName)) {\n      currentDocument.removeAttribute(attr.nodeName)\n    }\n  }\n\n  for (const attr of cachedAttributes) {\n    if (currentDocument.getAttribute(attr.nodeName) !== attr.nodeValue) {\n      currentDocument.setAttribute(attr.nodeName, attr.nodeValue!)\n    }\n  }\n})\n","export default function timezone(): string | void {\n  if ('Intl' in window) {\n    try {\n      const format = new window.Intl.DateTimeFormat()\n      return format.resolvedOptions().timeZone\n    } catch {\n      // ignore\n    }\n  }\n}\n","import {\n  endSoftNav,\n  failSoftNav,\n  initSoftNav,\n  succeedSoftNav,\n  SOFT_NAV_STATE,\n  renderedSoftNav,\n  hasSoftNavFailure,\n  inSoftNav,\n  setSoftNavFailReason,\n  setSoftNavMechanism,\n} from '@github-ui/soft-nav'\nimport {setDocumentAttributesCache} from './cache'\nimport {markTurboHasLoaded} from './utils'\nimport {beginProgressBar, completeProgressBar} from './progress-bar'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\n\n// In case this event is triggered, it means we are in a Frame navigation, so we update the mechanism (if needed).\nssrSafeDocument?.addEventListener('turbo:frame-load', () => {\n  // When going to a React page, there is a chance that the soft-nav end event finishes before the frame-load event.\n  // In that case, we don't want to start a new soft-nav event here, so we'll skip this if the soft-nav has already ended.\n  if (inSoftNav()) setSoftNavMechanism('turbo.frame')\n  // When navigating using frames, we either render here, or wait for the react-app to render.\n  renderedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo.frame']})\n})\n\n// Turbo navigations should end here, unless we are navigating to a React app. In that case, React itself will\n// end the navigation, since Turbo doesn't know when React is done rendering.\nssrSafeDocument?.addEventListener('turbo:load', event => {\n  markTurboHasLoaded()\n  const isHardLoad = Object.keys((event as CustomEvent).detail.timing).length === 0\n\n  if (inSoftNav() && !isHardLoad && !hasSoftNavFailure()) {\n    // When navigating using drive, we either render here, or wait for the react-app to render.\n    renderedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo']})\n    // If going to a react app, we let React succeed the soft-nav.\n    succeedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo', 'turbo.frame']})\n  } else if (isHardLoad && (hasSoftNavFailure() || inSoftNav())) {\n    // If going to a react app, we let React fail the soft-nav.\n    failSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo', 'turbo.frame']})\n  } else if (isHardLoad) {\n    initSoftNav()\n  }\n})\n\nssrSafeDocument?.addEventListener('beforeunload', () => endSoftNav())\n\n// Set the failure reason when we get a reload\nssrSafeDocument?.addEventListener('turbo:reload', function (event) {\n  if (!(event instanceof CustomEvent)) return\n\n  setSoftNavFailReason(event.detail.reason)\n})\n\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.END, setDocumentAttributesCache)\n\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.PROGRESS_BAR.START, beginProgressBar)\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.PROGRESS_BAR.END, completeProgressBar)\n","import {setCookie} from '../cookies'\nimport timezone from '../timezone'\n\nwindow.requestIdleCallback(() => {\n  const value = timezone()\n  if (value) {\n    setCookie('tz', encodeURIComponent(value))\n  }\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nlet unreadCount = 0\n\nfunction markThreadAsRead() {\n  if (!document.hasFocus()) return\n  const form = document.querySelector('.js-timeline-marker-form')\n  if (form && form instanceof HTMLFormElement) requestSubmit(form)\n}\n\nconst observer =\n  'IntersectionObserver' in window\n    ? new IntersectionObserver(\n        function (entries) {\n          for (const entry of entries) {\n            if (entry.isIntersecting) {\n              clearUnread(entry.target)\n            }\n          }\n        },\n        {\n          root: null,\n          rootMargin: '0px',\n          threshold: 1.0,\n        },\n      )\n    : null\n\nobserve('.js-unread-item', {\n  constructor: HTMLElement,\n  add(el) {\n    unreadCount++\n    if (observer) {\n      observer.observe(el)\n    }\n  },\n  remove(el) {\n    unreadCount--\n    if (observer) {\n      observer.unobserve(el)\n    }\n    if (unreadCount === 0) {\n      markThreadAsRead()\n    }\n  },\n})\n\nfunction clearUnread(el: Element) {\n  el.classList.remove('js-unread-item', 'unread-item')\n}\n\n// Mark any unread comments as read if the user has marked the thread as read\n// in another tab or remotely via email notification.\nobserve('.js-discussion[data-channel-target]', {\n  subscribe: el =>\n    fromEvent(el, 'socket:message', function (event: Event) {\n      const target = event.target as Element\n      const data = (event as CustomEvent).detail.data\n      if (target.getAttribute('data-channel-target') === data.gid) {\n        for (const item of document.querySelectorAll('.js-unread-item')) {\n          clearUnread(item)\n        }\n      }\n    }),\n})\n","// Unread Item Counter\n//\n// Keeps count of how many unread items are present throughout the page. The\n// count is reflected in the page title automatically.\n//\n// To increase or decrease the page title counter, it's as simple as adding or\n// removing the `.js-unread-item` class from an element. The counter is reset and\n// the page title is cleared when there are no more elements with the\n// `.js-unread-item` class present.\n//\n// Markup\n//\n// ``` html\n// <div class=\"comment js-comment js-unread-item\">\n//   :metal:\n// </div>\n// ```\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nlet unreadCounter = 0\nconst titleRe = /^\\(\\d+\\)\\s+/\n\nfunction updateTitle() {\n  const prefix = unreadCounter ? `(${unreadCounter}) ` : ''\n  if (document.title.match(titleRe)) {\n    document.title = document.title.replace(titleRe, prefix)\n  } else {\n    document.title = `${prefix}${document.title}`\n  }\n}\n\nobserve('.js-unread-item', {\n  add() {\n    unreadCounter++\n    updateTitle()\n  },\n  remove() {\n    unreadCounter--\n    updateTitle()\n  },\n})\n","//\n// Updatable Content\n//\n// Markup\n//\n//     <div class=\"js-socket-channel js-updatable-content\"\n//          data-channel=\"pull:123\"\n//          data-url=\"/pull/123?partial=commits\">\n//     </div>\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {updateContent} from '../updatable-content'\n\nobserve('.js-socket-channel.js-updatable-content', {\n  subscribe: el =>\n    fromEvent(el, 'socket:message', function (event: Event) {\n      const {gid, wait} = (event as CustomEvent).detail.data\n      const container = event.target as HTMLElement\n      const target = gid ? findByGid(container, gid) : container\n      if (target) setTimeout(updateContent, wait || 0, target)\n    }),\n})\n\nfunction findByGid(root: HTMLElement, gid: string): HTMLElement | null {\n  if (root.getAttribute('data-gid') === gid) return root\n  for (const el of root.querySelectorAll<HTMLElement>(`[data-url][data-gid]`)) {\n    if (el.getAttribute('data-gid') === gid) {\n      return el\n    }\n  }\n  return null\n}\n","import {registerStaleRecords, replaceContent} from '../updatable-content'\nimport {ready} from '@github-ui/document-ready'\nimport {replaceState} from '../history'\n\nasync function reapplyPreviouslyUpdatedContent() {\n  if (!history.state || !history.state.staleRecords) return\n  await ready\n  for (const url in history.state.staleRecords) {\n    for (const urlTarget of document.querySelectorAll(\n      `.js-updatable-content [data-url='${url}'], .js-updatable-content[data-url='${url}']`,\n    )) {\n      const data = history.state.staleRecords[url]\n      if (urlTarget instanceof HTMLElement) replaceContent(urlTarget, data, true)\n    }\n  }\n  replaceState(null, '', location.href)\n}\n\nwindow.addEventListener('pagehide', registerStaleRecords)\n\ntry {\n  reapplyPreviouslyUpdatedContent()\n} catch {\n  // ignore\n}\n","import {dialog} from '../details-dialog'\nimport {fetchSafeDocumentFragment} from '../fetch'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('upload:setup', '.js-upload-avatar-image', function (event) {\n  const {form} = event.detail\n  const orgId = event.currentTarget.getAttribute('data-alambic-organization')\n  const ownerType = event.currentTarget.getAttribute('data-alambic-owner-type')\n  const ownerId = event.currentTarget.getAttribute('data-alambic-owner-id')\n  if (orgId) {\n    form.append('organization_id', orgId)\n  }\n  if (ownerType) {\n    form.append('owner_type', ownerType)\n  }\n  if (ownerId) {\n    form.append('owner_id', ownerId)\n  }\n})\n\non('upload:complete', '.js-upload-avatar-image', function (event) {\n  const {attachment} = event.detail\n  const url = `/settings/avatars/${attachment.id}`\n  dialog({content: fetchSafeDocumentFragment(document, url), detailsClass: 'upload-avatar-details'})\n})\n\non('dialog:remove', '.upload-avatar-details', async function (element) {\n  const cropForm = element.currentTarget.querySelector('#avatar-crop-form')!\n  const id = cropForm.getAttribute('data-alambic-avatar-id')!\n  const url = `/settings/avatars/${id}?op=destroy`\n\n  const csrfToken = element.currentTarget.querySelector('.js-avatar-post-csrf')!.getAttribute('value')!\n\n  const request = new Request(url, {\n    method: 'POST',\n    headers: {\n      'Scoped-CSRF-Token': csrfToken,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  await self.fetch(request)\n})\n","// Support linking to named anchors in user content\n//\n// Named elements in user content are prefixed with \"user-content-\" to prevent\n// DOM clobbering. This allows users to link to the unprefixed named anchors by\n// listening for hashchange and, when when no elements with an ID or name of the\n// given hash exist, looks for an element with a prefixed name.\n//\n// See https://github.com/github/github/issues/23103 for more information.\n\nimport {decodeFragmentValue, findElementByFragmentName} from '../fragment-target'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {ready} from '@github-ui/document-ready'\nimport {scrollIntoView} from '../sticky-scroll-into-view'\nimport {getUserContentScrolling} from '@github-ui/allow-user-content-scrolling'\n\nfunction hashchange() {\n  if (!getUserContentScrolling()) {\n    return\n  }\n\n  if (document.querySelector(':target')) {\n    return\n  }\n  const hash = decodeFragmentValue(location.hash).toLowerCase()\n  const target = findElementByFragmentName(document, `user-content-${hash}`)\n  if (target) {\n    scrollIntoView(target)\n  }\n}\n\n// Scroll to anchor when clicked on page.\nwindow.addEventListener('hashchange', hashchange)\n\n// Scroll to anchor on turbo navigation\ndocument.addEventListener('turbo:load', hashchange)\n\n// Scroll to anchor on page load.\n;(async function () {\n  await ready\n  hashchange()\n})()\n\n// Scroll to anchor when clicking on a link that has the exact same fragment\n// identifier as already present in the URL. This won't trigger `hashchange`,\n// so we need to scroll manually.\non('click', 'a[href]', function (event) {\n  const {currentTarget} = event\n  if (!(currentTarget instanceof HTMLAnchorElement)) return\n\n  if (currentTarget.href === location.href && location.hash.length > 1) {\n    setTimeout(function () {\n      if (!event.defaultPrevented) hashchange()\n    })\n  }\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nasync function load() {\n  await import('../user-status-submit')\n}\n\nobserve('.js-user-status-container, .js-load-user-status-submit', {\n  subscribe: el => fromEvent(el, 'click', load, {once: true}),\n})\n","// User list dialogs\n//\n// Handle user list creation, deletion, and editing.\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {SimpleResponse} from '@github/remote-form'\nimport {TemplateInstance} from '@github/template-parts'\nimport {dialog} from '../details-dialog'\nimport {hasDirtyFields} from '../has-interactions'\nimport {onInput} from '../onfocus'\nimport {parseHTML} from '../parse-html'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport {showGlobalError} from './ajax-error'\nimport {updateContent} from '../updatable-content'\nimport {updateSocialCounts} from './social'\n\n// Communicate a generic error, not associated with a specific attribute, to the user. This is used if the\n// server does something unexpected, like returning a 500 error or reporting an unrecognized attribute.\nfunction setFlashError(form: HTMLFormElement, message?: string) {\n  const flash = form.querySelector<HTMLElement>('.js-user-list-base')\n  if (flash) {\n    flash.textContent = message || flash.getAttribute('data-generic-message')\n    flash.hidden = false\n  }\n}\n\n// Clear any validation errors from the form. If a specific formGroup is provided, only clear errors from that\n// group. Otherwise, clear errors from all groups. In either case, flash errors should be cleared as well.\nfunction resetValidation(form: HTMLFormElement, formGroup?: HTMLElement) {\n  const container = formGroup || form\n  const notes = container.querySelectorAll<HTMLElement>('.js-user-list-error')\n  for (const note of notes) {\n    note.hidden = true\n  }\n\n  const groups = formGroup ? [formGroup] : form.querySelectorAll<HTMLElement>('.errored.js-user-list-input-container')\n  for (const group of groups) {\n    group.classList.remove('errored')\n  }\n\n  const flash = form.querySelector<HTMLElement>('.js-user-list-base')\n  if (flash) {\n    flash.hidden = true\n  }\n}\n\n// Wire up remote form submission. Clear preexisting validation errors from the form, submit it with XHR, and interpret\n// the server's response. On success, reload the page. On failure, attempt to interpret the response as validation\n// errors and display them next to the appropriate inputs.\nremoteForm('.js-user-list-form', async function (form, wants) {\n  resetValidation(form)\n\n  const submitButton = form.querySelector<HTMLButtonElement>('[data-submitting-message]')\n  const originalButtonText = submitButton?.textContent\n  if (submitButton) {\n    // We can't use data-disable-with here because the button is re-enabled immediately after the response is received,\n    // but before we have a chance to handle it and redirect or swap out the form contents. This results in a\n    // disorienting jitter.\n    submitButton.textContent = submitButton.getAttribute('data-submitting-message')\n    submitButton.disabled = true\n  }\n\n  for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-input')) {\n    input.disabled = true\n  }\n\n  try {\n    const response = await wants.html()\n\n    // Let a containing element determine how to handle the response.\n    fire(form, 'user-list-form:success', response.html)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response?.status === 422) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      form.replaceWith(error.response.html)\n    } else {\n      setFlashError(form)\n\n      if (submitButton) {\n        if (originalButtonText) submitButton.textContent = originalButtonText\n        submitButton.disabled = false\n      }\n\n      for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-input')) {\n        input.disabled = false\n      }\n    }\n  }\n})\n\non('user-list-form:success', '.js-follow-list', event => {\n  const responseBody = event.detail\n  const targetUrlElement =\n    responseBody instanceof DocumentFragment ? responseBody.querySelector<HTMLAnchorElement>('.js-target-url') : null\n  if (targetUrlElement?.href) {\n    location.href = targetUrlElement.href\n  } else {\n    location.reload()\n  }\n})\n\n// Dismiss a validation error from a form input when you start changing it.\nfunction clearErrorsFromInput(event: Event) {\n  if (!(event.currentTarget instanceof HTMLElement)) {\n    return\n  }\n\n  const form = event.currentTarget.closest<HTMLFormElement>('.js-user-list-form')\n  const formGroup = event.currentTarget.closest<HTMLElement>('.js-user-list-input-container')\n  if (form && formGroup) {\n    resetValidation(form, formGroup)\n  }\n}\n\nonInput('.js-user-list-form input', clearErrorsFromInput)\nonInput('.js-user-list-form textarea', clearErrorsFromInput)\n\n// Unhide the .note element containing the validation error reported by <auto-check> when there's an error to show.\non('auto-check-error', '.js-user-list-form input', function (event) {\n  const formGroup = event.currentTarget.closest<HTMLElement>('.js-user-list-input-container')\n  const note = formGroup?.querySelector<HTMLElement>('.js-user-list-error')\n  if (note) {\n    note.hidden = false\n  }\n})\n\n// Star button UserList menu\n\n// Given a collection of UserList menu root elements, construct a map grouping them by the repository ID each\n// corresponds to.\nfunction groupRootsByRepositoryId(roots: Iterable<HTMLElement>): Map<string, HTMLElement[]> {\n  const rootsByRepositoryId = new Map<string, HTMLElement[]>()\n  for (const root of roots) {\n    const repositoryId = root\n      .querySelector<HTMLInputElement>('.js-user-lists-create-trigger')\n      ?.getAttribute('data-repository-id')\n    if (repositoryId) {\n      const existingRoots = rootsByRepositoryId.get(repositoryId)\n      if (existingRoots) {\n        existingRoots.push(root)\n      } else {\n        rootsByRepositoryId.set(repositoryId, [root])\n      }\n    }\n  }\n  return rootsByRepositoryId\n}\n\n// Perform a POST request to the batch-render endpoint to render a collection of UserList menus corresponding to the\n// repositories. Asynchronously returns a Map<repository ID> => rendered HTML generated for that repository.\n//\n// Rejects its promise on network errors, but returns an empty map on server errors.\nasync function requestMenuBatchRender(\n  batchUpdateUrl: string,\n  csrfToken: string,\n  repositoryIds: Iterable<string>,\n): Promise<Map<string, DocumentFragment>> {\n  const postData = new FormData()\n\n  // eslint-disable-next-line github/authenticity-token\n  postData.set('authenticity_token', csrfToken)\n  for (const repositoryId of repositoryIds) {\n    postData.append('repository_ids[]', repositoryId)\n  }\n\n  const response = await fetch(batchUpdateUrl, {\n    method: 'POST',\n    body: postData,\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  const updatedMenuContents = new Map<string, DocumentFragment>()\n  if (response.ok) {\n    const json = await response.json()\n    for (const key in json) {\n      updatedMenuContents.set(key, parseHTML(document, json[key]))\n    }\n  }\n  return updatedMenuContents\n}\n\n// Replace the contents of UserList menus in the DOM with the updated, rendered HTML generated for each by the batch\n// render endpoint.\nfunction replaceUserListMenuRoots(\n  renderedMenuContents: Map<string, DocumentFragment>,\n  rootsByRepositoryId: Map<string, HTMLElement[]>,\n) {\n  for (const [repositoryId, updatedMenu] of renderedMenuContents.entries()) {\n    const matchingRoots = rootsByRepositoryId.get(repositoryId) || []\n    for (const root of matchingRoots) {\n      root.replaceWith(matchingRoots.length === 1 ? updatedMenu : updatedMenu.cloneNode(true))\n    }\n  }\n}\n\n// Perform a single request to replace all UserList menus currently present in the DOM with updated versions from the\n// server.\n//\n// Expects a response in form of:\n//\n// {\n//   \"<repo id 0>\": \"<div> <!-- markup for menu for repo 0 --></div>\",\n//   \"<repo id 1>\": \"<div> <!-- markup for menu for repo 1 --></div>\",\n//   \"<repo id 2>\": \"<div> <!-- markup for menu for repo 2 --></div>\"\n// }\nasync function updateAllUserListMenus() {\n  const roots = document.querySelectorAll<HTMLElement>('.js-user-list-menu-content-root')\n  if (roots.length === 0) return\n\n  const batchUpdateUrl = roots[0]!.getAttribute('data-batch-update-url')\n  if (!batchUpdateUrl) return\n\n  const csrfToken = roots[0]!.querySelector<HTMLInputElement>('.js-user-list-batch-update-csrf')?.value\n  if (!csrfToken) return\n\n  const rootsByRepositoryId = groupRootsByRepositoryId(roots)\n  const repositoryIds = rootsByRepositoryId.keys()\n  const renderedMenuContents = await requestMenuBatchRender(batchUpdateUrl, csrfToken, repositoryIds)\n  if (renderedMenuContents.size > 0) {\n    replaceUserListMenuRoots(renderedMenuContents, rootsByRepositoryId)\n  }\n}\n\nfunction requestUserListMenuFormSubmit(form: HTMLFormElement) {\n  const promise = new Promise<void>((resolve, reject) => {\n    form.addEventListener('user-list-menu-form:success', () => resolve())\n    form.addEventListener('user-list-menu-form:error', error => reject(error))\n  })\n  requestSubmit(form)\n  return promise\n}\n\nfunction submitUserListFormOnToggle(event: Event) {\n  const detailsElement = event.target\n  if (!(detailsElement instanceof HTMLDetailsElement)) return\n  if (detailsElement.hasAttribute('open')) return\n\n  const form = detailsElement.querySelector<HTMLFormElement>('.js-user-list-menu-form')\n  if (form && hasDirtyFields(form)) requestSubmit(form)\n\n  const triggerText = detailsElement.querySelector('.js-user-list-create-trigger-text')\n  if (triggerText) triggerText.textContent = ''\n}\n\non('toggle', '.js-user-list-menu', submitUserListFormOnToggle, {capture: true})\n\nonInput('.js-user-lists-menu-filter', (event: Event) => {\n  const target = event.currentTarget as HTMLInputElement\n  const value = target.value.trim()\n  const root = target.closest('.js-user-list-menu-content-root')\n  const triggerText = root?.querySelector('.js-user-list-create-trigger-text')\n\n  if (!triggerText) return\n  triggerText.textContent = value ? `\"${value}\"` : ''\n})\n\nremoteForm('.js-user-list-menu-form', async function (form, wants) {\n  let response: SimpleResponse\n  try {\n    response = await wants.json()\n  } catch (error) {\n    showGlobalError()\n    fire(form, 'user-list-menu-form:error', error)\n    return\n  }\n\n  // Update the star button state and counts if necessary.\n  // We only update the star count if the repo was just starred. Otherwise the count could jump every time you dismiss\n  // the menu, which would be jarring.\n  if (response.json.didStar) {\n    const togglerContainer = form.closest<HTMLElement>('.js-toggler-container')\n    if (togglerContainer) togglerContainer.classList.add('on')\n\n    const starCount = response.json.starCount\n    if (starCount) {\n      const socialContainer = form.closest<HTMLElement>('.js-social-container')\n      if (socialContainer) updateSocialCounts(socialContainer, starCount)\n    }\n  }\n\n  const menuContentRoot = form.closest<HTMLElement>('.js-user-list-menu-content-root[data-update-after-submit]')\n  if (menuContentRoot) {\n    // Reset checkbox state before potentially calling updateContent() to avoid the checkboxes being detected as \"dirty\"\n    // and terminating the update. They'll be checked in the updated content, assuming the repo was in fact added\n    // successfully.\n    for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-menu-item')) {\n      input.checked = input.defaultChecked\n    }\n  }\n\n  if (response.json.didCreate) {\n    // There's a new UserList to include in the menus now. Let's batch-update them all.\n    await updateAllUserListMenus()\n  } else if (menuContentRoot) {\n    // Otherwise, only update our local menu.\n    await updateContent(menuContentRoot)\n  }\n\n  fire(form, 'user-list-menu-form:success')\n})\n\n// Delete dialog\n\non('click', '.js-user-list-delete-confirmation-trigger', event => {\n  const {currentTarget} = event\n  const templateID = currentTarget.getAttribute('data-template-id')\n  if (!templateID) return\n\n  const template = document.getElementById(templateID)\n  if (!template || !(template instanceof HTMLTemplateElement)) return\n\n  const editDialog = currentTarget.closest<HTMLDetailsElement>('.js-edit-user-list-dialog')\n  if (editDialog) {\n    editDialog.open = false\n  }\n  const content = template.content.cloneNode(true)\n  const labelledBy = template.getAttribute('data-labelledby')!\n\n  dialog({content, labelledBy})\n})\n\n// Create dialog\n\non('click', '.js-user-lists-create-trigger', async function (event) {\n  const {currentTarget} = event\n  const template = document.querySelector<HTMLTemplateElement>('.js-user-list-create-dialog-template')\n  const repositoryId = event.currentTarget.getAttribute('data-repository-id')\n  const userListMenuRoot = currentTarget.closest<HTMLElement>('.js-user-list-menu-content-root')\n  const filter = userListMenuRoot?.querySelector<HTMLInputElement>('.js-user-lists-menu-filter')\n  const placeholderName = filter?.value.trim()\n\n  if (!template || !(template instanceof HTMLTemplateElement) || !repositoryId) {\n    // No template rendered on the page, or malformed button markup.\n    // Disable the button as something marginally better than silently doing nothing.\n    if (currentTarget instanceof HTMLButtonElement) {\n      currentTarget.disabled = true\n    }\n    return\n  }\n\n  const label = template.getAttribute('data-label')!\n\n  // Submit the form first if there are any dirty fields.\n  if (userListMenuRoot && hasDirtyFields(userListMenuRoot)) {\n    const userListMenuForm = userListMenuRoot.querySelector<HTMLFormElement>('.js-user-list-menu-form')\n    if (userListMenuForm) await requestUserListMenuFormSubmit(userListMenuForm)\n  }\n\n  const content = new TemplateInstance(template, {repositoryId, placeholderName})\n  const dialogElement = await dialog({content, label})\n\n  dialogElement.addEventListener('user-list-form:success', async formEvent => {\n    const payload = (formEvent as CustomEvent).detail\n    if (!(payload instanceof DocumentFragment)) return\n\n    // Update the star button.\n    const urlTargetElement = payload.querySelector('.js-target-url')\n\n    const didStar = urlTargetElement?.getAttribute('data-did-star') === 'true'\n    if (!didStar) return\n\n    const togglerContainer = currentTarget.closest<HTMLElement>('.js-toggler-container')\n    if (togglerContainer) togglerContainer.classList.add('on')\n\n    const starCount = urlTargetElement?.getAttribute('data-star-count')\n    if (starCount) {\n      const socialContainer = currentTarget.closest<HTMLElement>('.js-social-container')\n      if (socialContainer) updateSocialCounts(socialContainer, starCount)\n    }\n\n    // Update all currently loaded user list menu contents to include the created list.\n    await updateAllUserListMenus()\n\n    // Then, dismiss the dialog.\n    const detailsElement = dialogElement.closest<HTMLDetailsElement>('details')\n    if (detailsElement) detailsElement.open = false\n  })\n})\n","import {hasDirtyFields} from '../has-interactions'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Add the 'data-warn-unsaved-changes' attribute to any form/container element\n// and it will be monitored for changes. If the user attempts to\n// navigate away from the page without first saving their changes, an alert\n// will warn them.\nobserve('[data-warn-unsaved-changes]', {\n  add(container) {\n    container.addEventListener('input', prepareUnsavedChangesWarning)\n    container.addEventListener('change', prepareUnsavedChangesWarning)\n    container.addEventListener('submit', disableSaveChangesReminder)\n\n    const dialog = container.closest('details-dialog')\n    if (dialog) {\n      dialog.closest<HTMLElement>('details')!.addEventListener('toggle', disableSaveChangesReminderOnClosedDialogs)\n      dialog.addEventListener('details-dialog-close', promptOnDialogClosing)\n    }\n  },\n  remove(container) {\n    container.removeEventListener('input', prepareUnsavedChangesWarning)\n    container.removeEventListener('change', prepareUnsavedChangesWarning)\n    container.removeEventListener('submit', disableSaveChangesReminder)\n\n    const dialog = container.closest('details-dialog')\n    if (dialog) {\n      dialog.closest<HTMLElement>('details')!.removeEventListener('toggle', disableSaveChangesReminderOnClosedDialogs)\n      dialog.removeEventListener('details-dialog-close', promptOnDialogClosing)\n      disableSaveChangesReminder()\n    }\n  },\n})\n\nfunction prepareUnsavedChangesWarning(event: Event) {\n  const currentTarget = event.currentTarget as Element\n\n  if (hasDirtyFields(currentTarget)) {\n    enableSaveChangesReminder(currentTarget)\n  } else {\n    disableSaveChangesReminder()\n  }\n}\n\nfunction enableSaveChangesReminder(container: Element) {\n  // This message is ignored by most browsers.\n  // eslint-disable-next-line i18n-text/no-en\n  const message = container.getAttribute('data-warn-unsaved-changes') || 'Changes you made may not be saved.'\n\n  window.onbeforeunload = function (event: BeforeUnloadEvent): string {\n    event.returnValue = message\n    return message\n  }\n}\n\nfunction disableSaveChangesReminder() {\n  window.onbeforeunload = null\n}\n\nfunction disableSaveChangesReminderOnClosedDialogs({currentTarget}: Event) {\n  if (!(currentTarget as Element).hasAttribute('open')) {\n    disableSaveChangesReminder()\n  }\n}\n\nfunction promptOnDialogClosing(event: Event) {\n  const dialog = event.currentTarget as Element\n  const details = dialog.closest('details[open]')\n  if (!details) {\n    return\n  }\n\n  let confirmed = true\n  const confirmationForms = dialog.querySelectorAll<HTMLFormElement>('form[data-warn-unsaved-changes]')\n  for (const form of confirmationForms) {\n    if (hasDirtyFields(form)) {\n      const message = form.getAttribute('data-warn-unsaved-changes')!\n      confirmed = confirm(message)\n      break\n    }\n  }\n\n  if (!confirmed) {\n    event.preventDefault()\n  }\n}\n","// Perform CSS transition once\n//\n// Examples\n//\n//   .foo.will-transition-once {\n//     transition: color ...;\n//   }\n//\n//   .foo.is-successful {\n//     background: green;\n//   }\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.will-transition-once', {\n  constructor: HTMLElement,\n  subscribe: el => fromEvent(el, 'transitionend', onTransitionEnd),\n})\n\nfunction onTransitionEnd(event: Event) {\n  const target = event.target as Element\n  target.classList.remove('will-transition-once')\n}\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Load issue/PR/discussion references to display the title for the tooltip from the server on hover.\n// If hovercards are enabled for the referenced type on this part of the DOM,\n// this behavior is bypassed in favor of the hovercard.\nasync function issueLabel(event: Event) {\n  const currentTarget = event.currentTarget as HTMLElement\n  const url = currentTarget.getAttribute('data-url')\n  if (!url || isHovercardEnabled(currentTarget)) {\n    return\n  }\n\n  const id = currentTarget.getAttribute('data-id') || ''\n  const text = currentTarget.textContent\n  const elements = document.querySelectorAll(`.js-issue-link[data-id='${id}']`)\n\n  for (const el of elements) {\n    el.removeAttribute('data-url')\n  }\n\n  try {\n    const titleUrl = `${url}/title`\n    const response = await fetch(titleUrl, {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        Accept: 'application/json',\n      },\n    })\n    if (!response.ok) {\n      const responseError = new Error()\n      const statusText = response.statusText ? ` ${response.statusText}` : ''\n      responseError.message = `HTTP ${response.status}${statusText}`\n      throw responseError\n    }\n    const data = await response.json()\n    setLabel(elements, `${text}, ${data.title}`)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const status = (error.response != null ? error.response.status : undefined) || 500\n\n    const message = (() => {\n      switch (status) {\n        case 404:\n          return currentTarget.getAttribute('data-permission-text')\n        default:\n          return currentTarget.getAttribute('data-error-text')\n      }\n    })()\n\n    setLabel(elements, message || '')\n  }\n}\n\nfunction setLabel(elements: NodeList, text: string) {\n  for (const el of elements) {\n    if (!(el instanceof HTMLElement)) continue\n    el.classList.add('tooltipped', 'tooltipped-ne')\n    el.setAttribute('aria-label', text)\n  }\n}\n\nfunction isHovercardEnabled(element: HTMLElement): boolean {\n  const hovercardType = element.getAttribute('data-hovercard-type')\n  switch (hovercardType) {\n    case 'issue':\n    case 'pull_request':\n      return !!element.closest('[data-issue-and-pr-hovercards-enabled]')\n    case 'discussion':\n      return !!element.closest('[data-discussion-hovercards-enabled]')\n    default:\n      return false\n  }\n}\n\nobserve('.js-issue-link', {\n  subscribe: el => fromEvent(el, 'mouseenter', issueLabel),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {onFocus, onInput, onKey} from '../onfocus'\nimport {resetCharactersRemainingCounts, updateInputRemainingCharacters} from '../behaviors/characters-remaining'\nimport {RGB} from 'color-convert/conversions'\nimport {changeValue} from '@github-ui/form-utils'\nimport convert from 'color-convert'\nimport {debounce} from '@github/mini-throttle'\nimport {dialog} from '../details-dialog'\nimport {fetchSafeDocumentFragment} from '../fetch'\nimport {getUtf8StringLength} from '../text'\nimport {remoteForm} from '@github/remote-form'\nimport {toggleDetailsTarget} from '../behaviors/details'\n\nfunction randomRGBColor(): RGB {\n  return [\n    Math.floor(Math.random() * (255 - 0) + 0),\n    Math.floor(Math.random() * (255 - 0) + 0),\n    Math.floor(Math.random() * (255 - 0) + 0),\n  ]\n}\n\n// Given a button element and a hex color code, this will style the button and\n// the octicon within it based on the given color.\nfunction setColorSwatch(colorButton: HTMLButtonElement, rgb: RGB) {\n  const hsl = convert.rgb.hsl(rgb)\n  colorButton.style.setProperty('--label-r', rgb[0].toString())\n  colorButton.style.setProperty('--label-g', rgb[1].toString())\n  colorButton.style.setProperty('--label-b', rgb[2].toString())\n\n  colorButton.style.setProperty('--label-h', hsl[0].toString())\n  colorButton.style.setProperty('--label-s', hsl[1].toString())\n  colorButton.style.setProperty('--label-l', hsl[2].toString())\n}\n\n// Fill the color input field in the 'new label' modal when a button is clicked.\n// Sets the color of the button that acts as the preview of the chosen color.\nfunction setInputColorFromButton(clickedButton: HTMLButtonElement, rgb: RGB) {\n  // eslint-disable-next-line github/no-blur\n  clickedButton.blur()\n\n  const container = clickedButton.closest<HTMLElement>('form')!\n\n  const colorInput = container.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  changeValue(colorInput, `#${convert.rgb.hex(rgb)}`)\n\n  const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(colorButton, rgb)\n}\n\nfunction addErrorToField(errorEl: HTMLElement, errorMessage: string) {\n  const container = errorEl.closest<HTMLElement>('.js-label-error-container')!\n  container.classList.add('errored')\n  errorEl.textContent = errorMessage\n  errorEl.hidden = false\n}\n\nfunction removeErrorFromField(errorEl: HTMLElement) {\n  const container = errorEl.closest<HTMLElement>('.js-label-error-container')!\n  container.classList.remove('errored')\n  errorEl.hidden = true\n}\n\nfunction showOrHideLabelError(errorSelector: string, form: HTMLFormElement, errorMessages?: string[] | null) {\n  const errorEl = form.querySelector<HTMLElement>(errorSelector)\n  if (!errorEl) {\n    return\n  }\n\n  if (errorMessages) {\n    addErrorToField(errorEl, errorMessages[0]!)\n  } else {\n    removeErrorFromField(errorEl)\n  }\n}\n\ninterface labelError {\n  name?: string[]\n  description?: string[]\n  color?: string[]\n}\n\nfunction showLabelErrors(form: HTMLFormElement, json: labelError) {\n  showOrHideLabelError('.js-label-name-error', form, json.name)\n  showOrHideLabelError('.js-label-description-error', form, json.description)\n  showOrHideLabelError('.js-label-color-error', form, json.color)\n}\n\nfunction hideLabelErrors(form: HTMLFormElement) {\n  showOrHideLabelError('.js-label-name-error', form, null)\n  showOrHideLabelError('.js-label-description-error', form, null)\n  showOrHideLabelError('.js-label-color-error', form, null)\n}\n\nfunction labelPreviewUrl(\n  baseUrl: string,\n  name: string,\n  color: string,\n  description: string | null,\n  labelID: string | null,\n): string {\n  const url = new URL(`${baseUrl}${encodeURIComponent(name)}`, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  params.append('color', color)\n  if (description) {\n    params.append('description', description)\n  }\n  if (labelID) {\n    params.append('id', labelID)\n  }\n  url.search = params.toString()\n  return url.toString()\n}\n\nfunction labelDescriptionFrom(form: HTMLFormElement): string | null {\n  let description = null\n  const descriptionInput = form.querySelector('.js-new-label-description-input')\n  if (descriptionInput instanceof HTMLInputElement && descriptionInput.value.trim().length > 0) {\n    description = descriptionInput.value.trim()\n  }\n  return description\n}\n\nfunction labelColorFrom(form: HTMLFormElement): string {\n  const colorInput = form.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  if (colorInput.checkValidity()) {\n    return colorInput.value.trim().replace(/^#/, '')\n  }\n  return 'ededed'\n}\n\nfunction labelNameFrom(form: HTMLFormElement, previewArea: HTMLElement): string {\n  const nameInput = form.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  let name = nameInput.value.trim()\n  if (name.length < 1) {\n    name = previewArea.getAttribute('data-default-name')!\n  }\n  return name\n}\n\nasync function updateLabelPreview(startEl: HTMLElement) {\n  const previewContainer = startEl.closest('.js-label-preview-container')\n  if (!previewContainer) {\n    return\n  }\n\n  const form = startEl.closest<HTMLFormElement>('.js-label-form')!\n  const fullErrorMessageEl = form.querySelector<HTMLElement>('.js-new-label-error')\n  const labelID = form.getAttribute('data-label-id')\n  const previewArea = previewContainer.querySelector<HTMLElement>('.js-label-preview')!\n  const name = labelNameFrom(form, previewArea)\n\n  // Default case of \"Label preview\" is also counted as 'invalid' but we still want to update the preview.\n  if (!form.checkValidity() && name !== 'Label preview') {\n    return\n  }\n\n  const color = labelColorFrom(form)\n  const description = labelDescriptionFrom(form)\n\n  const urlTemplate = previewArea.getAttribute('data-url-template')!\n  const url = labelPreviewUrl(urlTemplate, name, color, description, labelID)\n\n  if (previewContainer.hasAttribute('data-last-preview-url')) {\n    const lastPreviewUrl = previewContainer.getAttribute('data-last-preview-url')!\n    if (url === lastPreviewUrl) {\n      return\n    }\n  }\n\n  let fragment\n  try {\n    fragment = await fetchSafeDocumentFragment(document, url)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = await error.response.json()\n    showLabelErrors(form, json)\n\n    if (fullErrorMessageEl) {\n      fullErrorMessageEl.textContent = json.message\n      fullErrorMessageEl.hidden = false\n    }\n\n    return\n  }\n\n  if (fullErrorMessageEl) {\n    fullErrorMessageEl.textContent = ''\n    fullErrorMessageEl.hidden = true\n  }\n\n  hideLabelErrors(form)\n\n  previewArea.textContent = ''\n  previewArea.appendChild(fragment)\n  previewContainer.setAttribute('data-last-preview-url', url)\n}\n\nfunction onLabelFormInputChange(event: Event) {\n  updateLabelPreview(event.target as HTMLInputElement)\n}\n\nfunction toggleBlankSlate(el: Element, show: boolean) {\n  const detailsContainer = el.closest<HTMLElement>('.js-details-container')!\n  detailsContainer.classList.toggle('is-empty', show)\n}\n\nfunction updateCount(delta: number) {\n  const counter = document.querySelector<HTMLElement>('.js-labels-count')!\n  const oldCount = Number(counter.textContent!)\n  const newCount = oldCount + delta\n  counter.textContent = newCount.toString()\n\n  const label = document.querySelector<HTMLElement>('.js-labels-label')!\n  label.textContent = label.getAttribute(newCount === 1 ? 'data-singular-string' : 'data-plural-string')\n  return newCount\n}\n\n// Update the preview text of the new label based on what the user types in the\n// label filter input.\nonInput('.js-label-filter-field', function (event) {\n  const filterInput = event.target as HTMLInputElement\n  const container = filterInput.closest<HTMLElement>('details-menu')!\n  const labelNameEl = container.querySelector('.js-new-label-name')\n  if (!labelNameEl) {\n    return\n  }\n  const labelName = filterInput.value.trim()\n  labelNameEl.textContent = labelName\n})\n\n// As the user filters existing labels, make sure the 'Add new label' and 'Edit labels'\n// links are visible as appropriate.\non('filterable:change', '.js-filterable-issue-labels', function (event) {\n  const menu = event.currentTarget.closest<HTMLElement>('details-menu')!\n  const addLabelButton = menu.querySelector<HTMLElement>('.js-add-label-button')\n  if (!addLabelButton) return\n\n  const filterInput = event.detail.inputField\n  const newLabelName = filterInput.value.trim().toLowerCase()\n\n  // TODO This could use namedItems.\n  let matchingExistingLabel = false\n  for (const input of menu.querySelectorAll('input[data-label-name]')) {\n    const labelName = input.getAttribute('data-label-name') || ''\n    if (labelName.toLowerCase() === newLabelName) {\n      matchingExistingLabel = true\n      break\n    }\n  }\n\n  addLabelButton.hidden = newLabelName.length === 0 || matchingExistingLabel\n})\n\n// Show the color swatches when the user focuses the color input field.\nonFocus('.js-new-label-color-input', function (input) {\n  const container = input.closest<HTMLElement>('form')!\n  const swatchesContainer = container.querySelector<HTMLElement>('.js-new-label-swatches')!\n  swatchesContainer.hidden = false\n\n  input.addEventListener(\n    'blur',\n    function () {\n      swatchesContainer.hidden = true\n    },\n    {once: true},\n  )\n})\n\n// Update the color swatch as the user types new hex color codes manually into\n// the input.\nonInput('.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  let color = input.value.trim()\n  if (color.length < 1) {\n    return\n  }\n\n  if (color.indexOf('#') !== 0) {\n    color = `#${color}`\n    input.value = color\n  }\n\n  if (input.checkValidity()) {\n    input.classList.remove('color-fg-danger')\n    const container = input.closest<HTMLElement>('form')!\n    const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n    setColorSwatch(colorButton, convert.hex.rgb(color))\n  } else {\n    input.classList.add('color-fg-danger')\n  }\n})\n\n// Disable save button as the user types if they enter an invalid hex color code.\nonKey('keyup', '.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  let color = input.value.trim()\n\n  if (color.indexOf('#') !== 0) {\n    color = `#${color}`\n    input.value = color\n  }\n\n  if (input.checkValidity()) {\n    const container = input.closest<HTMLElement>('form')!\n    const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n    setColorSwatch(colorButton, convert.hex.rgb(color))\n  }\n  fire(input, 'change', false)\n\n  const form = input.closest<HTMLFormElement>('form')!\n  hideLabelErrors(form)\n})\n\nonKey('keyup', '.js-new-label-description-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const form = input.form!\n  hideLabelErrors(form)\n})\n\nonKey('keyup', '.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const form = input.form!\n  hideLabelErrors(form)\n})\n\n// Get a random color for the new label when the user hits the button that acts as\n// a preview of the selected color.\non('click', '.js-new-label-color', async function (event) {\n  const colorButton = event.currentTarget as HTMLButtonElement\n  const rgb = randomRGBColor()\n  setInputColorFromButton(colorButton, rgb)\n  updateLabelPreview(colorButton)\n})\n\n// Choose one of the predefined colors when it's clicked.\non('mousedown', '.js-new-label-color-swatch', function (event) {\n  const swatchButton = event.currentTarget as HTMLButtonElement\n  const color = swatchButton.getAttribute('data-color')!\n  setInputColorFromButton(swatchButton, convert.hex.rgb(color))\n  updateLabelPreview(swatchButton)\n\n  const swatchesContainer = swatchButton.closest<HTMLElement>('.js-new-label-swatches')!\n  swatchesContainer.hidden = true\n})\n\non(\n  'toggle',\n  '.js-new-label-modal',\n  function (event) {\n    if ((event.target as Element).hasAttribute('open')) {\n      initLabelModal(event.target as Element)\n    }\n  },\n  {capture: true},\n)\n\n// When the new label form is displayed in the modal, set the label and its color\n// in the form fields. Also update the color of the color swatch.\nasync function initLabelModal(modal: Element) {\n  const labelNameInput = modal.querySelector<HTMLInputElement>('.js-new-label-name-input')\n  if (!labelNameInput) return\n\n  const colorInput = modal.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  const rgb = randomRGBColor()\n  const hex = `#${convert.rgb.hex(rgb)}`\n  colorInput.value = hex\n  const colorButton = modal.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(colorButton, rgb)\n\n  const labelNameEl = document.querySelector<HTMLElement>('.js-new-label-name')!\n  const labelName = labelNameEl.textContent!\n  changeValue(labelNameInput, labelName)\n  updateInputRemainingCharacters(labelNameInput)\n\n  updateLabelPreview(colorButton)\n}\n\n// When the user creates a new label, close the modal containing the 'new label'\n// form. Also update the list of available labels to choose from, so the user\n// can immediately apply their new label.\nremoteForm('.js-new-label-modal-form', async function (form, wants) {\n  const errorEl = form.querySelector<HTMLElement>('.js-new-label-error')!\n\n  let response\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    errorEl.textContent = json.message\n    errorEl.hidden = false\n  }\n\n  if (!response) {\n    return\n  }\n\n  errorEl.hidden = true // Hide error message for the form\n\n  // close modal containing the label form\n  document.querySelector<HTMLElement>('.js-new-label-modal')!.removeAttribute('open')\n\n  const menuContent = document.querySelector<HTMLElement>('.js-issue-labels-menu-content')!\n  const list = menuContent.querySelector<HTMLElement>('.js-filterable-issue-labels')!\n  const input = response.html.querySelector('input')\n  list.prepend(response.html)\n\n  // indicate to the filter-sort-list module that the list content has changed\n  list.classList.add('filter-sort-list-refresh')\n\n  // A selected menu item is inserted programmatically so we need to trigger a\n  // change event, which when trigger a details-menu-selected event.\n  if (input) input.dispatchEvent(new Event('change', {bubbles: true}))\n\n  const field = menuContent.querySelector<HTMLInputElement>('.js-label-filter-field')!\n  field.value = field.defaultValue\n  field.focus()\n})\n\n// New and Edit remote form\n// Click \"Cancel\" leaves \"edit mode\"\non('click', '.js-edit-label-cancel', function (event) {\n  const form = (event.target as Element).closest<HTMLFormElement>('form')!\n  hideLabelErrors(form)\n  form.reset()\n\n  // Grab the color we just resetted to and set the background color of the\n  // refresh button to that color since resetting the form doesn't do that for us\n  const colorInput = form.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  const color = colorInput.value\n  const refreshButton = form.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(refreshButton, convert.hex.rgb(color))\n\n  resetCharactersRemainingCounts(form)\n  updateLabelPreview(colorInput)\n\n  // If editing an existing label, hide the form on Cancel:\n  const item = event.currentTarget.closest('.js-labels-list-item')\n  if (item) {\n    const editForm = item.querySelector<HTMLElement>('.js-update-label')!\n    /* eslint-disable-next-line github/no-d-none */\n    editForm.classList.add('d-none')\n\n    const labelPreview = item.querySelector('.js-label-preview')\n    if (labelPreview) {\n      /* eslint-disable-next-line github/no-d-none */\n      labelPreview.classList.add('d-none')\n\n      const labelLink = item.querySelector<HTMLElement>('.js-label-link')!\n      /* eslint-disable-next-line github/no-d-none */\n      labelLink.classList.remove('d-none')\n    }\n\n    const elementsToShow = item.querySelectorAll<HTMLElement>('.js-hide-on-label-edit')\n    for (const el of elementsToShow) {\n      el.hidden = !el.hidden\n    }\n  }\n})\n\n// Replace item row with contents from server on Edit\nremoteForm('.js-update-label', async function (form, wants) {\n  let response\n\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    showLabelErrors(form, json)\n    return\n  }\n\n  hideLabelErrors(form)\n\n  const item = form.closest<HTMLElement>('.js-labels-list-item')!\n  item.replaceWith(response.html)\n})\n\n// Add new label to list and clear out the form\nremoteForm('.js-create-label', async function (form, wants) {\n  let response\n\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    showLabelErrors(form, json)\n    return\n  }\n\n  form.reset()\n  hideLabelErrors(form)\n\n  document.querySelector<HTMLElement>('.js-label-list')!.prepend(response.html)\n\n  updateCount(+1)\n\n  toggleBlankSlate(form, false)\n\n  const colorButton = form.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  const rgb = randomRGBColor()\n  setInputColorFromButton(colorButton, rgb)\n  updateLabelPreview(form.querySelector<HTMLInputElement>('.js-new-label-name-input')!)\n\n  resetCharactersRemainingCounts(form)\n\n  const detailsContainer = form.closest('.js-details-container')\n  if (detailsContainer instanceof HTMLElement) {\n    toggleDetailsTarget(detailsContainer)\n  }\n})\n\n// Click 'New label' button\non('click', '.js-details-target-new-label', function () {\n  const createForm = document.querySelector<HTMLElement>('.js-create-label')!\n  const nameInput = createForm.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  nameInput.focus()\n})\n\n// Click \"Edit\" enters \"edit mode\"\non('click', '.js-edit-label', function (event) {\n  const item = event.currentTarget.closest<HTMLElement>('.js-labels-list-item')!\n  const editForm = item.querySelector<HTMLElement>('.js-update-label')!\n  /* eslint-disable-next-line github/no-d-none */\n  editForm.classList.remove('d-none')\n  const nameInput = editForm.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  nameInput.focus()\n\n  const labelPreview = item.querySelector('.js-label-preview')\n  if (labelPreview) {\n    /* eslint-disable-next-line github/no-d-none */\n    labelPreview.classList.remove('d-none')\n\n    const labelLink = item.querySelector<HTMLElement>('.js-label-link')!\n    /* eslint-disable-next-line github/no-d-none */\n    labelLink.classList.add('d-none')\n  }\n\n  const elementsToHide = item.querySelectorAll<HTMLElement>('.js-hide-on-label-edit')\n  for (const el of elementsToHide) {\n    el.hidden = !el.hidden\n  }\n})\n\n// Delete remote form\nremoteForm('.js-delete-label', async function (form, wants) {\n  const row = form.closest<HTMLElement>('.js-labels-list-item')!\n  row.querySelector<HTMLElement>('.js-label-delete-spinner')!.hidden = false\n  await wants.text()\n  const newCount = updateCount(-1)\n  toggleBlankSlate(form, newCount === 0)\n  row.remove()\n})\n\nconst delayedOnLabelFormInputChange = debounce(onLabelFormInputChange, 500)\n\n// Handle the user typing in label fields:\non('suggester:complete', '.js-new-label-name-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-name-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-description-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-color-input', delayedOnLabelFormInputChange)\n\n// Limit length of label names in the way Rails does with model validations; allows emoji:\nonKey('keypress', '.js-new-label-name-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const limit = parseInt(input.getAttribute('data-maxlength')!)\n\n  if (getUtf8StringLength(input.value) >= limit) {\n    event.preventDefault()\n  }\n})\n\n// Exclude labels on the issues page label filter\non('click', '.js-issues-label-select-menu-item', function (event) {\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  if (!event.altKey && !event.shiftKey) return\n\n  event.preventDefault()\n  event.stopPropagation()\n\n  if (event.altKey) {\n    window.location.href = event.currentTarget.getAttribute('data-excluded-url')!\n  }\n\n  // Users can shift click to add more labels to a group\n  if (event.shiftKey) {\n    window.location.href = event.currentTarget.getAttribute('data-included-url')!\n  }\n  /* eslint-enable no-restricted-syntax */\n})\n\nonKey('keydown', '.js-issues-label-select-menu-item', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  if (event.key !== 'Enter') return\n  if (!event.altKey && !event.shiftKey) return\n\n  const anchor = event.currentTarget\n  event.preventDefault()\n  event.stopPropagation()\n  if (anchor instanceof HTMLAnchorElement) {\n    if (event.altKey) {\n      window.location.href = anchor.getAttribute('data-excluded-url')!\n    }\n\n    if (event.shiftKey) {\n      window.location.href = anchor.getAttribute('data-included-url')!\n    }\n  }\n  /* eslint-enable no-restricted-syntax */\n})\n\non(\n  'click',\n  '.js-open-label-creation-modal',\n  async function (event) {\n    // Prevent menu from closing\n    event.stopImmediatePropagation()\n    const modal = await dialog({\n      content: document.querySelector<HTMLTemplateElement>('.js-label-creation-template')!.content.cloneNode(true),\n      detailsClass: 'js-new-label-modal',\n    })\n    initLabelModal(modal)\n  },\n  {capture: true},\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Show/hide event settings when the user's overall thread subscription option changes.\non('change', '.js-thread-notification-setting', toggleEventSettings)\n\n// Validate event settings when the user's event selection changes.\non('change', '.js-custom-thread-notification-option', toggleEventSettings)\n\n// Show/hide event settings when the user dismisses the form.\non('reset', '.js-custom-thread-settings-form', toggleEventSettings)\n\nfunction toggleEventSettings() {\n  const eventSettingsVisible = document.querySelector<HTMLInputElement>('.js-reveal-custom-thread-settings')!.checked\n  const noEventSelected = !document.querySelector('.js-custom-thread-notification-option:checked')\n\n  const eventSettingsContainer = document.querySelector<HTMLElement>('.js-custom-thread-settings')!\n  const checkbox = document.querySelector<HTMLInputElement>('[data-custom-option-required-text]')!\n  const message =\n    eventSettingsVisible && noEventSelected ? checkbox.getAttribute('data-custom-option-required-text')! : ''\n\n  checkbox.setCustomValidity(message)\n  eventSettingsContainer.hidden = !eventSettingsVisible\n}\n","import {controller, target} from '@github/catalyst'\n\n/**\n * CollapsibleSidebarWidget creates a widget in the sidebar of which\n * content is collapsible and is loaded upon opening.\n *\n * Four classes must be set, they are scoped to the HTML element <collapsible-sidebar-widget>\n *  - .collapsible-sidebar-widget-button (the button toggling open/close state)\n *  - .collapsible-sidebar-widget-content (the inner HTML to load)\n *  - .collapsible-sidebar-widget-loader (the element that is shown while loading)\n *  - .collapsible-sidebar-widget-indicator (the element that indicates open/close)\n *\n * One class is optional\n * - .collapsible-sidebar-widget-active-hidden (hides an element when the content is open)\n *\n * Notice: This is not done in pure CSS, because we need to guard\n * the loading of the content.\n *\n * @example\n * ```html\n * <collapsible-sidebar-widget url=\"/your/url\">\n *  <div>\n *   <button type=\"button\" class=\"collapsible-sidebar-widget-button\" data-action=\"mousedown:collapsible-sidebar-widget#onMouseDown keydown:collapsible-sidebar-widget#onKeyDown\">Open</button>\n *    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"collapsible-sidebar-widget-indicator\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z\"></path></svg>\n *    <svg class=\"collapsible-sidebar-widget-loader anim-rotate\" viewBox=\"0 0 16 16\" fill=\"none\" width=\"16\" height=\"16\" ><circle cx=\"8\" cy=\"8\" r=\"7\" stroke=\"currentColor\" stroke-opacity=\"0.25\" stroke-width=\"2\" vector-effect=\"non-scaling-stroke\"></circle><path d=\"M15 8a7.002 7.002 0 00-7-7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" vector-effect=\"non-scaling-stroke\"></path></svg>\n *    <div class=\"collapsible-sidebar-widget-active-hidden\">Hidden content when active</div>\n *   </button>\n *   <div class=\"collapsible-sidebar-widget-content\" data-target=\"collapsible-sidebar-widget.collapsible\">Lorem Ipsum</div>\n *  </div>\n * </collapsible-sidebar-widget>\n * ```\n */\n@controller\nclass CollapsibleSidebarWidgetElement extends HTMLElement {\n  @target collapsible: HTMLElement\n\n  pendingRequest: AbortController | null\n\n  get activeClass(): string {\n    return this.getAttribute('active-class') || 'collapsible-sidebar-widget-active'\n  }\n\n  get loadingClass(): string {\n    return this.getAttribute('loading-class') || 'collapsible-sidebar-widget-loading'\n  }\n\n  get url(): string {\n    return this.getAttribute('url') || ''\n  }\n\n  get isOpen(): boolean {\n    return this.hasAttribute('open')\n  }\n\n  set isOpen(open: boolean) {\n    open ? this.setAttribute('open', '') : this.removeAttribute('open')\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onKeyDown(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Space') {\n      e.preventDefault()\n\n      return this.load()\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onMouseDown(e: MouseEvent) {\n    e.preventDefault()\n\n    return this.load()\n  }\n\n  load() {\n    if (this.pendingRequest) {\n      return this.pendingRequest.abort()\n    }\n\n    if (!this.collapsible.hasAttribute('loaded')) {\n      this.setLoading()\n\n      return this.updateCollapsible()\n    }\n\n    if (!this.isOpen) {\n      return this.setOpen()\n    }\n\n    return this.setClose()\n  }\n\n  setLoading() {\n    this.classList.add(this.loadingClass)\n    this.classList.remove(this.activeClass)\n  }\n\n  setOpen() {\n    this.classList.add(this.activeClass)\n    this.classList.remove(this.loadingClass)\n    this.isOpen = true\n  }\n\n  setClose() {\n    this.classList.remove(this.activeClass)\n    this.classList.remove(this.loadingClass)\n    this.isOpen = false\n  }\n\n  handleAbort() {\n    this.pendingRequest = null\n    this.setClose()\n  }\n\n  async updateCollapsible() {\n    try {\n      this.pendingRequest = new AbortController()\n      this.pendingRequest.signal.addEventListener('abort', () => this.handleAbort())\n\n      const response = await fetch(this.url, {\n        signal: this.pendingRequest?.signal,\n        headers: {\n          Accept: 'text/html',\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n      })\n      this.pendingRequest = null\n\n      if (!response.ok) {\n        return this.setClose()\n      }\n\n      const content = await response.text()\n      this.collapsible.innerHTML = content\n      this.collapsible.setAttribute('loaded', '')\n\n      this.setOpen()\n    } catch {\n      // The errors are not yet surfaced.\n      this.pendingRequest = null\n      return this.setClose()\n    }\n  }\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\n\n/**\n * A web component that allows inline editing of <input> fields.\n * The fields work without an outer <form>.\n *\n * @type HTMLElement\n * @example\n * ```html\n * <sidebar-memex-input update-url=\"http://localhost\" csrf-token=\"1234567890\" column-id=\"1\">\n *  <input type=\"date name=\"memexProjectColumnValues[][value]\" value=\"\" data-target=\"sidebar-memex-input.read\" data-action=\" blur:sidebar-memex-input#onBlur keydown:sidebar-memex-input#onKeyDown disabled />\n * </sidebar-memex-input>\n * ```\n */\n@controller\nclass SidebarMemexInputElement extends HTMLElement {\n  static attrPrefix = ''\n  @attr updateUrl = ''\n  @attr csrfToken = ''\n  @attr instrumentType = ''\n  @attr columnId = 1\n\n  @targets inputs: NodeListOf<HTMLInputElement>\n  @target read: HTMLInputElement\n  @target write: HTMLElement\n  @targets parameters: NodeListOf<HTMLInputElement>\n\n  get isDisabled(): boolean {\n    return this.read?.hasAttribute('disabled')\n  }\n\n  set hasErrored(value: boolean) {\n    value ? this.setAttribute('errored', '') : this.removeAttribute('errored')\n  }\n\n  set disabled(value: boolean) {\n    value ? this.setAttribute('disabled', '') : this.removeAttribute('disabled')\n  }\n\n  get hasExpanded(): boolean {\n    return this.read.getAttribute('aria-expanded') === 'true'\n  }\n\n  get detailsElement() {\n    return this.querySelector('details') ?? null\n  }\n\n  connectedCallback() {\n    this.disabled = this.read?.disabled ?? true\n\n    // Resetting disabled attribute of the element to true after closing the dropdown, so that\n    // iteration field still has cursor pointer on the pencil on subsequent hoverings (cursor style is dependant on the `disabled` attribute).\n    // As the filter text input is not focused when opening the iteration field dropdown, `onBlur` does not\n    // run when user closes the menu, so that `disabled` is not reset, like for text-based fields.\n    this.detailsElement?.addEventListener('toggle', () => this.handleSelectMenuToggle())\n  }\n\n  disconnectedCallback() {\n    this.detailsElement?.removeEventListener('toggle', () => this.handleSelectMenuToggle())\n  }\n\n  handleSelectMenuToggle() {\n    if (this.detailsElement && !this.detailsElement?.open) {\n      this.disabled = true\n    } else if (this.detailsElement && this.detailsElement?.open) {\n      this.disabled = false\n    }\n  }\n\n  handleDetailsSelect(e: Event) {\n    const custom = e as CustomEvent\n    const details = e.target as HTMLElement\n    const el = custom.detail?.relatedTarget as HTMLElement\n    const opened = details.closest('details')\n    const button = opened?.querySelector('[data-menu-button]')\n    const summary = opened?.querySelector('summary')\n\n    if (el.getAttribute('aria-checked') === 'true') {\n      el.setAttribute('aria-checked', 'false')\n      e.preventDefault()\n\n      for (const input of this.inputs) {\n        if (el.contains(input)) {\n          this.updateCell(input.name, '')\n\n          if (button?.innerHTML) {\n            button.innerHTML = input.placeholder\n          }\n\n          break\n        }\n      }\n\n      opened?.removeAttribute('open')\n      /**\n       * This function modifies the default behavior of the <details-menu> so that clicking on a\n       *  selected item clears an existing value. This causes focus to be lost from the <summary>\n       * which results in this element being replaced upon live update. Manually refocusing the\n       * summary element here prevents this from happening.\n       */\n      summary?.focus()\n    }\n  }\n\n  handleDetailsSelected(e: Event) {\n    const custom = e as CustomEvent\n    const el = custom.detail?.relatedTarget as HTMLElement\n    for (const input of this.inputs) {\n      if (el.contains(input)) {\n        this.updateCell(input.name, input.value)\n        break\n      }\n    }\n  }\n\n  mouseDownFocus(e: Event) {\n    if (!this.isDisabled) {\n      return\n    }\n    this.onFocus(e)\n  }\n\n  keyDownFocus(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Space') {\n      if (this.detailsElement) {\n        this.onSelectMenuOpen()\n      }\n      if (this.read !== document.activeElement) {\n        this.onFocus(e)\n      }\n    }\n  }\n\n  // to handle the clicks on the header (incl. pencil), so that the general mouseDownFocus doesn't interfere with opening the\n  // dropdown summary\n  mouseDownFocusHeader() {\n    if (this.detailsElement) {\n      this.onSelectMenuOpen()\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onChange(e: Event) {\n    const el = e.target as HTMLElement\n    if (el.getAttribute('type') === 'date') {\n      return\n    }\n\n    this.updateCell(this.read?.name, this.read?.value)\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onFocus(e: KeyboardEvent | Event) {\n    e.preventDefault()\n\n    this.disabled = false\n    this.read.disabled = false\n    this.read.focus()\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onSelectMenuOpen() {\n    if (this.detailsElement) {\n      this.detailsElement.open = true\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onBlur(e: Event) {\n    if (this.hasExpanded) {\n      e.preventDefault()\n      return\n    }\n\n    const el = e.target as HTMLElement\n    if (el.getAttribute('type') === 'date') {\n      this.updateCell(this.read?.name, this.read?.value)\n    }\n\n    this.read.disabled = true\n    this.disabled = true\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onKeyDown(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Tab') {\n      e.preventDefault()\n      e.stopPropagation()\n\n      if (this.hasExpanded) {\n        return\n      }\n\n      // eslint-disable-next-line github/no-blur\n      this.read.blur()\n    }\n  }\n\n  async updateCell(name = '', value = '') {\n    const data = new FormData()\n    data.set(name, value)\n    data.set('ui', this.instrumentType)\n\n    for (const input of this.parameters) {\n      data.set(input.name, input.value)\n    }\n\n    try {\n      // this is an opportunistic update\n      if (this.write) {\n        const update = this.read.value\n        const formatted = this.read.type === 'date' && update ? this.format.format(Date.parse(update)) : update\n        this.write.textContent = update ? formatted : this.read.placeholder\n      }\n\n      const response = await fetch(this.updateUrl, {\n        method: 'PUT',\n        body: data,\n        headers: {\n          Accept: 'application/json',\n          'X-Requested-With': 'XMLHttpRequest',\n          'Scoped-CSRF-Token': `${this.csrfToken}`,\n        },\n      })\n\n      if (!response.ok) {\n        throw new Error('connection error')\n      }\n\n      // if there is no target to update,\n      // break here and leave the opportunistic update of the field\n      if (!this.write) {\n        return\n      }\n\n      // this is the reconciliation\n      const content = await response.json()\n      const column = content['memexProjectItem']['memexProjectColumnValues'].find(\n        (e: Record<string, unknown>) => e['memexProjectColumnId'] === Number(this.columnId),\n      )\n\n      const commit = column['value']\n      const formatted = this.parseAndFormatUpdate(commit)\n      this.write.innerHTML = value ? formatted : this.read.placeholder\n    } catch (e) {\n      this.hasErrored = true\n    }\n  }\n\n  parseAndFormatUpdate(commit: {value?: string; html?: string}) {\n    switch (this.read.type) {\n      case 'date': {\n        const update = commit.value ? Date.parse(commit.value) : undefined\n        return update ? this.format.format(update) : ''\n      }\n      case 'number': {\n        return commit.value == null ? '' : commit.value\n      }\n      default: {\n        return commit.html ?? ''\n      }\n    }\n  }\n\n  private format = Intl.DateTimeFormat('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    timeZone: 'UTC',\n  })\n}\n","import '../notifications/configure-thread-subscription-dialog'\nimport './sidebar-widget'\nimport './sidebar-memex-input'\n\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '../parse-html'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nfunction submitForm(form: Element, skipTeamsCheck = false) {\n  if (skipTeamsCheck || !reviewerTeamsCheckRequired(form)) {\n    if (form instanceof HTMLFormElement) {\n      requestSubmit(form)\n    } else {\n      previewSubmit(form)\n    }\n  }\n}\n\nfunction submitOnMenuClose(event: Event) {\n  const currentTarget = event.currentTarget as Element\n  const form = currentTarget.closest('.js-issue-sidebar-form') || currentTarget.querySelector('.js-issue-sidebar-form')\n  submitForm(form!)\n}\n\n// On item selection, submit the form\non(\n  'details-menu-selected',\n  '.js-discussion-sidebar-menu',\n  function (event) {\n    const item = event.detail.relatedTarget\n    const menu = event.currentTarget\n    const form = item.closest('.js-issue-sidebar-form')\n    const multiple = menu.hasAttribute('data-multiple')\n\n    if (item.hasAttribute('data-clear-assignees')) {\n      const selectedInputs = menu.querySelectorAll<HTMLInputElement>('input[name=\"issue[user_assignee_ids][]\"]:checked')\n      for (const el of selectedInputs) {\n        el.disabled = false\n        el.checked = false\n      }\n\n      submitForm(form)\n    } else if (multiple) {\n      menu.closest<HTMLElement>('details')!.addEventListener('toggle', submitOnMenuClose, {once: true})\n    } else {\n      submitForm(form)\n    }\n  },\n  {capture: true},\n)\n\nfunction updateSidebar(container: Element, html: string) {\n  container.replaceWith(parseHTML(document, html))\n}\n\nfunction returnFocusToTrigger(container: HTMLElement, menuTriggerId: string) {\n  const currentSidebarTriggerEl = container.querySelector<HTMLElement>(`[data-menu-trigger=\"${menuTriggerId}\"]`)\n\n  // Returns focus to triggering element after HTML is replaced\n  currentSidebarTriggerEl?.focus()\n}\n\n// TODO Replace with data-replace-remote-form behavior.\nremoteForm('.js-issue-sidebar-form', async function (form, wants) {\n  let error: Error | undefined\n\n  try {\n    const response = await wants.html()\n    // Gets the specific sidebar element (i.e. assignees, labels) before the HTML is replaced inside\n    const currentSidebarItemEl = form.closest<HTMLElement>('.js-discussion-sidebar-item')\n    // Gets the unique ID of the current sidebar element to use to reference the trigger\n    const currentSidebarDetailsId = currentSidebarItemEl?.querySelector<HTMLElement>('.select-menu')?.getAttribute('id')\n    const container = currentSidebarItemEl?.parentElement\n\n    currentSidebarItemEl!.replaceWith(response.html)\n\n    if (container && currentSidebarDetailsId) returnFocusToTrigger(container, currentSidebarDetailsId)\n  } catch (err) {\n    if (err instanceof Error) {\n      error = err\n      throw error\n    }\n  } finally {\n    form.dispatchEvent(new CustomEvent('submit:complete', {bubbles: true, detail: {error}}))\n  }\n})\n\n// Prevent suggested reviewer button on new pull request form from submitting the main form.\non('click', 'div.js-issue-sidebar-form .js-suggested-reviewer', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n\n  const form = button.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'post', {name: button.name, value: button.value})\n  event.preventDefault()\n})\n\n// Prevent \"assign yourself\" button on the issue#new form from submitting the main form.\non('click', 'div.js-issue-sidebar-form .js-issue-assign-self', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n\n  const form = button.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'post', {name: button.name, value: button.value})\n  button.remove()\n  // do not persist in the UI\n  document.querySelector('form#new_issue .js-submit-button-value')?.remove()\n  event.preventDefault()\n})\n\n// Allow \"unassign me\" to submit form with method DELETE\non('click', '.js-issue-unassign-self', function (event) {\n  const form = event.currentTarget.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'delete')\n  event.preventDefault()\n})\n\nfunction getCacheKey(el: Element, pageId: string) {\n  const formName = el.getAttribute('data-cache-name')\n  return `${pageId}:sidebar:${formName}`\n}\n\nfunction cacheValues(form: Element, formData: FormData, cacheKey: string) {\n  const formName = form.getAttribute('data-cache-name')\n  if (!formName) return\n\n  const data: Array<[string, FormDataEntryValue]> = []\n  for (const [key, value] of formData.entries()) {\n    if (key.indexOf(formName) === -1) continue\n    data.push([key, value])\n  }\n\n  const updated = data.filter(datum => datum[1] !== '')\n  if (updated.length > 0) {\n    sessionStorage.setItem(cacheKey, JSON.stringify(updated))\n  } else {\n    sessionStorage.removeItem(cacheKey)\n  }\n}\n\nconst hasFired = new Set<string>()\nfunction clearHasFired() {\n  hasFired.clear()\n}\n\nasync function restoreCachedValues(el: Element, cacheKey: string) {\n  const formName = el.getAttribute('data-cache-name')\n  const cache = sessionStorage.getItem(cacheKey)\n  if (!formName || !cache || hasFired.has(formName)) return\n  hasFired.add(formName)\n  const formData: Array<[string, FormDataEntryValue]> = JSON.parse(cache)\n  const inputs: HTMLInputElement[] = []\n  for (const [key, value] of formData) {\n    // Only cache string values\n    if (Object.prototype.toString.call(value) !== '[object String]') continue\n\n    const newInput = document.createElement('input')\n    newInput.type = 'hidden'\n    // The guard clause above ensures that this is a string, but the TS complier doesn't know that.\n    newInput.value = value as string\n    newInput.name = key\n    el.appendChild(newInput)\n    inputs.push(newInput)\n  }\n  try {\n    await requestPreview(el)\n    for (const input of inputs) {\n      input.remove()\n    }\n  } catch (error) {\n    hasFired.delete(formName)\n  }\n}\n\nlet isSubmitting = false\nfunction cacheValuesOnHide(form: Element, cacheKey: string) {\n  if (isSubmitting) return\n\n  const body = scopedFormData(form)\n  cacheValues(form, body, cacheKey)\n  clearHasFired()\n}\n\nobserve('[data-cacher]', {\n  add(el) {\n    const cacheKey = getCacheKey(el, getPageID())\n    restoreCachedValues(el, cacheKey)\n    window.addEventListener('pagehide', () => cacheValuesOnHide(el, cacheKey))\n    window.addEventListener('turbo:before-visit', () => cacheValuesOnHide(el, cacheKey))\n    window.addEventListener(\n      'submit',\n      event => {\n        if (!event.defaultPrevented) {\n          isSubmitting = true\n          // Defer the write operation to the next tick\n          setTimeout(() => {\n            for (const key of Object.keys(sessionStorage)) {\n              if (key.indexOf(cacheKey) === -1) continue\n              sessionStorage.removeItem(key)\n              clearHasFired()\n            }\n          }, 0)\n        }\n      },\n      {capture: true},\n    )\n  },\n})\n\n// Submit dummy sidebar preview \"form\".\n//\n// form - DIV element tagged with .js-issue-sidebar-form\n// extra - Array of extra form data to pass along\nasync function previewSubmit(form: Element, method = 'post', extra?: {name: string; value: string}) {\n  await requestPreview(form, method, extra)\n  // Gets the specific sidebar element (i.e. assignees, labels) before the HTML is replaced inside\n  const currentSidebarItemEl = form.closest<HTMLElement>('.js-discussion-sidebar-item')\n  // Gets the unique ID of the current sidebar element to use to reference the trigger\n  const currentSidebarDetailsId = currentSidebarItemEl?.querySelector<HTMLElement>('.select-menu')?.getAttribute('id')\n  const container = currentSidebarItemEl?.parentElement\n\n  if (container && currentSidebarDetailsId) returnFocusToTrigger(container, currentSidebarDetailsId)\n}\n\nasync function requestPreview(form: Element, method = 'post', extra?: {name: string; value: string}) {\n  const body = scopedFormData(form)\n  if (extra) {\n    body.append(extra.name, extra.value)\n  }\n\n  const url = form.getAttribute('data-url')!\n  if (!url) return\n\n  const token = form.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  const response = await fetch(url, {\n    method,\n    body: method === 'delete' ? '' : body,\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    return\n  }\n  const html = await response.text()\n  updateSidebar(form.closest<HTMLElement>('.js-discussion-sidebar-item')!, html)\n}\n\n// Returns true (and triggers a reviewer check for \"notification spam\") if the\n// form (or div, in new PRs) contains at least one new review request for a team\nfunction reviewerTeamsCheckRequired(form: Element) {\n  // We only care about reviewers...\n  const url = form.getAttribute('data-reviewers-team-size-check-url')\n  if (!url) return false\n\n  // ...and whether there is at least one newly-selected team\n  const previouslyRequestedTeams = [...document.querySelectorAll<HTMLElement>('.js-reviewer-team')].map(elem =>\n    elem.getAttribute('data-id'),\n  )\n  const formData = form instanceof HTMLFormElement ? new FormData(form) : scopedFormData(form)\n  const allSelectedTeams = new URLSearchParams(formData as FormData & Record<string, string>).getAll(\n    'reviewer_team_ids[]',\n  )\n  const newlySelectedTeams = allSelectedTeams.filter(team => !previouslyRequestedTeams.includes(team))\n  if (newlySelectedTeams.length === 0) return false\n\n  const params = new URLSearchParams(newlySelectedTeams.map(s => ['reviewer_team_ids[]', s]))\n  triggerTeamReviewerCheck(form, `${url}?${params}`)\n  return true\n}\n\n// Asks the server if any of the newly-selected teams is too large;\n// show the dialog if so, move on and request reviews otherwise.\nasync function triggerTeamReviewerCheck(form: Element, reviewerCheckUrl: string) {\n  const response = await fetch(reviewerCheckUrl)\n  if (!response.ok) {\n    return\n  }\n\n  const dialogHtml = await response.text()\n  if (dialogHtml.match(/[^\\w-]js-large-team[^\\w-]/)) {\n    showTeamReviewerConfirmationDialog(form, dialogHtml)\n  } else {\n    submitForm(form, true)\n    return\n  }\n}\n\n// Shows dialog that requests confirmation for review requests to large teams\nfunction showTeamReviewerConfirmationDialog(form: Element, dialogHtml: string) {\n  // Add dialog to DOM\n  const container = form.querySelector<HTMLElement>('.js-large-teams-check-warning-container')!\n  while (container.firstChild) {\n    container.removeChild(container.firstChild)\n  }\n  container.appendChild(parseHTML(document, dialogHtml))\n\n  // Wire dialog actions and open it\n  const dialog = container.querySelector<HTMLDetailsElement>('details')!\n  function dialogAction(event: Event) {\n    if (!(event.target instanceof Element)) return\n    dialog.open = false\n    // Unless the user explicitly confirms, un-select the large teams before submitting\n    if (!event.target.classList.contains('js-large-teams-confirm-button')) {\n      const reviewerInputs = form.querySelectorAll<HTMLInputElement>(\"input[name='reviewer_team_ids[]']\")\n      for (const reviewerInput of reviewerInputs) {\n        if (container.querySelector(`.js-large-team[data-id='${reviewerInput.value}']`)) {\n          reviewerInput.checked = false\n        }\n      }\n    }\n    submitForm(form, true)\n    event.preventDefault()\n  }\n  container\n    .querySelector<HTMLElement>('.js-large-teams-confirm-button')!\n    .addEventListener('click', dialogAction, {once: true})\n  container\n    .querySelector<HTMLElement>('.js-large-teams-cancel-button')!\n    .addEventListener('click', dialogAction, {once: true})\n  dialog.addEventListener('details-dialog-close', dialogAction, {once: true})\n  dialog.open = true\n}\n\non('click', 'div.js-project-column-menu-container .js-project-column-menu-item button', async function (event) {\n  const currentTarget = event.currentTarget\n  updateProjectColumnMenuSummary(currentTarget)\n  const moveUrl = currentTarget.getAttribute('data-url')!\n  const token = currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n  const cardId = currentTarget.getAttribute('data-card-id')!\n  const form = new FormData()\n\n  form.append('card_id', cardId)\n  form.append('use_automation_prioritization', 'true')\n\n  event.preventDefault()\n  const response = await fetch(moveUrl, {\n    method: 'PUT',\n    mode: 'same-origin',\n    body: form,\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    return\n  }\n  // blur any active elements if they are contained within the detail\n  // to allow update-content to reload the dropdown\n  const activeElement = document.activeElement as HTMLElement\n  const container = currentTarget.closest<HTMLElement>('.js-project-column-menu-dropdown')!\n  if (activeElement && container.contains(activeElement)) {\n    try {\n      // eslint-disable-next-line github/no-blur\n      activeElement.blur()\n    } catch (e) {\n      // ignore\n    }\n  }\n})\n\nfunction updateProjectColumnMenuSummary(element: Element) {\n  const dropdown = element.closest<HTMLElement>('.js-project-column-menu-dropdown')!\n  const summary = dropdown.querySelector<HTMLElement>('.js-project-column-menu-summary')!\n  const columnName = element.getAttribute('data-column-name')!\n\n  summary.textContent = columnName\n}\n\non('click', '.js-prompt-dismiss', function (event) {\n  event.currentTarget.closest<HTMLElement>('.js-prompt')!.remove()\n})\n\n// Similar to serializeArray, but maybe scoped to a non-form.\n//\n// container - Element contained by a form to serialize the child fields for\nfunction scopedFormData(container: Element): FormData {\n  const form = container.closest<HTMLFormElement>('form')!\n  if (!form) return new FormData()\n  const formData = new FormData(form)\n  const params = formData.entries()\n  const results = new FormData()\n  for (const [name, value] of params) {\n    if (form.contains(findParam(form, name, value.toString()))) {\n      results.append(name, value)\n    }\n  }\n  return results\n}\n\nfunction findParam(form: HTMLFormElement, name: string, value: string): Element | null {\n  for (const el of form.elements) {\n    if (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement || el instanceof HTMLButtonElement) {\n      if (el.name === name && el.value === value) {\n        return el\n      }\n    }\n  }\n  return null\n}\n\non('click', '.js-convert-to-draft', function (event) {\n  const convertToDraftUrl = event.currentTarget.getAttribute('data-url')!\n  const token = event.currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  fetch(convertToDraftUrl, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n})\n\non('click', 'div.js-restore-item', async function (event) {\n  const unarchiveItemUrl = event.currentTarget.getAttribute('data-url')!\n  const projectItemID = event.currentTarget.getAttribute('data-column')!\n  const token = event.currentTarget.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n  const form = new FormData()\n\n  form.set('memexProjectItemIds[]', projectItemID)\n\n  const result = await fetch(unarchiveItemUrl, {\n    method: 'PUT',\n    mode: 'same-origin',\n    body: form,\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  if (!result.ok) {\n    throw new Error('connection error')\n  }\n\n  submitOnMenuClose(event)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('#clear-project-search-button', button => {\n  button?.setAttribute('type', 'button')\n\n  button?.addEventListener('click', () => {\n    const input = document.getElementById('project-search-input') as HTMLInputElement\n    if (input) {\n      input.value = ''\n      input.focus()\n    }\n  })\n})\n","/*\n * Hi! The modules in this file are loaded on **every** page on github.com.\n * Please only add files here if the code does indeed need to be on every page.\n * If the code is needed on only some pages, please load it more sparingly by\n * following the docs at https://thehub.github.com/epd/engineering/dev-practicals/frontend/erb-pvc-catalyst/client-side-behaviors-with-catalyst/\n * To create a dynamically-loaded Catalyst component for your behavior instead.\n *\n */\n\nimport './github/behaviors/ajax-error'\nimport './github/behaviors/ajax-loading'\nimport './github/behaviors/ajax-pagination'\nimport './github/behaviors/analytics-events'\nimport './github/behaviors/animated-image'\nimport './github/behaviors/autocheck'\nimport './github/behaviors/autocomplete'\nimport './github/behaviors/autosearch-form'\nimport './github/behaviors/autoselect'\nimport './github/behaviors/autosubmit'\nimport './github/behaviors/avatar-reset-text'\nimport './github/behaviors/batch-deferred-content'\nimport './github/behaviors/billing-addons'\nimport './github/behaviors/blob-csv'\nimport './github/repositories/blob-header'\nimport './github/behaviors/branch-protection-integration-select'\nimport './github/behaviors/bulk-actions'\nimport './github/behaviors/bundle-download-stats'\nimport './github/behaviors/button-outline'\nimport './github/behaviors/buttons'\nimport './github/behaviors/characters-remaining'\nimport './github/behaviors/check-all'\nimport './github/behaviors/clear-data-on-logout'\nimport './github/behaviors/clipboard-copy'\nimport './github/behaviors/code-nav'\nimport './github/behaviors/commenting/ajax'\nimport './github/behaviors/commenting/close'\nimport './github/behaviors/commenting/edit'\nimport './github/behaviors/commenting/focus'\nimport './github/behaviors/commenting/markdown'\nimport './github/behaviors/commenting/preview'\nimport './github/behaviors/commenting/reaction-suggestion'\nimport './github/behaviors/commits'\nimport './github/behaviors/confirm'\nimport './github/behaviors/company-name-input'\nimport './github/behaviors/company-owned'\nimport './github/behaviors/details'\nimport './github/behaviors/details-element'\nimport './github/behaviors/details-menu'\nimport './github/behaviors/dialog-helpers'\nimport './github/behaviors/disable-with'\nimport './github/behaviors/document-dropzone'\nimport './github/behaviors/encrypt'\nimport './github/behaviors/favicon'\nimport './github/behaviors/feature-preview-indicator'\nimport './github/behaviors/feature-preview-trigger'\nimport './github/behaviors/file-attachment'\nimport './github/behaviors/filter-input'\nimport './github/behaviors/filterable'\nimport './github/behaviors/fixed-offset-fragment-navigation-observer'\nimport './github/behaviors/flash'\nimport './github/behaviors/flash-observer'\nimport './github/behaviors/focus-delay'\nimport './github/behaviors/form-toggle'\nimport './github/behaviors/fuzzy-list'\nimport './github/behaviors/gfm'\nimport './github/behaviors/hash-change'\nimport './github/behaviors/header'\nimport './github/behaviors/hooks'\nimport './github/behaviors/hotkey-map'\nimport './github/behaviors/hovercards'\nimport './github/behaviors/hpc'\nimport './github/behaviors/html-validation'\nimport './github/behaviors/hydro-analytics-pageview'\nimport './github/behaviors/hydro-analytics-tracking'\nimport './github/behaviors/hydro-click-tracking'\nimport './github/behaviors/immediate-updates'\nimport './github/behaviors/image-metric-tracking'\nimport './github/behaviors/include-fragment'\nimport './github/behaviors/indeterminate'\nimport './github/behaviors/jump-to-loader'\nimport './github/behaviors/keyboard-shortcuts'\nimport './github/behaviors/keyboard-shortcuts-helper'\nimport './github/behaviors/length-limited-input-with-warning'\nimport './github/behaviors/member-search-filter'\nimport './github/behaviors/notice'\nimport './github/behaviors/open-in-github-dev'\nimport './github/behaviors/permalink'\nimport './github/behaviors/permission-menu-form'\nimport './github/behaviors/turbo-timing'\nimport './github/behaviors/print-popup'\nimport './github/behaviors/poll-include-fragment'\nimport './github/behaviors/quick-submit'\nimport './github/behaviors/quote-selection'\nimport './github/behaviors/reactions'\nimport './github/behaviors/remote-form'\nimport './github/behaviors/removed-contents'\nimport './github/behaviors/render-editor'\nimport './github/behaviors/enrichable-markdown-render'\nimport './github/behaviors/replace-remote-form'\nimport './github/behaviors/report-long-tasks'\nimport './github/behaviors/responsive-markdown-toolbar'\nimport './github/behaviors/responsive-underlinenav'\nimport './github/behaviors/saved-replies'\nimport './github/behaviors/scanning'\nimport './github/behaviors/session-resume'\nimport './github/behaviors/side-navigation'\nimport './github/behaviors/site-notifications'\nimport './github/behaviors/site-search'\nimport './github/behaviors/size-to-fit'\nimport './github/behaviors/smooth-scroll-anchor'\nimport './github/behaviors/snippet-clipboard-copy'\nimport './github/behaviors/social'\nimport './github/behaviors/socket-channel'\nimport './github/behaviors/sso-auto-replay'\nimport './github/behaviors/stale-session'\nimport './github/behaviors/statuses'\nimport './github/behaviors/sticky'\nimport './github/behaviors/sudo-required'\nimport './github/behaviors/suggesters/audit-log-suggester'\nimport './github/behaviors/suggesters/emoji-suggester'\nimport './github/behaviors/suggesters/issue-suggester'\nimport './github/behaviors/suggesters/mention-suggester'\nimport './github/behaviors/survey'\nimport './github/behaviors/sync-details-text'\nimport './github/behaviors/tab-container'\nimport './github/behaviors/tag-input'\nimport './github/behaviors/targetable-elements'\nimport './github/behaviors/task-list'\nimport './github/behaviors/team-members'\nimport './github/behaviors/timeline/marker'\nimport './github/behaviors/timeline/progressive'\nimport './github/behaviors/timeline/timeline-accessibility'\nimport './github/behaviors/timing-stats'\nimport './github/behaviors/toggler'\nimport './github/behaviors/register-service-worker'\nimport '@github-ui/turbo'\nimport './github/behaviors/tz-cookie'\nimport './github/behaviors/sudo-credential-options'\nimport './github/behaviors/unread-comments'\nimport './github/behaviors/unread-item-counter'\nimport './github/behaviors/updatable-content-observer'\nimport './github/behaviors/updatable-content-stale-object'\nimport './github/behaviors/upload-avatar'\nimport './github/behaviors/user-content'\nimport './github/behaviors/user-select-contain-polyfill'\nimport './github/behaviors/user-status-loader'\nimport './github/behaviors/user-lists'\nimport './github/behaviors/warn-unsaved-changes'\nimport './github/behaviors/will-transition-once'\nimport './github/issues/issue-link'\nimport './github/issues/labels'\nimport './github/issues/sidebar'\nimport './github/memex/search'\nimport {setup as setupSoftNav, interceptNavigationUI} from '@github-ui/soft-nav'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\nsetupSoftNav()\n\nif (isFeatureEnabled('NAVIGATION_INTERCEPTS')) {\n  interceptNavigationUI()\n}\n","type AutoFlushingQueueEntry<ElementType> = [ElementType, string]\nclass AutoFlushingQueue<ElementType = HTMLElement> {\n  timeout: number\n  limit: number\n  elements: Array<AutoFlushingQueueEntry<ElementType>> = []\n  timer: number | null = null\n  callbacks: Array<(elementsToFlush: Array<AutoFlushingQueueEntry<ElementType>>) => Promise<void>> = []\n  index: number\n\n  constructor(timeout = 50, limit = 30) {\n    this.timeout = timeout // flush timeout in milliseconds\n    this.limit = limit // max number of elements before autoflushing\n    this.index = 0\n  }\n\n  push(element: ElementType): string {\n    const key = `item-${this.index++}`\n\n    if (this.timer) {\n      window.clearTimeout(this.timer)\n      this.timer = null\n    }\n    if (this.elements.length >= this.limit) {\n      this.flush()\n    }\n\n    this.timer = window.setTimeout(() => {\n      this.timer = null\n      this.flush()\n    }, this.timeout)\n\n    this.elements.push([element, key])\n    return key\n  }\n\n  onFlush(callback: (elementsToFlush: Array<AutoFlushingQueueEntry<ElementType>>) => Promise<void>): void {\n    this.callbacks.push(callback)\n  }\n\n  private async flush(): Promise<void> {\n    const elementsToFlush = this.elements.splice(0, this.limit)\n    if (elementsToFlush.length === 0) return\n\n    await Promise.all(this.callbacks.map(callback => callback(elementsToFlush)))\n  }\n}\n\ninterface HTMLElementWithInputs extends HTMLElement {\n  inputs: HTMLInputElement[]\n}\n\nexport class BatchLoader<ResponseType> {\n  autoFlushingQueue: AutoFlushingQueue<HTMLElementWithInputs>\n  url: string\n  callbacks: Map<string, (value: ResponseType) => void>\n  validate: (value: unknown) => asserts value is ResponseType\n\n  constructor(url: string, validator: (value: unknown) => asserts value is ResponseType) {\n    this.url = url\n    this.callbacks = new Map()\n    this.autoFlushingQueue = new AutoFlushingQueue()\n    this.autoFlushingQueue.onFlush(async elements => {\n      this.load(elements)\n    })\n    this.validate = validator\n  }\n\n  loadInBatch(element: HTMLElementWithInputs): Promise<ResponseType> {\n    const key = this.autoFlushingQueue.push(element)\n    return new Promise(resolve => this.callbacks.set(key, resolve))\n  }\n\n  async load(elements: Array<AutoFlushingQueueEntry<HTMLElementWithInputs>>) {\n    const elementsByKey = new Map<string, HTMLElementWithInputs>()\n\n    for (const [batchElement, key] of elements) {\n      elementsByKey.set(key, batchElement)\n    }\n\n    const consolidatedData = new FormData()\n\n    for (const [key, batchElement] of elementsByKey.entries()) {\n      for (const input of batchElement.inputs) {\n        consolidatedData.append(`items[${key}][${input.name}]`, input.value)\n      }\n    }\n\n    if (Array.from(consolidatedData.values()).length === 0) {\n      return\n    }\n\n    consolidatedData.set('_method', 'GET')\n    const response = await fetch(this.url, {\n      method: 'POST',\n      body: consolidatedData,\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n\n    if (response.ok) {\n      const json = await response.json()\n\n      if (!json || typeof json !== 'object' || Array.isArray(json)) {\n        throw new Error('Malformed batch response')\n      }\n\n      for (const key in json) {\n        const callback = this.callbacks.get(key)\n        if (callback) {\n          const value = json[key]\n          this.validate(value)\n          callback(value)\n        }\n      }\n    }\n  }\n}\n","// Batch Deferred Content Behavior\n//\n// Automatically fetches content for multiple placeholders with a single request.\n// Placeholders are represented as <batch-deferred-content>'s so that per-placeholder arguments can be\n// passed along to the backend for rendering. Once the response is received, each placeholder\n// will be replaced with it's relevant content.\n//\n// Batching is handled by an autoflushing queue. Once an upper limit (default 30) of placeholders\n// are found, or new placeholders stop being added to the queue, after a timeout (default 50ms),\n// a single request will be made to fetch the content for those items.\n//\n// Example Markup\n//\n//   <batch-deferred-content data-url=\"/my/batched/content/endpoint\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"repo_id\" value=\"42\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"commit_oid\" value=\"abcdef0\">\n//   </batch-deferred-content>\n//   \n//   <batch-deferred-content data-url=\"/my/batched/content/endpoint\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"repo_id\" value=\"88\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"commit_oid\" value=\"f000001\">\n//   </batch-deferred-content>\n//\n// Example Request\n//\n//   POST /my/batched/content/endpoint\n//   BODY {\n//     items: {\n//       item-0: {repo_id: 42, commit_oid: \"abcdef0\"},\n//       item-1: {repo_id: 88, commit_oid: \"f000001\"},\n//     }\n//   }\n//\n// Example Response\n//\n//   Content-Type: application/json\n//   BODY {\n//     item-0: \"<div>Some markup</div>\",\n//     item-1: \"<div>More markup</div>\",\n//   }\n\nimport {controller, targets} from '@github/catalyst'\nimport {parseHTML} from '../parse-html'\nimport {BatchLoader} from './batch-deferred-content/batch-loader'\n\nexport abstract class BaseBatchDeferredContentElement<ResponseType> extends HTMLElement {\n  inputs: HTMLInputElement[]\n  batchLoaders: Map<string, BatchLoader<ResponseType>>\n\n  abstract update(content: ResponseType): void\n  abstract validate(value: unknown): asserts value is ResponseType\n\n  async connectedCallback() {\n    const content = await this.batchLoader.loadInBatch(this)\n    this.update(content)\n  }\n\n  get batchLoader(): BatchLoader<ResponseType> {\n    const url = this.getAttribute('data-url')\n\n    if (!url) {\n      throw new Error(`${this.tagName} element requires a data-url attribute`)\n    }\n\n    let loader = this.batchLoaders.get(url)\n    if (!loader) {\n      loader = new BatchLoader(url, (value: unknown) => this.validate(value))\n      this.batchLoaders.set(url, loader)\n    }\n    return loader\n  }\n}\n\nconst batchDeferredContentLoaders: Map<string, BatchLoader<string>> = new Map()\n\n@controller\nclass BatchDeferredContentElement extends BaseBatchDeferredContentElement<string> {\n  @targets inputs: HTMLInputElement[]\n\n  batchLoaders = batchDeferredContentLoaders\n\n  validate(value: unknown): asserts value is string {\n    if (typeof value !== 'string') {\n      throw new Error('Batch deferred content was not a string')\n    }\n  }\n\n  update(content: string): void {\n    const docFragment = parseHTML(document, content)\n    this.replaceWith(docFragment)\n  }\n}\n","let lastActiveElement: Element | null\nlet currentInputIsMouse = false\n\nfunction setClass() {\n  lastActiveElement = document.activeElement\n  if (document.body) {\n    document.body.classList.toggle('intent-mouse', currentInputIsMouse)\n  }\n}\n\n// Use mousedown event to make sure outline is remove for holding and dragging\ndocument.addEventListener(\n  'mousedown',\n  function () {\n    currentInputIsMouse = true\n    if (lastActiveElement === document.activeElement) setClass()\n  },\n  {capture: true},\n)\n\ndocument.addEventListener(\n  'keydown',\n  function () {\n    currentInputIsMouse = false\n  },\n  {capture: true},\n)\n\ndocument.addEventListener('focusin', setClass, {capture: true})\n","import {getUtf8StringLength} from '../text'\nimport {onFocus} from '../onfocus'\n\nfunction showRemainingCharacterCount(value: string, limit: number, field: HTMLTextAreaElement | HTMLInputElement) {\n  const container = field.closest('.js-characters-remaining-container')\n  if (!container) {\n    return\n  }\n\n  const remainingEl = container.querySelector<HTMLElement>('.js-characters-remaining')!\n  const suffix = String(remainingEl.getAttribute('data-suffix'))\n  const valueLength = getUtf8StringLength(value)\n  const remainingCount = limit - valueLength\n\n  if (remainingCount <= 20) {\n    remainingEl.textContent = `${remainingCount} ${suffix}`\n    remainingEl.classList.toggle('color-fg-danger', remainingCount <= 5)\n    remainingEl.setAttribute('role', 'status')\n    remainingEl.hidden = false\n  } else {\n    remainingEl.setAttribute('role', 'none')\n    remainingEl.hidden = true\n  }\n}\n\nfunction getFieldLimit(input: HTMLTextAreaElement | HTMLInputElement): number {\n  if (input.hasAttribute('data-maxlength')) {\n    return parseInt(input.getAttribute('data-maxlength') || '')\n  }\n\n  return input.maxLength\n}\n\nexport function hasExceededCharacterLimit(input: HTMLTextAreaElement | HTMLInputElement): boolean {\n  const limit = getFieldLimit(input)\n  const valueLength = getUtf8StringLength(input.value)\n  const remainingCount = limit - valueLength\n\n  return remainingCount < 0\n}\n\nexport function updateInputRemainingCharacters(input: HTMLTextAreaElement | HTMLInputElement) {\n  const limit = getFieldLimit(input)\n  showRemainingCharacterCount(input.value, limit, input)\n}\n\nexport function resetCharactersRemainingCounts(container: Element) {\n  const charContainers = container.querySelectorAll('.js-characters-remaining-container')\n\n  for (const charContainer of charContainers) {\n    const input = charContainer.querySelector<HTMLInputElement>('.js-characters-remaining-field')!\n    updateInputRemainingCharacters(input)\n  }\n}\n\nonFocus('.js-characters-remaining-field', function (input) {\n  function onInput() {\n    if (input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement) {\n      updateInputRemainingCharacters(input)\n    }\n  }\n  onInput()\n\n  input.addEventListener('input', onInput)\n  input.addEventListener(\n    'blur',\n    () => {\n      input.removeEventListener('input', onInput)\n    },\n    {once: true},\n  )\n})\n","// Confirm\n//\n// Prompts native confirm dialog before activating link.\n//\n// data-confirm - Message to pass to confirm().\n//\n//   <button type=\"submit\" data-confirm=\"Are you sure?\">Delete</a>\n\ndocument.addEventListener(\n  'click',\n  function (event) {\n    if (!(event.target instanceof Element)) return\n\n    const selector =\n      'a[data-confirm], input[type=submit][data-confirm], input[type=checkbox][data-confirm], button[data-confirm]'\n\n    const currentTarget = event.target.closest(selector)\n    if (!currentTarget) return\n\n    const message = currentTarget.getAttribute('data-confirm')\n    if (!message) return\n\n    if (\n      currentTarget instanceof HTMLInputElement &&\n      currentTarget.hasAttribute('data-confirm-checked') &&\n      !currentTarget.checked\n    ) {\n      return\n    }\n\n    if (!confirm(message)) {\n      event.stopImmediatePropagation()\n      event.preventDefault()\n    }\n  },\n  true,\n)\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport IncludeFragmentElement from '@github/include-fragment-element'\nimport hashChange from './hash-change'\nimport {loadDeferredContentByEvent} from './include-fragment'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nlet currentlyOpenedDetailsDropdown: HTMLElement | null = null\n\ndocument.addEventListener('keydown', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable no-restricted-syntax */\n  if (!event.defaultPrevented && event.key === 'Escape' && currentlyOpenedDetailsDropdown) {\n    currentlyOpenedDetailsDropdown.removeAttribute('open')\n  }\n  /* eslint-enable no-restricted-syntax */\n})\n\n// Dismiss open <details> when activating <details> with keyboard.\nobserve('.js-dropdown-details', {\n  subscribe: el => {\n    return compose(fromEvent(el, 'toggle', closeCurrentDetailsDropdown), fromEvent(el, 'toggle', autofocus))\n  },\n})\n\nfunction autofocus({currentTarget}: Event) {\n  const target = currentTarget as HTMLElement\n  if (target.hasAttribute('open')) {\n    const element = target.querySelector<HTMLElement>('[autofocus]')\n    if (element) element.focus()\n  } else {\n    const summary = target.querySelector<HTMLElement>('summary')\n    if (summary) summary.focus()\n  }\n}\n\nfunction closeCurrentDetailsDropdown({currentTarget}: Event) {\n  const target = currentTarget as HTMLElement\n  if (target.hasAttribute('open')) {\n    if (currentlyOpenedDetailsDropdown && currentlyOpenedDetailsDropdown !== target) {\n      currentlyOpenedDetailsDropdown.removeAttribute('open')\n    }\n\n    currentlyOpenedDetailsDropdown = target\n  } else if (target === currentlyOpenedDetailsDropdown) {\n    currentlyOpenedDetailsDropdown = null\n  }\n}\n\nobserve('[data-deferred-details-content-url]:not([data-details-no-preload-on-hover])', {\n  subscribe: el => {\n    const summary = el.querySelector<HTMLElement>('summary')!\n    return fromEvent(summary, 'mouseenter', loadDeferredContentByEvent)\n  },\n})\n\nobserve('[data-deferred-details-content-url]', {\n  subscribe: el => {\n    return fromEvent(el, 'toggle', loadDeferredContentByEvent)\n  },\n})\n\nexport function toggleDetails(details: HTMLElement) {\n  if (details.hasAttribute('open')) {\n    details.removeAttribute('open')\n  } else {\n    details.setAttribute('open', 'open')\n  }\n}\n\n// Additonal button trigger for <details id>\non('click', '[data-toggle-for]', function (event) {\n  const id = event.currentTarget.getAttribute('data-toggle-for') || ''\n  const details = document.getElementById(id)\n  if (!details) return\n  toggleDetails(details)\n})\n\n// Expand collapsed outdated diff if anchor points to it\n//   /github/github/pull/123#discussion-diff-456\n//   /github/github/pull/123#discussion-r345\nhashChange(function ({target}) {\n  if (!target || target.closest('summary')) return\n\n  let node = target.parentElement\n  while (node) {\n    node = node.closest('details')\n    if (node) {\n      if (!node.hasAttribute('open')) {\n        node.setAttribute('open', '')\n      }\n      node = node.parentElement\n    }\n  }\n})\n\n// The details dialog allows users to dismiss the dialog by clicking on the\n// grayed-out background. This additional functionality prohibits dismissing\n// the dialog in this way.\non('details-dialog-close', '[data-disable-dialog-dismiss]', function (event) {\n  event.preventDefault()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Entire document is drop target.\nobserve('.js-document-dropzone', {\n  constructor: HTMLElement,\n  add(el) {\n    document.body.addEventListener('dragstart', onDragstart)\n    document.body.addEventListener('dragend', onDragend)\n    document.body.addEventListener('dragenter', onDragenter)\n    document.body.addEventListener('dragover', onDragenter)\n    document.body.addEventListener('dragleave', onBodyDragleave)\n    el.addEventListener('drop', onDrop)\n  },\n  remove(el) {\n    document.body.removeEventListener('dragstart', onDragstart)\n    document.body.removeEventListener('dragend', onDragend)\n    document.body.removeEventListener('dragenter', onDragenter)\n    document.body.removeEventListener('dragover', onDragenter)\n    document.body.removeEventListener('dragleave', onBodyDragleave)\n    el.removeEventListener('drop', onDrop)\n  },\n})\n\nexport function hasFile(transfer: DataTransfer): boolean {\n  return Array.from(transfer.types).indexOf('Files') >= 0\n}\n\nlet dragging: number | null = null\n\n// Highlight textarea and change drop cursor. Ensure drop target styles\n// are cleared after dragging back outside of window.\nfunction onDragenter(event: DragEvent) {\n  if (ignorePageElementDrag) return\n\n  const target = event.currentTarget as Element\n\n  if (dragging) {\n    window.clearTimeout(dragging)\n  }\n  dragging = window.setTimeout(() => target.classList.remove('dragover'), 200)\n\n  const transfer = event.dataTransfer\n  if (!transfer || !hasFile(transfer)) return\n\n  transfer.dropEffect = 'copy'\n  target.classList.add('dragover')\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nfunction onBodyDragleave(event: DragEvent) {\n  // Ignore leave events from children to prevent flicker.\n  if (!(event.target instanceof Element)) return\n  if (event.target.classList.contains('js-document-dropzone')) {\n    const currentTarget = event.currentTarget as Element\n    currentTarget.classList.remove('dragover')\n  }\n}\n\nfunction onDrop(event: DragEvent) {\n  const container = event.currentTarget as Element\n\n  container.classList.remove('dragover')\n  document.body.classList.remove('dragover')\n\n  const transfer = event.dataTransfer\n  if (!transfer || !hasFile(transfer)) return\n\n  fire(container, 'document:drop', {transfer})\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\n// Ignore image or link drags from within the page itself. Allow them to be\n// dragged onto the desktop, but ignore any drops back onto the page.\nlet ignorePageElementDrag = false\n\nfunction onDragstart() {\n  ignorePageElementDrag = true\n}\n\nfunction onDragend() {\n  ignorePageElementDrag = false\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Encrypt plain text with a public key.\nexport async function encrypt(publicKey: Uint8Array, value: string): Promise<Uint8Array> {\n  const encoder = new TextEncoder()\n  const messageBytes = encoder.encode(value)\n  const {seal} = await import('../tweetsodium')\n  return seal(messageBytes, publicKey)\n}\n\n// Decode base64 data into a byte array.\nexport function decode(encoded: string): Uint8Array {\n  const bytes = atob(encoded)\n    .split('')\n    .map(x => x.charCodeAt(0))\n  return Uint8Array.from(bytes)\n}\n\n// Encode a byte array as a base64 string.\nexport function encode(bytes: Uint8Array): string {\n  let str = ''\n  for (const byte of bytes) {\n    str += String.fromCharCode(byte)\n  }\n  return btoa(str)\n}\n\non('submit', 'form.js-encrypt-submit', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n\n  if (event.defaultPrevented || !form.checkValidity()) return\n  const plainText = form.elements.namedItem('secret_value') as HTMLTextAreaElement\n\n  // Prevent serializing plain text value in form submission.\n  plainText.disabled = true\n\n  if (!plainText.value) return\n\n  event.preventDefault()\n\n  // Submit encrypted value in hidden input.\n  const publicKey = decode(form.getAttribute('data-public-key')!)\n\n  ;(form.elements.namedItem('encrypted_value') as HTMLInputElement).value = encode(\n    await encrypt(publicKey, plainText.value),\n  )\n\n  form.submit()\n})\n\n// Submit multiple encrypted values in hidden inputs. If an unencrypted field is empty,\n// its associated hidden encrypted field is disabled.\non('submit', 'form.js-encrypt-bulk-submit', submitBulk(true))\n\n// Submit multiple encrypted values in hidden inputs. If an unencrypted field is empty,\n// its associated hidden encrypted field is not disabled.\non('submit', 'form.js-encrypt-bulk-submit-enable-empty', submitBulk(false))\n\n// Submit multiple encrypted values. If an unencrypted field is empty,\n// its associated hidden encrypted field is enabled or disabled depending on \"disableEmptyValues\".\nfunction submitBulk(disableEmptyValues: boolean) {\n  return async function (event: Event) {\n    const form = event.currentTarget as HTMLFormElement\n\n    if (event.defaultPrevented || !form.checkValidity()) return\n\n    // Submit encrypted value in hidden input.\n    const publicKey = decode(form.getAttribute('data-public-key')!)\n\n    event.preventDefault()\n    for (const element of form.elements) {\n      // Prevent serializing plain text value in form submission.\n      const formElement = element as HTMLInputElement\n      if (formElement.id.endsWith('secret')) {\n        formElement.disabled = true\n\n        if (formElement.required && !formElement.value) {\n          const message = `${formElement.name} is invalid!`\n          const template = document.querySelector<HTMLTemplateElement>('template.js-flash-template')!\n          template.after(new TemplateInstance(template, {className: 'flash-error', message}))\n          return\n        }\n\n        const encryptedValueElementName = `${formElement.name}_encrypted_value`\n        if (!formElement.value) {\n          ;(form.elements.namedItem(encryptedValueElementName) as HTMLInputElement).disabled = disableEmptyValues\n          continue\n        }\n\n        ;(form.elements.namedItem(encryptedValueElementName) as HTMLInputElement).value = encode(\n          await encrypt(publicKey, formElement.value),\n        )\n      }\n    }\n    form.submit()\n  }\n}\n","import {fromEvent} from '@github-ui/subscription'\nimport {loaded} from '@github-ui/document-ready'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {positionedOffset} from '@primer/behaviors'\n\nobserve('.js-responsive-underlinenav', {\n  constructor: HTMLElement,\n  subscribe: nav => {\n    asyncCalculateVisibility(nav)\n    return fromEvent(window, 'resize', () => calculateVisibility(nav))\n  },\n})\n\nexport async function asyncCalculateVisibility(nav: HTMLElement) {\n  await loaded\n  calculateVisibility(nav)\n}\n\nfunction toggleItem(item: HTMLElement, hidden: boolean) {\n  // Set visibility to hidden, instead of .hidden attribute\n  // so we can still calculate distance accurately\n  item.style.visibility = hidden ? 'hidden' : ''\n  // Get tab-item name, if present, so we can match it up with the dropdown menu\n  const itemName = item.getAttribute('data-tab-item')\n  if (itemName) {\n    const itemToHide = document.querySelector<HTMLElement>(`[data-menu-item=${itemName}]`)\n    if (itemToHide instanceof HTMLElement) {\n      itemToHide.hidden = !hidden\n    }\n  }\n}\n\nfunction calculateVisibility(nav: HTMLElement) {\n  const items = nav.querySelectorAll<HTMLElement>('.js-responsive-underlinenav-item')\n  const overflowContainer = nav.querySelector<HTMLElement>('.js-responsive-underlinenav-overflow')!\n  const overflowOffset = positionedOffset(overflowContainer, nav)\n  if (!overflowOffset) {\n    return\n  }\n\n  let anyHidden = false\n  for (const item of items) {\n    const itemOffset = positionedOffset(item, nav)\n    if (itemOffset) {\n      const hidden = itemOffset.left + item.offsetWidth >= overflowOffset.left\n      toggleItem(item, hidden)\n      anyHidden = anyHidden || hidden\n    }\n  }\n  overflowContainer.style.visibility = anyHidden ? '' : 'hidden'\n}\n","import {persistResumableFields, restoreResumableFields, setForm} from '@github/session-resume'\nimport {debounce} from '@github/mini-throttle'\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport safeStorage from '@github-ui/safe-storage'\n\n// For some fields we'll save them to localStorage instead of sessionStorage\nconst safeLocalStorage = safeStorage('localStorage', {\n  ttl: 1000 * 60 * 5,\n  throwQuotaErrorsOnSet: false,\n  sendCacheStats: true,\n})\n\nexport const restoreFieldsFromAllBackends = () => {\n  restoreResumableFields(getPageID())\n  restoreResumableFields(getPageID(), {storage: safeLocalStorage})\n}\n\nconst sessionResumableSelector = '.js-session-resumable'\nconst localStorageResumableSelector = '.js-local-storage-resumable'\n\nconst persistFieldstoAllBackends = () => {\n  persistResumableFields(getPageID(), {selector: sessionResumableSelector})\n  persistResumableFields(getPageID(), {selector: localStorageResumableSelector, storage: safeLocalStorage})\n}\n\nconst debouncedRestoreResumableFields = debounce(function () {\n  restoreFieldsFromAllBackends()\n}, 50)\n\n/**\n * Returns true while turbo is showing a \"preview\" of the route from cache: in other words between\n * the time a route is visited and the time it is loaded\n * @returns boolean\n */\nfunction isTurboRenderingCachePreview(): boolean {\n  return document.querySelector('html')?.hasAttribute('data-turbo-preview') ?? false\n}\n\n// Session Resume.\n//\n// Annotate fields to be persisted on navigation away from the current page.\n// Fields be automatically restored when the user revists the page again in\n// their current browser session (excludes seperate tabs).\n//\n// Not design for persisted crash recovery.\n\n// Listen for all form submit events and to see if their default submission\n// behavior is invoked.\nwindow.addEventListener('submit', setForm, {capture: true})\n\n// Resume field content on regular page loads.\nwindow.addEventListener('pageshow', function () {\n  restoreFieldsFromAllBackends()\n})\n\n// Resume field content on elements that are added later\n// We use a debounced version to avoid repeatedly calling it if multiple\n// fields are added\nobserve('.js-session-resumable', function () {\n  // we don't want to restore fields on turbo-cache previews as that empties the cache\n  // causing the fields to be lost when turbo re-renders with the fetched page\n  if (!isTurboRenderingCachePreview()) {\n    debouncedRestoreResumableFields()\n  }\n})\n\n// Persist resumable fields when page is unloaded\nwindow.addEventListener('pagehide', function () {\n  persistFieldstoAllBackends()\n})\n\n// preserve fields before navigating away\nwindow.addEventListener('turbo:before-fetch-response', function () {\n  persistFieldstoAllBackends()\n})\n\n// restore fields once turbo navigation has finished\nwindow.addEventListener('turbo:load', function () {\n  restoreFieldsFromAllBackends()\n})\n","// Deal with selected_link_to on repository and gist pages\nfunction updateSelectedRepoTab(meta: HTMLMetaElement) {\n  const selection = meta && meta.getAttribute('value')\n\n  if (!selection) return\n\n  for (const item of document.querySelectorAll('.js-sidenav-container-pjax .js-selected-navigation-item')) {\n    const isSelected = (item.getAttribute('data-selected-links') || '').split(' ').indexOf(selection) >= 0\n    isSelected ? item.setAttribute('aria-current', 'page') : item.removeAttribute('aria-current')\n    item.classList.toggle('selected', isSelected)\n  }\n}\n\nconst observer = new MutationObserver(mutations => {\n  for (const mutation of mutations) {\n    for (const node of mutation.addedNodes) {\n      if (!(node instanceof HTMLMetaElement)) continue\n\n      if (node.getAttribute('name') === 'selected-link') {\n        updateSelectedRepoTab(node)\n      }\n    }\n  }\n})\n\nobserver.observe(document.head, {childList: true})\n\n// This is to make sure that the selected tab is updated when using back/forward buttons.\ndocument.addEventListener('turbo:load', () => {\n  const selectedLink = document.head.querySelector<HTMLMetaElement>('meta[name=\"selected-link\"]')\n\n  if (!selectedLink) return\n\n  updateSelectedRepoTab(selectedLink)\n})\n","// Populate a form input from a suggested list of tags.\n//\n// Markup example:\n//\n//    <!-- Tag input container -->\n//    <div class=\"tag-input-container js-tag-input-container\">\n//\n//      <!-- Tag <input> wrapper -->\n//      <div class=\"tag-input js-tag-input-wrapper\">\n//\n//        <!-- List of selected tags -->\n//        <ul class=\"js-tag-input-selected-tags\">\n//\n//          <!-- Template used to generate new selected tags -->\n//          <li class=\"js-tag-input-tag js-template d-none\">\n//            <span class=\"js-placeholder-tag-name\"></span>\n//            <a class=\"remove js-remove\" tabindex=\"-1\">&times;</a>\n//            <input type=\"hidden\" name=\"attribute[]\" value=\"tag-value\">\n//          </li>\n//\n//          <!-- List of pre-selected tags (optional) -->\n//          <li class=\"js-tag-input-tag\">\n//            <span class=\"js-tag-input-tag-name\">ruby-on-rails</span>\n//            <a class=\"remove js-remove\" tabindex=\"-1\">&times;</a>\n//            <input type=\"hidden\" name=\"attribute[]\" value=\"ruby-on-rails\">\n//          </li>\n//        </ul>\n//\n//        <auto-complete src=\"<%= url %>\" for=\"popup\">\n//          <input type=\"text\" class=\"tag-input-inner\" autocomplete=\"off\" autofocus>\n//          <div class=\"js-navigation-container js-active-navigation-container\">\n//            <ul class=\"suggester\" id=\"popup\"></ul>\n//          </div>\n//        </auto-complete>\n//      </div>\n//    </div>\n//\n\nimport AutocompleteElement from '@github/auto-complete-element'\nimport {eventToHotkeyString} from '@github/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface TagInputOptions {\n  container: HTMLElement\n  selections: HTMLElement\n  inputWrap: HTMLElement\n  input: HTMLInputElement\n  tagTemplate: HTMLElement\n  autoComplete: AutocompleteElement\n  multiTagInput: boolean\n}\n\nclass TagInput {\n  container: HTMLElement\n  selections: HTMLElement\n  inputWrap: HTMLElement\n  input: HTMLInputElement\n  form: HTMLFormElement\n  tagTemplate: HTMLElement\n  autoComplete: AutocompleteElement\n  multiTagInput: boolean\n\n  constructor(options: TagInputOptions) {\n    this.container = options.container\n    this.selections = options.selections\n    this.inputWrap = options.inputWrap\n    this.input = options.input\n    this.tagTemplate = options.tagTemplate\n    this.form = this.input.form!\n    this.autoComplete = options.autoComplete\n    this.multiTagInput = options.multiTagInput\n  }\n\n  // Bind a tag input to the DOM.\n  setup() {\n    this.container.addEventListener('click', (event: MouseEvent) => {\n      const target = event.target as Element\n      if (target.closest('.js-remove')) {\n        this.removeTag(event)\n      } else {\n        this.onFocus()\n      }\n    })\n    this.input.addEventListener('focus', this.onFocus.bind(this))\n    this.input.addEventListener('blur', this.onBlur.bind(this))\n    this.input.addEventListener('keydown', this.onKeyDown.bind(this))\n    this.form.addEventListener('submit', this.onSubmit.bind(this))\n\n    this.autoComplete.addEventListener('auto-complete-change', () => {\n      this.selectTag(this.autoComplete.value)\n    })\n  }\n\n  // Make the tag input container look like a focused input.\n  onFocus() {\n    this.inputWrap.classList.add('focus')\n    if (this.input !== document.activeElement) this.input.focus()\n  }\n\n  // Make the tag input container *not* look like a focused input. Also submit\n  // the form if there is text in the input and the suggester is hidden.\n  onBlur() {\n    this.inputWrap.classList.remove('focus')\n    if (!this.autoComplete.open) {\n      this.onSubmit()\n    }\n  }\n\n  // Taggify the last thing the user typed in case they didn't hit Enter, Tab,\n  // or a comma before clicking the form's submit button.\n  onSubmit() {\n    if (this.input.value) {\n      this.selectTag(this.input.value)\n      this.autoComplete.open = false\n    }\n  }\n\n  onKeyDown(event: KeyboardEvent) {\n    switch (eventToHotkeyString(event)) {\n      case 'Backspace':\n        this.onBackspace()\n        break\n      case 'Enter':\n      case 'Tab':\n        this.taggifyValueWhenSuggesterHidden(event)\n        break\n      case ',':\n      case ' ': // (Space)\n        this.taggifyValue(event)\n        break\n    }\n  }\n\n  // Taggifies the entered value when the suggester is not visible. Called after an Enter\n  // or Tab is entered.\n  taggifyValueWhenSuggesterHidden(event: Event) {\n    if (!this.autoComplete.open && this.input.value) {\n      event.preventDefault()\n      this.selectTag(this.input.value)\n    }\n  }\n\n  // Taggifies the entered value if it exists; called after a comma or space is entered.\n  taggifyValue(event: Event) {\n    if (this.input.value) {\n      event.preventDefault()\n      this.selectTag(this.input.value)\n      this.autoComplete.open = false\n    }\n  }\n\n  // Add a new tag to the list of selections if it has not already been added.\n  selectTag(text: string) {\n    const tags = this.normalizeTag(text)\n    const selections = this.selectedTags()\n\n    let tagsAdded = false\n    for (let i = 0; i < tags.length; i++) {\n      const tag = tags[i]!\n      if (selections.indexOf(tag) < 0) {\n        this.selections.appendChild(this.templateTag(tag))\n        tagsAdded = true\n      }\n    }\n\n    if (tagsAdded) {\n      this.input.value = ''\n      fire(this.form, 'tags:changed')\n    }\n  }\n\n  // Remove a tag from the list of selections.\n  removeTag(event: Event) {\n    const target = event.target as Element\n    event.preventDefault()\n    const inputTag = target.closest<HTMLElement>('.js-tag-input-tag')!\n    inputTag.remove()\n    fire(this.form, 'tags:changed')\n  }\n\n  // Generate a new tag Node.\n  templateTag(tag: string): Element {\n    const el = this.tagTemplate.cloneNode(true) as Element\n\n    el.querySelector<HTMLInputElement>('input')!.value = tag\n    const tagName = el.querySelector<HTMLElement>('.js-placeholder-tag-name')!\n    tagName.replaceWith(tag)\n    /* eslint-disable-next-line github/no-d-none */\n    el.classList.remove('d-none', 'js-template')\n\n    return el\n  }\n\n  // Sanitize user input to remove invalid tag characters.\n  normalizeTag(text: string): string[] {\n    const sanitizedText = text.toLowerCase().trim()\n\n    if (!sanitizedText) return []\n    if (this.multiTagInput) return sanitizedText.split(/[\\s,']+/)\n\n    return [sanitizedText.replace(/[\\s,']+/g, '-')]\n  }\n\n  // Remove a tag on backspace if the input is empty.\n  onBackspace() {\n    if (!this.input.value) {\n      const lastSelection = this.selections.querySelector('li:last-child .js-remove')\n      if (lastSelection instanceof HTMLElement) lastSelection.click()\n    }\n  }\n\n  // Map matched input content to a suggester query.\n  selectedTags(): string[] {\n    const inputs = this.selections.querySelectorAll<HTMLInputElement>('input')\n    return Array.from(inputs)\n      .map(el => el.value)\n      .filter(value => value.length > 0)\n  }\n}\n\nobserve('.js-tag-input-container', {\n  constructor: HTMLElement,\n  initialize(el) {\n    new TagInput({\n      container: el,\n      inputWrap: el.querySelector<HTMLElement>('.js-tag-input-wrapper')!,\n      input: el.querySelector<HTMLInputElement>('input[type=\"text\"], input:not([type])')!,\n      selections: el.querySelector<HTMLElement>('.js-tag-input-selected-tags')!,\n      tagTemplate: el.querySelector<HTMLElement>('.js-template')!,\n      autoComplete: el.querySelector<AutocompleteElement>('auto-complete')!,\n      multiTagInput: false,\n    }).setup()\n  },\n})\n\nobserve('.js-multi-tag-input-container', {\n  constructor: HTMLElement,\n  initialize(el) {\n    new TagInput({\n      container: el,\n      inputWrap: el.querySelector<HTMLElement>('.js-tag-input-wrapper')!,\n      input: el.querySelector<HTMLInputElement>('input[type=\"text\"], input:not([type])')!,\n      selections: el.querySelector<HTMLElement>('.js-tag-input-selected-tags')!,\n      tagTemplate: el.querySelector<HTMLElement>('.js-template')!,\n      autoComplete: el.querySelector<AutocompleteElement>('auto-complete')!,\n      multiTagInput: true,\n    }).setup()\n  },\n})\n","function supportsUserSelectContain() {\n  const el = document.createElement('div')\n  el.style.cssText = '-ms-user-select: element; user-select: contain;'\n  return (\n    el.style.getPropertyValue('-ms-user-select') === 'element' ||\n    el.style.getPropertyValue('-ms-user-select') === 'contain' ||\n    el.style.getPropertyValue('user-select') === 'contain'\n  )\n}\nfunction handleUserSelectContain(event: Event) {\n  if (!(event.target instanceof Element)) return\n  const currentTarget = event.target.closest('.user-select-contain')\n  if (!currentTarget) return\n\n  const selection = window.getSelection()\n  if (!selection) return\n  if (!selection.rangeCount) return\n  if (!selection.rangeCount || selection.type !== 'Range') return\n\n  const container = selection.getRangeAt(0).commonAncestorContainer\n  if (currentTarget.contains(container)) return\n  selection.selectAllChildren(currentTarget)\n}\n\nif (!supportsUserSelectContain()) {\n  document.addEventListener('click', handleUserSelectContain)\n}\n","export interface BlobOffset {\n  // Line number\n  // Lines start at 1.\n  line: number\n\n  // Optional column number.\n  // Like lines, columns are 1-indexed.\n  column: number | null\n}\n\nexport interface BlobRange {\n  // Starting offset of range.\n  start: BlobOffset\n\n  // End offset of range.\n  // End offset may be the same as the start. This indicates a collapsed range.\n  // Should always be initialized to a value that is equal or greater than the\n  // start range such the range is always in ascending order. Reversed ranges\n  // have undefined behavior.\n  end: BlobOffset\n}\n\n// Inverse of `formatBlobRange`.\n//\n// Examples\n//\n//   parseBlobRange(\"#L3\")\n//   // => {start: {line: 3}}\n//\n//   parseBlobRange(\"L3-L5\")\n//   // => {start: {line: 3}, end: {line: 5}}\n//\n//   parseBlobRange(\"\")\n//   // => null\nexport function parseBlobRange(str: string): BlobRange | undefined {\n  const lines = str.match(/#?(?:L)(\\d+)((?:C)(\\d+))?/g)\n  if (!lines) {\n    return\n  } else if (lines.length === 1) {\n    const offset = parseBlobOffset(lines[0])\n    if (!offset) return\n    return Object.freeze({start: offset, end: offset})\n  } else if (lines.length === 2) {\n    const startOffset = parseBlobOffset(lines[0])\n    const endOffset = parseBlobOffset(lines[1]!)\n    if (!startOffset || !endOffset) return\n\n    return ascendingBlobRange(\n      Object.freeze({\n        start: startOffset,\n        end: endOffset,\n      }),\n    )\n  } else {\n    return\n  }\n}\n\n// Inverse of `parseBlobRange`.\n//\n// Examples\n//\n//   formatBlobRange({start: {line: 3}})\n//   // => \"L3\"\n//\n//   formatBlobRange({start: {line: 3}, end: {line: 5}})\n//   // => \"L3-L5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5, column: 5}})\n//   // => \"L3C1-L5C5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5,}})\n//   // => \"L3C1-L5\"\nexport function formatBlobRange(blobRange: BlobRange): string {\n  const {start, end} = ascendingBlobRange(blobRange)\n\n  if (start.column != null && end.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}C${end.column}`\n  } else if (start.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}`\n  } else if (end.column != null) {\n    return `L${start.line}-L${end.line}C${end.column}`\n  } else if (start.line === end.line) {\n    return `L${start.line}`\n  } else {\n    return `L${start.line}-L${end.line}`\n  }\n}\n\n// Returns a String containing the file prefix with trailing dash.\n//\n// Examples\n//\n//   parseAnchorPrefix(\"#file-zshrc-L3\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"file-zshrc-L3-L5\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"\")\n//   // => \"\"\nfunction parseAnchorPrefix(str: string): string {\n  const match = str.match(/(file-.+?-)L\\d+?/i)\n  return match ? match[1]! : ''\n}\n\nexport type AnchorInfo = {\n  blobRange: BlobRange\n  anchorPrefix: string\n}\n\n// Examples\n//\n//   parseFileAnchor(\"#file-zshrc-L3\")\n//   // => { blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"file-zshrc-L3-L5\")\n//   // => { blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"\")\n//   // => { blobRange: null, anchorPrefix: undefined }\nexport function parseFileAnchor(str: string): AnchorInfo {\n  const blobRange = parseBlobRange(str)!\n  const anchorPrefix = parseAnchorPrefix(str)\n  return {blobRange, anchorPrefix}\n}\n\n// Formats line number range pair as an anchor String.\n//\n// Examples\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"\"})\n//   // => \"#L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3, column: 1}, end: {line: 5, column: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3C1-L5C5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"\"})\n//   // => \"#\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#\"\nexport function formatBlobRangeAnchor({anchorPrefix, blobRange}: AnchorInfo): string {\n  if (!blobRange) return '#'\n  return `#${anchorPrefix}${formatBlobRange(blobRange)}`\n}\n\nfunction parseBlobOffset(str: string): BlobOffset | null {\n  const lineMatch = str.match(/L(\\d+)/)\n  const columnMatch = str.match(/C(\\d+)/)\n  if (lineMatch) {\n    return Object.freeze({\n      line: parseInt(lineMatch[1]!),\n      column: columnMatch ? parseInt(columnMatch[1]!) : null,\n    })\n  } else {\n    return null\n  }\n}\n\nexport function DOMRangeFromBlob(\n  blobRange: BlobRange,\n  getLineElement: (line: number) => Node | null,\n): Range | undefined {\n  const [startContainer, _startOffset] = findRangeOffset(blobRange.start, true, getLineElement)\n  const [endContainer, _endOffset] = findRangeOffset(blobRange.end, false, getLineElement)\n  if (!startContainer || !endContainer) return\n\n  // Treat -1 as full line selection\n  let startOffset = _startOffset\n  let endOffset = _endOffset\n  if (startOffset === -1) startOffset = 0\n  if (endOffset === -1) endOffset = endContainer.childNodes.length\n  if (!startContainer.ownerDocument) throw new Error(`DOMRange needs to be inside document`)\n\n  const range = startContainer.ownerDocument.createRange()\n  range.setStart(startContainer, startOffset)\n  range.setEnd(endContainer, endOffset)\n  return range\n}\n\nfunction findRangeOffset(\n  offset: BlobOffset,\n  lookAhead: boolean,\n  getLineElement: (n: number) => Node | null,\n): [Node | null, number] {\n  const error: [null, number] = [null, 0]\n\n  const lineElement = getLineElement(offset.line)\n  if (!lineElement) return error\n\n  if (offset.column == null) {\n    return [lineElement, -1]\n  }\n\n  let column = offset.column - 1\n\n  const textNodes = getAllTextNodes(lineElement)\n  for (let i = 0; i < textNodes.length; i++) {\n    const textNode = textNodes[i]!\n\n    // TODO: length might be buggy with emoji\n    const nextC = column - (textNode.textContent || '').length\n\n    if (nextC === 0) {\n      const nextTextNode = textNodes[i + 1]\n      if (lookAhead && nextTextNode) {\n        return [nextTextNode, 0]\n      } else {\n        return [textNode, column]\n      }\n    } else if (nextC < 0) {\n      return [textNode, column]\n    }\n\n    column = nextC\n  }\n\n  return error\n}\n\n// Get a flat list of text nodes in depth first order.\nfunction getAllTextNodes(el: Node): Node[] {\n  if (el.nodeType === Node.TEXT_NODE) {\n    return [el]\n  }\n  if (!el.childNodes || !el.childNodes.length) return []\n  let list: Node[] = []\n  for (const node of el.childNodes) {\n    list = list.concat(getAllTextNodes(node))\n  }\n  return list\n}\n\n// Sorts range start and end offsets to be in ascending order.\nfunction ascendingBlobRange(range: BlobRange): BlobRange {\n  const offsets = [range.start, range.end]\n  offsets.sort(compareBlobOffsets)\n\n  if (offsets[0] === range.start && offsets[1] === range.end) {\n    return range\n  } else {\n    return Object.freeze({\n      start: offsets[0]!,\n      end: offsets[1]!,\n    })\n  }\n}\n\n// Compare line offsets. May be used with Array.sort\nfunction compareBlobOffsets(a: BlobOffset, b: BlobOffset): number {\n  if (a.line === b.line && a.column === b.column) {\n    return 0\n  } else if (a.line === b.line && typeof a.column === 'number' && typeof b.column === 'number') {\n    return a.column - b.column\n  } else {\n    return a.line - b.line\n  }\n}\n","import type {CodeEditor} from './editor/code-editor'\nimport type {Editor} from 'codemirror'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst codeEditors: WeakMap<HTMLElement, CodeEditor> = new WeakMap()\nconst reactEditors: WeakMap<HTMLElement, Editor> = new WeakMap()\n\nexport function getCodeEditor(el: HTMLElement): CodeEditor | undefined {\n  return codeEditors.get(el)\n}\n\nexport async function getAsyncCodeEditor(el: HTMLElement): Promise<CodeEditor> {\n  return codeEditors.get(el) || onEditorFromEvent(await nextEvent(el, 'codeEditor:ready'))\n}\n\n// For react implementation, this could probably be improved or replaced eventually\nexport function registerReactEditor(el: HTMLElement, editor: Editor): void {\n  reactEditors.set(el, editor)\n}\n\nexport function getReactEditor(el: HTMLElement): Editor | undefined {\n  return reactEditors.get(el)\n}\n\nfunction onEditorFromEvent(event: Event): CodeEditor {\n  if (!(event instanceof CustomEvent)) throw new Error('assert: event is not a CustomEvent')\n  const editor: CodeEditor = event.detail.editor\n  if (!event.target) throw new Error('assert: event.target is null')\n  codeEditors.set(event.target as HTMLElement, editor)\n  return editor\n}\n\non('codeEditor:ready', '.js-code-editor', onEditorFromEvent)\n\nfunction nextEvent(target: EventTarget, event: string): Promise<Event> {\n  return new Promise(resolve => {\n    target.addEventListener(event, resolve, {once: true})\n  })\n}\n","export function* filterMap<T, U>(items: T[], map: (item: T) => U | null | undefined): Iterable<U> {\n  for (const item of items) {\n    const value = map(item)\n    if (value != null) {\n      yield value\n    }\n  }\n}\n","import {filterMap} from './iterables'\n\ntype Comparator<T> = (a: T, b: T) => number\n\nexport function filterSort<T, K>(items: T[], map: (item: T) => K | null | undefined, compare: Comparator<K>): T[] {\n  const sortKey = (item: T): [T, K] | null => {\n    const key = map(item)\n    return key != null ? [item, key] : null\n  }\n  return [...filterMap(items, sortKey)].sort((a, b) => compare(a[1], b[1])).map(([item]) => item)\n}\n","// Example\n// ```js\n//     fuzzyScore(\"foo.html\", \"foo\")\n//     // => 0.6458333333333334\n// ```\n//\n// ```js\n//     // Compute re once\n//     re = fuzzyRegexp(\"foo\")\n//     fuzzyScore(\"foo.html\", re)\n//     fuzzyScore(\"bar.html\", re)\n//     // => 0.6458333333333334\n// ```\n//\n// Returns a number between 0 and 1. 0 being the worst match and 1\n// being an exact match.\n// You can change the `prefixBonusWeight` variable to alter ordering.\n// Currently fuzzy search for the labels picker uses a weaker prefix bonus to weight heavier full word matches.\nexport function fuzzyScore(string: string, query: string, prefixBonusWeight = 0.1): number {\n  let score = stringScore(string, query, prefixBonusWeight)\n  if (score && query.indexOf('/') === -1) {\n    const basename = string.substring(string.lastIndexOf('/') + 1)\n    score += stringScore(basename, query, prefixBonusWeight)\n  }\n  return score\n}\n\n// Create a regexp that can be used to fuzzy match a given string. Any\n// special regexp characters in the input string will be escaped\n// correctly.\n//\n// A query of \"bar\" becomes /(.*)(b)([^a]*?)(a)([^r]*?)(r)(.*?)/.\n//\n// /\n//  (.*)     whatever's before the first b\n//  (b)      grab the first b of bar\n//  ([^a]*?) take everything up to the a of bar\n//  (a)      take the a of bar\n//  ([^r]*?) take everything up to the r of bar\n//  (r)      take the r of bar\n//  (.*?)    take the rest of the string\n// /\nexport function fuzzyRegexp(query: string): RegExp {\n  const chars = query.toLowerCase().split('')\n\n  let regex = ''\n\n  for (let i = 0; i < chars.length; i++) {\n    const char = chars[i]!\n    // must escape these chars so we match literals\n    const c = char.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n    if (i === 0) {\n      // for the first we want to greedily match anything, which pushes\n      // the first match as late as possible in the string\n      regex += `(.*)(${c})`\n    } else {\n      regex += `([^${c}]*?)(${c})`\n    }\n  }\n  return new RegExp(`${regex}(.*?)$`, 'i')\n}\n\nexport function fuzzyHighlightElement(content: Element, text?: string, textRe?: RegExp): void {\n  if (text) {\n    const matches = content.innerHTML.trim().match(textRe || fuzzyRegexp(text))\n    if (!matches) return\n\n    let open = false\n    const html = []\n    for (let i = 1; i < matches.length; ++i) {\n      const m = matches[i]\n      if (!m) continue\n\n      if (i % 2 === 0) {\n        if (!open) {\n          // eslint-disable-next-line github/unescaped-html-literal\n          html.push('<mark>')\n          open = true\n        }\n      } else if (open) {\n        html.push('</mark>')\n        open = false\n      }\n      html.push(m)\n    }\n    content.innerHTML = html.join('')\n  } else {\n    const html = content.innerHTML.trim()\n    const clean = html.replace(/<\\/?mark>/g, '')\n    if (html !== clean) {\n      content.innerHTML = clean\n    }\n  }\n}\n\nconst wordSeparators = new Set([' ', '-', '_'])\n\n// string_score.js: Quicksilver-like string scoring algorithm.\n//  https://raw.github.com/joshaven/string_score/master/coffee/string_score.coffee\n//\n// Copyright (C) 2009-2011 Joshaven Potter <yourtech@gmail.com>\n// Copyright (C) 2010-2011 Yesudeep Mangalapilly <yesudeep@gmail.com>\n// MIT license: http://www.opensource.org/licenses/mit-license.php\n//\n// A string score implementation.\nfunction stringScore(originalString: string, abbreviation: string, prefixBonusWeight = 0.1): number {\n  let string = originalString\n  if (string === abbreviation) {\n    return 1.0\n  }\n  const stringLength = string.length\n  let totalCharacterScore = 0.0\n  let shouldAwardCommonPrefixBonus = 0\n  for (let i = 0; i < abbreviation.length; i++) {\n    const c = abbreviation[i]!\n    const indexCLowercase = string.indexOf(c.toLowerCase())\n    const indexCUppercase = string.indexOf(c.toUpperCase())\n    const minIndex = Math.min(indexCLowercase, indexCUppercase)\n    const indexInString = minIndex > -1 ? minIndex : Math.max(indexCLowercase, indexCUppercase)\n    if (indexInString === -1) {\n      return 0.0\n    }\n    totalCharacterScore += 0.1\n    if (string[indexInString] === c) {\n      totalCharacterScore += 0.1\n    }\n    if (indexInString === 0) {\n      totalCharacterScore += 0.9 - prefixBonusWeight\n      if (i === 0) {\n        shouldAwardCommonPrefixBonus = 1\n      }\n    }\n    if (wordSeparators.has(string.charAt(indexInString - 1))) {\n      totalCharacterScore += 0.9 - prefixBonusWeight\n    }\n    string = string.substring(indexInString + 1, stringLength)\n  }\n  const abbreviationLength = abbreviation.length\n  const abbreviationScore = totalCharacterScore / abbreviationLength\n  let finalScore = (abbreviationScore * (abbreviationLength / stringLength) + abbreviationScore) / 2\n  if (shouldAwardCommonPrefixBonus && finalScore + prefixBonusWeight < 1) {\n    finalScore += prefixBonusWeight\n  }\n  return finalScore\n}\n\nexport type TextScore = {score: number; text: string}\nexport function compare(a: TextScore, b: TextScore): -1 | 0 | 1 {\n  if (a.score > b.score) {\n    return -1\n  } else if (a.score < b.score) {\n    return 1\n  } else if (a.text < b.text) {\n    return -1\n  } else if (a.text > b.text) {\n    return 1\n  } else {\n    return 0\n  }\n}\n","import {score as fuzzyScore, hasMatch, positions} from 'fzy.js'\n\nconst getScore = (value: string, text: string, minScore: number) => {\n  if (!hasMatch(value, text)) return -Infinity\n  const score = fuzzyScore(value, text)\n  if (score < minScore) return -Infinity\n  return score\n}\nconst highlightElement = (node: HTMLElement, value: string, text: string) => {\n  node.textContent = ''\n\n  let lastPosition = 0\n  for (const i of positions(value, text)) {\n    const slice = text.slice(lastPosition, i)\n    if (slice !== '') {\n      node.appendChild(document.createTextNode(text.slice(lastPosition, i)))\n    }\n    lastPosition = i + 1\n    const mark = document.createElement('mark')\n    mark.textContent = text[i]!\n    node.appendChild(mark)\n  }\n\n  node.appendChild(document.createTextNode(text.slice(lastPosition)))\n}\n\ninterface sortAbort {\n  aborted: boolean\n}\nconst sorting: WeakMap<FuzzyListElement, sortAbort> = new WeakMap()\n\ntype FuzzyListLazyRenderCallback = (text: string) => Node\ninterface state {\n  timer: number | null\n  handler: MutationObserver\n  items: Set<Node>\n  lazyItems: Map<string, FuzzyListLazyRenderCallback>\n}\nconst states: WeakMap<FuzzyListElement, state> = new WeakMap()\n\nconst textCache: WeakMap<Node, string> = new WeakMap()\nconst getTextCache = (item: Node) => {\n  if (!textCache.has(item) && item instanceof HTMLElement) {\n    const value = (item.getAttribute('data-value') || item.textContent || '').trim()\n    textCache.set(item, value)\n    return value\n  }\n  return textCache.get(item) || ''\n}\n\nclass FuzzyListElement extends HTMLElement {\n  connectedCallback() {\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const items = new Set(list.querySelectorAll('li'))\n\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const inputEl = this.querySelector('input')\n    if (inputEl instanceof HTMLInputElement) {\n      inputEl.addEventListener('input', () => {\n        this.value = inputEl.value\n      })\n    }\n\n    const handler = new MutationObserver(mutations => {\n      let update = false\n      for (const mutation of mutations) {\n        if (mutation.type === 'childList' && mutation.addedNodes.length) {\n          for (const item of mutation.addedNodes) {\n            if (item instanceof HTMLLIElement && !items.has(item)) {\n              const text = getTextCache(item)\n              update = update || hasMatch(this.value, text)\n              items.add(item)\n            }\n          }\n        }\n      }\n      if (update) this.sort()\n    })\n    handler.observe(list, {childList: true})\n\n    const state = {handler, items, lazyItems: new Map(), timer: null}\n    states.set(this, state)\n  }\n\n  disconnectedCallback() {\n    const state = states.get(this)\n    if (state) {\n      state.handler.disconnect()\n      states.delete(this)\n    }\n  }\n\n  addLazyItems(dataset: string[], render: FuzzyListLazyRenderCallback) {\n    const state = states.get(this)\n    if (!state) return\n    const {lazyItems} = state\n    const {value} = this\n    let update = false\n    for (const item of dataset) {\n      lazyItems.set(item, render)\n      update = update || (Boolean(value) && hasMatch(value, item))\n    }\n    if (update) this.sort()\n  }\n\n  sort() {\n    const oldSortAbort = sorting.get(this)\n    if (oldSortAbort) oldSortAbort.aborted = true\n    const sortAbort = {aborted: false}\n    sorting.set(this, sortAbort)\n    const {minScore, markSelector, maxMatches, value} = this\n    const state = states.get(this)\n    if (!state) return\n    if (!this.dispatchEvent(new CustomEvent('fuzzy-list-will-sort', {cancelable: true, detail: value}))) return\n    const {items, lazyItems} = state\n    const shouldMark = this.hasAttribute('mark-selector')\n\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    const itemsToRender: Array<\n      {render: FuzzyListLazyRenderCallback; text: string; score: number} | {item: Node; score: number}\n    > = []\n\n    if (value) {\n      for (const item of items) {\n        const text = getTextCache(item)\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({item, score})\n      }\n      for (const [text, render] of lazyItems) {\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({text, render, score})\n      }\n      itemsToRender.sort((a, b) => b.score - a.score).splice(maxMatches)\n    } else {\n      let i = itemsToRender.length\n      for (const item of items) {\n        if (i >= maxMatches) break\n        itemsToRender.push({item, score: 1})\n        i += 1\n      }\n      for (const [text, render] of lazyItems) {\n        if (i >= maxMatches) break\n        itemsToRender.push({text, render, score: 1})\n        i += 1\n      }\n    }\n\n    requestAnimationFrame(() => {\n      if (sortAbort.aborted) return\n\n      // Store a reference to the checked input (if there is one) as when we\n      // append other (stale) items they could be checked, and we want to keep\n      // the originally checked item as the only checked item\n      const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n\n      list.textContent = ''\n      let offset = 0\n\n      const nextBatch = () => {\n        if (sortAbort.aborted) return\n        const end = Math.min(itemsToRender.length, offset + 100)\n        const fragment = document.createDocumentFragment()\n        for (let i = offset; i < end; i += 1) {\n          const itemToRender = itemsToRender[i]!\n          let item = null\n          if ('render' in itemToRender && 'text' in itemToRender) {\n            const {render, text} = itemToRender\n            item = render(text)\n            items.add(item)\n            textCache.set(item, text)\n            lazyItems.delete(text)\n          } else if ('item' in itemToRender) {\n            item = itemToRender.item\n          }\n          if (item instanceof HTMLElement) {\n            if (shouldMark) {\n              highlightElement(\n                markSelector ? item.querySelector(markSelector) || item : item,\n                shouldMark ? value : '',\n                getTextCache(item),\n              )\n            }\n            fragment.appendChild(item)\n          }\n        }\n        offset = end\n\n        // Loop through all items that are about to be rendered - if there are\n        // any radios that are checked that conflict with the one checked item,\n        // then reset them to unchecked state\n        let inputStateReset = false\n        if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n          for (const checkedInput of fragment.querySelectorAll('input[type=\"radio\"]:checked')) {\n            if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n              checkedInput.checked = false\n              inputStateReset = true\n            }\n          }\n        }\n\n        list.appendChild(fragment)\n\n        // If any checked items were changed then a change event should be\n        // fired to let other observers know\n        if (checkedInputBeforeFilter && inputStateReset) {\n          checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n        }\n\n        if (end < itemsToRender.length) {\n          requestAnimationFrame(nextBatch)\n        } else {\n          list.hidden = itemsToRender.length === 0\n          const emptyEl = this.querySelector<HTMLElement>('[data-fuzzy-list-show-on-empty]')\n          if (emptyEl) {\n            emptyEl.hidden = itemsToRender.length > 0\n          }\n\n          this.dispatchEvent(new CustomEvent('fuzzy-list-sorted', {detail: itemsToRender.length}))\n        }\n      }\n\n      nextBatch()\n    })\n  }\n\n  get value(): string {\n    return this.getAttribute('value') || ''\n  }\n\n  set value(value: string) {\n    this.setAttribute('value', value)\n  }\n\n  get markSelector(): string {\n    return this.getAttribute('mark-selector') || ''\n  }\n\n  set markSelector(value: string) {\n    if (value) {\n      this.setAttribute('mark-selector', value)\n    } else {\n      this.removeAttribute('mark-selector')\n    }\n  }\n\n  get minScore(): number {\n    return Number(this.getAttribute('min-score') || 0)\n  }\n\n  set minScore(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('min-score', String(value))\n  }\n\n  get maxMatches(): number {\n    return Number(this.getAttribute('max-matches') || Infinity)\n  }\n\n  set maxMatches(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('max-matches', String(value))\n  }\n\n  static get observedAttributes(): string[] {\n    return ['value', 'mark-selector', 'min-score', 'max-matches']\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return\n    const state = states.get(this)\n    if (!state) return\n    if (state.timer) window.clearTimeout(state.timer)\n    state.timer = window.setTimeout(() => this.sort(), 100)\n  }\n}\n\nexport default FuzzyListElement\n\nif (!window.customElements.get('fuzzy-list')) {\n  window.FuzzyListElement = FuzzyListElement\n  window.customElements.define('fuzzy-list', FuzzyListElement)\n}\n\ndeclare global {\n  interface Window {\n    FuzzyListElement: typeof FuzzyListElement\n  }\n}\n","import {sendStats} from '@github-ui/stats'\n\nexport function sendData(hydroEventPayload: string, hydroEventHmac: string, hydroClientContext: string): void {\n  const data = {\n    hydroEventPayload,\n    hydroEventHmac,\n    visitorPayload: '',\n    visitorHmac: '',\n    hydroClientContext,\n  }\n\n  const visitorPayload = document.querySelector('meta[name=visitor-payload]')\n  if (visitorPayload instanceof HTMLMetaElement) {\n    data['visitorPayload'] = visitorPayload.content\n  }\n  const visitorHmac = document.querySelector('meta[name=visitor-hmac]') || ''\n  if (visitorHmac instanceof HTMLMetaElement) {\n    data['visitorHmac'] = visitorHmac.content\n  }\n\n  sendStats(data, true)\n}\n\nexport function trackView(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-view') || ''\n  const hmac = el.getAttribute('data-hydro-view-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n\nexport function sendHydroEvent(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-click-payload') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n","import type {PageViews} from './page-views'\n\nconst FEATURE_WEIGHTS = {frequency: 0.6, recency: 0.4}\n\nfunction sortBy<T>(items: T[], map: (item: T) => number): T[] {\n  return items.sort((a, b) => map(a) - map(b))\n}\n\ntype Scorer = (pageKey: string) => number\nexport function scorer(pageViews: PageViews): Scorer {\n  const frequencies = frequencyMap(pageViews)\n  const recencies = recencyMap(pageViews)\n  return function (pageKey: string): number {\n    return score(frequencies.get(pageKey) || 0, recencies.get(pageKey) || 0)\n  }\n}\n\nfunction score(frequency: number, recency: number): number {\n  return frequency * FEATURE_WEIGHTS.frequency + recency * FEATURE_WEIGHTS.recency\n}\n\n// Scores a relative frequency in the interval [0, 1] where higher means more frequent.\nfunction frequencyMap(pageViews: PageViews): Map<string, number> {\n  const totalVisits = [...Object.values(pageViews)].reduce((total, view) => total + view.visitCount, 0)\n  return new Map(Object.keys(pageViews).map(pageKey => [pageKey, pageViews[pageKey]!.visitCount / totalVisits]))\n}\n\n// Scores a relative recency value in the interval [0, 1] where higher means more recent.\nfunction recencyMap(pageViews: PageViews): Map<string, number> {\n  const recencyList = sortBy([...Object.keys(pageViews)], key => pageViews[key]!.lastVisitedAt)\n  const totalUniqueVisits = recencyList.length\n  return new Map(recencyList.map((key, index) => [key, (index + 1) / totalUniqueVisits]))\n}\n","import {scorer} from './ranking'\nexport {scorer} from './ranking'\n\ntype PageViewSummary = {\n  lastVisitedAt: number\n  visitCount: number\n}\n\nexport type PageViews = {[page_key: string]: PageViewSummary}\n\nconst TEAM_PAGE_REGEX = /^\\/orgs\\/([a-z0-9-]+)\\/teams\\/([\\w-]+)/\n\n// Of course this list is incomplete, but it should be good enough for the purposes of this prototype.\nconst REPOSITORY_PAGE_REGEXES = [\n  // This will overcount some things, but since every page view is ultimately compared to entities\n  // we can jump to it should be fine. Of course if we ever tried to add users or orgs to this it\n  // would break.\n  /^\\/([^/]+)\\/([^/]+)\\/?$/,\n\n  /^\\/([^/]+)\\/([^/]+)\\/blob/,\n  /^\\/([^/]+)\\/([^/]+)\\/tree/,\n  /^\\/([^/]+)\\/([^/]+)\\/issues/,\n  /^\\/([^/]+)\\/([^/]+)\\/pulls?/,\n  /^\\/([^/]+)\\/([^/]+)\\/pulse/,\n]\n\nconst PROJECT_PAGE_REGEXES = [\n  ['organization', /^\\/orgs\\/([a-z0-9-]+)\\/projects\\/([0-9-]+)/],\n  ['repository', /^\\/([^/]+)\\/([^/]+)\\/projects\\/([0-9-]+)/],\n]\n\nconst MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE = 100\n\nexport function logPageView(path: string) {\n  const teamPageMatch = path.match(TEAM_PAGE_REGEX)\n  if (teamPageMatch) {\n    logPageViewByKey(buildTeamKey(teamPageMatch[1]!, teamPageMatch[2]!))\n    return\n  }\n\n  let projectPageMatch\n  for (let i = 0, len = PROJECT_PAGE_REGEXES.length; i < len; i++) {\n    const [ownerType, projectRegex] = PROJECT_PAGE_REGEXES[i]!\n    projectPageMatch = path.match(projectRegex!)\n    if (projectPageMatch) {\n      let ownerSlug: string | null = null\n      let number: string | null = null\n      switch (ownerType) {\n        case 'organization':\n          ownerSlug = projectPageMatch[1]!\n          number = projectPageMatch[2]!\n          break\n        case 'repository':\n          ownerSlug = `${projectPageMatch[1]}/${projectPageMatch[2]}`\n          number = projectPageMatch[3]!\n          break\n        default:\n        // Should never get here.\n      }\n      if (ownerSlug && number) {\n        logPageViewByKey(buildProjectKey(ownerSlug, number))\n      }\n      return\n    }\n  }\n\n  let repositoryPageMatch\n  for (let i = 0, len = REPOSITORY_PAGE_REGEXES.length; i < len; i++) {\n    repositoryPageMatch = path.match(REPOSITORY_PAGE_REGEXES[i]!)\n    if (repositoryPageMatch) {\n      logPageViewByKey(buildRepositoryKey(repositoryPageMatch[1]!, repositoryPageMatch[2]!))\n      return\n    }\n  }\n}\n\n// Limits localStorage entries to 100 MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE\nfunction limitedPageViews(pageViews: PageViews) {\n  const keys = Object.keys(pageViews)\n  if (keys.length <= MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE) {\n    return pageViews\n  }\n  const scorePage = scorer(pageViews)\n  const ranked = keys.sort((a, b) => scorePage(b) - scorePage(a)).slice(0, MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE / 2)\n  return Object.fromEntries(ranked.map(key => [key, pageViews[key]!]))\n}\n\nfunction logPageViewByKey(key: string) {\n  const views = getPageViewsMap()\n  const now = currentEpochTimeInSeconds()\n  const hit = views[key] || {lastVisitedAt: now, visitCount: 0}\n  hit.visitCount += 1\n  hit.lastVisitedAt = now\n  views[key] = hit\n  setPageViewsMap(limitedPageViews(views))\n}\n\nfunction currentEpochTimeInSeconds(): number {\n  return Math.floor(Date.now() / 1000)\n}\n\nexport function buildTeamKey(organizationLogin: string, teamSlug: string): string {\n  return `team:${organizationLogin}/${teamSlug}`\n}\n\nexport function buildRepositoryKey(ownerLogin: string, name: string): string {\n  return `repository:${ownerLogin}/${name}`\n}\n\nexport function buildProjectKey(ownerSlug: string, number: string): string {\n  return `project:${ownerSlug}/${number}`\n}\n\nconst PAGE_VIEW_KEY_REGEX = /^(team|repository|project):[^/]+\\/[^/]+(\\/([^/]+))?$/\nconst VIEWS_KEY = 'jump_to:page_views'\n\nfunction setPageViewsMap(views: PageViews) {\n  setItem(VIEWS_KEY, JSON.stringify(views))\n}\n\nexport function getPageViewsMap(): PageViews {\n  const rawData = getItem(VIEWS_KEY)\n  if (!rawData) return {}\n\n  let json\n  try {\n    json = JSON.parse(rawData)\n  } catch {\n    // Clear localStorage since we know it's bad\n    setPageViewsMap({})\n    return {}\n  }\n\n  const pageViewMap: PageViews = {}\n  for (const key in json) {\n    if (key.match(PAGE_VIEW_KEY_REGEX)) {\n      pageViewMap[key] = json[key]\n    }\n  }\n  return pageViewMap\n}\n\nfunction setItem(key: string, value: string) {\n  try {\n    window.localStorage.setItem(key, value)\n  } catch {\n    // Storage quota exceeded.\n  }\n}\n\nfunction getItem(key: string): string | null {\n  try {\n    return window.localStorage.getItem(key)\n  } catch {\n    // Storage unavailable.\n    return null\n  }\n}\n","import {getItem, removeItem, setItem} from '@github-ui/safe-storage/session-storage'\n\ntype ShelfReferrerParams = {\n  notification_referrer_id?: string\n  notifications_before?: string\n  notifications_after?: string\n  notifications_query?: string\n}\n\nconst shelfParams: Array<keyof ShelfReferrerParams> = [\n  'notification_referrer_id',\n  'notifications_before',\n  'notifications_after',\n  'notifications_query',\n]\n\nconst sessionStorageKey = 'notification_shelf'\n\n/*\n * Stores url params for the shelf in session storage if present, and returns\n * search params without any shelf params.\n */\nexport function storeAndStripShelfParams(\n  searchParams: URLSearchParams,\n  pathname: string | null = null,\n): URLSearchParams | null {\n  if (searchParams.has('notification_referrer_id')) {\n    storeShelfParams(searchParams, pathname)\n    return deleteShelfParams(searchParams)\n  }\n  return null\n}\n\n/*\n * Loads the shelf params from sessionStorage if they are there and they match\n * the current pull request page, clear them otherwise.\n */\nexport function getStoredShelfParamsForCurrentPage(pathname: string | null = null): ShelfReferrerParams | null {\n  // If the current page is not a pull request, then the stored data will\n  // not match, so clear it and move on.\n  const currentPullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!currentPullRequestPathname) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n\n  try {\n    const str = getItem(sessionStorageKey)\n    if (!str) return null\n\n    const stored = JSON.parse(str)\n    if (!stored || !stored.pathname) throw new Error('Must have a pathname')\n\n    if (stored.pathname !== currentPullRequestPathname) {\n      throw new Error('Stored pathname does not match current pathname.')\n    }\n\n    const result: ShelfReferrerParams = {}\n\n    for (const key of shelfParams) {\n      result[key] = stored[key]\n    }\n\n    return result\n  } catch (e) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n}\n\nfunction storeShelfParams(searchParams: URLSearchParams, pathname: string | null) {\n  const pullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!pullRequestPathname) return\n\n  const params: {[key: string]: string} = {\n    pathname: pullRequestPathname,\n  }\n\n  for (const key of shelfParams) {\n    const value = searchParams.get(key)\n    if (value) params[key] = value\n  }\n\n  setItem(sessionStorageKey, JSON.stringify(params))\n}\n\nfunction deleteShelfParams(searchParams: URLSearchParams): URLSearchParams {\n  for (const key of shelfParams) {\n    searchParams.delete(key)\n  }\n  return searchParams\n}\n\n/*\n * Returns the base pathname of the current page if it's a pull request.\n *\n * `/github/github/pull/123/files` -> `/github/github/pull/123`\n */\nfunction getCurrentPullRequestPathname(pathname: string | null): string | null {\n  pathname = pathname || window.location.pathname\n  const pullRequestPathnameRegex = /^(\\/[^/]+\\/[^/]+\\/pull\\/[^/]+)/\n  const match = pathname.match(pullRequestPathnameRegex)\n  if (!match) return null\n\n  return match[0]\n}\n","/*\n * Applies state updates from a form (e.g. Mark as read/archive/unsubscribe/star) to the element\n * that represents the notification (e.g. The notification item in the list view, or the\n * notification shelf on an Issue page).\n */\nexport function updateNotificationStates(element: HTMLElement, form: HTMLFormElement) {\n  const notification = element.closest<HTMLElement>('[data-notification-id]')!\n\n  // Toggles read/unread/archive status\n  if (form.hasAttribute('data-status')) {\n    toggleNotificationStatus(notification, form.getAttribute('data-status')!)\n  }\n\n  // Toggles subscribed/unsubscribed status\n  if (form.hasAttribute('data-subscription-status')) {\n    toggleNotificationSubscriptionStatus(notification, form.getAttribute('data-subscription-status')!)\n  }\n\n  // Toggles starred/unstarred status\n  if (form.hasAttribute('data-starred-status')) {\n    toggleNotificationStarredStatus(notification, form.getAttribute('data-starred-status')!)\n  }\n}\n\nfunction toggleNotificationStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-archived', status === 'archived')\n  notification.classList.toggle('notification-unread', status === 'unread')\n  notification.classList.toggle('notification-read', status === 'read')\n}\n\nfunction toggleNotificationSubscriptionStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-unsubscribed', status === 'unsubscribed')\n}\n\nfunction toggleNotificationStarredStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-starred', status === 'starred')\n}\n","// More robust version of Range.surroundContents().\nexport function surroundContents(range: Range, newNode: Node) {\n  newNode.appendChild(range.extractContents())\n  range.insertNode(newNode)\n}\n","// Gets the current page's id for persisting fields.\n//\n// The value can be overridden by providing a normalized value in a meta tag.\n//\n//   <meta name=\"session-resume-id\" content=\"/github/github/issues/123\">.\n//\n// Defaults to the current url path.\nexport function getPageID(url?: URL): string {\n  const location = url || window.location\n\n  const metaTag = document.head && document.head.querySelector('meta[name=session-resume-id]')\n  const id = metaTag instanceof HTMLMetaElement && metaTag.content\n\n  return id || location.pathname\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst POLL_WAIT_TIME_MS = 3000\nconst flashClassName = `github-mobile-auth-flash`\n\nfunction addFlashMessage(message: string): void {\n  const template = new TemplateInstance(document.querySelector<HTMLTemplateElement>('template.js-flash-template')!, {\n    className: `flash-error ${flashClassName}`,\n    message,\n  })\n  const node = document.importNode(template, true)\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    removeFlash()\n    flashContainer.appendChild(node)\n  }\n}\n\nfunction removeFlash(): void {\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    // make sure we don't show more than one flash message for github mobile auth at the same time\n    for (const child of flashContainer.children) {\n      if (!child.classList.contains('js-flash-template') && child.classList.contains(flashClassName)) {\n        flashContainer.removeChild(child)\n      }\n    }\n  }\n}\n\nexport function hidePromptAndShowErrorMessage(): void {\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = true\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = false\n  }\n}\n\nexport function resetPrompt(): void {\n  removeFlash()\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = false\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = true\n  }\n}\n\n// the user has approved the mobile request - reload the page which will trigger the redirects\n//\n// token - An optional parameter - only used during the password reset flow\nfunction approvedHandler(token?: string): void {\n  let url\n  if (token) {\n    // during password reset, when the user approves the mobile request, we need to update the url\n    // to use the new SAT token instead of the old SAT token\n    url = new URL(`password_reset/${encodeURIComponent(token)}`, window.location.origin)\n  } else {\n    url = new URL('', window.location.href)\n  }\n\n  url.searchParams.set('redirect', 'true')\n  window.location.assign(url)\n}\n\n// two_factor_login info erased from session - send them back to login form\nfunction rejectedHandler(): void {\n  document.getElementById('github-mobile-rejected-redirect')!.click()\n}\n\nfunction genericHandler(message: string): void {\n  if (message) {\n    addFlashMessage(message)\n  }\n  hidePromptAndShowErrorMessage()\n}\n\nfunction getErrorAndRetryMessage(attributeName: string): string {\n  return document.getElementById('github-mobile-authenticate-error-and-retry')!.getAttribute(attributeName)!\n}\n\nfunction pollMobileAuthRequestStatus(\n  url: RequestInfo,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  return (async function poll(errorCount: number): Promise<void> {\n    if (checkCancelCallback && checkCancelCallback()) {\n      return\n    }\n\n    let status = 'STATUS_UNKNOWN'\n    let token\n    try {\n      const form = document.getElementById('github-mobile-authenticate-form') as HTMLFormElement\n      const csrfInput = form.querySelector('.js-data-url-csrf') as HTMLInputElement\n      const response = await self.fetch(\n        new Request(url, {\n          method: 'POST',\n          body: new FormData(form),\n          mode: 'same-origin',\n          headers: {\n            Accept: 'application/json',\n            'Scoped-CSRF-Token': csrfInput.value,\n            'X-Requested-With': 'XMLHttpRequest',\n          },\n        }),\n      )\n      if (response.ok) {\n        const responseJSON = await response.json()\n        status = responseJSON.status\n        token = responseJSON.token\n      } else {\n        status = 'STATUS_ERROR'\n      }\n    } catch {\n      status = 'STATUS_ERROR'\n    }\n\n    let message\n\n    switch (status) {\n      case 'STATUS_APPROVED':\n        // stop polling and handle approved case specifically\n        return successCallback ? successCallback() : approvedHandler(token)\n      case 'STATUS_EXPIRED':\n        // stop polling and handle expired case specifically\n        message = getErrorAndRetryMessage('timeout-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n      case 'STATUS_ACTIVE':\n      case 'STATUS_ERROR':\n      case 'STATUS_UNKNOWN':\n        // keep polling\n        break\n      case 'STATUS_REJECTED':\n        // stop polling and handle rejected case specifically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : rejectedHandler()\n      case 'STATUS_NOT_FOUND': // not expected, we shouldn't reach the poller if this is the case\n      case 'STATUS_UNSUPPORTED': // not expected, we shouldn't reach the poller if this is the case\n      default:\n        // stop polling and handle these cases generically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n    }\n\n    // wait between polls\n    await new Promise(resolve => setTimeout(resolve, POLL_WAIT_TIME_MS))\n    poll(errorCount)\n  })(0)\n}\n\nexport async function initializeMobileAuthRequestStatusPoll(\n  el: Element,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  try {\n    await pollMobileAuthRequestStatus(\n      el.getAttribute('data-poll-url')!,\n      successCallback,\n      failCallback,\n      checkCancelCallback,\n    )\n  } catch (e) {\n    // if an error was thrown that we didn't handle properly in the poller\n    // we need to make sure to still update the UI in a meaningful way\n    const message = getErrorAndRetryMessage('error-flash')\n    return genericHandler(message)\n  }\n}\n\nobserve('.js-poll-github-mobile-two-factor-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-verified-device-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-two-factor-password-reset-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n","import {onInput} from '../onfocus'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nexport function smsSending() {\n  document.body.classList.add('is-sending')\n  document.body.classList.remove('is-sent', 'is-not-sent')\n}\n\nexport function smsSuccess() {\n  document.body.classList.add('is-sent')\n  document.body.classList.remove('is-sending')\n}\n\nfunction smsError(message: string) {\n  if (message) {\n    document.querySelector<HTMLElement>('.js-sms-error')!.textContent = message\n  }\n  document.body.classList.add('is-not-sent')\n  document.body.classList.remove('is-sending')\n}\n\nremoteForm('.js-send-auth-code', async (form, wants) => {\n  smsSending()\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    smsError(error.response.text)\n  }\n  if (response) {\n    smsSuccess()\n  }\n})\n\nremoteForm('.js-two-factor-set-sms-fallback', async (form, wants) => {\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    const pane1 = form.querySelector<HTMLElement>('.js-configure-sms-fallback')!\n    const pane2 = form.querySelector<HTMLElement>('.js-verify-sms-fallback')!\n    const pane = pane1.hidden ? pane2 : pane1\n    const flash = pane.querySelector<HTMLElement>('.flash')!\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 404:\n      case 422:\n      case 429:\n        // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n        flash.textContent = JSON.parse(error.response.text).error\n        flash.hidden = false\n    }\n  }\n  if (response) {\n    switch (response.status) {\n      case 200:\n      case 201:\n        window.location.reload()\n        break\n      case 202:\n        form.querySelector<HTMLElement>('.js-configure-sms-fallback')!.hidden = true\n        form.querySelector<HTMLElement>('.js-verify-sms-fallback')!.hidden = false\n        form.querySelector<HTMLElement>('.js-fallback-otp')!.focus()\n        break\n    }\n  }\n})\n\nonInput('.js-verification-code-input-auto-submit', function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const pattern = target.pattern || '[0-9]{6}'\n  if (new RegExp(`^(${pattern})$`).test(target.value)) {\n    requestSubmit(target.form!)\n  }\n})\n","import {dialog} from './details-dialog'\nimport {fetchSafeDocumentFragment} from './fetch'\nimport {remoteForm, Kicker} from '@github/remote-form'\nimport {webauthnSupportLevel} from './webauthn-support-level'\n\nlet sudoPromptExist = false\n\n/**\n * Take a URL and add webauthn params to it.\n *\n * @param {string} oldURL - The old URL.\n * @returns {string} - The new URL with added params.\n */\nfunction urlWithParams(oldURL: string): string {\n  const newURL = new URL(oldURL, window.location.origin)\n  const params = new URLSearchParams(newURL.search.slice(1))\n  params.set('webauthn-support', webauthnSupportLevel())\n  newURL.search = params.toString()\n  return newURL.toString()\n}\n\nasync function loadPromptTemplate(): Promise<HTMLTemplateElement> {\n  const link = document.querySelector<HTMLLinkElement>('link[rel=sudo-modal]')!\n  const template = document.querySelector('.js-sudo-prompt')\n  if (template instanceof HTMLTemplateElement) {\n    return template\n  } else if (link) {\n    const fragment = await fetchSafeDocumentFragment(document, urlWithParams(link.href))\n    document.body.appendChild(fragment)\n    return document.querySelector<HTMLTemplateElement>('.js-sudo-prompt')!\n  } else {\n    throw new Error(\"couldn't load sudo prompt\")\n  }\n}\n\nlet succeeded = false\n\n/**\n * Provide a sudo prompt, and return when it has been filled in or dismissed.\n *\n * @returns {Promise<boolean>} - Resolves to `true` if the user successfully authed with sudo.\n */\nasync function sudoPrompt(): Promise<boolean> {\n  if (sudoPromptExist) return false\n  sudoPromptExist = true\n  succeeded = false\n  const template = await loadPromptTemplate()\n  const content = template.content.cloneNode(true)\n  const prompt = await dialog({content})\n  await new Promise<void>(resolve => {\n    prompt.addEventListener(\n      'dialog:remove',\n      function () {\n        sudoPromptExist = false\n        resolve()\n      },\n      {once: true},\n    )\n  })\n  return succeeded\n}\n\nasync function sudoModalErrorOrClose(\n  form: HTMLFormElement,\n  wants: Kicker,\n  unauthorizedError = 'Sudo authentication failed.',\n  tooManyError = 'Too many authentication attemtps. Please try again later.',\n  errorSelector = '.js-sudo-error',\n  inputElementSelector?: string,\n) {\n  try {\n    await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (!error.response) throw error\n    let errorMessage\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 401:\n        errorMessage = unauthorizedError\n        break\n      case 429:\n        errorMessage = tooManyError\n        break\n      default:\n        // eslint-disable-next-line i18n-text/no-en\n        errorMessage = 'An unknown error occurred. Please try again later.'\n    }\n\n    form.querySelector<HTMLElement>(errorSelector)!.textContent = errorMessage\n    form.querySelector<HTMLElement>(errorSelector)!.hidden = false\n    if (inputElementSelector) {\n      form.querySelector<HTMLInputElement>(inputElementSelector)!.value = ''\n    }\n\n    // rethrow error if not expected, only after surfacing it in flash\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.status !== 401 && error.response.status !== 429) {\n      throw error\n    }\n\n    return\n  }\n  succeeded = true\n  form.closest<HTMLElement>('details')!.removeAttribute('open')\n}\n\nremoteForm('.js-sudo-webauthn-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants)\n})\n\nremoteForm('.js-sudo-github-mobile-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants)\n})\n\nremoteForm('.js-sudo-totp-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants, undefined, undefined, '.flash-error', '#totp')\n})\n\nremoteForm('.js-sudo-password-form', async function (form, wants) {\n  await sudoModalErrorOrClose(\n    form,\n    wants,\n    // eslint-disable-next-line i18n-text/no-en\n    'Incorrect password.',\n    // eslint-disable-next-line i18n-text/no-en\n    'Too many password attempts. Please wait and try again.',\n    undefined,\n    '.js-sudo-password',\n  )\n})\n\n/**\n * Check if user is in sudo mode. If not, show a sudo prompt.\n *\n * @returns {Promise<boolean>} - Will be `true` if user is in or got in sudo mode after prompt.\n */\nexport default async function triggerSudoPrompt(): Promise<boolean> {\n  const response = await fetch('/sessions/in_sudo', {\n    headers: {accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  if (response.ok) {\n    const sudoResponse = await response.text()\n    if (sudoResponse === 'true') {\n      return true\n    } else {\n      return sudoPrompt()\n    }\n  }\n  return sudoPrompt()\n}\n","// Gets the length of code-points from a String.\n//\n// This is different to `string.length` which returns the amount of utf-8\n// bytes, which is a different metric as - for example - the poo emoji is 2\n// utf-8 bytes, but 1 unicode code point.\n//\n// See http://blog.jonnew.com/posts/poo-dot-length-equals-two for more.\nexport function getUtf8StringLength(str: string): number {\n  const joiner = '\\u200D'\n  const split = str.split(joiner)\n  let count = 0\n\n  for (const s of split) {\n    // removing the variation selectors\n    const num = Array.from(s.split(/[\\ufe00-\\ufe0f]/).join('')).length\n    count += num\n  }\n\n  // assuming the joiners are used appropriately\n  return count / split.length\n}\n/**\n * Replace text in a textarea with a new string and\n * place the cursor at the selectionEnd position.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @param isFocused whether the textarea is currently in focus\n * @returns The new text\n */\nexport function replaceText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n  isFocused = true,\n): string {\n  let beginning = textarea.value.substring(0, textarea.selectionEnd || 0)\n  let remaining = textarea.value.substring(textarea.selectionEnd || 0)\n  beginning = beginning.replace(oldText, newText)\n  remaining = remaining.replace(oldText, newText)\n\n  setTextareaValueAndCursor(textarea, beginning + remaining, beginning.length, isFocused)\n\n  return newText\n}\n\n/**\n * Replace selected text in a textarea with a new string.\n * If the selection is empty, the old text is replaced by the\n * new text in the whole textarea.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @returns The new text\n */\nexport function replaceSelection(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n): string {\n  if (textarea.selectionStart === null || textarea.selectionEnd === null) {\n    return replaceText(textarea, oldText, newText)\n  }\n  const beginning = textarea.value.substring(0, textarea.selectionStart)\n  const remaining = textarea.value.substring(textarea.selectionEnd)\n\n  setTextareaValueAndCursor(textarea, beginning + newText + remaining, beginning.length)\n\n  return newText\n}\n\ntype InsertOptions = {\n  appendNewline?: boolean\n}\n/**\n * Inserts text into a text input and moves the cursor appropriately.\n * If the cursor happens to be in the middle of a line, or the textarea isn't empty,\n * we add a newline character before the inserted text. We also advance the cursor\n * appropriately\n * @param textarea an `<input>` or `<textarea>` element\n * @param text The text to add\n * @param appendNewline optionally adds a `\\n` character after `text`\n */\nexport function insertText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  text: string,\n  options: InsertOptions = {},\n): string {\n  const point = textarea.selectionEnd || 0\n  const beginning = textarea.value.substring(0, point)\n  const remaining = textarea.value.substring(point)\n  const newline = textarea.value === '' || beginning.match(/\\n$/) ? '' : '\\n'\n  const trailingNewline = options.appendNewline ? '\\n' : ''\n  const insertedText = newline + text + trailingNewline\n\n  textarea.value = beginning + insertedText + remaining\n  const newPoint = point + insertedText.length\n  textarea.selectionStart = newPoint\n  textarea.selectionEnd = newPoint\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n  textarea.focus()\n  return insertedText\n}\n\n/**\n * Helper function to set the value of a textarea and move the cursor to a given position.\n * Emits a `change` event.\n * @param textarea an `<input>` or `<textarea>` element\n * @param value The new value\n * @param cursor The position to move the cursor to\n * @param isFocused whether the textarea is currently in focus\n */\nfunction setTextareaValueAndCursor(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  value: string,\n  cursor: number,\n  isFocused = true,\n) {\n  textarea.value = value\n\n  if (isFocused) {\n    textarea.selectionStart = cursor\n    textarea.selectionEnd = cursor\n  }\n\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n}\n\n// Returns the character index for a given byte position, taking character encoding into account\n// Example usage for this method: highlighing text in a textarea that may contain non-UTF8 characters\n//\n// For context, in Javascript, strings are UTF16. However, Codemirror uses simple Javascript\n// indexing, that isn't Unicode aware. This leads to incorrect highlighting.\n//\n// For example, '' is represented as 4 bytes. In Javascript, it has length 2\n// and is composed of a surrogate pair (2 code points). ''.length is 2.\n// Given text string such as 'hello  world', this would be represented in hex as:\n// \n// 00000000 68 65 6c 6c 6f 20 f0 9f  92 a9 20 77 6f 72 6c 64 hello  world\n// \n// The string 'world' appears at byte positions (11, 16), but in Javascript `str.slice(11, 16)` returns 'rld'.\n// The correct position in Javascript, and codemirror, would be: (9, 14).\n//\n// When encoded using `TextEncoder#encodeInto` with '', we'd get an object with\n// the following properties: {written: 4, read: 2}. This discrepancy informs us\n// that we need to offset the start and end positions by 2.\nexport function GetCharIndexFromBytePosition(str: string, pos: number): number {\n  // The string iterator [...str] is unicode aware, and allows us to correctly\n  // iterate over each grapheme in the string. Iterating over `str[i]` would\n  // not work, as it separates the astral symbol into each of its surrogates.\n  const contents = [...str]\n  const encoder = new TextEncoder()\n\n  // Astral code points in Javascript are a surrogate pair of 2 UTF16 code units, or 4 bytes\n  const u8array = new Uint8Array(4)\n\n  for (let i = 0; i < contents.length; i++) {\n    const char = contents[i]!\n    const {written, read} = encoder.encodeInto(char, u8array)!\n    if (!written || !read) {\n      return -1\n    }\n    const diff = written - read\n    if (diff === 0) {\n      continue\n    }\n\n    if (i < pos) {\n      pos -= diff\n    }\n\n    if (i >= pos) {\n      break\n    }\n  }\n\n  return pos\n}\n","type TextField = HTMLInputElement | HTMLTextAreaElement\n\n/**\n * Throttled Input event.\n *\n * Delays firing `input` event until user is done typing.\n *\n * Details.\n *\n * Never fires while a key is down, waits for the next keyup.\n *   NOTE: Native OSX text fields won't repeat keys. FF will repeat key while held down.\n *\n * Never fires for selection changes (pressing left or right keys to move the cursor).\n */\n\nconst throttledInputEvents: WeakMap<\n  HTMLElement,\n  {\n    keypressed: boolean\n    inputed: boolean\n    timer: number | null | undefined\n    listener: ThrottledHandler\n    wait: number\n  }\n> = new WeakMap()\n\nfunction schedule(element: TextField) {\n  const events = throttledInputEvents.get(element)\n  if (!events) return\n  if (events.timer != null) clearTimeout(events.timer)\n\n  events.timer = window.setTimeout(() => {\n    if (events.timer != null) events.timer = null\n    events.inputed = false\n    events.listener.call(null, element)\n  }, events.wait)\n}\n\nfunction onKeydownInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = true\n  if (events.timer != null) {\n    clearTimeout(events.timer)\n  }\n}\n\nfunction onKeyupInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = false\n  if (events.inputed) {\n    schedule(currentTarget)\n  }\n}\n\nfunction onInputInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.inputed = true\n  if (!events.keypressed) {\n    schedule(currentTarget)\n  }\n}\n\ntype ThrottledHandler = (arg0: TextField) => unknown\n\nexport function addThrottledInputEventListener(\n  target: TextField,\n  listener: ThrottledHandler,\n  options: {wait: number | null} = {wait: null},\n) {\n  throttledInputEvents.set(target, {\n    keypressed: false,\n    inputed: false,\n    timer: undefined,\n    listener,\n    wait: options.wait != null ? options.wait : 100,\n  })\n\n  target.addEventListener('keydown', onKeydownInput)\n  target.addEventListener('keyup', onKeyupInput)\n  target.addEventListener('input', onInputInput)\n}\n\nexport function removeThrottledInputEventListener(target: TextField, listener: ThrottledHandler) {\n  target.removeEventListener('keydown', onKeydownInput)\n  target.removeEventListener('keyup', onKeyupInput)\n  target.removeEventListener('input', onInputInput)\n\n  const events = throttledInputEvents.get(target)\n  if (events) {\n    if (events.timer != null && events.listener === listener) {\n      clearTimeout(events.timer)\n    }\n    throttledInputEvents.delete(target)\n  }\n}\n\nexport function dispatchThrottledInputEvent(target: TextField) {\n  const events = throttledInputEvents.get(target)\n  if (events) events.listener.call(null, target)\n}\n","// Due to the way `visible` is implemented, it causes the browser to\n// perform a full page reflow, it lays out all elements again, when called. This\n// is one of the most time consuming operations the browser can perform, so it\n// affects perceived page load times.\n//\n// The preferred way to determine element visibility is check for the presence\n// of the `hidden` attribute: `if (el.hidden) ...` and `el.hidden = false`.\n//\n// More info: https://github.com/github/eslint-plugin-github/blob/master/docs/rules/no-d-none.md.\n//\n// We would ideally like to remove the `visible` function and consistently\n// use the `hidden` attribute.\n//\n// Returns true if the element is hidden.\nfunction hidden(element: HTMLElement): boolean {\n  return element.offsetWidth <= 0 && element.offsetHeight <= 0\n}\n\nexport default function visible(element: HTMLElement): boolean {\n  return !hidden(element)\n}\n","import {supported as webauthnSupported} from '@github/webauthn-json/browser-ponyfill'\n\n// Note: the default feedback value stored in the form is 'unknown', but that\n// should not be used unless the JS fails to run.\ntype WebauthnSupportLevel = 'supported' | 'unsupported'\n\n// Calculates a string value to send to the server.\nexport function webauthnSupportLevel(): WebauthnSupportLevel {\n  return webauthnSupported() ? 'supported' : 'unsupported'\n}\n\n// Calculates a string value to send to the server.\nexport async function iuvpaaSupportLevel(): Promise<WebauthnSupportLevel> {\n  if (await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()) {\n    return 'supported'\n  }\n  return 'unsupported'\n}\n","import type {AliveEvent, MetadataUpdate, Notifier, Subscription} from '@github/alive-client'\nimport {PresenceMetadataSet, SubscriptionSet, isPresenceChannel} from '@github/alive-client'\nimport {AliveSession} from './session'\nimport {debounce} from '@github/mini-throttle'\nimport {ready} from '@github-ui/document-ready'\nimport safeStorage from '@github-ui/safe-storage'\nimport {workerSrcRelPolicy, SourceRelNotFoundError} from '@github-ui/trusted-types-policies/worker-src-rel'\n\nexport interface Dispatchable {\n  dispatchEvent: (e: Event) => unknown\n}\n\nfunction isSharedWorkerSupported(): boolean {\n  return 'SharedWorker' in window && safeStorage('localStorage').getItem('bypassSharedWorker') !== 'true'\n}\n\nfunction workerSrc(): string | null {\n  try {\n    return workerSrcRelPolicy.createScriptURL('shared-web-socket-src')\n  } catch (e) {\n    if (e instanceof SourceRelNotFoundError) {\n      return null\n    }\n    throw e\n  }\n}\n\nfunction socketUrl(): string | null {\n  return document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.href ?? null\n}\n\nfunction socketRefreshUrl(): string | null {\n  return (\n    document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.getAttribute('data-refresh-url') ??\n    null\n  )\n}\n\nfunction sessionIdentifier(): string | null {\n  return (\n    document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.getAttribute('data-session-id') ?? null\n  )\n}\n\nfunction notify(subscribers: Iterable<Dispatchable>, {channel, type, data}: AliveEvent) {\n  for (const el of subscribers) {\n    el.dispatchEvent(\n      new CustomEvent(`socket:${type}`, {\n        bubbles: false,\n        cancelable: false,\n        detail: {name: channel, data},\n      }),\n    )\n  }\n}\n\nclass AliveSessionProxy {\n  private worker: SharedWorker\n  private subscriptions = new SubscriptionSet<Dispatchable>()\n  private presenceMetadata = new PresenceMetadataSet<Dispatchable>()\n  private notify: Notifier<Dispatchable>\n\n  constructor(src: string, url: string, refreshUrl: string, sessionId: string, notifier: Notifier<Dispatchable>) {\n    this.notify = notifier\n    // eslint-disable-next-line ssr-friendly/no-dom-globals-in-constructor\n    this.worker = new SharedWorker(src, `github-socket-worker-v2-${sessionId}`)\n    this.worker.port.onmessage = ({data}) => this.receive(data)\n    this.worker.port.postMessage({connect: {url, refreshUrl}})\n  }\n\n  subscribe(subs: Array<Subscription<Dispatchable>>) {\n    const added = this.subscriptions.add(...subs)\n    if (added.length) {\n      this.worker.port.postMessage({subscribe: added})\n    }\n\n    // We may be adding a subscription to a presence channel which is already subscribed.\n    // In this case, we need to explicitly ask the SharedWorker to send us the presence data.\n    const addedChannels = new Set(added.map(topic => topic.name))\n    const redundantPresenceChannels = subs.reduce((redundantChannels, subscription) => {\n      const channel = subscription.topic.name\n\n      if (isPresenceChannel(channel) && !addedChannels.has(channel)) {\n        redundantChannels.add(channel)\n      }\n\n      return redundantChannels\n    }, new Set<string>())\n\n    if (redundantPresenceChannels.size) {\n      this.worker.port.postMessage({requestPresence: Array.from(redundantPresenceChannels)})\n    }\n  }\n\n  unsubscribeAll(...subscribers: Dispatchable[]) {\n    const removed = this.subscriptions.drain(...subscribers)\n    if (removed.length) {\n      this.worker.port.postMessage({unsubscribe: removed})\n    }\n\n    const updatedPresenceChannels = this.presenceMetadata.removeSubscribers(subscribers)\n    this.sendPresenceMetadataUpdate(updatedPresenceChannels)\n  }\n\n  updatePresenceMetadata(metadataUpdates: Array<MetadataUpdate<Dispatchable>>) {\n    const updatedChannels = new Set<string>()\n\n    for (const update of metadataUpdates) {\n      // update the local metadata for this specific element\n      this.presenceMetadata.setMetadata(update)\n      updatedChannels.add(update.channelName)\n    }\n\n    // Send the full local metadata for these channels to the SharedWorker\n    this.sendPresenceMetadataUpdate(updatedChannels)\n  }\n\n  sendPresenceMetadataUpdate(channelNames: Set<string>) {\n    if (!channelNames.size) {\n      return\n    }\n\n    const updatesForSharedWorker: Array<Omit<MetadataUpdate<Element>, 'subscriber'>> = []\n\n    for (const channelName of channelNames) {\n      // get all metadata for this channel (from all elements) to send to the SharedWorker\n      updatesForSharedWorker.push({\n        channelName,\n        metadata: this.presenceMetadata.getChannelMetadata(channelName),\n      })\n    }\n\n    // Send the full metadata updates to the SharedWorker\n    this.worker.port.postMessage({updatePresenceMetadata: updatesForSharedWorker})\n  }\n\n  online() {\n    this.worker.port.postMessage({online: true})\n  }\n\n  offline() {\n    this.worker.port.postMessage({online: false})\n  }\n\n  hangup() {\n    this.worker.port.postMessage({hangup: true})\n  }\n\n  private notifyPresenceDebouncedByChannel = new Map<string, Notifier<Dispatchable>>()\n  private receive(event: AliveEvent) {\n    const {channel} = event\n\n    if (event.type === 'presence') {\n      // There are times when we get a flood of messages from the SharedWorker, such as a tab that has been idle for a long time and then comes back to the foreground.\n      // Since each presence message for a channel contains the full list of users, we can debounce the events and only notify subscribers with the last one\n      let debouncedNotify = this.notifyPresenceDebouncedByChannel.get(channel)\n      if (!debouncedNotify) {\n        debouncedNotify = debounce((subscribers, debouncedEvent) => {\n          this.notify(subscribers, debouncedEvent)\n          this.notifyPresenceDebouncedByChannel.delete(channel)\n        }, 100)\n        this.notifyPresenceDebouncedByChannel.set(channel, debouncedNotify)\n      }\n\n      debouncedNotify(this.subscriptions.subscribers(channel), event)\n      return\n    }\n\n    // For non-presence messages, we can send them through immediately since they may contain different messages/data\n    this.notify(this.subscriptions.subscribers(channel), event)\n  }\n}\n\nasync function connect() {\n  const src = workerSrc()\n  if (!src) return\n\n  const url = socketUrl()\n  if (!url) return\n\n  const refreshUrl = socketRefreshUrl()\n  if (!refreshUrl) return\n\n  const sessionId = sessionIdentifier()\n  if (!sessionId) return\n\n  const createSession = () => {\n    if (isSharedWorkerSupported()) {\n      try {\n        return new AliveSessionProxy(src, url, refreshUrl, sessionId, notify)\n      } catch (_) {\n        // ignore errors.  CSP will some times block SharedWorker creation. Fall back to standard AliveSession.\n      }\n    }\n\n    return new AliveSession(url, refreshUrl, false, notify)\n  }\n  const session = createSession()\n\n  window.addEventListener('online', () => session.online())\n  window.addEventListener('offline', () => session.offline())\n  window.addEventListener('pagehide', () => {\n    if ('hangup' in session) session.hangup()\n  })\n\n  return session\n}\n\nasync function connectWhenReady() {\n  await ready\n  return connect()\n}\n\nlet sessionPromise: undefined | ReturnType<typeof connectWhenReady>\n\nexport function getSession() {\n  return (sessionPromise ||= connectWhenReady())\n}\n","import {AliveSession as BaseAliveSession} from '@github/alive-client'\nimport type {Notifier} from '@github/alive-client'\nexport class AliveSession<T> extends BaseAliveSession<T> {\n  constructor(url: string, private refreshUrl: string, shared: boolean, notify: Notifier<T>) {\n    super(url, () => this.getUrlFromRefreshUrl(), shared, notify)\n  }\n\n  private getUrlFromRefreshUrl() {\n    return fetchRefreshUrl(this.refreshUrl)\n  }\n}\n\ntype PostUrl = {url?: string; token?: string}\nasync function fetchRefreshUrl(url: string): Promise<string | null> {\n  const data = await fetchJSON<PostUrl>(url)\n  return data && data.url && data.token ? post(data.url, data.token) : null\n}\n\nasync function fetchJSON<T>(url: string): Promise<T | null> {\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  if (response.ok) {\n    return response.json()\n  } else if (response.status === 404) {\n    return null\n  } else {\n    throw new Error('fetch error')\n  }\n}\n\nasync function post(url: string, csrf: string): Promise<string> {\n  const response = await fetch(url, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': csrf,\n    },\n  })\n  if (response.ok) {\n    return response.text()\n  } else {\n    throw new Error('fetch error')\n  }\n}\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\n\nexport class SourceRelNotFoundError extends Error {}\nexport const workerSrcRelPolicy = ghTrustedTypes.createPolicy('worker-src-rel', {\n  createScriptURL: (rel: string) => {\n    if (!rel.match(/[A-Za-z0-9-]+/)) {\n      throw new Error('Invalid rel')\n    }\n    const href = document.head.querySelector<HTMLLinkElement>(`link[rel=${rel}]`)?.href\n    if (!href) {\n      throw new SourceRelNotFoundError('No href found for rel')\n    }\n    return href\n  },\n})\n","let allowUserContentScrolling = true\n\nexport function setUserContentScrolling(setting: boolean) {\n  allowUserContentScrolling = setting\n}\n\nexport function getUserContentScrolling() {\n  return allowUserContentScrolling\n}\n","function queryLast<T extends Element>(selector: string): T | undefined {\n  const list = document.querySelectorAll<T>(selector)\n  if (list.length > 0) {\n    return list[list.length - 1]\n  }\n}\n\nfunction pagePathname() {\n  const locationOverride = queryLast<HTMLMetaElement>('meta[name=analytics-location]')\n  if (locationOverride) {\n    return locationOverride.content\n  } else {\n    return window.location.pathname\n  }\n}\n\nfunction pageQuery() {\n  const stripParams = queryLast<HTMLMetaElement>('meta[name=analytics-location-query-strip]')\n  let search = ''\n\n  if (!stripParams) {\n    search = window.location.search\n  }\n\n  const extraParams = queryLast<HTMLMetaElement>('meta[name=analytics-location-params]')\n  if (extraParams) {\n    search += (search ? '&' : '?') + extraParams.content\n  }\n\n  for (const meta of document.querySelectorAll<HTMLMetaElement>('meta[name=analytics-param-rename]')) {\n    const names = meta.content.split(':', 2)\n    search = search.replace(new RegExp(`(^|[?&])${names[0]}($|=)`, 'g'), `$1${names[1]}$2`)\n  }\n\n  return search\n}\n\nexport function requestUri() {\n  return `${window.location.protocol}//${window.location.host}${pagePathname() + pageQuery()}`\n}\n","import {announce} from '@github-ui/aria-live'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\n\nexport function setTitle(title: string) {\n  if (!ssrSafeDocument) return\n\n  const newTitle = ssrSafeDocument.createElement('title')\n  newTitle.textContent = title\n\n  const oldTitle = ssrSafeDocument.querySelector('title')\n\n  if (oldTitle) {\n    oldTitle.replaceWith(newTitle)\n  } else {\n    ssrSafeDocument.head.appendChild(newTitle)\n  }\n\n  announce(title)\n}\n","// This is a simple function that just returns Promise.resolve() It is used in instances when we want to queue a\n// microtask before moving onto the next operation, but want to do so in a very explicit manner: `await microtask`\n// looks a lot clearer in intent than `await void 0` or `await Promise.resolve()`.\n//\n// You would want to use `await microtask()` if you have something that needs to be done very urgently, but still\n// needs to be done asynchronously. This will _not_ yield to the browser for any UI updates or wait for idle, instead\n// it queues a task in the \"microtask\" which is run immediately after the current stack. Use this sparingly. This\n// will likely delay subsequent code for 0-10ms.\nexport function microtask(): Promise<void> {\n  return Promise.resolve()\n}\n\n// This function simply Promisifies requestAnimationFrame so it is awaitable.\n//\n// You would want to use `await animationFrame()` if you're happy to yield to the browser to complete any UI updates\n// before calling your next piece of code. This is useful if - for example - you need to wait for scroll events,\n// or CSS transitions or something. This will likely delay subsequent code for 16ms or so - much longer (30-60ms)\n// if the tab is not focussed.\nexport function animationFrame(): Promise<number> {\n  return new Promise(window.requestAnimationFrame)\n}\n\n// Rejects a promise after a timeout has elapsed. The promise is never\n// successfully fulfilled.\n//\n// Examples\n//\n//   try {\n//     const value = await Promise.race([timeout(100), somethingSlow()])\n//     console.log('Slow operation finished within the timeout', value)\n//   } catch (e) {\n//     console.log('Slow operation did not finish', e)\n//   }\n//\n// Returns a rejected Promise rejected after a timeout.\nexport async function timeout(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>((resolve, reject) => {\n    id = self.setTimeout(() => reject(new Error('timeout')), ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\n// Fulfills a promise after a timeout has elapsed. The promise is never rejected.\n//\n// Examples\n//\n//   step1()\n//   await wait(100)\n//   step2()\n//\n// Returns a Promise fulfilled after a timeout.\nexport async function wait(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>(resolve => {\n    id = self.setTimeout(resolve, ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\nfunction whenAborted(signal: AbortSignal): Promise<never> {\n  return new Promise((resolve, reject) => {\n    const error = new Error('aborted')\n    error.name = 'AbortError'\n    if (signal.aborted) {\n      reject(error)\n    } else {\n      signal.addEventListener('abort', () => reject(error))\n    }\n  })\n}\n\nexport function taskQueue<T>(fn: (values: T[]) => unknown): (value: T) => void {\n  const queue: T[] = []\n  return function (value: T) {\n    queue.push(value)\n    if (queue.length === 1) {\n      queueMicrotask(() => {\n        const values = queue.slice(0)\n        queue.length = 0\n        fn(values)\n      })\n    }\n  }\n}\n","// Report uncaught JS errors to Sentry\n//   https://sentry.io/github/github-js\n\nimport {getOrCreateClientId} from '@github/hydro-analytics-client'\nimport {isSupported} from '@github/browser-support'\nimport {parse} from 'stacktrace-parser'\nimport {requestUri} from '@github-ui/analytics-overrides'\nimport {getSoftNavReferrer} from '@github-ui/soft-nav'\nimport {bundler} from '@github-ui/runtime-environment'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\n\nlet extensionErrors = false\nlet errorsReported = 0\nconst loadTime = Date.now()\n\ntype ErrorContext = {\n  message?: string\n}\n\nfunction isExpectedError(error: Error): boolean {\n  // We use AbortController to control events and some workflows. When we call `abort()` on it, it will raise an\n  // `AbortError` which doesn't represent a real error, so we don't want to report it.\n  if (error.name === 'AbortError') return true\n  // Failed to fetch errors are usually related to the user's network connection. They also do not represent\n  // real errors related to our code, so we will also ignore them.\n  if (error.name === 'TypeError' && error.message === 'Failed to fetch') return true\n\n  return false\n}\n\n// @deprecated Re-throw the caught exception instead.\nexport function reportError(error: Error, context: ErrorContext = {}) {\n  if (!isExpectedError(error)) {\n    report(errorContext(formatError(error), context))\n  }\n}\n\n// Report context info to Sentry.\nasync function report(context: PlatformReportBrowserErrorInput) {\n  if (!reportable()) return\n\n  const url = document.head?.querySelector<HTMLMetaElement>('meta[name=\"browser-errors-url\"]')?.content\n  if (!url) return\n\n  if (isExtensionError(context.error.stacktrace)) {\n    extensionErrors = true\n    return\n  }\n\n  errorsReported++\n\n  try {\n    await fetch(url, {method: 'post', body: JSON.stringify(context)})\n  } catch {\n    // Error reporting failed so do nothing.\n  }\n}\n\nfunction formatError(error: Error): PlatformJavascriptError {\n  return {type: error.name, value: error.message, stacktrace: stacktrace(error)}\n}\n\nfunction errorContext(error: PlatformJavascriptError, context: ErrorContext = {}): PlatformReportBrowserErrorInput {\n  return Object.assign(\n    {\n      error,\n      sanitizedUrl: requestUri() || window.location.href,\n      readyState: document.readyState,\n      referrer: getSoftNavReferrer(),\n      timeSinceLoad: Math.round(Date.now() - loadTime),\n      user: pageUser() || undefined,\n      bundler,\n      ui: Boolean(document.querySelector('meta[name=\"ui\"]')),\n    },\n    context,\n  )\n}\n\nexport function stacktrace(error: Error): PlatformStackframe[] {\n  return parse(error.stack || '').map(frame => ({\n    filename: frame.file || '',\n    function: String(frame.methodName),\n    lineno: (frame.lineNumber || 0).toString(),\n    colno: (frame.column || 0).toString(),\n  }))\n}\n\nconst extensions = /(chrome|moz|safari)-extension:\\/\\//\n\n// Does this stack trace contain frames from browser extensions?\nfunction isExtensionError(stack: PlatformStackframe[]): boolean {\n  return stack.some(frame => extensions.test(frame.filename) || extensions.test(frame.function))\n}\n\nexport function pageUser() {\n  const login = document.head?.querySelector<HTMLMetaElement>('meta[name=\"user-login\"]')?.content\n  if (login) return login\n\n  const clientId = getOrCreateClientId()\n  return `anonymous-${clientId}`\n}\n\nlet unloaded = false\nssrSafeWindow?.addEventListener('pageshow', () => (unloaded = false))\nssrSafeWindow?.addEventListener('pagehide', () => (unloaded = true))\n\nfunction reportable() {\n  return !unloaded && !extensionErrors && errorsReported < 10 && isSupported()\n}\n\nif (typeof BroadcastChannel === 'function') {\n  const sharedWorkerErrorChannel = new BroadcastChannel('shared-worker-error')\n  sharedWorkerErrorChannel.addEventListener('message', event => {\n    // SharedWorker will emit a formatted error\n    reportError(event.data.error)\n  })\n}\n","import memoize from '@github/memoize'\n\nconst features = memoize(enabledFeatures)\n\nfunction enabledFeatures(): string[] {\n  return (document.head?.querySelector<HTMLMetaElement>('meta[name=\"enabled-features\"]')?.content || '').split(',')\n}\n\nconst isFeatureEnabled = memoize(isEnabled)\n\nfunction isEnabled(name: string): boolean {\n  return features().indexOf(name) !== -1\n}\n\nexport {isFeatureEnabled}\n\n//exported to allow mocking in tests\nconst featureFlag = {isFeatureEnabled}\n\nexport {featureFlag}\n","import {AnalyticsClient, getOptionsFromMeta} from '@github/hydro-analytics-client'\nimport type {Context} from '@github/hydro-analytics-client'\nimport safeStorage from '@github-ui/safe-storage'\nimport {isStaff} from '@github-ui/stats'\nconst {getItem} = safeStorage('localStorage')\n\ndeclare const process: {\n  env: {\n    NODE_ENV: string\n  }\n}\n\nconst dimensionPrefix = 'dimension_'\nlet hydroAnalyticsClient: AnalyticsClient | undefined\n\nconst MARKETING_PARAMS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'scid']\n\ntry {\n  const options = getOptionsFromMeta('octolytics')\n\n  // Remove the base context because meta tags can change as the user navigates with Turbo\n  // These will be folded in for each event & page view\n  delete options.baseContext\n\n  hydroAnalyticsClient = new AnalyticsClient(options)\n} catch (_) {\n  // Failed to get options from meta tags.  This most likely means analytics are disabled.\n}\n\nfunction extendBaseContext(context?: Context) {\n  const baseContext = getOptionsFromMeta('octolytics').baseContext || {}\n\n  if (baseContext) {\n    delete baseContext.app_id\n    delete baseContext.event_url\n    delete baseContext.host\n\n    for (const [key, value] of Object.entries(baseContext)) {\n      // some octolytics meta tags are prefixed with dimension-, which we don't need with the new hydro-analytics-client\n      if (key.startsWith(dimensionPrefix)) {\n        baseContext[key.replace(dimensionPrefix, '')] = value\n        delete baseContext[key]\n      }\n    }\n  }\n\n  const visitorMeta = document.querySelector<HTMLMetaElement>('meta[name=visitor-payload]')\n  if (visitorMeta) {\n    const visitorHash = JSON.parse(atob(visitorMeta.content))\n    Object.assign(baseContext, visitorHash)\n  }\n\n  const urlParams = new URLSearchParams(window.location.search)\n  for (const [key, value] of urlParams) {\n    if (MARKETING_PARAMS.includes(key.toLowerCase())) {\n      baseContext[key] = value\n    }\n  }\n\n  // Include additional context from the page\n  baseContext.staff = isStaff().toString()\n\n  return Object.assign(baseContext, context)\n}\n\nexport function sendPageView(context?: Context) {\n  hydroAnalyticsClient?.sendPageView(extendBaseContext(context))\n}\n\nexport function sendEvent(type: string, context: Record<string, string | number | boolean | undefined | null> = {}) {\n  const service = document.head?.querySelector<HTMLMetaElement>('meta[name=\"current-catalog-service\"]')?.content\n\n  const cleanContext: Context = service ? {service} : {}\n\n  for (const [key, value] of Object.entries(context)) {\n    if (value !== undefined && value !== null) {\n      cleanContext[key] = `${value}`\n    }\n  }\n\n  if (hydroAnalyticsClient) {\n    const typeWithFallback = type || 'unknown'\n    const fullContext = extendBaseContext(cleanContext)\n    hydroAnalyticsClient.sendEvent(typeWithFallback, extendBaseContext(cleanContext))\n\n    if (process.env.NODE_ENV === 'development') {\n      debugSendEvent(typeWithFallback, fullContext)\n    }\n  }\n}\n\nfunction debugSendEvent(type: string, context: Context) {\n  if (getItem('hydro-debug.send-event') === 'true') {\n    // eslint-disable-next-line no-console\n    console.group('[hydro-debug.send-event]')\n    // eslint-disable-next-line no-console\n    console.log({type, context})\n    // eslint-disable-next-line no-console\n    console.groupEnd()\n  }\n}\n","// Check if the navigation is only a hash change.\nconst isHashNavigation = (currentUrl: string, targetUrl: string): boolean => {\n  const current = new URL(currentUrl, window.location.origin)\n  const target = new URL(targetUrl, window.location.origin)\n  const hasHash = target.href.includes('#')\n\n  return (\n    hasHash && current.host === target.host && current.pathname === target.pathname && current.search === target.search\n  )\n}\n\nexport default isHashNavigation\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\n\n// This is a temporary policy to allow us to migrate to Trusted Types without breaking existing code.\nexport const temporaryPermissiveJtmlPolicy = ghTrustedTypes.createPolicy('jtml-no-op', {\n  createHTML: (s: string) => s,\n})\n","import {temporaryPermissiveJtmlPolicy} from '@github-ui/trusted-types-policies/jtml'\n// eslint-disable-next-line no-restricted-imports\nimport {TemplateResult} from '@github/jtml'\n\n// eslint-disable-next-line no-restricted-imports\nexport {html, unsafeHTML, render} from '@github/jtml'\n\nTemplateResult.setCSPTrustedTypesPolicy(temporaryPermissiveJtmlPolicy)\nexport {TemplateResult}\n","import {ghTrustedTypes} from '@github-ui/trusted-types'\n\nexport const turboPolicy = ghTrustedTypes.createPolicy('turbo', {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  createHTML: (html: string, response: Response) => {\n    return html\n  },\n\n  createScriptURL: (url: string) => {\n    return url\n  },\n})\n","import {turboPolicy} from '@github-ui/trusted-types-policies/turbo'\n\nexport interface CacheNode {\n  title: string | null | undefined\n  transients: Element[]\n  bodyClasses: string | null | undefined\n  replacedElements: Element[]\n}\n\nconst DATA_TURBO_LOADED = 'data-turbo-loaded'\n\nexport function markTurboHasLoaded() {\n  document.documentElement.setAttribute(DATA_TURBO_LOADED, '')\n}\n\nexport function hasTurboLoaded() {\n  return document.documentElement.hasAttribute(DATA_TURBO_LOADED)\n}\n\n// Check if an event target is a <turbo-frame>\nexport const isTurboFrame = (el: EventTarget | null): boolean => (el as Element)?.tagName === 'TURBO-FRAME'\n\n// Checks if two urls start with the same \"/owner/repo\" prefix.\nexport function isSameRepo(url1: string, url2: string): boolean {\n  const path1 = url1.split('/', 3).join('/')\n  const path2 = url2.split('/', 3).join('/')\n  return path1 === path2\n}\n\n// Checks if two urls start with the same \"/owner\" prefix.\nexport function isSameProfile(url1: string, url2: string): boolean {\n  const path1 = url1.split('/', 2).join('/')\n  const path2 = url2.split('/', 2).join('/')\n  return path1 === path2\n}\n\n// Wait for all stylesheets to be loaded.\nexport async function waitForStylesheets() {\n  const headStylesheets = document.head.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')\n  const loadedStylesheets = new Set([...document.styleSheets].map(stylesheet => stylesheet.href))\n  const promises = []\n\n  for (const stylesheet of headStylesheets) {\n    if (stylesheet.href === '' || loadedStylesheets.has(stylesheet.href)) continue\n    promises.push(waitForLoad(stylesheet))\n  }\n\n  await Promise.all(promises)\n}\n\nconst waitForLoad = (stylesheet: HTMLLinkElement, timeout = 2000): Promise<void> => {\n  return new Promise(resolve => {\n    const onComplete = () => {\n      stylesheet.removeEventListener('error', onComplete)\n      stylesheet.removeEventListener('load', onComplete)\n      resolve()\n    }\n\n    stylesheet.addEventListener('load', onComplete, {once: true})\n    stylesheet.addEventListener('error', onComplete, {once: true})\n    setTimeout(onComplete, timeout)\n  })\n}\n\n// Replaces all elements with `data-turbo-replace` with the ones coming from the Turbo response.\nexport const replaceElements = (html: Document, cachedElements?: Element[]) => {\n  const newElements = cachedElements || html.querySelectorAll('[data-turbo-replace]')\n  const oldElements = [...document.querySelectorAll('[data-turbo-replace]')]\n\n  for (const newElement of newElements) {\n    const oldElement = oldElements.find(el => el.id === newElement.id)\n\n    if (oldElement) {\n      oldElement.replaceWith(newElement)\n    }\n  }\n}\n\n// Adds all missing stylesheets that come from the Turbo response.\nexport const addNewStylesheets = (html: Document) => {\n  // Only add stylesheets that aren't already in the page\n  for (const el of html.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')) {\n    if (\n      !document.head.querySelector(\n        `link[href=\"${el.getAttribute('href')}\"],\n           link[data-href=\"${el.getAttribute('data-href')}\"]`,\n      )\n    ) {\n      document.head.append(el)\n    }\n  }\n}\n\n// Adds all missing scripts that come from the Turbo response.\nexport const addNewScripts = (html: Document) => {\n  // Only add scripts that aren't already in the page\n  for (const el of html.querySelectorAll<HTMLScriptElement>('script')) {\n    if (!document.head.querySelector(`script[src=\"${el.getAttribute('src')}\"]`)) {\n      executeScriptTag(el)\n    }\n  }\n}\n\n// Load and execute scripts using standard script request.\nconst executeScriptTag = (script: HTMLScriptElement) => {\n  const {src} = script\n\n  if (!src) {\n    // we can't load a script without a source\n    return\n  }\n\n  // eslint-disable-next-line github/no-dynamic-script-tag\n  const newScript = document.createElement('script')\n  const type = script.getAttribute('type')\n  if (type) newScript.type = type\n\n  const trustedSrc = turboPolicy.createScriptURL(src)\n  newScript.src = trustedSrc\n  if (document.head) {\n    document.head.appendChild(newScript)\n  }\n}\n\n// Compares all `data-turbo-track=\"reload\"` reload with the ones coming from the Turbo response.\nexport const getChangedTrackedKeys = (html: Document): string[] => {\n  const changedKeys = []\n  for (const meta of html.querySelectorAll<HTMLMetaElement>('meta[data-turbo-track=\"reload\"]')) {\n    if (\n      document.querySelector<HTMLMetaElement>(`meta[http-equiv=\"${meta.getAttribute('http-equiv')}\"]`)?.content !==\n      meta.content\n    ) {\n      changedKeys.push(formatKeyToError(meta.getAttribute('http-equiv') || ''))\n    }\n  }\n\n  return changedKeys\n}\n\nexport const getTurboCacheNodes = (html: Document): CacheNode => {\n  const head = html.querySelector('[data-turbo-head]') || html.head\n\n  return {\n    title: head.querySelector('title')?.textContent,\n    transients: [...head.querySelectorAll('[data-turbo-transient]')].map(el => el.cloneNode(true) as Element),\n    bodyClasses: html.querySelector<HTMLMetaElement>('meta[name=turbo-body-classes]')?.content,\n    replacedElements: [...html.querySelectorAll('[data-turbo-replace]')].map(el => el.cloneNode(true) as Element),\n  }\n}\n\nexport const getDocumentAttributes = () => [...document.documentElement.attributes]\n\nexport const formatKeyToError = (key: string) => key.replace(/^x-/, '').replaceAll('-', '_')\n\nexport const dispatchTurboReload = (reason: string) =>\n  document.dispatchEvent(new CustomEvent('turbo:reload', {detail: {reason}}))\n\nexport const replaceElementAttributes = (element: HTMLElement, newElement: HTMLElement) => {\n  for (const attr of element.attributes) {\n    if (!newElement.hasAttribute(attr.nodeName) && attr.nodeName !== 'aria-busy') {\n      element.removeAttribute(attr.nodeName)\n    }\n  }\n\n  for (const attr of newElement.attributes) {\n    if (element.getAttribute(attr.nodeName) !== attr.nodeValue) {\n      element.setAttribute(attr.nodeName, attr.nodeValue!)\n    }\n  }\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\nimport {get, parseRequestOptionsFromJSON, supported} from '@github/webauthn-json/browser-ponyfill'\nimport type {CredentialRequestOptionsJSON} from '@github/webauthn-json/browser-ponyfill'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nexport enum State {\n  Initializing = 'initializing',\n  Unsupported = 'unsupported',\n  Ready = 'ready',\n  Waiting = 'waiting',\n  Error = 'error',\n  Submitting = 'submitting',\n}\n\n@controller\nexport class WebauthnGetElement extends HTMLElement {\n  state: State = State.Initializing\n  @target button: HTMLButtonElement\n  @target buttonText: HTMLElement\n  // `messages` contains all the message elements.\n  @targets messages: HTMLElement[]\n  @target capitalizedDescription: HTMLElement\n  @target unsupportedMessage: HTMLElement\n  @target waitingMessage: HTMLElement\n  @target errorMessage: HTMLElement\n  @target errorText: HTMLElement\n\n  static attrPrefix = ''\n  @attr dataJson = ''\n  private originalButtonText: string\n  private hasErrored = false\n  private originalErrorText: string | null\n\n  connectedCallback(): void {\n    this.originalButtonText = this.getCurrentButtonText()\n    this.originalErrorText = this.errorText.textContent\n    this.setState(supported() ? State.Ready : State.Unsupported)\n  }\n\n  getCurrentButtonText(): string {\n    return this.buttonText.textContent || ''\n  }\n\n  setCurrentButtonText(text: string): void {\n    this.buttonText.textContent = text\n  }\n\n  setState(state: State): void {\n    // Reset to defaults\n    const retryMessage = this.button.getAttribute('data-retry-message') || this.originalButtonText\n    const buttonText = this.hasErrored ? retryMessage : this.originalButtonText\n    this.setCurrentButtonText(buttonText)\n    this.button.disabled = false\n    this.button.hidden = false\n    this.errorText.textContent = ''\n    for (const elem of this.messages) {\n      elem.hidden = true\n    }\n\n    switch (state) {\n      case State.Initializing:\n        this.button.disabled = true\n        break\n      case State.Unsupported:\n        this.button.disabled = true\n        this.unsupportedMessage.hidden = false\n        break\n      case State.Ready:\n        break\n      case State.Waiting:\n        this.waitingMessage.hidden = false\n        this.button.hidden = true\n        break\n      case State.Error:\n        this.errorMessage.hidden = false\n        this.errorText.textContent = this.originalErrorText\n        break\n      case State.Submitting:\n        this.setCurrentButtonText('Verifying')\n        this.button.disabled = true\n        break\n      default:\n        throw new Error('invalid state')\n    }\n\n    this.state = state\n  }\n\n  // silent_unless_success: don't show waiting or error status. This is for automatically attempting a prompt at\n  // page/modal load time, without showing confusing UI if the browser rejects the attempt due to a missing user\n  // gesture. Most browsers allow at least one such prompt per page load, but we can't rely on it. In theory we could\n  // try to show an error to the user depending on the `get` rejection, but the spec is still in flux and browsers\n  // constantly change their mind (and have bugs). So we err on the side of not showing an error.\n  async prompt(event?: Event, silent_unless_success?: boolean): Promise<void> {\n    event?.preventDefault() // prevent default page form submission\n    this.dispatchEvent(new CustomEvent('webauthn-get-prompt'))\n    try {\n      if (!silent_unless_success) {\n        this.setState(State.Waiting)\n      }\n\n      const json: CredentialRequestOptionsJSON = JSON.parse(this.dataJson)\n      const signResponse = await get(parseRequestOptionsFromJSON(json))\n      this.setState(State.Submitting)\n\n      // Each `<webauthn-get>` element is currently embedded in a form (not\n      // the other way around), so we have to query for for the form outside of it.\n      const form = this.closest<HTMLFormElement>('.js-webauthn-form')!\n      const responseField = form.querySelector<HTMLInputElement>('.js-webauthn-response')!\n      responseField.value = JSON.stringify(signResponse)\n      requestSubmit(form)\n    } catch (error) {\n      if (!silent_unless_success) {\n        this.hasErrored = true\n        this.setState(State.Error)\n        throw error\n      }\n    }\n  }\n}\n"],"names":["oldHref","currentTarget","deactivateTimer","queued","activeSelection","previousSelection","visibilityDebounceTimeout","fetchResponse","on","event","target","defaultPrevented","classList","add","remove","remoteForm","form","wants","response","container","closest","html","err","status","replaceWith","fire","getItem","safeStorage","GENERIC_CLICK_EVENT_NAME","isMarketingPage","ssrSafeDocument","head","querySelector","content","element","analyticsEvent","getAttribute","analyticsEventAttributes","JSON","parse","sendEvent","selector","map","state","join","observe","el","HTMLImageElement","parentElement","HTMLAnchorElement","parent","link","childElementCount","setAttribute","removeAttribute","clone","cloneNode","document","createElement","appendChild","replaceChild","sendStats","incrementKey","requestUrl","window","location","href","notes","WeakMap","reset","input","note","get","innerHTML","tagName","id","contains","generateId","Math","random","toFixed","ariaDescribedby","addEventListener","set","validate","detail","message","text","HTMLElement","announceFromElement","isOk","append","hidden","activeElement","error","value","successMessage","toggleSubmitButton","completer","button","HTMLButtonElement","disabled","constructor","AutocompleteElement","initialize","previousController","HTMLFormElement","preventDefault","abort","url","URL","action","origin","method","formData","FormData","serialized","combineGetFormSearchParams","body","search","signal","AbortController","request","Request","toString","headers","Accept","fetch","ok","aborted","resultsContainer","getElementById","textContent","parseHTML","replaceState","onFocus","microtask","select","submit","HTMLInputElement","HTMLSelectElement","requestSubmit","debouncedSubmit","debounce","detectGravatar","gravitarUrl","hasGravitar","fetchGravatarInfo","gravatarText","data","json","has_gravatar","subscribe","fromEvent","priceSelectors","isAPriceStruct","obj","updateTotals","itemKey","itemRawCount","params","URLSearchParams","slice","itemMinimum","parseInt","itemMaximum","itemCount","itemDelta","max","contactUs","downgradeButton","downgradeDisabledMessage","transformInput","contact","toggle","planCost","paymentSummary","billing","free","is_enterprise_cloud_trial","upgrade","downgrade","extraSeats","no_additional_seats","seatField","updateSeatFields","minimumSeatsTooltip","seats","ref","selectors","querySelectorAll","isPriceSelector","priceCurrencyTag","default_currency","local_currency","history","includes","className","price","span","toggleDurationUnitPrices","unitPrice","updateDurationFields","newDuration","oldDuration","planDurationText","planDurationAdjective","durationLink","planDurationInput","numberOfSeats","maxSeatForPlan","popover","parentNode","length","updateSeatFieldURLs","delete","handleOrgChange","addonField","selectedRadio","newUrl","flipTooltip","inverse","key","Object","entries","from","to","replace","changeSelection","currentSelection","item","label","open","bulkUrl","name","checkedItems","Array","ids","sort","a","b","seatsField","softNavigate","visible","addThrottledInputEventListener","capture","onInput","query","toLowerCase","row","trackingData","parsedTrackingData","type","context","updateBulkActions","actionsContainer","isItemSelected","toggleMembershipTabs","membershipTabs","checked","getLocalJSON","localStorage","kind","e","setLocalJSON","setItem","stringify","gatherBundleURLs","urls","script","getElementsByTagName","match","src","report","read","previousURLs","downloadedBundles","keys","filter","bundle","write","loaded","requestIdleCallback","cancelEvent","stopPropagation","JustLoggedOutCookieName","clearData","storage","sessionStorage","clear","timerCallback","clipboardCopyElementTimers","toggleCopyButton","copyIcon","checkIcon","getCookies","deleteCookie","clipboardCopyElement","originalLabel","direction","setTimeout","currentTimeout","clearTimeout","fetchPopoverContents","lang","pos","path","urlStr","codeNavContext","test","matchFromPoint","regexp","x","y","textNode","offset","caretPositionFromPoint","caret","offsetNode","caretRangeFromPoint","range","startContainer","startOffset","nodeType","Node","TEXT_NODE","isEmpty","replaceAll","trim","findNearestMatch","matchedRange","createRange","setStart","setEnd","str","m","lastIndex","exec","reportError","len","index","getCodeBlockLanguage","codeBlockElement","getRowAndColumn","node","passParent","prev","previousSibling","nodeName","lineNumber","previousElementSibling","updateTarget","altKey","ctrlKey","metaKey","shiftKey","popoverContent","codeNavKind","retryUrl","codeNavUrl","scrollTop","file","activeToken","unsubscribe","popoverHTML","wrapCache","onMouseMove","clientX","clientY","rangeElement","commonAncestorContainer","didCheckText","Set","has","fileContainer","wrapper","onClick","addPopoverElement","temp","details","firstElementChild","dataHydroClick","dataHydroClickHMAC","surroundContents","resetScrollTop","hidePopover","positionPopover","showPopover","onDocumentClick","onKeyup","onResize","token","cRect","repoContainer","getClientRects","rects","rect","style","position","zIndex","top","bottom","left","scrollY","scrollX","undefined","removeEventListener","getElementsByClassName","isInViewport","getBoundingClientRect","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","clearFormError","formError","handleFormError","errors","isArray","formGroupValidationFormWrapper","field","changeValue","writeTab","inViewPort","click","updateContent","replaceContent","console","warn","setButtonText","hasValue","spanText","textTarget","createInputHandler","previousHasValue","newValue","Boolean","commentField","handleInput","toggleFocus","focused","blurred","Element","once","PNGScanner","fromFile","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsArrayBuffer","advance","bytes","readInt","self","dataview","getUint8","getUint16","getUint32","readChar","readShort","readLong","readString","buf","i","push","String","fromCharCode","scan","fn","resumeAt","call","buffer","DataView","imageDimensions","scanner","meta","width","height","ppi","inchesRatio","ppuX","ppuY","unit","round","inputCache","CaretPosition","coords","currentChar","lookBack","textArea","substring","checkLine","xDistance","abs","fetchCaretCoords","caretIndex","caretCache","Map","getCaretCoordinates","binaryCursorSearch","lower","upper","mouseX","mouseY","iterations","bestPosition","sameLineCandidates","candidates","c","l","u","mid","floor","midCoords","findCursorPosition","endIndex","setCursorPosition","textarea","newPosition","setSelectionRange","updateCaret","dragEvent","uploadedItems","pasteUrlLinksAsPlainText","hasAttribute","defaultPlainTextPaste","urlLinks","attachmentPlaceholders","getPlaceholder","attachment","replacementText","isVideo","parameterizeName","placeholderText","prefix","isImage","altText","disableSubmit","closestForm","submitButton","enableSubmit","onUploadCompleted","setValidityAndLinkText","imageTag","videoMarkdown","mdLink","size","findAndReplacePlaceholders","dimensions","imageSize","alt","empty","placeholder","removeFailedUpload","textToRemove","setCustomValidity","replaceText","editor","getEditor","cursor","getSearchCursor","findNext","validity","tagText","fileUploadLoadingText","batch","selectedText","selectionStart","selectionEnd","insertedPlaceholder","replaceSelection","insertText","appendNewline","isFinished","getSelection","getCursor","toReplace","replaceRange","fileUploadMessage","uploaded","reactCodeEditorElement","getReactEditor","codeEditorElement","codeEditor","getCodeEditor","updateCursor","attachmentElement","coordsChar","pageX","pageY","setCursor","focus","textAreas","dataToken","formTokenRef","elements","namedItem","activateTab","tab","isPreview","writeContent","previewBody","minHeight","currentSelectedTabs","previewForm","startLineNumber","side","startSide","startCommitOid","endCommitOid","baseCommitOid","commentId","fetchPreview","cachedFetch","commentForm","TabContainerElement","pollForm","toolbar","renderPreview","relatedTarget","isPreviewPanel","skipSizing","previewTab","memoize","uncachedFetch","hash","commentBody","onKey","toUpperCase","blur","dispatchEvent","CustomEvent","bubbles","cancelable","stopImmediatePropagation","plusOneMarker","isReactionLikeComment","matched","line","split","startsWith","toggleReactionSuggestion","eventTarget","reactionSuggestion","suggestionText","clearReactionSuggestion","newCommentTextField","suggestion","isShortcutAllowed","originalEvent","hotkey","corpTOSLink","regTOSLink","hints","hint","hasWording","wording","autoselect","planChoice","corpTos","resetMenus","inputs","fireMenuToggleEvent","isOpen","filterableField","menu","firstItem","HTMLTextAreaElement","RemoteInputElement","activeElementId","focusEl","atLimit","loader","load","dialog","ownerDocument","originalText","getButtonText","revert","checkValidity","disabledText","afterRemote","updateFavicon","newHref","colorScheme","favicon","faviconFallback","colorSchemeSuffix","substr","lastIndexOf","newFallbackHref","n","indexOf","newFaviconName","prefersDarkColorScheme","matchMedia","matches","resetIcon","updateDarkFavicon","fetchFeaturePreviewIndicator","show","fetchIndicator","indicators","indicator","show_indicator","SOFT_NAV_STATE","addListener","trigger","newDialog","fetchSafeDocumentFragment","dialogClass","closeDetails","closeHmac","hydroEventPayload","hydroEventHmac","feature","AttachmentUpload","process","delegate","startTime","performance","now","Headers","policy","header","xhr","XMLHttpRequest","upload_url","setRequestHeader","onloadstart","attachmentUploadDidStart","upload","onprogress","lengthComputable","percent","total","attachmentUploadDidProgress","send","uploadForm","markComplete","attachmentUploadDidComplete","responseText","attachmentUploadDidError","endTime","uploadTiming","duration","fileType","success","same_origin","upload_authenticity_token","asset_upload_url","asset_upload_authenticity_token","credentials","createDelegate","attachments","uploader","setAttachmentAsFailed","resetState","policyForm","preprocess","all","policyRequest","messaging","policyErrorState","repoId","subjectType","subject","directory","saving","saved","savedAttributes","asset","trimSizeErrorMessage","code","possibleStates","Batch","sum","isSaved","every","failedAttachments","items","reduce","dragAndDropLabel","count","hasFile","transfer","types","onDocumentDrop","dataTransfer","onDocumentDragover","onFormReset","resetFilter","filterInput","filterList","list","isVisible","options","limit","Infinity","children","display","announce","panel","FilterInputElement","originalOrder","filterSortList","string","allItems","checkedInputBeforeFilter","currentItems","currentItem","removeChild","found","filterSort","sortKey","compare","limited","results","createDocumentFragment","inputStateReset","checkedInput","Event","dividers","divider","abortController","typeAheadCache","cache","currentQueryForList","getData","queryText","typeAhead","queryOnEmptyQueryString","initializeTypeAheadCache","fetchQueryIfNeeded","hasPreRenderedData","suggestions","getPreRenderedUsers","pathname","typeAheadData","trimmedText","lastSearchText","lastSearchResult","isInitialLoad","inputId","inputElement","requestHeaders","searchParams","users","suggestedUsers","suggestedUser","login","selected","cachedSuggestions","userResultCache","substringMemoryFilterList","verifySsoSession","showSuggestionsHeaderOnLoad","template","existingElements","existing","cutoffPoint","nextElementSibling","queryTextEmpty","suggestionsDivider","restDivider","addItem","user","containsQueryText","matching","shouldGenerate","createReviewerItem","anyVisibleNonSelectedSuggestions","selectedSuggestions","nonSelectedSuggestions","preSuggestionsVisibleCount","preUsersVisibleCount","li","inputKey","fullName","description","avatar","class","labelsTypeaheadFilterList","labels","toLocaleLowerCase","createLabelItem","labelResultCache","getPreRenderedLabels","renderedLabel","htmlName","color","resultCache","newStyle","labelDescription","defaultText","queryString","searchQuery","prioText","prioScore","fuzzyScore","score","toggleForm","filterText","itemExists","autocomplete","throttleWaitInMs","onInputChange","wait","removeThrottledInputEventListener","filterable","inputField","scrollTargetIntoViewIfNeeded","root","computeFixedYOffset","scrollToFragmentTarget","hashChange","flash","flashAlertContent","createTextNode","ALLOWED_FLASH_COOKIES","displayFlash","flatMap","atob","decodeURIComponent","after","TemplateInstance","HTMLTemplateElement","noticeHandler","FuzzyListElement","fuzzyList","replyContainer","chooseEvents","events","eventCheckbox","checkUrl","invalidNotice","protocol","insecureNotice","sslFields","checkbox","customIsSelected","hookEventsField","hookWildcardEvent","before","responseError","deliveriesDetails","registerInsecureSslVerificationDialog","disallowInsecureRadio","allowInsecureRadio","filterOutCharacterKeyShortcuts","shortcuts","isNonCharacterKeyShortcut","s","areCharacterKeyShortcutsEnabled","install","shortcut","validShortcuts","uninstall","cardContentContainer","cachedFetchSafeDocumentFragment","activatingElement","focusIn","mouseOver","contentClass","suffix","contentClassPrefix","trackLoad","cardContentBody","trackingElement","trackView","hideCard","selectRectNearestMouse","foundRect","calculatePositions","contentWidth","contentHeight","targetX","targetY","targetHeight","targetWidth","roomAbove","hangLeft","targetCenterY","containerTop","caretPaddingX","caretHeight","containerLeft","contentClassSuffix","roomRight","targetCenterX","positionCard","cardContent","visibility","pageYOffset","pageXOffset","setZIndexOverride","showCard","fragment","child","determineEnclosingSubject","tag","hovercardUrlFromTarget","baseHovercardUrl","subjectTag","hovercardsAreEnabledForType","hovercardType","activateFn","minimumTimeout","touchDevice","MouseEvent","hovercardUrl","forcedDelay","r","KeyboardEvent","activateWithTimeoutFn","deactivateFn","deactivateWithTimeoutFn","targetWas","keyupFn","cancelDeactivation","onFocusIn","onFocusOut","onMouseLeave","onMouseOver","onContentsMouseOver","onContentsFocusIn","compose","vitalsToHydro","sendStatToHydro","stat","hydroStat","vital","queueStat","react","ssr","toPrecision","hpcMechanism","mechanism","hpcSoft","soft","scheduleSend","initialRenderIsSSR","wasServerRendered","sendVitals","metric","app","getCurrentReactAppName","MECHANISM_MAPPING","syntheticTest","synthetic","webVitalTimings","updateStaffBar","staffBarContainer","metricContainer","isTimingSuppported","timing","getEntriesByType","sendTimingResults","sendResourceTimings","sendNavigationTimings","resourceTimings","entryType","initiatorType","nextHopProtocol","workerStart","workerTiming","serverTiming","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize","navigationTimings","activationStart","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","redirectCount","onCLS","onFCP","onFID","onLCP","onTTFB","onINP","HPCTimingEvent","start","resetHPC","animationFrame","dataHPCanimationFrame","emulatedHPCTimer","hpcStart","hpc","EventTarget","tabHidden","hpcDOMInsertionObserver","MutationObserver","mutations","hasDataHPC","mutation","addedNodes","cancelAnimationFrame","measure","disconnect","requestAnimationFrame","childList","subtree","listenerOpts","passive","stop","end","sendPageView","turbo","getSoftNavMechanism","targetEl","eventType","gaEvent","parts","category","dimensionsList","dimensionPair","payload","hmac","hydroClientContext","sendData","onDOMContentLoaded","isFeatureEnabled","images","Date","stats","image","measureRedirectTiming","transparentRedirectTimings","LOCAL_STORAGE_PATH_REGEX","source","pathRegex","userID","fileGUID","indeterminate","logPageView","shortcutModalShown","showKeyboardShortcuts","metaKeyboardShortcuts","contexts","shortcutModal","labelledBy","displayLengthWarning","maxLength","warningLength","inputValue","inputValueWithNewLinesFix","remainingLength","truncatedInputValue","endsWith","warningText","inputContainer","warningArea","opacity","isFormField","eventToHotkeyString","navigator","userAgent","shortcutLabel","filterOn","currentValue","regex","currentFilters","notice","showGlobalError","confirm","lastTurboRequestUrl","turboMeasure","turboStartMark","turboEndMark","markTurboStart","mark","trackTurboTiming","getEntriesByName","measures","pop","turboDuration","clearTurboMarks","clearMarks","clearMeasures","quickSubmit","altButton","print","close","reload","isHighlightContainer","hasContent","firstChild","filters","PRE","flavor","A","IMG","DIV","p","insertMarkdownSyntax","nodeIterator","createNodeIterator","NodeFilter","SHOW_ELEMENT","acceptNode","FILTER_ACCEPT","FILTER_SKIP","nextNode","reverse","isTrusted","commentBodyClone","quoteSelectionContainer","ignorableElements","quote","Quote","collapsed","MarkdownQuote","codeBlock","pp","div","anchorNode","insert","selection","getRangeAt","resizeObserver","ResizeObserver","entry","contentRect","hideReactionOverflow","reactionContainer","availableWidth","offsetWidth","reactionButtons","allReactionsPopover","totalButtonWidth","remainingWidth","buttonWidth","debouncedPickReaction","comment","reactionsContainer","reactionsHeader","newReactions","newReactionButton","elementToFocus","newHandlePickReaction","showReactionContent","hideReactionContent","submitWithLegacyEvents","req","dataType","catch","then","statusText","persistSubmitButtonValue","findPersistedSubmitButtonValue","beforeRemote","verifySso","contents","childNodes","PerformanceObserver","supportedEntryTypes","observer","longTasks","getEntries","entryTypes","selectionEnds","getTextarea","DocumentFragment","dialogEl","replies","savedReplyNumber","Number","reply","queryLineElement","snippet","highlightRange","blobRange","adjustStart","adjustEnd","DOMRangeFromBlob","adjustedStart","GetCharIndexFromBytePosition","adjustedEnd","endContainer","endOffset","highlightColumns","startBlobRange","column","fullBlobRange","endBlobRange","parseColumnHighlightRange","startLine","endLine","startColumn","dataEndColumn","urlWithoutNotificationParameters","cleanSearchParams","storeAndStripShelfParams","loadShelfFromStoredParams","includeFragmentEl","IncludeFragmentElement","getStoredShelfParamsForCurrentPage","baseUrl","shelfURL","performRequest","removeNotificationParams","markNotificationAsRead","isJumpToAvailable","toggleSearchScope","enabled","toggleSearchInputHotkey","isRegularSearchInput","remoteShelfActionForm","shouldRedirect","inboxButton","updateNotificationStates","newParams","emptyQuery","blurHandler","unobserve","searchBar","toggleAttribute","searchInput","anchor","findFragmentTarget","originalScroll","scrollBehavior","scrollIntoView","behavior","prefersReducedMotion","abortControllers","snippetClipboardCopyTemplate","insertSnippetClipboardCopyButton","clipboardContent","documentFragment","clonedZeroClipboardContainer","scrollableElement","timer","handleSocialResponse","newCount","isDeferredTogglerTarget","updateSocialCounts","updatePromises","singularSuffix","pluralSuffix","controller","confirmationDialog","dialogPayload","confirmationDialogTemplate","templateSelector","confirmCsrfToken","confirmUrl","dialogElement","idleListeners","idle","addIdleStateListener","listener","Subscription","splice","isPresent","subscriptions","channels","subscriber","topic","names","Topic","sessionChanged","loggedIn","flashSignedIn","flashSignedOut","pageIsHidden","debouncePeriod","idleListener","watchSocketChannels","session","getSession","queueSubscribe","taskQueue","subs","flat","queueUnsubscribe","els","unsubscribeAll","queueMetadata","updates","updatePresenceMetadata","elementSubscriptions","presenceChannels","subscription","channelName","isPresenceChannel","listenerSubscription","latestIdle","latestMetadata","queueMetadataOrIdleChange","metadata","IDLE_METADATA_KEY","bc","BroadcastChannel","onmessage","postingMessage","postMessage","storageArea","removeItem","broadcastMsgOnSignOut","updateStatusPosition","containerHeight","menuRect","iconRect","loadStatus","loadingArea","errorArea","onMouseEnter","closeOnToggle","closeStatusPopover","closeOnScroll","scrollEvent","checkSudo","sudoRequired","sudoPassed","sudo","onvalue","isActivationKey","onchange","provide","auditMenu","lists","cachedMenu","getOwnPropertyNames","fetchMenu","getValue","emojiEl","emojiScore","emojiText","aliases","emojiMenu","cachedEmoji","fetchEmoji","asText","number","title","re","escapeRegExp","hashedScore","issueNumberScore","searchWithin","icons","renderResults","issues","itemTemplate","icon","unsafeHTML","render","hideSuggestions","issueMenu","textExpander","dismiss","onclick","onkeydown","specialKeys","searchResults","queryResults","cachedJSON","queriesInProgress","queryCache","basicResults","basicSearchResults","refinedResults","refinedPromise","refinedQuery","deferredRefinedResults","refinedQueryUrl","jsonRequest","overage","oldestKeys","liveSuggestions","liveQuery","selectedID","selectedElement","replaceChildren","scorer","fuzzyScorer","participant","usersAndTeams","desc","queryChars","shortestMatch","indexes","j","starts","allIndexesOf","indexesOfChars","char","results1","chars","startingIndex","mentionMenu","question","hiddenInput","includeFragment","preservePosition","highlightedElement","members","teamHovercardEnabled","mentions","tip","sentence","xs","Intl","ListFormat","format","last","concat","getTimelineLastModified","marker","addTimelineLastModifiedHeader","isCrossDomain","lastModified","requestURL","urlError","host","focusOrLoadElement","shouldLoadElement","urlAnchor","focusElement","loadComments","loadElement","loadResolvedComments","loadHiddenComments","commentContainer","findCommentContainer","loadDeferredContent","commentContainers","threadCommentIds","commentIds","anchorCommentId","videosReady","videos","videoLoads","v","readyState","HAVE_METADATA","timeout","done","imagesReady","imageLoads","complete","mediaLoaded","expandDetailsIfPresent","oldValue","newTimelineItem","gid","currentTimelineItem","detailsContainer","isDetailsTargetExpanded","toggleDetailsTarget","announceTimelineEvents","existingTimelineItems","WeakSet","setExistingTimelineItems","unregisterAllServiceWorkers","registrations","serviceWorker","getRegistrations","registration","unregister","pullTimeline","existingProgressiveLoader","ready","serviceWorkerPath","register","scope","setProgressBarDelay","originalTrackedElementsAreIdentical","getOwnPropertyDescriptor","PageRenderer","getSnapshotSignatures","snapshot","values","detailsByOuterHTML","tracked","HTMLMetaElement","defineProperty","reloadReason","reason","currentTracked","fromEntries","currentHeadSnapshot","changedKeys","newHeadSnapshot","formatKeyToError","patchHistoryApi","oldHistory","unused","skipTurbo","usr","turboState","turboUnused","turboUrl","mergedState","restorationIdentifier","adapter","beginProgressBar","progressBar","setValue","completeProgressBar","hide","turboPageNodes","turboDocumentAttributes","getCachedNode","setCachedNode","setDocumentAttributesCache","getDocumentAttributes","getCachedAttributes","getTurboCacheNodes","ssrSafeWindow","isHashNavigation","startSoftNav","unloadMessage","onbeforeunload","navigate","frame","isTurboFrame","ev","fetchOptions","controllerPrototype","getPrototypeOf","originalRequestErrored","requestErrored","apply","fetchRequest","statusCode","dispatchTurboReload","customDriveRender","waitForStylesheets","resume","replaceElementAttributes","newBody","nextEventLoopTick","currentBody","currentTurboBody","newTurboBody","currentDocument","cachedAttributes","attr","attributes","find","cached","nodeValue","frameNavigation","navigatingBetweenDifferentEntities","frameContainer","userProfileContainer","isSameRepo","isSameProfile","newFrame","responseHTML","responseLocation","trustedHTML","turboPolicy","parsedHTML","DOMParser","parseFromString","sourceFrame","targetFrames","matchingFrame","getChangedTrackedKeys","addNewStylesheets","addNewScripts","replaceElements","replaceFrameClasses","shouldScrollToTop","scrollTo","replaceBodyClassesFromRequest","replacedElements","replaceBodyClassesFromCachedNodes","replaceTitle","replaceTransientTags","updateFrame","classes","bodyClasses","setTitle","transients","oldFrame","timezone","DateTimeFormat","resolvedOptions","timeZone","inSoftNav","setSoftNavMechanism","renderedSoftNav","skipIfGoingToReactApp","allowedMechanisms","markTurboHasLoaded","isHardLoad","hasSoftNavFailure","failSoftNav","initSoftNav","succeedSoftNav","endSoftNav","setSoftNavFailReason","setCookie","encodeURIComponent","SudoCredentialOptionsElementState","WebAuthn","Password","GitHubMobile","TotpApp","TotpSms","SudoCredentialOptionsElement","reRenderPrompt","resetPrompt","currentState","renderWebauthnOption","renderGitHubMobileOption","renderTotpAppOption","renderTotpSmsOption","renderPasswordOption","reRenderNavContainer","handleUnexpectedPromptError","unexpectedError","errorMessage","githubMobileGenericErrorMessage","smsGenericErrorMessage","genericErrorMessage","renderPasswordOptionWithError","showPassword","showErrorMessage","hideErrorMessage","isWebAuthnAvailable","hideWebAuthn","isGitHubMobileAvailable","hideGitHubMobile","isTotpAppAvailable","hideTotpApp","isTotpSmsAvailable","hideTotpSms","hidePassword","safeSetElementVisibility","webauthnContainer","webauthnNav","githubMobileContainer","githubMobileNav","githubMobileLoading","githubMobileLanding","totpAppContainer","totpAppNav","totpSmsContainer","totpSmsLanding","totpSmsNav","totpSmsResendNav","passwordContainer","passwordNav","webauthnGet","setState","State","resetGitHubMobilePrompt","initiateGitHubMobileAuthRequest","initiateTotpSmsRequest","loginField","passwordField","hasMultipleOptions","webauthnAvailable","githubMobileAvailable","totpAppAvailable","totpSmsAvailable","showWebauthn","showGitHubMobile","showTotpApp","showTotpSms","githubMobileRetry","githubMobilePromptUrl","csrfToken","mobileFailHandler","hasChallenge","challenge","githubMobileNoChallengeMessage","githubMobileChallengeMessage","githubMobileChallengeValue","initializeMobileAuthRequestStatusPoll","mobileApprovedHandler","mobileCancelCheck","resendTotpSms","smsSending","isResend","totpSmsTriggerUrl","smsSuccess","responseJson","showGitHubMobileErrorState","elem","flashErrorMessageText","flashErrorMessageContainer","attrPrefix","unreadCount","markThreadAsRead","hasFocus","IntersectionObserver","isIntersecting","clearUnread","rootMargin","threshold","unreadCounter","titleRe","updateTitle","findByGid","reapplyPreviouslyUpdatedContent","staleRecords","urlTarget","registerStaleRecords","orgId","ownerType","ownerId","detailsClass","cropForm","hashchange","getUserContentScrolling","decodeFragmentValue","findElementByFragmentName","setFlashError","resetValidation","formGroup","groups","group","clearErrorsFromInput","groupRootsByRepositoryId","roots","rootsByRepositoryId","repositoryId","existingRoots","requestMenuBatchRender","batchUpdateUrl","repositoryIds","postData","updatedMenuContents","replaceUserListMenuRoots","renderedMenuContents","updatedMenu","matchingRoots","updateAllUserListMenus","requestUserListMenuFormSubmit","promise","submitUserListFormOnToggle","detailsElement","HTMLDetailsElement","hasDirtyFields","triggerText","prepareUnsavedChangesWarning","enableSaveChangesReminder","disableSaveChangesReminder","returnValue","disableSaveChangesReminderOnClosedDialogs","promptOnDialogClosing","confirmed","confirmationForms","onTransitionEnd","issueLabel","isHovercardEnabled","titleUrl","setLabel","originalButtonText","responseBody","targetUrlElement","didStar","togglerContainer","starCount","socialContainer","menuContentRoot","defaultChecked","didCreate","templateID","editDialog","userListMenuRoot","placeholderName","userListMenuForm","formEvent","urlTargetElement","randomRGBColor","setColorSwatch","colorButton","rgb","hsl","convert","setProperty","setInputColorFromButton","clickedButton","colorInput","addErrorToField","errorEl","removeErrorFromField","showOrHideLabelError","errorSelector","errorMessages","showLabelErrors","hideLabelErrors","labelPreviewUrl","labelID","labelDescriptionFrom","descriptionInput","labelColorFrom","labelNameFrom","previewArea","nameInput","updateLabelPreview","startEl","previewContainer","fullErrorMessageEl","urlTemplate","lastPreviewUrl","onLabelFormInputChange","toggleBlankSlate","updateCount","delta","counter","oldCount","initLabelModal","modal","labelNameInput","hex","labelNameEl","labelName","updateInputRemainingCharacters","addLabelButton","newLabelName","matchingExistingLabel","swatchesContainer","swatchButton","menuContent","prepend","defaultValue","refreshButton","resetCharactersRemainingCounts","editForm","labelPreview","labelLink","elementsToShow","createForm","elementsToHide","delayedOnLabelFormInputChange","toggleEventSettings","eventSettingsVisible","noEventSelected","eventSettingsContainer","getUtf8StringLength","CollapsibleSidebarWidgetElement","activeClass","loadingClass","onKeyDown","onMouseDown","pendingRequest","collapsible","setClose","setOpen","setLoading","updateCollapsible","handleAbort","SidebarMemexInputElement","isDisabled","hasErrored","hasExpanded","connectedCallback","handleSelectMenuToggle","disconnectedCallback","handleDetailsSelect","custom","opened","summary","updateCell","handleDetailsSelected","mouseDownFocus","keyDownFocus","onSelectMenuOpen","mouseDownFocusHeader","onChange","onBlur","instrumentType","parameters","update","formatted","updateUrl","columnId","commit","parseAndFormatUpdate","month","day","year","targets","submitForm","skipTeamsCheck","reviewerTeamsCheckRequired","previewSubmit","submitOnMenuClose","updateSidebar","returnFocusToTrigger","menuTriggerId","currentSidebarTriggerEl","getCacheKey","pageId","formName","cacheValues","cacheKey","updated","datum","multiple","selectedInputs","currentSidebarItemEl","currentSidebarDetailsId","Error","hasFired","clearHasFired","restoreCachedValues","prototype","newInput","requestPreview","isSubmitting","cacheValuesOnHide","scopedFormData","extra","mode","previouslyRequestedTeams","allSelectedTeams","getAll","newlySelectedTeams","team","triggerTeamReviewerCheck","reviewerCheckUrl","dialogHtml","showTeamReviewerConfirmationDialog","dialogAction","reviewerInputs","reviewerInput","updateProjectColumnMenuSummary","dropdown","columnName","findParam","getPageID","moveUrl","cardId","convertToDraftUrl","unarchiveItemUrl","projectItemID","setupSoftNav","interceptNavigationUI","AutoFlushingQueue","flush","onFlush","callback","callbacks","elementsToFlush","BatchLoader","loadInBatch","autoFlushingQueue","elementsByKey","batchElement","consolidatedData","validator","BaseBatchDeferredContentElement","batchLoader","batchLoaders","batchDeferredContentLoaders","BatchDeferredContentElement","docFragment","lastActiveElement","currentInputIsMouse","setClass","showRemainingCharacterCount","remainingEl","valueLength","remainingCount","getFieldLimit","hasExceededCharacterLimit","charContainers","charContainer","currentlyOpenedDetailsDropdown","autofocus","closeCurrentDetailsDropdown","toggleDetails","loadDeferredContentByEvent","onDragstart","onDragend","onDragenter","onBodyDragleave","onDrop","dragging","ignorePageElementDrag","dropEffect","encrypt","publicKey","encoder","TextEncoder","messageBytes","encode","seal","decode","encoded","charCodeAt","Uint8Array","byte","btoa","submitBulk","disableEmptyValues","formElement","required","encryptedValueElementName","plainText","asyncCalculateVisibility","nav","calculateVisibility","toggleItem","itemName","itemToHide","overflowContainer","overflowOffset","positionedOffset","anyHidden","itemOffset","safeLocalStorage","ttl","throwQuotaErrorsOnSet","sendCacheStats","restoreFieldsFromAllBackends","restoreResumableFields","persistFieldstoAllBackends","persistResumableFields","debouncedRestoreResumableFields","isTurboRenderingCachePreview","setForm","updateSelectedRepoTab","isSelected","selectedLink","TagInput","setup","removeTag","bind","onSubmit","autoComplete","selectTag","inputWrap","onBackspace","taggifyValueWhenSuggesterHidden","taggifyValue","tags","normalizeTag","selections","selectedTags","tagsAdded","templateTag","inputTag","tagTemplate","sanitizedText","multiTagInput","lastSelection","handleUserSelectContain","rangeCount","selectAllChildren","supportsUserSelectContain","cssText","getPropertyValue","parseBlobRange","lines","parseBlobOffset","freeze","ascendingBlobRange","formatBlobRange","parseAnchorPrefix","parseFileAnchor","anchorPrefix","formatBlobRangeAnchor","lineMatch","columnMatch","getLineElement","_startOffset","findRangeOffset","_endOffset","lookAhead","lineElement","textNodes","getAllTextNodes","nextC","nextTextNode","offsets","compareBlobOffsets","codeEditors","reactEditors","getAsyncCodeEditor","onEditorFromEvent","nextEvent","registerReactEditor","filterMap","prefixBonusWeight","stringScore","basename","fuzzyRegexp","fuzzyHighlightElement","textRe","clean","wordSeparators","originalString","abbreviation","stringLength","totalCharacterScore","shouldAwardCommonPrefixBonus","indexCLowercase","indexCUppercase","minIndex","min","indexInString","charAt","abbreviationLength","abbreviationScore","finalScore","getScore","minScore","hasMatch","highlightElement","lastPosition","positions","sorting","states","textCache","getTextCache","inputEl","handler","HTMLLIElement","lazyItems","addLazyItems","dataset","oldSortAbort","sortAbort","markSelector","maxMatches","shouldMark","itemsToRender","nextBatch","itemToRender","emptyEl","isNaN","observedAttributes","attributeChangedCallback","customElements","define","visitorPayload","visitorHmac","sendHydroEvent","FEATURE_WEIGHTS","frequency","recency","sortBy","pageViews","frequencies","frequencyMap","recencies","recencyMap","pageKey","totalVisits","view","visitCount","recencyList","lastVisitedAt","totalUniqueVisits","TEAM_PAGE_REGEX","REPOSITORY_PAGE_REGEXES","PROJECT_PAGE_REGEXES","projectPageMatch","repositoryPageMatch","teamPageMatch","logPageViewByKey","buildTeamKey","projectRegex","ownerSlug","buildProjectKey","buildRepositoryKey","limitedPageViews","scorePage","ranked","MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE","views","getPageViewsMap","currentEpochTimeInSeconds","hit","setPageViewsMap","organizationLogin","teamSlug","ownerLogin","PAGE_VIEW_KEY_REGEX","VIEWS_KEY","rawData","pageViewMap","shelfParams","sessionStorageKey","storeShelfParams","deleteShelfParams","currentPullRequestPathname","getCurrentPullRequestPathname","stored","pullRequestPathname","notification","toggleNotificationStatus","toggleNotificationSubscriptionStatus","toggleNotificationStarredStatus","newNode","extractContents","insertNode","metaTag","flashClassName","addFlashMessage","importNode","flashContainer","removeFlash","hidePromptAndShowErrorMessage","githubMobileAuthenticatePrompt","githubMobileAuthenticateErrorAndRetry","approvedHandler","assign","rejectedHandler","genericHandler","getErrorAndRetryMessage","attributeName","pollMobileAuthRequestStatus","successCallback","failCallback","checkCancelCallback","poll","errorCount","csrfInput","responseJSON","smsError","pane1","pane2","pane","pattern","sudoPromptExist","urlWithParams","oldURL","newURL","webauthnSupportLevel","loadPromptTemplate","succeeded","sudoPrompt","prompt","sudoModalErrorOrClose","unauthorizedError","tooManyError","inputElementSelector","triggerSudoPrompt","accept","sudoResponse","num","oldText","newText","isFocused","beginning","remaining","setTextareaValueAndCursor","point","newline","trailingNewline","insertedText","newPoint","u8array","written","encodeInto","diff","throttledInputEvents","schedule","inputed","onKeydownInput","keypressed","onKeyupInput","onInputInput","dispatchThrottledInputEvent","offsetHeight","webauthnSupported","iuvpaaSupportLevel","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","sessionPromise","AliveSession","BaseAliveSession","getUrlFromRefreshUrl","fetchRefreshUrl","refreshUrl","shared","notify","fetchJSON","post","csrf","SourceRelNotFoundError","workerSrcRelPolicy","ghTrustedTypes","createScriptURL","rel","isSharedWorkerSupported","workerSrc","socketUrl","socketRefreshUrl","sessionIdentifier","subscribers","channel","AliveSessionProxy","added","worker","port","addedChannels","redundantPresenceChannels","redundantChannels","requestPresence","removed","drain","updatedPresenceChannels","presenceMetadata","removeSubscribers","sendPresenceMetadataUpdate","metadataUpdates","updatedChannels","setMetadata","channelNames","updatesForSharedWorker","getChannelMetadata","online","offline","hangup","receive","debouncedNotify","notifyPresenceDebouncedByChannel","debouncedEvent","sessionId","notifier","SubscriptionSet","PresenceMetadataSet","SharedWorker","connect","createSession","_","connectWhenReady","allowUserContentScrolling","setUserContentScrolling","setting","queryLast","pagePathname","locationOverride","pageQuery","stripParams","extraParams","requestUri","newTitle","oldTitle","ms","race","whenAborted","queue","queueMicrotask","extensionErrors","errorsReported","loadTime","isExpectedError","errorContext","formatError","reportable","isExtensionError","stacktrace","sanitizedUrl","referrer","getSoftNavReferrer","timeSinceLoad","pageUser","bundler","ui","stack","filename","function","methodName","lineno","colno","extensions","some","clientId","getOrCreateClientId","unloaded","isSupported","sharedWorkerErrorChannel","features","enabledFeatures","isEnabled","featureFlag","hydroAnalyticsClient","dimensionPrefix","MARKETING_PARAMS","getOptionsFromMeta","baseContext","AnalyticsClient","extendBaseContext","app_id","event_url","visitorMeta","visitorHash","urlParams","staff","isStaff","service","cleanContext","currentUrl","targetUrl","current","hasHash","temporaryPermissiveJtmlPolicy","createHTML","TemplateResult","DATA_TURBO_LOADED","hasTurboLoaded","url1","url2","path1","path2","headStylesheets","loadedStylesheets","styleSheets","stylesheet","promises","waitForLoad","onComplete","cachedElements","newElements","oldElements","newElement","oldElement","executeScriptTag","newScript","trustedSrc","Initializing","Unsupported","Ready","Waiting","Submitting","WebauthnGetElement","getCurrentButtonText","originalErrorText","errorText","supported","buttonText","setCurrentButtonText","retryMessage","messages","unsupportedMessage","waitingMessage","silent_unless_success","dataJson","signResponse","parseRequestOptionsFromJSON","responseField"],"sourceRoot":""}