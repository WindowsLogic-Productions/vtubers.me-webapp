{"version":3,"file":"app_assets_modules_github_behaviors_ajax-error_ts-app_assets_modules_github_behaviors_include-2e2258-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/ajax-error.ts","app/assets/modules/github/behaviors/enrichable-markdown-render.ts","app/assets/modules/github/behaviors/include-fragment.ts","app/assets/modules/github/behaviors/render-editor.ts","app/assets/modules/github/color-modes.ts","app/assets/modules/github/cookies.ts","ui/packages/soft-navigate/soft-navigate.ts"],"sourcesContent":["// Global handler for uncaught AJAX errors.\n//\n// Only enabled by default on new style `data-remote` requests.\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nexport function showGlobalError() {\n  const ajaxErrorMessage = document.getElementById('ajax-error-message')\n  if (ajaxErrorMessage) {\n    ajaxErrorMessage.hidden = false\n  }\n}\n\nexport function hideGlobalError() {\n  const ajaxErrorMessage = document.getElementById('ajax-error-message')\n  if (ajaxErrorMessage) {\n    ajaxErrorMessage.hidden = true\n  }\n}\n\non('deprecatedAjaxError', '[data-remote]', function (event) {\n  const detail = (event as CustomEvent).detail\n  const {error, text} = detail\n\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  if (error === 'abort' || error === 'canceled') {\n    return\n  }\n\n  if (/<html/.test(text)) {\n    showGlobalError()\n    event.stopImmediatePropagation()\n  } else {\n    setTimeout(function () {\n      if (event.defaultPrevented) {\n        return\n      }\n      showGlobalError()\n    }, 0)\n  }\n})\n\n// Clear any errors when the request is tried again\non('deprecatedAjaxSend', '[data-remote]', function () {\n  hideGlobalError()\n})\n\n// \"Dismiss\" button\non('click', '.js-ajax-error-dismiss', function () {\n  hideGlobalError()\n})\n","import {TemplateResult, html, render} from 'lit-html'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nimport {getColorMode} from '../color-modes'\n\ninterface Api {\n  /**\n   * Sets the loading state of the js enriched node, true will put it in the loading state, false will remove it\n   */\n  setLoading(state: boolean): void\n  /**\n   * Setting true here will put the rendered node into a error state, composing the optional template argument in the output.\n   *\n   * This method will return true if we did render an error state, false if we did not render an error state — allowing the caller to handle rendering as a fallback.\n   */\n  setError(state: boolean, template?: TemplateResult): boolean\n}\n\nconst nodeHandle = new WeakMap<HTMLElement, Api>()\n\n// Enrichable Markdown Rendering:\n//\n// We use the `markdown-enrichment` to render code blocks in markdown.\n// The CodeRenderService is responsible for rendering the code blocks to html and\n// this code will find those blocks and enrich them with the code rendering service appropriate\n// for the language.\n// If we're enriching a raw code block, we need to hide the original\n// code block once the iframe has rendered successfully\n\n/**\n * A public api to put a js enriched node into the loading state, note @see enrichMarkdownRenderer to have ran ono this node before\n */\nexport function markdownEnrichmentSuccess(where: Element) {\n  const parent = where.closest('.js-render-needs-enrichment') as HTMLElement\n  if (!parent) {\n    return\n  }\n\n  parent.classList.remove('render-error')\n\n  nodeHandle.get(parent)?.setLoading(false)\n}\n\n/**\n * A public api to put a js enriched node into an error state\n */\nexport function showMarkdownRenderError(where: HTMLElement, template: TemplateResult) {\n  const parent = where.closest('.js-render-needs-enrichment') as HTMLElement\n  if (!parent) {\n    return false\n  }\n\n  parent.classList.add('render-error')\n\n  return nodeHandle.get(parent)?.setError(true, template)\n}\n\nfunction makeIframe(\n  baseUrl: string,\n  params: Record<string, string | number | boolean | null>,\n  config: {\n    type: string\n    contentJson: string\n    identifier?: string\n  },\n) {\n  const identifier = config.identifier ?? ''\n  const iframeUrl = new URL(baseUrl, window.location.origin)\n\n  for (const [key, value] of Object.entries(params)) {\n    iframeUrl.searchParams.append(key, `${value}`)\n  }\n\n  iframeUrl.hash = identifier\n\n  return html`\n    <div\n      class=\"render-container color-bg-transparent js-render-target p-0\"\n      data-identity=\"${identifier}\"\n      data-host=\"${iframeUrl.origin}\"\n      data-type=\"${config.type}\"\n    >\n      <iframe\n        role=\"presentation\"\n        class=\"render-viewer\"\n        src=\"${String(iframeUrl)}\"\n        name=\"${identifier}\"\n        data-content=\"${config.contentJson}\"\n        sandbox=\"allow-scripts allow-same-origin allow-top-navigation\"\n      >\n      </iframe>\n    </div>\n  `\n}\n\nfunction makeEnhancedBlockActions(\n  rawCode: string,\n  onModalOpen: (event: MouseEvent) => void,\n  config: {\n    type: string\n  },\n) {\n  const copyButton = html`<clipboard-copy\n    aria-label=\"Copy ${config.type} code\"\n    .value=${rawCode}\n    class=\"btn my-2 js-clipboard-copy p-0 d-inline-flex tooltipped-no-delay\"\n    role=\"button\"\n    data-copy-feedback=\"Copied!\"\n    data-tooltip-direction=\"s\"\n  >\n    <svg\n      aria-hidden=\"true\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      width=\"16\"\n      class=\"octicon octicon-copy js-clipboard-copy-icon m-2\"\n    >\n      <path\n        fill-rule=\"evenodd\"\n        d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z\"\n      ></path>\n      <path\n        fill-rule=\"evenodd\"\n        d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z\"\n      ></path>\n    </svg>\n    <svg\n      aria-hidden=\"true\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      width=\"16\"\n      class=\"octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2\"\n    >\n      <path\n        fill-rule=\"evenodd\"\n        d=\"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\"\n      ></path>\n    </svg>\n  </clipboard-copy>`\n\n  const modal = html`\n    <details class=\"details-reset details-overlay details-overlay-dark\" style=\"display: contents\">\n      <summary\n        role=\"button\"\n        aria-label=\"Open dialog\"\n        class=\"btn my-2 mr-2 p-0 d-inline-flex\"\n        aria-haspopup=\"dialog\"\n        @click=\"${onModalOpen}\"\n      >\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" class=\"octicon m-2\">\n          <path\n            fill-rule=\"evenodd\"\n            d=\"M3.72 3.72a.75.75 0 011.06 1.06L2.56 7h10.88l-2.22-2.22a.75.75 0 011.06-1.06l3.5 3.5a.75.75 0 010 1.06l-3.5 3.5a.75.75 0 11-1.06-1.06l2.22-2.22H2.56l2.22 2.22a.75.75 0 11-1.06 1.06l-3.5-3.5a.75.75 0 010-1.06l3.5-3.5z\"\n          ></path>\n        </svg>\n      </summary>\n      <details-dialog\n        class=\"Box Box--overlay render-full-screen d-flex flex-column anim-fade-in fast\"\n        aria-label=\"${config.type} rendered container\"\n      >\n        <div>\n          <button\n            aria-label=\"Close dialog\"\n            data-close-dialog=\"\"\n            type=\"button\"\n            data-view-component=\"true\"\n            class=\"Link--muted btn-link position-absolute render-full-screen-close\"\n          >\n            <svg\n              width=\"24\"\n              height=\"24\"\n              viewBox=\"0 0 24 24\"\n              fill=\"currentColor\"\n              style=\"display:inline-block;vertical-align:text-bottom\"\n              class=\"octicon octicon-x\"\n            >\n              <path\n                fill-rule=\"evenodd\"\n                d=\"M5.72 5.72a.75.75 0 011.06 0L12 10.94l5.22-5.22a.75.75 0 111.06 1.06L13.06 12l5.22 5.22a.75.75 0 11-1.06 1.06L12 13.06l-5.22 5.22a.75.75 0 01-1.06-1.06L10.94 12 5.72 6.78a.75.75 0 010-1.06z\"\n              ></path>\n            </svg>\n          </button>\n          <div class=\"Box-body border-0\" role=\"presentation\"></div>\n        </div>\n      </details-dialog>\n    </details>\n  `\n\n  return html`<div class=\"position-absolute top-0 pr-2 width-full d-flex flex-justify-end flex-items-center\">\n    ${modal}${copyButton}\n  </div>`\n}\n\nfunction enrichMarkdownRenderer(el: HTMLElement) {\n  const iframeParams = {\n    color_mode: getColorMode(), // TODO: Should viewscreen support color themes?\n  }\n\n  // ==> setup some state\n\n  const type = el.getAttribute('data-type')!\n  const src = el.getAttribute('data-src')!\n  const identifier = el.getAttribute('data-identity')!\n\n  const target = el.getElementsByClassName('js-render-enrichment-target')[0] as HTMLElement\n\n  const loadingHandle = el.getElementsByClassName('js-render-enrichment-loader')[0] as HTMLElement\n\n  // => get the fallback, errors states correctly\n\n  const fallbackHandle = document.createElement('div')\n  fallbackHandle.classList.add('js-render-enrichment-fallback')\n  el.appendChild(fallbackHandle)\n\n  const fallbackContentNode = target.firstElementChild!\n  fallbackHandle.appendChild(fallbackContentNode)\n\n  const api: Api = {\n    setLoading(state) {\n      loadingHandle.hidden = !state\n    },\n    setError(state, template) {\n      api.setLoading(false) // always remove loading state\n      if (state === false) return false // we did not render an error state\n\n      fallbackContentNode.classList.toggle('render-plaintext-hidden', !state)\n\n      if (template) {\n        render([template, fallbackContentNode], fallbackHandle)\n        return true\n      }\n\n      return false\n    },\n  }\n\n  nodeHandle.set(el, api)\n\n  // ==> real constructor\n\n  const plainText = target.getAttribute('data-plain')\n  const contentJson = target.getAttribute('data-json')\n\n  if (contentJson == null || plainText == null) {\n    api.setError(true, html`<p class=\"flash flash-error\">Unable to render rich display</p>`)\n    throw new Error(`Expected to see input data for type: ${type}`)\n  }\n\n  const iframe = makeIframe(src, iframeParams, {\n    type,\n    identifier,\n    contentJson,\n  })\n\n  const fullScreenIframe = makeIframe(src, iframeParams, {\n    type,\n    identifier: `${identifier}-fullscreen`,\n    contentJson,\n  })\n\n  const buttons = makeEnhancedBlockActions(\n    plainText,\n    () => {\n      // Beware hacks, we need to add the iframe to the nearest box body of the modal\n      render(fullScreenIframe, target.getElementsByClassName('Box-body')[0]!)\n    },\n    {\n      type,\n    },\n  )\n\n  render([buttons, iframe], target)\n}\n\nobserve('.js-render-needs-enrichment', {\n  constructor: HTMLElement,\n  initialize: enrichMarkdownRenderer,\n})\n\n/**\n * Toggling back and forth between the `preview` and `write` tabs produces jank in\n * the form of an occasionally visible fully rendered chart. This is because we leave the\n * chart on the page until a request to regenerate the chart can be made.\n *\n * So, we add an event in `preview.ts` we can hook into,\n * and clear out the previously rendered chart before requesting a new one from viewscreen\n */\non('preview:toggle:off', '.js-previewable-comment-form', function (event) {\n  const target = event.currentTarget\n  const htmlEl = target.querySelector<HTMLElement>('.js-render-needs-enrichment')\n  const enrichTarget = htmlEl?.querySelector('.js-render-enrichment-target')\n\n  if (!enrichTarget) {\n    return\n  }\n\n  enrichTarget.textContent = ''\n})\n\non('preview:rendered', '.js-previewable-comment-form', function (event) {\n  const target = event.currentTarget\n  const htmlEl = target.querySelector<HTMLElement>('.js-render-needs-enrichment')\n  if (htmlEl) {\n    nodeHandle.get(htmlEl)?.setLoading(false)\n  }\n})\n","// Toggle hidden attribute on elements inside <include-fragment> and\n// <poll-include-fragment> elements that have the data-hide-on-error and\n// data-show-on-error attributes on them when error events are fired.\n\nimport {compose, fromEvent} from '@github-ui/subscription'\nimport type IncludeFragmentElement from '@github/include-fragment-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nobserve('include-fragment, poll-include-fragment', {\n  subscribe: el => compose(fromEvent(el, 'error', onError), fromEvent(el, 'loadstart', onLoad)),\n})\n\non('click', 'include-fragment button[data-retry-button]', ({currentTarget}) => {\n  const includeFragment = currentTarget.closest<IncludeFragmentElement>('include-fragment')!\n\n  // The refetch API was added in v6.1.1 of @github/include-fragment-element:\n  // https://github.com/github/include-fragment-element/releases/tag/v6.1.1\n  includeFragment.refetch()\n})\n\nfunction toggleElements(event: Event, showError: boolean) {\n  const fragment = event.currentTarget\n  if (!(fragment instanceof Element)) return\n\n  for (const el of fragment.querySelectorAll('[data-show-on-error]')) {\n    if (el instanceof HTMLElement) el.hidden = !showError\n  }\n  for (const el of fragment.querySelectorAll('[data-hide-on-error]')) {\n    if (el instanceof HTMLElement) el.hidden = showError\n  }\n}\n\nfunction onLoad(event: Event) {\n  toggleElements(event, false)\n}\n\nfunction onError(event: Event) {\n  toggleElements(event, true)\n}\n\nexport function loadDeferredContentByEvent({currentTarget}: Event) {\n  if (!(currentTarget instanceof Element)) return\n\n  loadDeferredContent(currentTarget)\n}\n\nexport function loadDeferredContent(element: Element) {\n  const details = element.closest<HTMLElement>('details')\n  if (details) {\n    setIncludeFragmentSrc(details)\n  }\n}\n\nfunction setIncludeFragmentSrc(detailsElement: HTMLElement) {\n  const url = detailsElement.getAttribute('data-deferred-details-content-url')\n  if (url) {\n    detailsElement.removeAttribute('data-deferred-details-content-url')\n    const includeFragmentElement = detailsElement.querySelector<IncludeFragmentElement>(\n      'include-fragment, poll-include-fragment',\n    )\n    if (includeFragmentElement) {\n      includeFragmentElement.src = url\n    }\n  }\n}\n","import {TemplateResult, html, render} from 'lit-html'\nimport {markdownEnrichmentSuccess, showMarkdownRenderError} from './enrichable-markdown-render'\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport visible from '../visible'\ninterface RenderTiming {\n  load?: number | null\n  helloTimer?: number | null\n  hello?: number | null\n  loadTimer?: number | null\n  untimed?: boolean\n}\n\nexport function supportsRichExpanding(container: HTMLElement) {\n  return !!container.querySelector('.js-render-target[data-type=\"ipynb\"]')\n}\n\n// These are the mutable state classes. They are to be wiped between transitions.\nconst stateClasses = ['is-render-pending', 'is-render-ready', 'is-render-loading', 'is-render-loaded']\n// During a soft navigation, we need to clear most of the mutable state classes, but preserve `is-render-pending`.\n// We also want to clear out any of the failed state classes, since they prevent the user from viewing content\n// which has otherwise rendered correctly\nconst softNavStateClasses = [\n  'is-render-ready',\n  'is-render-loading',\n  'is-render-loaded',\n  'is-render-failed',\n  'is-render-failed-fatally',\n]\nconst timingData: WeakMap<Element, RenderTiming> = new WeakMap()\nfunction resetTiming(where: Element) {\n  const renderTiming = timingData.get(where)\n  if (renderTiming == null) {\n    return\n  }\n  renderTiming.load = renderTiming.hello = null\n  if (renderTiming.helloTimer) {\n    clearTimeout(renderTiming.helloTimer)\n    renderTiming.helloTimer = null\n  }\n  if (renderTiming.loadTimer) {\n    clearTimeout(renderTiming.loadTimer)\n    renderTiming.loadTimer = null\n  }\n}\n\n// Everything is broken, sink with the ship\nfunction renderFailed(where: Element, msg = '') {\n  where.classList.remove(...stateClasses)\n  where.classList.add('is-render-failed')\n\n  const errElement = renderError(msg)\n\n  // determine if we're rendering a file or a code block\n  if (showMarkdownRenderError(where as HTMLElement, errElement) === false) {\n    fileRenderError(where as HTMLElement, errElement)\n  }\n\n  resetTiming(where)\n}\n\nfunction fileRenderError(parent: HTMLElement, template: TemplateResult) {\n  const child = parent.querySelector('.render-viewer-error')\n  if (child) {\n    child.remove()\n    parent.classList.remove('render-container')\n    render(template, parent)\n  }\n}\n\nfunction renderError(msg: string) {\n  let errMsg = html`<p>Unable to render rich display</p>`\n\n  if (msg !== '') {\n    const msgLines = msg.split('\\n')\n    errMsg = html`<p><b>Unable to render rich display</b></p>\n      <p>${msgLines.map(line => html`${line}<br />`)}</p>`\n  }\n  return html`<div class=\"flash flash-error\">${errMsg}</div>`\n}\n\nfunction timeoutWatchdog(where: Element, checkHello = false) {\n  if (\n    !visible(where as HTMLElement) ||\n    where.classList.contains('is-render-ready') ||\n    where.classList.contains('is-render-failed') ||\n    where.classList.contains('is-render-failed-fatally') ||\n    (checkHello && !timingData.get(where)?.hello)\n  ) {\n    return\n  }\n\n  renderFailed(where)\n}\n\n// Update each container with a potentially\n// changed element every time a refresh or soft nav\n// triggers.\nobserve('.js-render-target', function (el) {\n  const htmlEl = el as HTMLElement\n  htmlEl.classList.remove(...softNavStateClasses)\n  htmlEl.style.height = 'auto'\n\n  if (timingData.get(el)?.load) {\n    return\n  }\n\n  resetTiming(el)\n\n  if (timingData.get(el)) {\n    return\n  }\n\n  timingData.set(el, {\n    load: Date.now(),\n    hello: null,\n    helloTimer: window.setTimeout(timeoutWatchdog, 10_000, el, true),\n    loadTimer: window.setTimeout(timeoutWatchdog, 45_000, el),\n  })\n\n  el.classList.add('is-render-automatic', 'is-render-requested')\n})\n\ninterface RenderMessage {\n  type: string\n  body?: unknown\n}\n\nfunction postAsJson(renderWindow: Window | null | undefined, message: RenderMessage) {\n  if (renderWindow && renderWindow.postMessage) {\n    renderWindow.postMessage(JSON.stringify(message), '*')\n    return true\n  }\n  return false\n}\n\nfunction resolveRenderTargetFromContainer(container: Document | HTMLElement, identity: string) {\n  const el = container.querySelector(`.js-render-target[data-identity=\"${identity}\"]`)\n  if (el && el instanceof HTMLElement) return el\n  return null\n}\n\nfunction withRenderWindow(callback: (renderWindow: Window) => boolean) {\n  return (container: HTMLElement) => {\n    const target = container.querySelector('.js-render-target')\n    if (!target) return\n\n    const iframe = container.querySelector('iframe')\n    const renderWindow = iframe?.contentWindow\n    if (!renderWindow) return\n\n    return callback(renderWindow)\n  }\n}\n\nexport function handleMessage(event: MessageEvent) {\n  let result = event.data\n  if (!result) return\n\n  if (typeof result === 'string') {\n    try {\n      result = JSON.parse(result) as unknown\n    } catch {\n      // Ignore parse errors\n      return\n    }\n  }\n\n  // effective way to check for both null and undefined ⤵️\n  // eslint-disable-next-line eqeqeq\n  if (typeof result !== 'object' && result != undefined) return\n\n  if (result.type !== 'render') return\n\n  if (typeof result.identity !== 'string') return\n  const identity = result.identity\n\n  if (typeof result.body !== 'string') return\n  const body = result.body\n\n  const container = resolveRenderTargetFromContainer(document, identity)\n  if (!container) return\n\n  if (event.origin !== container.getAttribute('data-host')) {\n    return\n  }\n\n  const payload = result.payload != null ? result.payload : undefined\n  const iframe = container.querySelector('iframe')\n  const renderWindow = iframe?.contentWindow\n\n  function postData() {\n    // force an undefined value into a string so the call to JSON.parse passes the TS compiler.\n    const data = iframe?.getAttribute('data-content') ?? ''\n\n    let parsed: Record<string, unknown> | null\n\n    try {\n      // Data is generally expected to be a JSON string with a key of `data`,\n      // but we are also seeing values like 'null' getting in here.\n      parsed = JSON.parse(data)?.data\n    } catch {\n      parsed = null\n    }\n\n    if (!parsed) {\n      return\n    }\n\n    const msg = {\n      type: 'render:cmd',\n      body: {\n        cmd: 'code_rendering_service:data:ready',\n        'code_rendering_service:data:ready': {\n          data: parsed,\n          width: container?.getBoundingClientRect().width,\n        },\n      },\n    }\n    postAsJson(renderWindow, msg)\n  }\n\n  switch (body) {\n    case 'hello': {\n      const renderTiming = timingData.get(container) || {\n        untimed: true,\n      }\n\n      renderTiming.hello = Date.now()\n\n      const ackmsg = {\n        type: 'render:cmd',\n        body: {\n          cmd: 'ack',\n          ack: true,\n        },\n      }\n\n      const msg = {\n        type: 'render:cmd',\n        body: {\n          cmd: 'branding',\n          branding: false,\n        },\n      }\n\n      if (!renderWindow) return\n      postAsJson(renderWindow, ackmsg)\n      postAsJson(renderWindow, msg)\n\n      break\n    }\n    case 'error': {\n      renderFailed(container, payload?.error)\n      break\n    }\n    case 'error:fatal': {\n      renderFailed(container, payload?.error)\n      container.classList.add('is-render-failed-fatal')\n      break\n    }\n    case 'error:invalid':\n      renderFailed(container, payload?.error)\n      container.classList.add('is-render-failed-invalid')\n      break\n    case 'loading':\n      container.classList.remove(...stateClasses)\n      container.classList.add('is-render-loading')\n      break\n    case 'loaded':\n      container.classList.remove(...stateClasses)\n      container.classList.add('is-render-loaded')\n      break\n    case 'ready':\n      markdownEnrichmentSuccess(container)\n      container.classList.remove(...stateClasses)\n      container.classList.add('is-render-ready')\n\n      if (payload && typeof payload.height === 'number') {\n        container.style.height = `${payload.height}px`\n\n        // If the URL contains an anchor tag, try not to disrupt the scroll position\n        if (location.hash !== '') {\n          window.dispatchEvent(new HashChangeEvent('hashchange'))\n        }\n      }\n\n      break\n    case 'resize':\n      if (payload && typeof payload.height === 'number') {\n        container.style.height = `${payload.height}px`\n      }\n\n      break\n    case 'code_rendering_service:container:get_size':\n      postAsJson(renderWindow, {\n        type: 'render:cmd',\n        body: {\n          cmd: 'code_rendering_service:container:size',\n          'code_rendering_service:container:size': {\n            width: container?.getBoundingClientRect().width,\n          },\n        },\n      })\n      break\n    case 'code_rendering_service:markdown:get_data':\n      if (!renderWindow) return\n      postData()\n      break\n    default:\n      break\n  }\n}\n\n// Handle messages coming from the viewer iframe using `postMessage`.\n// We throw away any message that doesn't look like it's coming from the render\n// client.\nwindow.addEventListener('message', handleMessage)\n\nexport const expandAllInContainer = withRenderWindow(renderWindow =>\n  postAsJson(renderWindow, {\n    type: 'render:cmd',\n    body: {\n      cmd: 'code_rendering_service:behaviour:expand_all',\n    },\n  }),\n)\n\nexport const collapseAllInContainer = withRenderWindow(renderWindow =>\n  postAsJson(renderWindow, {\n    type: 'render:cmd',\n    body: {\n      cmd: 'code_rendering_service:behaviour:collapse_all',\n    },\n  }),\n)\n","import {ready} from '@github-ui/document-ready'\nimport {setCookie} from './cookies'\n\nexport type ColorMode = 'light' | 'dark'\nexport type ColorModeWithAuto = ColorMode | 'auto'\n\n/**\n * Set the OS preferred color mode on page load\n */\n;(async () => {\n  await ready\n  setPreferredColorModeCookie()\n\n  // update the cookie when OS preferred color mode changes\n  if (window.matchMedia) {\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n\n    if (mediaQuery?.addEventListener) {\n      mediaQuery.addEventListener('change', setPreferredColorModeCookie)\n    } else {\n      mediaQuery.addListener(setPreferredColorModeCookie)\n    }\n  }\n})()\n\nfunction setPreferredColorModeCookie() {\n  setCookie('preferred_color_mode', getPreferredColorMode() as string)\n}\n\nexport function getPreferredColorMode(): ColorMode | undefined {\n  if (prefersColorScheme('dark')) {\n    return 'dark'\n  } else if (prefersColorScheme('light')) {\n    return 'light'\n  }\n\n  return undefined\n}\n\nfunction prefersColorScheme(scheme: ColorMode): boolean {\n  return window.matchMedia && window.matchMedia(`(prefers-color-scheme: ${scheme})`).matches\n}\n\nfunction getColorModeAttribute() {\n  const rootEl = document.querySelector('html[data-color-mode]')\n  if (!rootEl) return undefined\n  return rootEl.getAttribute('data-color-mode')\n}\n\n/**\n * Set the `data-color-mode` attribute on the html element of the page.\n */\nexport function setClientMode(mode: ColorModeWithAuto) {\n  const rootEl = document.querySelector('html[data-color-mode]')\n  if (!rootEl) {\n    // Color modes are not active on this page\n    return\n  }\n  rootEl.setAttribute('data-color-mode', mode)\n}\n\nexport function setClientTheme(theme: string, type: ColorMode) {\n  const rootEl = document.querySelector('html[data-color-mode]')\n  if (!rootEl) {\n    // Color modes are not active on this page\n    return\n  }\n  rootEl.setAttribute(`data-${type}-theme`, theme)\n}\n\n/**\n * Returns the user theme as defined by the `data-light-theme` or\n * `data-dark-theme` attribute.\n */\nexport function getClientTheme(type: ColorMode) {\n  const rootEl = document.querySelector('html[data-color-mode]')\n  if (!rootEl) {\n    // Color modes are not active on this page\n    return\n  }\n  return rootEl.getAttribute(`data-${type}-theme`)\n}\n\n/**\n * Provides a stable color mode. This does not delineate the theme, but rather the light vs dark modes.\n *\n * If you're after the theme, please use {@link getClientTheme}\n */\nexport function getColorMode(fallback: ColorMode = 'light') {\n  const mode = getColorModeAttribute()\n  return (mode === 'auto' ? getPreferredColorMode() : mode) ?? fallback\n}\n","interface Cookie {\n  key: string\n  value: string\n}\n\n/**\n * Get a cookie by name.\n * @param name\n * @returns a cookie object or undefined if not found.\n */\nexport function getCookie(name: string): Cookie | undefined {\n  return getCookies(name)[0]\n}\n\n/**\n * Get all cookies by name.\n * @param name\n * @returns\n */\nexport function getCookies(name: string): Cookie[] {\n  const cookies = []\n  for (const cookie of readCookies()) {\n    const [key, value] = cookie.trim().split('=')\n    if (name === key && typeof value !== 'undefined') {\n      cookies.push({key, value})\n    }\n  }\n  return cookies\n}\n\nfunction readCookies(): string[] {\n  try {\n    return document.cookie.split(';')\n  } catch {\n    // Cookie access disabled.\n    return []\n  }\n}\n\n/**\n * Set a new cookie with sensible defaults like secure.\n * @param name\n * @param value\n * @param expiration\n * @param strictDomain\n * @param samesite\n */\nexport function setCookie(\n  name: string,\n  value: string,\n  expiration: string | null = null,\n  strictDomain = false,\n  samesite = 'lax',\n) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = expiration ? `; expires=${expiration}` : ''\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=${value}; path=/; domain=${domain}${expire}${secure}; samesite=${samesite}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n\n/**\n * Delete a given cookie with sensible defaults like secure.\n * This sets the expires value to a second ago to delete the cookie.\n * @param name\n * @param strictDomain\n */\nexport function deleteCookie(name: string, strictDomain = false) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const time = new Date().getTime()\n  const expiration = new Date(time - 1).toUTCString()\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = `; expires=${expiration}`\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=''; path=/; domain=${domain}${expire}${secure}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n","import {visit} from '@github/turbo'\nimport {startSoftNav} from '@github-ui/soft-nav'\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function softNavigate(url: string, turboOptions?: any) {\n  // visit won't fire a `turbo:click` event, so we need to manually start the soft navigation process.\n  startSoftNav('turbo')\n  visit(url, {...turboOptions})\n}\n"],"names":["showGlobalError","ajaxErrorMessage","document","getElementById","hidden","hideGlobalError","on","event","detail","error","text","currentTarget","target","test","stopImmediatePropagation","setTimeout","defaultPrevented","nodeHandle","WeakMap","markdownEnrichmentSuccess","where","parent","closest","classList","remove","get","setLoading","showMarkdownRenderError","template","add","setError","makeIframe","baseUrl","params","config","identifier","iframeUrl","URL","window","location","origin","key","value","Object","entries","searchParams","append","hash","html","type","String","contentJson","makeEnhancedBlockActions","rawCode","onModalOpen","copyButton","modal","enrichMarkdownRenderer","el","iframeParams","color_mode","getColorMode","getAttribute","src","getElementsByClassName","loadingHandle","fallbackHandle","createElement","appendChild","fallbackContentNode","firstElementChild","api","state","toggle","render","set","plainText","iframe","fullScreenIframe","buttons","observe","constructor","HTMLElement","initialize","htmlEl","querySelector","enrichTarget","textContent","toggleElements","showError","fragment","Element","querySelectorAll","onLoad","onError","loadDeferredContentByEvent","loadDeferredContent","element","details","setIncludeFragmentSrc","detailsElement","url","removeAttribute","includeFragmentElement","subscribe","compose","fromEvent","includeFragment","refetch","supportsRichExpanding","container","stateClasses","softNavStateClasses","timingData","resetTiming","renderTiming","load","hello","helloTimer","clearTimeout","loadTimer","renderFailed","msg","errElement","renderError","fileRenderError","child","errMsg","msgLines","split","map","line","timeoutWatchdog","checkHello","visible","contains","postAsJson","renderWindow","message","postMessage","JSON","stringify","resolveRenderTargetFromContainer","identity","withRenderWindow","callback","contentWindow","handleMessage","result","data","parse","undefined","body","payload","untimed","Date","now","cmd","ack","branding","height","style","dispatchEvent","HashChangeEvent","width","getBoundingClientRect","postData","parsed","addEventListener","expandAllInContainer","collapseAllInContainer","setPreferredColorModeCookie","setCookie","getPreferredColorMode","prefersColorScheme","scheme","matchMedia","matches","getColorModeAttribute","rootEl","setClientMode","mode","setAttribute","setClientTheme","theme","getClientTheme","fallback","ready","mediaQuery","addListener","getCookie","name","getCookies","cookies","cookie","readCookies","trim","push","expiration","strictDomain","samesite","domain","endsWith","secure","protocol","expire","deleteCookie","time","getTime","toUTCString","softNavigate","turboOptions","startSoftNav","visit"],"sourceRoot":""}